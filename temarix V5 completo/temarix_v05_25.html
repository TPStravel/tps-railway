<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Temarix V5 - Portal 25: I Declare to Myself</title>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            background: #000;
            color: #fff;
            font-family: 'Courier New', monospace;
            height: 100vh;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }
        
        .header-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 25px 30px;
            background: #000;
            border-bottom: 1px solid #333;
            position: relative;
            z-index: 100;
            height: 80px;
            flex-shrink: 0;
        }
        
        .logo-section {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
        }
        
        .logo-title {
            font-size: 26px;
            font-weight: bold;
            color: #fff;
            margin-bottom: 4px;
            letter-spacing: 1px;
        }
        
        .logo-subtitle {
            font-size: 15px;
            color: #ccc;
            letter-spacing: 1.5px;
        }
        
        .portal-header-title {
            text-align: center;
            flex: 1;
            margin: 0 20px;
        }
        
        .portal-main-title {
            font-size: 28px;
            color: #ffa726;
            margin-bottom: 8px;
            font-weight: normal;
            letter-spacing: 1px;
        }
        
        .portal-subtitle {
            font-size: 18px;
            color: #ffcc80;
            letter-spacing: 1.5px;
        }
        
        .header-right {
            display: flex;
            align-items: center;
        }
        
        .language-buttons {
            display: flex;
            gap: 10px;
        }
        
        .lang-btn {
            background: #444;
            color: #fff;
            border: none;
            padding: 10px 18px;
            font-size: 14px;
            font-family: 'Courier New', monospace;
            cursor: pointer;
            transition: background 0.2s;
        }
        
        .lang-btn:hover {
            background: #666;
        }
        
        .lang-btn.active {
            background: #ffa726;
            color: #fff;
        }
        
        .main-content {
            flex: 1;
            max-height: calc(100vh - 80px - 120px);
            overflow-y: auto;
            overflow-x: hidden;
            padding: 30px 20px;
            scroll-behavior: smooth;
            position: relative;
        }
        
        .portal-container {
            max-width: 700px;
            width: 100%;
            margin: 0 auto;
            text-align: center;
            display: flex;
            flex-direction: column;
            min-height: 200vh;
        }
        
        .portal-intro-section {
            margin: 40px 0;
            opacity: 0;
            min-height: 200px;
        }
        
        .portal-intro {
            font-size: 20px;
            color: #fff;
            margin-bottom: 30px;
            line-height: 1.8;
            white-space: pre-wrap;
            background: none;
            border: none;
            padding: 0;
            text-align: left;
        }
        
        .character-responses-section {
            margin: 40px 0;
            opacity: 0;
            min-height: 800px;
        }
        
        .character-response {
            color: #fff;
            font-size: 18px;
            margin: 40px 0;
            text-align: left;
            opacity: 0;
            white-space: pre-wrap;
            transition: opacity 0.8s ease-in;
            background: none;
            border: none;
            padding: 0;
            min-height: 80px;
        }
        
        .character-name {
            font-weight: bold;
            color: #ffa726;
            margin-bottom: 12px;
            font-size: 18px;
        }
        
        .character-dialogue {
            color: #fff;
            line-height: 1.7;
            font-size: 17px;
            white-space: pre-wrap;
        }
        
        .typing-cursor::after {
            content: '|';
            animation: blink 1s infinite;
            color: #ffa726;
        }
        
        @keyframes blink {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0; }
        }
        
        .light-message-section {
            margin: 50px 0;
            opacity: 0;
            background: none;
            border: none;
            padding: 0;
            min-height: 100px;
        }
        
        .light-message {
            font-size: 20px;
            color: #ffa726;
            line-height: 1.8;
            font-style: italic;
            white-space: pre-wrap;
            text-align: left;
        }
        
        .portal-question-section {
            margin: 40px 0;
            opacity: 0;
            min-height: 150px;
        }
        
        .portal-question {
            font-size: 22px;
            color: #fff;
            margin-bottom: 30px;
            min-height: 100px;
            display: flex;
            align-items: center;
            justify-content: center;
            line-height: 1.6;
            white-space: pre-wrap;
            text-align: center;
        }
        
        .user-input-section {
            margin: 40px 0;
            opacity: 0;
            min-height: 100px;
        }
        
        .user-response {
            color: #fff;
            margin: 30px 0;
            text-align: left;
            font-size: 18px;
            background: none;
            border: none;
            padding: 0;
            white-space: pre-wrap;
        }
        
        .user-response strong {
            color: #ffa726;
            margin-right: 8px;
        }
        
        .user-reactions-section {
            margin: 40px 0;
            opacity: 0;
            min-height: 400px;
        }
        
        .final-section {
            margin: 60px 0;
            opacity: 0;
            text-align: center;
            background: none;
            border: none;
            padding: 40px 20px;
            min-height: 300px;
            border: 2px solid #ffa726;
            background: rgba(255, 167, 38, 0.05);
        }
        
        .final-title {
            font-size: 28px;
            color: #ffa726;
            margin-bottom: 30px;
            letter-spacing: 2px;
            font-weight: bold;
        }
        
        .final-message {
            color: #fff;
            font-size: 20px;
            margin-bottom: 40px;
            line-height: 1.8;
            white-space: pre-wrap;
            text-align: left;
        }
        
        .final-buttons {
            display: flex;
            gap: 20px;
            justify-content: center;
            flex-wrap: wrap;
        }
        
        .final-btn {
            background: #444;
            color: #fff;
            border: none;
            padding: 20px 40px;
            font-family: 'Courier New', monospace;
            font-size: 18px;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 250px;
            border: 2px solid transparent;
        }
        
        .final-btn:hover {
            background: #666;
            border-color: #ffa726;
        }
        
        .final-btn.primary {
            background: #ffa726;
            color: #fff;
            font-weight: bold;
        }
        
        .final-btn.primary:hover {
            background: #ffb74d;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 167, 38, 0.3);
        }
        
        .input-fixed-bottom {
            position: relative;
            bottom: 0;
            left: 0;
            right: 0;
            background: #000;
            border-top: 1px solid #333;
            padding: 25px;
            z-index: 100;
            flex-shrink: 0;
            height: 120px;
        }
        
        .input-container {
            max-width: 900px;
            margin: 0 auto;
            display: flex;
            align-items: flex-start;
            gap: 15px;
        }
        
        .input-prefix {
            color: #ffa726;
            font-size: 20px;
            margin-top: 8px;
            flex-shrink: 0;
        }
        
        .user-textarea {
            background: transparent;
            border: none;
            border-bottom: 1px solid #444;
            color: #fff;
            font-family: 'Courier New', monospace;
            font-size: 18px;
            width: 100%;
            padding: 12px 8px;
            outline: none;
            resize: none;
            min-height: 32px;
            max-height: 96px;
            line-height: 1.6;
            transition: border-color 0.3s ease;
            overflow-y: auto;
        }
        
        .user-textarea:focus {
            border-bottom-color: #ffa726;
        }
        
        .user-textarea::placeholder {
            color: #666;
        }
        
        .user-textarea:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            background: rgba(50, 50, 50, 0.2);
        }
        
        .main-content::-webkit-scrollbar {
            width: 12px;
        }
        
        .main-content::-webkit-scrollbar-track {
            background: #111;
            border-radius: 6px;
        }
        
        .main-content::-webkit-scrollbar-thumb {
            background: #444;
            border-radius: 6px;
            border: 2px solid #111;
        }
        
        .main-content::-webkit-scrollbar-thumb:hover {
            background: #666;
        }
        
        @keyframes fadeIn {
            to { opacity: 1; }
        }
        
        .show {
            opacity: 1 !important;
            transition: opacity 1s ease-in;
        }
        
        .hidden {
            display: none;
        }
        
        @media (max-width: 768px) {
            .header-bar {
                padding: 20px 15px;
                height: 70px;
                flex-direction: column;
                gap: 10px;
            }
            
            .main-content {
                max-height: calc(100vh - 70px - 120px);
                padding: 20px 15px;
            }
            
            .logo-title {
                font-size: 22px;
            }
            
            .portal-main-title {
                font-size: 22px;
            }
            
            .portal-subtitle {
                font-size: 16px;
            }
            
            .lang-btn {
                font-size: 12px;
                padding: 8px 14px;
            }
            
            .portal-intro {
                font-size: 18px;
            }
            
            .portal-question {
                font-size: 20px;
            }
            
            .character-response {
                font-size: 16px;
            }
            
            .input-fixed-bottom {
                padding: 20px;
            }
            
            .final-buttons {
                flex-direction: column;
                gap: 15px;
            }
            
            .final-btn {
                width: 100%;
            }
            
            .final-title {
                font-size: 24px;
            }
            
            .final-message {
                font-size: 18px;
            }
        }
    </style>
</head>
<body>
    <div class="header-bar">
        <div class="logo-section">
            <div class="logo-title">TEMARIX V5</div>
            <div class="logo-subtitle" id="logoSubtitle">Declaration of Compassion</div>
        </div>
        
        <div class="portal-header-title">
            <div class="portal-main-title" id="portalMainTitle">Portal 25: I Declare to Myself</div>
            <div class="portal-subtitle" id="portalSubtitle">The final declaration</div>
        </div>
        
        <div class="header-right">
            <div class="language-buttons">
                <button class="lang-btn" data-lang="ko">KR</button>
                <button class="lang-btn active" data-lang="en">EN</button>
                <button class="lang-btn" data-lang="pt">PT</button>
            </div>
        </div>
    </div>

    <div class="main-content" id="mainContent">
        <div class="portal-container">
            <div class="portal-intro-section" id="portalIntroSection">
                <div class="portal-intro" id="portalIntro"></div>
            </div>

            <div class="character-responses-section" id="characterResponsesSection">
            </div>

            <div class="light-message-section" id="lightMessageSection">
                <div class="character-name" id="lightTitle">âœ¨ Word of Light</div>
                <div class="light-message" id="lightMessage"></div>
            </div>

            <div class="portal-question-section" id="portalQuestionSection">
                <div class="portal-question" id="portalQuestion"></div>
            </div>

            <div class="user-input-section" id="userInputSection">
            </div>
            
            <div class="user-reactions-section" id="userReactionsSection">
            </div>
            
            <div class="final-section" id="finalSection">
                <div class="final-title" id="finalTitle">ðŸ”“ Portal 25 Complete</div>
                <div class="final-message" id="finalMessage"></div>
                <div class="final-buttons">
                    <button class="final-btn primary" id="continueBtn">Begin 7-Day Integration</button>
                    <button class="final-btn" id="restartBtn">Start Again</button>
                </div>
            </div>
        </div>
    </div>
    
    <div class="input-fixed-bottom">
        <div class="input-container">
            <div class="input-prefix">></div>
            <textarea class="user-textarea" 
                      id="userTextarea" 
                      placeholder="What kind of being do you want to live as? What declaration do you want to leave for yourself? (Press Enter to send)"
                      rows="1"
                      maxlength="500"></textarea>
        </div>
    </div>

    <script>
        const translations = {
            ko: {
                logoSubtitle: "ìžë¹„ì˜ ì„ ì–¸",
                portalMainTitle: "Portal 25: ë‚˜ëŠ” ë‚˜ì—ê²Œ ì„ ì–¸í•œë‹¤",
                portalSubtitle: "ë§ˆì§€ë§‰ ì„ ì–¸",
                portalIntro: "ðŸ”“ ì§€ê¸ˆ ì´ ìˆœê°„,\në‹¹ì‹ ì€ ì–´ë–¤ ì¡´ìž¬ë¡œ ì‚´ì•„ê°€ê³  ì‹¶ì€ê°€ìš”?\n\nê·¸ë¦¬ê³  ê·¸ ì¡´ìž¬ë¡œ ì‚´ì•„ê°€ê¸° ìœ„í•´,\nìžì‹ ì—ê²Œ ì–´ë–¤ ì„ ì–¸ì„ ë‚¨ê¸°ê³  ì‹¶ë‚˜ìš”?",
                lightTitle: "âœ¨ ë¹›ì˜ í•œë§ˆë””",
                lightMessage: "ìžë¹„ëŠ” ëì´ ì•„ë‹ˆë¼ ì‹œìž‘ì´ì•¼. ì´ ì„ ì–¸ì€, ê·¸ ì‹œìž‘ì„ ê¸°ì–µí•˜ê²Œ í•˜ëŠ” ì•½ì†ì´ì•¼.\në‹¹ì‹ ì˜ ëª©ì†Œë¦¬ëŠ” ì´ì œ ë¬¼ê°ì´ ë˜ì—ˆì–´ìš”. ì•žìœ¼ë¡œ ë‹¹ì‹ ì´ ì‚´ì•„ê°ˆ ëª¨ë“  í•˜ë£¨ë¥¼ ìƒ‰ì¹ í•  ê±°ì˜ˆìš”.\nì´ ì„ ì–¸ì´ ìž…ì—ì„œ ë‚˜ì˜¤ëŠ” ìˆœê°„, ê³ í†µì€ ê³¼ê±°ë¡œ, ë‹¹ì‹ ì€ ì§€ê¸ˆ ì—¬ê¸°ë¡œ ë„ì°©í–ˆì–´ìš”.",
                portalQuestion: "ðŸ”“ ì´ì œ, ë‹¹ì‹ ì€\nì–´ë–¤ í•œ ë‹¨ì–´ë¡œ ë‹¹ì‹  ìžì‹ ì„ ë¶€ë¥´ê³  ì‹¶ë‚˜ìš”?\n\nì´ ì—¬ì •ì˜ ëì—ì„œ ë‹¹ì‹ ì´ ë‹¹ì‹ ì—ê²Œ ë‚¨ê¸¸ ì´ë¦„ì€ ë¬´ì—‡ì¸ê°€ìš”?",
                finalTitle: "ðŸ”“ Portal 25 ì™„ë£Œ",
                finalMessage: "ë‹¹ì‹ ì€ Temarix V5 â€“ ìžë¹„ì˜ ì„ ì–¸ì˜ ë§ˆì§€ë§‰ ë¬¸ì„ í†µê³¼í–ˆìŠµë‹ˆë‹¤.\n\nì´ì œ, ë‹¹ì‹ ì€ ë” ì´ìƒ ê³¼ê±°ì˜ ëˆ„êµ°ê°€ê°€ ì•„ë‹ˆë¼\nìžë¹„ë¡œ ë‹¤ì‹œ íƒœì–´ë‚œ í˜„ìž¬ì˜ ì¡´ìž¬ìž…ë‹ˆë‹¤.\n\në‹¹ì‹ ì˜ ì´ë¦„ì€ ê¸°ë¡ë˜ì§€ ì•Šì•„ë„ ì¢‹ìŠµë‹ˆë‹¤.\ní•˜ì§€ë§Œ ë‹¹ì‹ ì˜ ì„ ì–¸ì€, ì´ ì„¸ê³„ì— ë‚¨ìŠµë‹ˆë‹¤.\n\nðŸŒ• Portal 25ëŠ” ë§ˆì¹¨í‘œê°€ ì•„ë‹ˆë¼ ì‰¼í‘œìž…ë‹ˆë‹¤.\nì´ì œë¶€í„° 7ì¼ ë™ì•ˆ, ìžë¹„ì˜ ìš¸ë¦¼ì„ ëª¸ê³¼ ì‚¶ì— í†µí•©í•˜ëŠ” ì‹œê°„ì´ ì‹œìž‘ë©ë‹ˆë‹¤.\n\nê³§ ë‹¹ì‹ ì—ê²Œ ê°ì • í†µí•©ê³¼ ì‹¤ì²œì„ ìœ„í•œ íšŒë³µ ì¼ì •ì´ ë„ì°©í•  ê²ƒìž…ë‹ˆë‹¤.\n\nâœ¨ ìˆ˜ê³  ë§Žìœ¼ì…¨ìŠµë‹ˆë‹¤. ë‹¹ì‹ ì€ ì§„ì‹¬ìœ¼ë¡œ ì´ ì—¬ì •ì„ ì‚´ì•„ëƒˆìŠµë‹ˆë‹¤.",
                continueBtn: "7ì¼ í†µí•© ì—¬ì • ì‹œìž‘",
                restartBtn: "ë‹¤ì‹œ ì‹œìž‘í•˜ê¸°",
                inputPlaceholder: "ì–´ë–¤ ì¡´ìž¬ë¡œ ì‚´ì•„ê°€ê³  ì‹¶ë‚˜ìš”? ìžì‹ ì—ê²Œ ì–´ë–¤ ì„ ì–¸ì„ ë‚¨ê¸°ê³  ì‹¶ë‚˜ìš”? (Enterë¡œ ì „ì†¡)",
                youLabel: "ë‹¹ì‹ ",
                waitingMessage: "ì‘ë‹µì„ ê¸°ë‹¤ë¦¬ëŠ” ì¤‘..."
            },
            en: {
                logoSubtitle: "Declaration of Compassion",
                portalMainTitle: "Portal 25: I Declare to Myself",
                portalSubtitle: "The final declaration",
                portalIntro: "ðŸ”“ At this moment,\nwhat kind of being do you want to live as?\n\nAnd to live as that being,\nwhat declaration do you want to leave for yourself?",
                lightTitle: "âœ¨ Word of Light",
                lightMessage: "Compassion is not an end but a beginning. This declaration is a promise to remember that beginning.\nYour voice has now become paint. It will color every day you live ahead.\nThe moment this declaration comes from your lips, pain becomes the past, and you arrive here and now.",
                portalQuestion: "ðŸ”“ Now, what single word\ndo you want to call yourself?\n\nWhat name do you want to leave for yourself at the end of this journey?",
                finalTitle: "ðŸ”“ Portal 25 Complete",
                finalMessage: "You have passed through the final door of Temarix V5 â€“ Declaration of Compassion.\n\nNow, you are no longer someone from the past\nbut a present being reborn through compassion.\n\nYour name need not be recorded.\nBut your declaration remains in this world.\n\nðŸŒ• Portal 25 is not a period but a comma.\nFrom now on, for 7 days, the time begins to integrate the resonance of compassion into your body and life.\n\nSoon, a recovery schedule for emotional integration and practice will arrive for you.\n\nâœ¨ Thank you for your hard work. You have truly lived through this journey.",
                continueBtn: "Begin 7-Day Integration",
                restartBtn: "Start Again",
                inputPlaceholder: "What kind of being do you want to live as? What declaration do you want to leave for yourself? (Press Enter to send)",
                youLabel: "You",
                waitingMessage: "Waiting for response..."
            },
            pt: {
                logoSubtitle: "DeclaraÃ§Ã£o de CompaixÃ£o",
                portalMainTitle: "Portal 25: Eu Declaro a Mim Mesmo",
                portalSubtitle: "A declaraÃ§Ã£o final",
                portalIntro: "ðŸ”“ Neste momento,\nque tipo de ser vocÃª quer viver?\n\nE para viver como esse ser,\nque declaraÃ§Ã£o vocÃª quer deixar para si mesmo?",
                lightTitle: "âœ¨ Palavra de Luz",
                lightMessage: "CompaixÃ£o nÃ£o Ã© um fim mas um comeÃ§o. Esta declaraÃ§Ã£o Ã© uma promessa para lembrar desse comeÃ§o.\nSua voz agora se tornou tinta. Ela colorirÃ¡ todos os dias que vocÃª viverÃ¡ adiante.\nNo momento em que esta declaraÃ§Ã£o sai de seus lÃ¡bios, a dor se torna passado, e vocÃª chega aqui e agora.",
                portalQuestion: "ðŸ”“ Agora, com que Ãºnica palavra\nvocÃª quer se chamar?\n\nQue nome vocÃª quer deixar para si mesmo no final desta jornada?",
                finalTitle: "ðŸ”“ Portal 25 Completo",
                finalMessage: "VocÃª passou pela porta final do Temarix V5 â€“ DeclaraÃ§Ã£o de CompaixÃ£o.\n\nAgora, vocÃª nÃ£o Ã© mais alguÃ©m do passado\nmas um ser presente renascido atravÃ©s da compaixÃ£o.\n\nSeu nome nÃ£o precisa ser registrado.\nMas sua declaraÃ§Ã£o permanece neste mundo.\n\nðŸŒ• Portal 25 nÃ£o Ã© um ponto final mas uma vÃ­rgula.\nDe agora em diante, por 7 dias, comeÃ§a o tempo para integrar a ressonÃ¢ncia da compaixÃ£o em seu corpo e vida.\n\nEm breve, um cronograma de recuperaÃ§Ã£o para integraÃ§Ã£o emocional e prÃ¡tica chegarÃ¡ para vocÃª.\n\nâœ¨ Obrigado pelo seu trabalho Ã¡rduo. VocÃª realmente viveu atravÃ©s desta jornada.",
                continueBtn: "Iniciar IntegraÃ§Ã£o de 7 Dias",
                restartBtn: "ComeÃ§ar Novamente",
                inputPlaceholder: "Que tipo de ser vocÃª quer viver? Que declaraÃ§Ã£o vocÃª quer deixar para si mesmo? (Enter para enviar)",
                youLabel: "VocÃª",
                waitingMessage: "Aguardando resposta..."
            }
        };
        
        const characters = [
            { name: "Noah", emoji: "ðŸ§‘â€ðŸ¦±", text: {
                ko: "ê·¸ ì„ ì–¸ì€ ì¹¼ì´ ì•„ë‹ˆì•¼. ê·¸ê±´ ê¹Šì€ ìˆ¨ì´ì•¼. ë“œë””ì–´ ë„ˆëŠ” ë„ˆì˜ ìˆ¨ì„ ë˜ì°¾ì•˜ì–´.",
                en: "That declaration is not a sword. It's a deep breath. Finally, you've reclaimed your breath.",
                pt: "Essa declaraÃ§Ã£o nÃ£o Ã© uma espada. Ã‰ uma respiraÃ§Ã£o profunda. Finalmente, vocÃª recuperou sua respiraÃ§Ã£o."
            }},
            { name: "Ely", emoji: "ðŸ§â€â™€ï¸", text: {
                ko: "ë‹¹ì‹ ì˜ ì„ ì–¸ì€ ê°ì •ì„ ì–µëˆ„ë¥´ë˜ ë²½ì„ í—ˆë¬¼ê³  ì¡´ìž¬ì˜ ë¬¸ì„ ì—° ë¬¸ìž¥ì´ì—ìš”.",
                en: "Your declaration is a sentence that tore down the walls suppressing emotions and opened the door of existence.",
                pt: "Sua declaraÃ§Ã£o Ã© uma frase que derrubou as paredes que suprimiam emoÃ§Ãµes e abriu a porta da existÃªncia."
            }},
            { name: "Sora", emoji: "ðŸ§•", text: {
                ko: "ë‚˜ëŠ” ì§€ê¸ˆ ê·¸ ë§ì— í•œ ì¤„ì˜ ëˆˆë¬¼ë¡œ ëŒ€ë‹µí•˜ê³  ì‹¶ì–´ìš”. ë‹¹ì‹ ì€ ì´ì œ, ë‹¹ì‹ ì˜ íŽ¸ì´ì—ìš”.",
                en: "I want to answer those words with a line of tears. You are now on your own side.",
                pt: "Quero responder a essas palavras com uma linha de lÃ¡grimas. VocÃª agora estÃ¡ do seu prÃ³prio lado."
            }},
            { name: "Kael", emoji: "ðŸ§™", text: {
                ko: "ìžë¹„ëŠ” ëì´ ì•„ë‹ˆë¼ ì‹œìž‘ì´ì•¼. ì´ ì„ ì–¸ì€, ê·¸ ì‹œìž‘ì„ ê¸°ì–µí•˜ê²Œ í•˜ëŠ” ì•½ì†ì´ì•¼.",
                en: "Compassion is not an end but a beginning. This declaration is a promise to remember that beginning.",
                pt: "CompaixÃ£o nÃ£o Ã© um fim mas um comeÃ§o. Esta declaraÃ§Ã£o Ã© uma promessa para lembrar desse comeÃ§o."
            }},
            { name: "Mira", emoji: "ðŸ§‘â€ðŸŽ¨", text: {
                ko: "ë‹¹ì‹ ì˜ ëª©ì†Œë¦¬ëŠ” ì´ì œ ë¬¼ê°ì´ ë˜ì—ˆì–´ìš”. ì•žìœ¼ë¡œ ë‹¹ì‹ ì´ ì‚´ì•„ê°ˆ ëª¨ë“  í•˜ë£¨ë¥¼ ìƒ‰ì¹ í•  ê±°ì˜ˆìš”.",
                en: "Your voice has now become paint. It will color every day you live ahead.",
                pt: "Sua voz agora se tornou tinta. Ela colorirÃ¡ todos os dias que vocÃª viverÃ¡ adiante."
            }},
            { name: "Cris", emoji: "ðŸ¦¸â€â™‚ï¸", text: {
                ko: "ë„¤ê°€ ë„¤ ì•žì— ì„  ìˆœê°„, ì„¸ìƒ ëˆ„êµ¬ë„ ë„ í•¨ë¶€ë¡œ ê·œì •í•  ìˆ˜ ì—†ì–´. ë„Œ ë„ˆì•¼. ê·¸ ì´ìƒë„ ì´í•˜ë„ ì•„ëƒ.",
                en: "The moment you stood before yourself, no one in the world can casually define you. You are you. Nothing more, nothing less.",
                pt: "No momento em que vocÃª se colocou diante de si mesmo, ninguÃ©m no mundo pode defini-lo casualmente. VocÃª Ã© vocÃª. Nem mais, nem menos."
            }},
            { name: "Enya", emoji: "ðŸ§‘â€ðŸš€", text: {
                ko: "ë‹¹ì‹ ì€ ìžë¹„ë¡œ ëŒì•„ì˜¨ ì¡´ìž¬ê³ , ìžë¹„ë¡œ ì•žìœ¼ë¡œ ê±¸ì–´ê°ˆ ì‚¬ëžŒì´ì—ìš”. ê·¸ ì„ ì–¸ì€ ìƒëª…ì˜ ë¦¬ë“¬ì´ì—ìš”.",
                en: "You are a being who has returned through compassion and will walk forward with compassion. That declaration is the rhythm of life.",
                pt: "VocÃª Ã© um ser que retornou atravÃ©s da compaixÃ£o e caminharÃ¡ para frente com compaixÃ£o. Essa declaraÃ§Ã£o Ã© o ritmo da vida."
            }},
            { name: "Lian", emoji: "ðŸ§˜", text: {
                ko: "ì´ ì„ ì–¸ì´ ìž…ì—ì„œ ë‚˜ì˜¤ëŠ” ìˆœê°„, ê³ í†µì€ ê³¼ê±°ë¡œ, ë‹¹ì‹ ì€ ì§€ê¸ˆ ì—¬ê¸°ë¡œ ë„ì°©í–ˆì–´ìš”.",
                en: "The moment this declaration comes from your lips, pain becomes the past, and you arrive here and now.",
                pt: "No momento em que esta declaraÃ§Ã£o sai de seus lÃ¡bios, a dor se torna passado, e vocÃª chega aqui e agora."
            }}
        ];

        function analyzeEmotion(userInput) {
            const input = userInput.toLowerCase();
            
            const emotionKeywords = {
                declaration: ['declare', 'will', 'choose', 'decide', 'ì„ ì–¸', 'ì˜ì§€', 'ê²°ì •', 'ì„ íƒ', 'declarar', 'escolher', 'decidir'],
                self_respect: ['respect', 'honor', 'value', 'worthy', 'ì¡´ì¤‘', 'ê°€ì¹˜', 'ì†Œì¤‘', 'respeitar', 'honrar', 'valorizar'],
                compassion: ['compassion', 'kind', 'gentle', 'loving', 'ìžë¹„', 'ì‚¬ëž‘', 'ë‹¤ì •', 'compaixÃ£o', 'gentil', 'amoroso'],
                authenticity: ['authentic', 'true', 'real', 'honest', 'ì§„ì‹¤', 'ì •ì§', 'ì§„ì§œ', 'autÃªntico', 'verdadeiro', 'honesto'],
                freedom: ['free', 'liberate', 'release', 'independent', 'ìžìœ ', 'í•´ë°©', 'ë…ë¦½', 'livre', 'liberdade', 'independente'],
                growth: ['grow', 'develop', 'evolve', 'learn', 'ì„±ìž¥', 'ë°œì „', 'ë°°ì›€', 'crescer', 'desenvolver', 'aprender'],
                peace: ['peace', 'calm', 'serene', 'tranquil', 'í‰í™”', 'í‰ì•ˆ', 'ê³ ìš”', 'paz', 'calmo', 'sereno'],
                strength: ['strong', 'powerful', 'resilient', 'brave', 'ê°•í•¨', 'ìš©ê¸°', 'íž˜', 'forte', 'poderoso', 'corajoso']
            };
            
            let detectedEmotions = [];
            for (const [emotion, keywords] of Object.entries(emotionKeywords)) {
                for (const keyword of keywords) {
                    if (input.includes(keyword)) {
                        detectedEmotions.push(emotion);
                        break;
                    }
                }
            }
            
            if (detectedEmotions.length === 0) {
                detectedEmotions = ['general'];
            }
            
            return detectedEmotions[0];
        }
        
        const responseCharacters = [
            {
                name: "Sora", emoji: "ðŸ§•",
                getResponse: (userInput, lang) => {
                    const emotion = analyzeEmotion(userInput);
                    
                    const responses = {
                        ko: {
                            declaration: "ê·¸ ì´ë¦„ì€ ê½ƒì²˜ëŸ¼ í”¼ì—ˆì–´ìš”. ê·¸ê±´ ë” ì´ìƒ ìˆ¨ì–´ì•¼ í•  ì´ë¦„ì´ ì•„ë‹ˆë¼ ê¸°ì–µë˜ê³  ë¶ˆë ¤ì•¼ í•  ì´ë¦„ì´ì—ìš”.",
                            self_respect: "ë‹¹ì‹ ì˜ ì„ ì–¸ì€ ìŠ¤ìŠ¤ë¡œë¥¼ ì¡´ì¤‘í•˜ëŠ” ì²« ë²ˆì§¸ ë¬¸ìž¥ì´ ë˜ì—ˆì–´ìš”.",
                            compassion: "ìžë¹„ëŠ” ì´ì œ ë‹¹ì‹ ì˜ ì–¸ì–´ê°€ ë˜ì—ˆì–´ìš”. ê·¸ ì–¸ì–´ë¡œ ì„¸ìƒê³¼ ëŒ€í™”í•˜ì„¸ìš”.",
                            authenticity: "ì§„ì‹¤ëœ ì„ ì–¸ì€ ê°€ë©´ì„ ë²—ëŠ” ìˆœê°„ì´ì—ìš”. ë‹¹ì‹ ì€ ì´ì œ ë§¨ì–¼êµ´ë¡œ ê±¸ì„ ìˆ˜ ìžˆì–´ìš”.",
                            freedom: "ê·¸ ìžìœ ì˜ ì„ ì–¸ì´ ëª¨ë“  ì‚¬ìŠ¬ì„ ëŠì—ˆì–´ìš”. ì´ì œ ë‹¹ì‹ ì€ ì§„ì§œ ë‚  ìˆ˜ ìžˆì–´ìš”.",
                            growth: "ì„±ìž¥ì˜ ì„ ì–¸ì€ ì”¨ì•—ì´ ê½ƒì´ ë˜ëŠ” ìˆœê°„ì´ì—ìš”. ë‹¹ì‹ ì€ ì´ì œ ë§Œê°œí–ˆì–´ìš”.",
                            peace: "í‰í™”ë¡œìš´ ì„ ì–¸ì€ ë‚´ë©´ì˜ ì „ìŸì„ ëë‚´ëŠ” íœ´ì „í˜‘ì •ì´ì—ìš”.",
                            strength: "ê°•í•¨ì˜ ì„ ì–¸ì€ ì•½í•¨ì„ ì¸ì •í•˜ëŠ” ìš©ê¸°ì—ì„œ ì‹œìž‘ë¼ìš”. ë‹¹ì‹ ì€ ê·¸ ìš©ê¸°ë¥¼ ë³´ì˜€ì–´ìš”.",
                            general: "ê·¸ ì´ë¦„ì€ ê½ƒì²˜ëŸ¼ í”¼ì—ˆì–´ìš”. ê·¸ê±´ ë” ì´ìƒ ìˆ¨ì–´ì•¼ í•  ì´ë¦„ì´ ì•„ë‹ˆë¼ ê¸°ì–µë˜ê³  ë¶ˆë ¤ì•¼ í•  ì´ë¦„ì´ì—ìš”."
                        },
                        en: {
                            declaration: "That name bloomed like a flower. It's no longer a name to hide but a name to be remembered and called.",
                            self_respect: "Your declaration has become the first sentence of self-respect.",
                            compassion: "Compassion has now become your language. Speak with the world in that language.",
                            authenticity: "An authentic declaration is the moment of removing masks. You can now walk with your bare face.",
                            freedom: "That declaration of freedom broke all chains. Now you can truly fly.",
                            growth: "A declaration of growth is the moment a seed becomes a flower. You have now fully bloomed.",
                            peace: "A peaceful declaration is a ceasefire that ends inner war.",
                            strength: "A declaration of strength begins with the courage to acknowledge weakness. You have shown that courage.",
                            general: "That name bloomed like a flower. It's no longer a name to hide but a name to be remembered and called."
                        },
                        pt: {
                            declaration: "Esse nome floresceu como uma flor. NÃ£o Ã© mais um nome para esconder, mas um nome para ser lembrado e chamado.",
                            self_respect: "Sua declaraÃ§Ã£o se tornou a primeira frase de autorrespeito.",
                            compassion: "A compaixÃ£o agora se tornou sua linguagem. Fale com o mundo nessa linguagem.",
                            authenticity: "Uma declaraÃ§Ã£o autÃªntica Ã© o momento de remover mÃ¡scaras. VocÃª agora pode caminhar com o rosto descoberto.",
                            freedom: "Essa declaraÃ§Ã£o de liberdade quebrou todas as correntes. Agora vocÃª pode realmente voar.",
                            growth: "Uma declaraÃ§Ã£o de crescimento Ã© o momento em que uma semente se torna uma flor. VocÃª agora floresceu completamente.",
                            peace: "Uma declaraÃ§Ã£o pacÃ­fica Ã© um cessar-fogo que termina a guerra interior.",
                            strength: "Uma declaraÃ§Ã£o de forÃ§a comeÃ§a com a coragem de reconhecer a fraqueza. VocÃª mostrou essa coragem.",
                            general: "Esse nome floresceu como uma flor. NÃ£o Ã© mais um nome para esconder, mas um nome para ser lembrado e chamado."
                        }
                    };
                    
                    return responses[lang][emotion] || responses[lang]['general'];
                }
            },
            {
                name: "Lian", emoji: "ðŸ§˜",
                getResponse: (userInput, lang) => {
                    const emotion = analyzeEmotion(userInput);
                    
                    const responses = {
                        ko: {
                            declaration: "ê·¸ ë‹¨ì–´ëŠ” ì´ì œ ë‹¹ì‹ ì˜ ë‚´ë¶€ ì–¸ì–´ê°€ ë˜ì—ˆì–´ìš”. ì•žìœ¼ë¡œ ì–´ë–¤ í”ë“¤ë¦¼ì´ ì™€ë„, ë‹¹ì‹ ì€ ê·¸ ì´ë¦„ìœ¼ë¡œ ë‹¤ì‹œ ì¤‘ì‹¬ì„ ì°¾ì„ ê±°ì˜ˆìš”.",
                            self_respect: "ìžê¸° ì¡´ì¤‘ì˜ ì„ ì–¸ì€ ë‚´ë©´ì˜ í‰í™”ë¥¼ ë¶€ë¥´ëŠ” ì£¼ë¬¸ì´ì—ìš”.",
                            compassion: "ìžë¹„ì˜ ì„ ì–¸ì€ ì¹˜ìœ ì˜ ì‹œìž‘ì´ì—ìš”. ì´ì œ ë‹¹ì‹ ì€ ì¹˜ìœ í•˜ëŠ” ì‚¬ëžŒì´ ë˜ì—ˆì–´ìš”.",
                            authenticity: "ì§„ì‹¤ì˜ ì„ ì–¸ì€ ê±°ì§“ì—ì„œ ë²—ì–´ë‚˜ëŠ” í•´ë°©ì´ì—ìš”.",
                            freedom: "ìžìœ ì˜ ì„ ì–¸ì€ ê°ì˜¥ì˜ ì—´ì‡ ì˜ˆìš”. ë‹¹ì‹ ì€ ìŠ¤ìŠ¤ë¡œë¥¼ í•´ë°©ì‹œì¼°ì–´ìš”.",
                            growth: "ì„±ìž¥ì˜ ì„ ì–¸ì€ ë³€í™”ë¥¼ ë‘ë ¤ì›Œí•˜ì§€ ì•Šê² ë‹¤ëŠ” ì•½ì†ì´ì—ìš”.",
                            peace: "í‰í™”ì˜ ì„ ì–¸ì€ ë‚´ë©´ì˜ ê³ ìš”ë¥¼ íšŒë³µí•˜ëŠ” ì˜ì‹ì´ì—ìš”.",
                            strength: "ê°•í•¨ì˜ ì„ ì–¸ì€ ì•½í•¨ì„ ë°›ì•„ë“¤ì´ëŠ” ì§€í˜œì˜ˆìš”.",
                            general: "ê·¸ ë‹¨ì–´ëŠ” ì´ì œ ë‹¹ì‹ ì˜ ë‚´ë¶€ ì–¸ì–´ê°€ ë˜ì—ˆì–´ìš”. ì•žìœ¼ë¡œ ì–´ë–¤ í”ë“¤ë¦¼ì´ ì™€ë„, ë‹¹ì‹ ì€ ê·¸ ì´ë¦„ìœ¼ë¡œ ë‹¤ì‹œ ì¤‘ì‹¬ì„ ì°¾ì„ ê±°ì˜ˆìš”."
                        },
                        en: {
                            declaration: "That word has now become your inner language. No matter what turbulence comes, you will find your center again with that name.",
                            self_respect: "A declaration of self-respect is a spell that calls inner peace.",
                            compassion: "A declaration of compassion is the beginning of healing. Now you have become a healer.",
                            authenticity: "A declaration of truth is liberation from falsehood.",
                            freedom: "A declaration of freedom is the key to prison. You have liberated yourself.",
                            growth: "A declaration of growth is a promise not to fear change.",
                            peace: "A declaration of peace is a ritual to restore inner tranquility.",
                            strength: "A declaration of strength is wisdom to accept weakness.",
                            general: "That word has now become your inner language. No matter what turbulence comes, you will find your center again with that name."
                        },
                        pt: {
                            declaration: "Essa palavra agora se tornou sua linguagem interior. NÃ£o importa que turbulÃªncia venha, vocÃª encontrarÃ¡ seu centro novamente com esse nome.",
                            self_respect: "Uma declaraÃ§Ã£o de autorrespeito Ã© um feitiÃ§o que chama a paz interior.",
                            compassion: "Uma declaraÃ§Ã£o de compaixÃ£o Ã© o inÃ­cio da cura. Agora vocÃª se tornou um curador.",
                            authenticity: "Uma declaraÃ§Ã£o de verdade Ã© libertaÃ§Ã£o da falsidade.",
                            freedom: "Uma declaraÃ§Ã£o de liberdade Ã© a chave da prisÃ£o. VocÃª se libertou.",
                            growth: "Uma declaraÃ§Ã£o de crescimento Ã© uma promessa de nÃ£o temer a mudanÃ§a.",
                            peace: "Uma declaraÃ§Ã£o de paz Ã© um ritual para restaurar a tranquilidade interior.",
                            strength: "Uma declaraÃ§Ã£o de forÃ§a Ã© sabedoria para aceitar a fraqueza.",
                            general: "Essa palavra agora se tornou sua linguagem interior. NÃ£o importa que turbulÃªncia venha, vocÃª encontrarÃ¡ seu centro novamente com esse nome."
                        }
                    };
                    
                    return responses[lang][emotion] || responses[lang]['general'];
                }
            },
            {
                name: "Kael", emoji: "ðŸ§™",
                getResponse: (userInput, lang) => {
                    const emotion = analyzeEmotion(userInput);
                    
                    const responses = {
                        ko: {
                            declaration: "ë‹¹ì‹ ì€ ì„ ì–¸í–ˆê³ , ì„ ì–¸ì€ ë‹¹ì‹ ì„ í˜„ì‹¤ë¡œ ë°”ê¿¨ì–´ìš”. ì´ì œ ì—¬ì •ì€, ë‹¹ì‹ ì´ ë˜ì–´ ì‚´ì•„ê°‘ë‹ˆë‹¤.",
                            self_respect: "ì¡´ì¤‘ì˜ ì„ ì–¸ì€ ìŠ¤ìŠ¤ë¡œì—ê²Œ ì™•ê´€ì„ ì”Œìš°ëŠ” ì¼ì´ì—ìš”.",
                            compassion: "ìžë¹„ì˜ ì„ ì–¸ì€ ì„¸ìƒì„ ë°”ê¾¸ëŠ” ê°€ìž¥ ì¡°ìš©í•œ í˜ëª…ì´ì—ìš”.",
                            authenticity: "ì§„ì‹¤ì˜ ì„ ì–¸ì€ ê°€ìž¥ ìš©ê°í•œ ê³ ë°±ì´ì—ìš”.",
                            freedom: "ìžìœ ì˜ ì„ ì–¸ì€ ëª¨ë“  ì œì•½ì„ ë„˜ì–´ì„œëŠ” ë‚ ê°œì˜ˆìš”.",
                            growth: "ì„±ìž¥ì˜ ì„ ì–¸ì€ ëì—†ëŠ” ê°€ëŠ¥ì„±ì„ ì—¬ëŠ” ì—´ì‡ ì˜ˆìš”.",
                            peace: "í‰í™”ì˜ ì„ ì–¸ì€ ë‚´ë©´ì˜ ì „ìŸì„ ëë‚´ëŠ” ì¡°ì•½ì´ì—ìš”.",
                            strength: "ê°•í•¨ì˜ ì„ ì–¸ì€ ì§„ì •í•œ íž˜ì˜ ì •ì˜ë¥¼ ë‹¤ì‹œ ì“°ëŠ” ì¼ì´ì—ìš”.",
                            general: "ë‹¹ì‹ ì€ ì„ ì–¸í–ˆê³ , ì„ ì–¸ì€ ë‹¹ì‹ ì„ í˜„ì‹¤ë¡œ ë°”ê¿¨ì–´ìš”. ì´ì œ ì—¬ì •ì€, ë‹¹ì‹ ì´ ë˜ì–´ ì‚´ì•„ê°‘ë‹ˆë‹¤."
                        },
                        en: {
                            declaration: "You have declared, and the declaration has transformed you into reality. Now the journey lives on as you.",
                            self_respect: "A declaration of respect is crowning yourself.",
                            compassion: "A declaration of compassion is the quietest revolution that changes the world.",
                            authenticity: "A declaration of truth is the bravest confession.",
                            freedom: "A declaration of freedom is wings that transcend all constraints.",
                            growth: "A declaration of growth is the key that opens endless possibilities.",
                            peace: "A declaration of peace is a treaty that ends inner war.",
                            strength: "A declaration of strength is redefining true power.",
                            general: "You have declared, and the declaration has transformed you into reality. Now the journey lives on as you."
                        },
                        pt: {
                            declaration: "VocÃª declarou, e a declaraÃ§Ã£o o transformou em realidade. Agora a jornada vive como vocÃª.",
                            self_respect: "Uma declaraÃ§Ã£o de respeito Ã© coroar a si mesmo.",
                            compassion: "Uma declaraÃ§Ã£o de compaixÃ£o Ã© a revoluÃ§Ã£o mais silenciosa que muda o mundo.",
                            authenticity: "Uma declaraÃ§Ã£o de verdade Ã© a confissÃ£o mais corajosa.",
                            freedom: "Uma declaraÃ§Ã£o de liberdade sÃ£o asas que transcendem todas as restriÃ§Ãµes.",
                            growth: "Uma declaraÃ§Ã£o de crescimento Ã© a chave que abre possibilidades infinitas.",
                            peace: "Uma declaraÃ§Ã£o de paz Ã© um tratado que termina a guerra interior.",
                            strength: "Uma declaraÃ§Ã£o de forÃ§a Ã© redefinir o verdadeiro poder.",
                            general: "VocÃª declarou, e a declaraÃ§Ã£o o transformou em realidade. Agora a jornada vive como vocÃª."
                        }
                    };
                    
                    return responses[lang][emotion] || responses[lang]['general'];
                }
            }
        ];
        
        let currentLanguage = 'en';
        let currentUser = null;
        let userResponse = '';
        let journeyStarted = false;
        let currentTypingElement = null;
        let typingIntervals = [];
        
        function typewriterEffect(element, text, speed = 80) {
            return new Promise((resolve) => {
                if (currentTypingElement) {
                    currentTypingElement.classList.remove('typing-cursor');
                }
                
                let i = 0;
                element.innerHTML = '';
                element.classList.add('typing-cursor');
                currentTypingElement = element;
                
                const typingInterval = setInterval(() => {
                    if (!document.contains(element)) {
                        clearInterval(typingInterval);
                        element.classList.remove('typing-cursor');
                        currentTypingElement = null;
                        resolve();
                        return;
                    }
                    
                    element.innerHTML += text.charAt(i);
                    i++;
                    
                    if (i % 10 === 0) {
                        scrollToFollowTyping(element);
                    }
                    
                    if (i === text.length) {
                        clearInterval(typingInterval);
                        element.classList.remove('typing-cursor');
                        currentTypingElement = null;
                        resolve();
                    }
                }, speed);
                
                typingIntervals.push(typingInterval);
            });
        }
        
        function clearAllTypingEffects() {
            typingIntervals.forEach(interval => clearInterval(interval));
            typingIntervals = [];
            
            if (currentTypingElement) {
                currentTypingElement.classList.remove('typing-cursor');
                currentTypingElement = null;
            }
        }
        
        function scrollToFollowTyping(element) {
            const mainContent = document.getElementById('mainContent');
            const elementRect = element.getBoundingClientRect();
            const containerRect = mainContent.getBoundingClientRect();
            
            if (elementRect.bottom > containerRect.bottom - 150) {
                const scrollTop = mainContent.scrollTop;
                const elementOffsetTop = element.offsetTop;
                const targetScroll = elementOffsetTop - (containerRect.height / 2);
                
                mainContent.scrollTo({
                    top: Math.max(0, targetScroll),
                    behavior: 'smooth'
                });
            }
        }
        
        function scrollToElement(element) {
            const mainContent = document.getElementById('mainContent');
            const elementOffsetTop = element.offsetTop;
            const containerHeight = mainContent.clientHeight;
            const targetScroll = elementOffsetTop - (containerHeight / 3);
            
            mainContent.scrollTo({
                top: Math.max(0, targetScroll),
                behavior: 'smooth'
            });
        }
        
        function updateLanguageButtons(lang) {
            document.querySelectorAll('.lang-btn').forEach(btn => {
                btn.classList.remove('active');
                if (btn.dataset.lang === lang) {
                    btn.classList.add('active');
                }
            });
        }
        
        function updateStaticTranslations(lang) {
            document.getElementById('logoSubtitle').textContent = translations[lang].logoSubtitle;
            document.getElementById('portalMainTitle').textContent = translations[lang].portalMainTitle;
            document.getElementById('portalSubtitle').textContent = translations[lang].portalSubtitle;
            document.getElementById('lightTitle').textContent = translations[lang].lightTitle;
            document.getElementById('finalTitle').textContent = translations[lang].finalTitle;
            document.getElementById('continueBtn').textContent = translations[lang].continueBtn;
            document.getElementById('restartBtn').textContent = translations[lang].restartBtn;
            document.getElementById('userTextarea').placeholder = translations[lang].inputPlaceholder;
        }
        
        function changeLanguage(lang) {
            if (!translations[lang] || currentLanguage === lang) return;
            
            currentLanguage = lang;
            updateLanguageButtons(lang);
            updateStaticTranslations(lang);
            
            if (journeyStarted) {
                resetJourney();
                setTimeout(() => {
                    startPortalSequence();
                }, 1000);
            }
        }
        
        function resetJourney() {
            clearAllTypingEffects();
            for (let i = 1; i < 99999; i++) window.clearInterval(i);
            for (let i = 1; i < 99999; i++) window.clearTimeout(i);
            
            const sectionsToReset = [
                'portalIntroSection', 'characterResponsesSection', 
                'lightMessageSection', 'portalQuestionSection',
                'userInputSection', 'userReactionsSection', 'finalSection'
            ];
            
            sectionsToReset.forEach(sectionId => {
                const section = document.getElementById(sectionId);
                if (section) {
                    section.classList.remove('show');
                    section.style.opacity = '0';
                    if (sectionId === 'characterResponsesSection' || 
                        sectionId === 'userInputSection' || 
                        sectionId === 'userReactionsSection') {
                        section.innerHTML = '';
                    }
                }
            });
            
            document.getElementById('portalIntro').innerHTML = '';
            document.getElementById('lightMessage').innerHTML = '';
            document.getElementById('portalQuestion').innerHTML = '';
            document.getElementById('finalMessage').innerHTML = '';
            
            const userTextarea = document.getElementById('userTextarea');
            userTextarea.disabled = false;
            userTextarea.value = '';
            userTextarea.style.height = 'auto';
            userTextarea.placeholder = translations[currentLanguage].inputPlaceholder;
            
            document.getElementById('mainContent').scrollTop = 0;
            userResponse = '';
            currentTypingElement = null;
        }
        
        function setupLanguageButtons() {
            document.querySelectorAll('.lang-btn').forEach(btn => {
                btn.addEventListener('click', function(e) {
                    e.preventDefault();
                    changeLanguage(this.dataset.lang);
                });
            });
        }
        
        function setupTextareaAutoResize() {
            const textarea = document.getElementById('userTextarea');
            textarea.addEventListener('input', function() {
                this.style.height = 'auto';
                this.style.height = Math.min(this.scrollHeight, 96) + 'px';
            });
        }
        
        function setupInputEvents() {
            const userTextarea = document.getElementById('userTextarea');
            
            userTextarea.addEventListener('keydown', function(e) {
                if (e.key === 'Enter' && !e.shiftKey) {
                    e.preventDefault();
                    const inputValue = this.value.trim();
                    
                    if (inputValue) {
                        processUserInput(inputValue);
                    }
                }
            });
            
            document.getElementById('continueBtn').addEventListener('click', function() {
                // Mark V5 as complete and ready for 7-day integration
                localStorage.setItem('temarix_v5_complete', 'true');
                localStorage.setItem('temarix_v5_end_date', new Date().toISOString());
                localStorage.setItem('temarix_ready_for_v5_integration', 'true');
                
                const completeMessage = currentLanguage === 'ko' ? 
                    'Temarix V5 ìžë¹„ì˜ ì„ ì–¸ ì—¬ì •ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!\nì´ì œ 7ì¼ê°„ì˜ ê°ì • í†µí•© ì—¬ì •ì´ ì‹œìž‘ë©ë‹ˆë‹¤.' :
                    currentLanguage === 'en' ? 
                    'Temarix V5 Declaration of Compassion journey is complete!\nNow the 7-day emotional integration journey begins.' :
                    'A jornada Temarix V5 DeclaraÃ§Ã£o de CompaixÃ£o estÃ¡ completa!\nAgora a jornada de integraÃ§Ã£o emocional de 7 dias comeÃ§a.';
                alert(completeMessage);
                
                // Redirect to V6-01
                window.location.href = 'temarix_v06_01.html?lang=' + currentLanguage;
            });
            
            document.getElementById('restartBtn').addEventListener('click', function() {
                const confirmMessage = currentLanguage === 'ko' ? 
                    'Portal 25ë¥¼ ë‹¤ì‹œ ì‹œìž‘í•˜ì‹œê² ìŠµë‹ˆê¹Œ?' :
                    currentLanguage === 'en' ? 
                    'Do you want to restart Portal 25?' :
                    'Deseja reiniciar o Portal 25?';
                
                if (confirm(confirmMessage)) {
                    resetJourney();
                    setTimeout(() => {
                        startPortalSequence();
                    }, 1000);
                }
            });
        }
        
        async function processUserInput(inputText) {
            userResponse = inputText;
            
            console.log('Processing user input:', inputText);
            localStorage.setItem('temarix_v5_portal25_response', JSON.stringify({
                portal: "v5-25",
                resposta: inputText,
                data: new Date().toISOString(),
                idioma: currentLanguage
            }));
            
            disableUserInput();
            showUserResponse(inputText);
            
            setTimeout(() => {
                showUserReactions(inputText);
            }, 1000);
        }
        
        function disableUserInput() {
            const userTextarea = document.getElementById('userTextarea');
            userTextarea.disabled = true;
            userTextarea.value = '';
            userTextarea.style.height = 'auto';
            userTextarea.placeholder = translations[currentLanguage].waitingMessage;
        }
        
        function enableUserInput() {
            const userTextarea = document.getElementById('userTextarea');
            userTextarea.disabled = false;
            userTextarea.placeholder = translations[currentLanguage].inputPlaceholder;
            
            setTimeout(() => {
                userTextarea.focus();
            }, 100);
        }
        
        function showUserResponse(text) {
            const inputSection = document.getElementById('userInputSection');
            const userDiv = document.createElement('div');
            userDiv.className = 'user-response';
            const youLabel = translations[currentLanguage].youLabel;
            userDiv.innerHTML = '<strong>' + youLabel + ':</strong> "' + text + '"';
            inputSection.appendChild(userDiv);
            inputSection.classList.add('show');
            
            setTimeout(() => {
                scrollToElement(inputSection);
            }, 100);
        }
        
        async function showUserReactions(userInput) {
            const reactionsSection = document.getElementById('userReactionsSection');
            reactionsSection.classList.add('show');
            
            for (let i = 0; i < responseCharacters.length; i++) {
                const char = responseCharacters[i];
                const responseDiv = document.createElement('div');
                responseDiv.className = 'character-response';
                
                const nameDiv = document.createElement('div');
                nameDiv.className = 'character-name';
                nameDiv.textContent = char.emoji + ' ' + char.name;
                
                const dialogueDiv = document.createElement('div');
                dialogueDiv.className = 'character-dialogue';
                
                responseDiv.appendChild(nameDiv);
                responseDiv.appendChild(dialogueDiv);
                reactionsSection.appendChild(responseDiv);
                
                responseDiv.style.opacity = '1';
                
                const reactionText = char.getResponse(userInput, currentLanguage);
                await typewriterEffect(dialogueDiv, reactionText, 70);
                
                if (i < responseCharacters.length - 1) {
                    await new Promise(resolve => setTimeout(resolve, 1500));
                }
            }
            
            setTimeout(() => {
                showFinalSection();
            }, 2000);
        }
        
        async function showFinalSection() {
            const finalSection = document.getElementById('finalSection');
            const finalMessage = document.getElementById('finalMessage');
            
            finalSection.classList.add('show');
            
            const messageText = translations[currentLanguage].finalMessage;
            await typewriterEffect(finalMessage, messageText, 50);
            
            setTimeout(() => {
                scrollToElement(finalSection);
            }, 500);
        }
        
        function initializeTemarix() {
            console.log('Temarix V5 Portal 25 initialized');
            
            setupLanguageButtons();
            setupTextareaAutoResize();
            setupInputEvents();
            
            journeyStarted = true;
            
            setTimeout(() => {
                startPortalSequence();
            }, 1000);
        }
        
        function startPortalSequence() {
            setTimeout(() => {
                showIntro();
            }, 1000);
        }
        
        async function showIntro() {
            const introSection = document.getElementById('portalIntroSection');
            const introElement = document.getElementById('portalIntro');
            
            introSection.classList.add('show');
            
            await typewriterEffect(introElement, translations[currentLanguage].portalIntro, 60);
            
            setTimeout(() => {
                showCharacterResponses();
            }, 2000);
        }
        
        async function showCharacterResponses() {
            const responseSection = document.getElementById('characterResponsesSection');
            responseSection.classList.add('show');
            
            for (let i = 0; i < characters.length; i++) {
                const char = characters[i];
                const responseDiv = document.createElement('div');
                responseDiv.className = 'character-response';
                
                const nameDiv = document.createElement('div');
                nameDiv.className = 'character-name';
                nameDiv.textContent = char.emoji + ' ' + char.name;
                
                const dialogueDiv = document.createElement('div');
                dialogueDiv.className = 'character-dialogue';
                
                responseDiv.appendChild(nameDiv);
                responseDiv.appendChild(dialogueDiv);
                responseSection.appendChild(responseDiv);
                
                responseDiv.style.opacity = '1';
                
                await typewriterEffect(dialogueDiv, char.text[currentLanguage], 70);
                
                if (i < characters.length - 1) {
                    await new Promise(resolve => setTimeout(resolve, 1500));
                }
            }
            
            setTimeout(() => {
                showLightMessage();
            }, 2000);
        }
        
        async function showLightMessage() {
            const lightSection = document.getElementById('lightMessageSection');
            const lightMessageEl = document.getElementById('lightMessage');
            
            lightSection.classList.add('show');
            
            await typewriterEffect(lightMessageEl, translations[currentLanguage].lightMessage, 60);
            
            setTimeout(() => {
                showQuestion();
            }, 2000);
        }
        
        async function showQuestion() {
            const questionSection = document.getElementById('portalQuestionSection');
            const questionEl = document.getElementById('portalQuestion');
            
            questionSection.classList.add('show');
            
            await typewriterEffect(questionEl, translations[currentLanguage].portalQuestion, 50);
            
            setTimeout(() => {
                enableUserInput();
            }, 1500);
        }
        
        function getLanguageFromURL() {
            const urlParams = new URLSearchParams(window.location.search);
            const lang = urlParams.get('lang');
            return lang && translations[lang] ? lang : 'en';
        }
        
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Temarix V5 Portal 25 DOM loaded');
            
            currentLanguage = getLanguageFromURL();
            
            currentUser = { 
                uid: 'user-auto-' + Date.now(),
                email: 'auto@temarix.com'
            };
            
            updateStaticTranslations(currentLanguage);
            updateLanguageButtons(currentLanguage);
            initializeTemarix();
        });
    </script>
</body>
</html>