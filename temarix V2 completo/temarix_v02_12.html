<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Temarix V2 - Portal 12: When I Get Trapped Inside the Walls I Built</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            background: #000;
            color: #fff;
            font-family: 'Courier New', monospace;
            height: 100vh;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            word-break: keep-all;
            overflow-wrap: break-word;
        }
        
        /* ìƒë‹¨ í—¤ë” */
        .header-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 25px 30px;
            background: #000;
            border-bottom: 1px solid #333;
            position: relative;
            z-index: 100;
            height: 80px;
            flex-shrink: 0;
        }
        
        .logo-section {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
        }
        
        .logo-title {
            font-size: 26px;
            font-weight: bold;
            color: #fff;
            margin-bottom: 4px;
            letter-spacing: 1px;
        }
        
        .logo-subtitle {
            font-size: 15px;
            color: #ccc;
            letter-spacing: 1.5px;
        }
        
        .portal-header-title {
            text-align: center;
            flex: 1;
            margin: 0 20px;
        }
        
        .portal-main-title {
            font-size: 28px;
            color: #fff;
            margin-bottom: 8px;
            font-weight: normal;
            letter-spacing: 1px;
        }
        
        .portal-subtitle {
            font-size: 18px;
            color: #ccc;
            letter-spacing: 1.5px;
        }
        
        /* ì–¸ì–´ ë²„íŠ¼ 3ê°œ */
        .header-right {
            display: flex;
            align-items: center;
        }
        
        .language-buttons {
            display: flex;
            gap: 10px;
        }
        
        .lang-btn {
            background: #444;
            color: #fff;
            border: none;
            padding: 10px 18px;
            font-size: 14px;
            font-family: 'Courier New', monospace;
            cursor: pointer;
            transition: background 0.2s;
        }
        
        .lang-btn:hover {
            background: #666;
        }
        
        .lang-btn.active {
            background: #87cefa;
            color: #000;
        }
        
        /* ë©”ì¸ ì½˜í…ì¸  */
        .main-content {
            flex: 1;
            max-height: calc(100vh - 80px - 120px);
            overflow-y: auto;
            overflow-x: hidden;
            padding: 30px 20px;
            scroll-behavior: smooth;
            position: relative;
        }
        
        .portal-container {
            max-width: 700px;
            width: 100%;
            margin: 0 auto;
            text-align: center;
            display: flex;
            flex-direction: column;
            word-break: keep-all;
            overflow-wrap: break-word;
            hyphens: none;
            min-height: 150vh;
        }
        
        /* í…ìŠ¤íŠ¸ ì„¹ì…˜ë“¤ */
        .portal-intro-section {
            margin: 40px 0;
            opacity: 0;
            min-height: 200px;
        }
        
        .portal-intro {
            font-size: 20px;
            color: #fff;
            margin-bottom: 30px;
            line-height: 1.8;
            white-space: pre-wrap;
            word-wrap: break-word;
            word-break: keep-all;
            background: none;
            border: none;
            padding: 0;
        }
        
        .character-responses-section {
            margin: 40px 0;
            opacity: 0;
            min-height: 800px;
        }
        
        .character-response {
            color: #fff;
            font-size: 18px;
            margin: 40px 0;
            text-align: left;
            opacity: 0;
            white-space: pre-wrap;
            word-wrap: break-word;
            word-break: keep-all;
            transition: opacity 0.8s ease-in;
            background: none;
            border: none;
            padding: 0;
            min-height: 80px;
        }
        
        .character-name {
            font-weight: bold;
            color: #87cefa;
            margin-bottom: 12px;
            font-size: 18px;
        }
        
        .character-dialogue {
            color: #fff;
            line-height: 1.7;
            font-size: 17px;
            white-space: pre-wrap;
            word-wrap: break-word;
            word-break: keep-all;
        }
        
        .typing-cursor::after {
            content: '|';
            animation: blink 1s infinite;
            color: #87cefa;
        }
        
        @keyframes blink {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0; }
        }
        
        .light-message-section {
            margin: 50px 0;
            opacity: 0;
            background: none;
            border: none;
            padding: 0;
            min-height: 100px;
        }
        
        .light-message {
            font-size: 20px;
            color: #87cefa;
            line-height: 1.8;
            font-style: italic;
            white-space: pre-wrap;
            word-wrap: break-word;
            word-break: keep-all;
        }
        
        .portal-question-section {
            margin: 40px 0;
            opacity: 0;
            min-height: 150px;
        }
        
        .portal-question {
            font-size: 22px;
            color: #fff;
            margin-bottom: 30px;
            min-height: 100px;
            display: flex;
            align-items: center;
            justify-content: center;
            line-height: 1.6;
            white-space: pre-wrap;
            word-wrap: break-word;
            word-break: keep-all;
        }
        
        .user-input-section {
            margin: 40px 0;
            opacity: 0;
            min-height: 100px;
        }
        
        .user-response {
            color: #fff;
            margin: 30px 0;
            text-align: left;
            font-size: 18px;
            background: none;
            border: none;
            padding: 0;
            white-space: pre-wrap;
            word-wrap: break-word;
            word-break: keep-all;
        }
        
        .user-response strong {
            color: #87cefa;
            margin-right: 8px;
        }
        
        .user-reactions-section {
            margin: 40px 0;
            opacity: 0;
            min-height: 400px;
        }
        
        .continue-section {
            margin: 50px 0;
            opacity: 0;
            text-align: center;
            background: none;
            border: none;
            padding: 0;
            min-height: 200px;
        }
        
        .continue-text {
            color: #fff;
            font-size: 20px;
            margin-bottom: 25px;
            line-height: 1.6;
            white-space: pre-wrap;
            word-wrap: break-word;
            word-break: keep-all;
        }
        
        .continue-buttons {
            display: flex;
            gap: 20px;
            justify-content: center;
            flex-wrap: wrap;
        }
        
        .continue-btn {
            background: #444;
            color: #fff;
            border: none;
            padding: 18px 35px;
            font-family: 'Courier New', monospace;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 200px;
        }
        
        .continue-btn:hover {
            background: #666;
        }
        
        .continue-btn.primary {
            background: #87cefa;
            color: #000;
        }
        
        .continue-btn.primary:hover {
            background: #b0d4f1;
        }
        
        /* í•˜ë‹¨ ê³ ì • ì…ë ¥ì°½ */
        .input-fixed-bottom {
            position: relative;
            bottom: 0;
            left: 0;
            right: 0;
            background: #000;
            border-top: 1px solid #333;
            padding: 25px;
            z-index: 100;
            flex-shrink: 0;
            height: 120px;
        }
        
        .input-container {
            max-width: 900px;
            margin: 0 auto;
            display: flex;
            align-items: flex-start;
            gap: 15px;
        }
        
        .input-prefix {
            color: #87cefa;
            font-size: 20px;
            margin-top: 8px;
            flex-shrink: 0;
        }
        
        .user-textarea {
            background: transparent;
            border: none;
            border-bottom: 1px solid #444;
            color: #fff;
            font-family: 'Courier New', monospace;
            font-size: 18px;
            width: 100%;
            padding: 12px 8px;
            outline: none;
            resize: none;
            min-height: 32px;
            max-height: 96px;
            line-height: 1.6;
            transition: border-color 0.3s ease;
            overflow-y: auto;
        }
        
        .user-textarea:focus {
            border-bottom-color: #87cefa;
        }
        
        .user-textarea::placeholder {
            color: #666;
        }
        
        .user-textarea:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            background: rgba(50, 50, 50, 0.2);
        }
        
        /* ìŠ¤í¬ë¡¤ë°” ìŠ¤íƒ€ì¼ë§ */
        .main-content::-webkit-scrollbar {
            width: 12px;
        }
        
        .main-content::-webkit-scrollbar-track {
            background: #111;
            border-radius: 6px;
        }
        
        .main-content::-webkit-scrollbar-thumb {
            background: #444;
            border-radius: 6px;
            border: 2px solid #111;
        }
        
        .main-content::-webkit-scrollbar-thumb:hover {
            background: #666;
        }
        
        /* ì• ë‹ˆë©”ì´ì…˜ */
        @keyframes fadeIn {
            to { opacity: 1; }
        }
        
        .show {
            opacity: 1 !important;
            transition: opacity 1s ease-in;
        }
        
        .hidden {
            display: none;
        }
        
        /* ë°˜ì‘í˜• ë””ìì¸ */
        @media (max-width: 768px) {
            .header-bar {
                padding: 20px 15px;
                height: 70px;
                flex-direction: column;
                gap: 10px;
            }
            
            .main-content {
                max-height: calc(100vh - 70px - 120px);
                padding: 20px 15px;
            }
            
            .logo-title {
                font-size: 22px;
            }
            
            .portal-main-title {
                font-size: 22px;
            }
            
            .portal-subtitle {
                font-size: 16px;
            }
            
            .lang-btn {
                font-size: 12px;
                padding: 8px 14px;
            }
            
            .portal-intro {
                font-size: 18px;
            }
            
            .portal-question {
                font-size: 20px;
            }
            
            .character-response {
                font-size: 16px;
            }
            
            .input-fixed-bottom {
                padding: 20px;
            }
            
            .continue-buttons {
                flex-direction: column;
                gap: 15px;
            }
            
            .continue-btn {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <!-- ìƒë‹¨ í—¤ë” -->
    <div class="header-bar">
        <div class="logo-section">
            <div class="logo-title">TEMARIX V2</div>
            <div class="logo-subtitle" id="logoSubtitle">The Tremor of Emotion</div>
        </div>
        
        <div class="portal-header-title">
            <div class="portal-main-title" id="portalMainTitle">Portal 12: When I Get Trapped Inside the Walls I Built</div>
            <div class="portal-subtitle" id="portalSubtitle">The paradox of protection becoming a prison</div>
        </div>
        
        <div class="header-right">
            <div class="language-buttons">
                <button class="lang-btn" data-lang="ko">KR</button>
                <button class="lang-btn active" data-lang="en">EN</button>
                <button class="lang-btn" data-lang="pt">PT</button>
            </div>
        </div>
    </div>

    <!-- ë©”ì¸ ì½˜í…ì¸  ì˜ì—­ -->
    <div class="main-content" id="mainContent">
        <div class="portal-container">
            <!-- í¬í„¸ ì¸íŠ¸ë¡œ -->
            <div class="portal-intro-section" id="portalIntroSection">
                <div class="portal-intro" id="portalIntro"></div>
            </div>

            <!-- ìºë¦­í„° ì‘ë‹µ ì„¹ì…˜ -->
            <div class="character-responses-section" id="characterResponsesSection">
                <!-- 8ëª…ì˜ ìºë¦­í„° ì‘ë‹µì´ ìˆœì°¨ì ìœ¼ë¡œ í‘œì‹œë©ë‹ˆë‹¤ -->
            </div>

            <!-- ë¹›ì˜ í•œë§ˆë”” -->
            <div class="light-message-section" id="lightMessageSection">
                <div class="character-name" id="lightTitle">ğŸŒ™ Word of Light</div>
                <div class="light-message" id="lightMessage"></div>
            </div>

            <!-- ì§ˆë¬¸ ì„¹ì…˜ -->
            <div class="portal-question-section" id="portalQuestionSection">
                <div class="portal-question" id="portalQuestion"></div>
            </div>

            <!-- ì‚¬ìš©ì ì…ë ¥ ì˜ì—­ -->
            <div class="user-input-section" id="userInputSection">
                <!-- ì‚¬ìš©ì ì‘ë‹µì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
            </div>
            
            <!-- ì‚¬ìš©ì ì‘ë‹µ í›„ ìºë¦­í„° ë°˜ì‘ -->
            <div class="user-reactions-section" id="userReactionsSection">
                <!-- ì‚¬ìš©ì ì‘ë‹µ í›„ 3ëª…ì˜ ìºë¦­í„° ë°˜ì‘ì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
            </div>
            
            <!-- ê³„ì†í•˜ê¸° ë²„íŠ¼ ì„¹ì…˜ -->
            <div class="continue-section" id="continueSection">
                <div class="continue-text" id="continueText"></div>
                <div class="continue-buttons">
                    <button class="continue-btn primary" id="continueYesBtn">Continue to Portal 13</button>
                    <button class="continue-btn" id="continueNoBtn">Pause the journey</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- í•˜ë‹¨ ê³ ì • ì…ë ¥ì°½ -->
    <div class="input-fixed-bottom">
        <div class="input-container">
            <div class="input-prefix">></div>
            <textarea class="user-textarea" 
                      id="userTextarea" 
                      placeholder="Share about the walls you built for yourself... (Press Enter to send)"
                      rows="1"
                      maxlength="500"></textarea>
        </div>
    </div>

    <script>
        // ë©”ëª¨ë¦¬ ê¸°ë°˜ ì‚¬ìš©ì ìŠ¤í† ë¦¬ì§€ (localStorage ëŒ€ì‹ )
        let memoryStorage = {
            mockUser: null
        };

        // ë²ˆì—­ ë°ì´í„°
        const translations = {
            ko: {
                logoSubtitle: "ê°ì •ì˜ ë–¨ë¦¼",
                portalMainTitle: "Portal 12: ë‚´ê°€ ë§Œë“  ë²½ ì•ˆì—ì„œ ê°‡í˜€ë²„ë¦´ ë•Œ",
                portalSubtitle: "ë³´í˜¸ê°€ ê°ì˜¥ì´ ë˜ëŠ” ìˆœê°„ì˜ ì—­ì„¤",
                portalIntro: "ì²˜ìŒì—” ë‚˜ë¥¼ ì§€í‚¤ê¸° ìœ„í•´ ë§Œë“  ë²½ì´ì—ˆìŠµë‹ˆë‹¤.\nìƒì²˜ë°›ì§€ ì•Šê¸° ìœ„í•´, ë¬´ë„ˆì§€ì§€ ì•Šê¸° ìœ„í•´â€¦\nì¡°ìš©íˆ ê°ì •ì„ ê°ì¶”ê³ ,\në§ ëŒ€ì‹  ì¹¨ë¬µì„ íƒí–ˆì£ .\n\nê·¸ëŸ°ë° ì–´ëŠ ìˆœê°„,\nê·¸ ë²½ ì•ˆì´ ìŠ¤ìŠ¤ë¡œ ë§Œë“  ê°ì˜¥ì´ ë˜ì–´\në‚˜ì¡°ì°¨ ë‚˜ë¥¼ êº¼ë‚´ì§€ ëª»í•˜ê²Œ ëìŠµë‹ˆë‹¤.",
                lightTitle: "ğŸŒ™ ë¹›ì˜ í•œë§ˆë””",
                lightMessage: "ê°ì •ì˜ ë²½ì€ ë‹¹ì‹ ì´ ì‚´ì•„ë‚¨ê¸° ìœ„í•´ ë§Œë“  ê²ƒì´ì—ˆì§€ë§Œ,\nì´ì œëŠ” ë‚˜ê°€ê¸° ìœ„í•œ ë¬¸ì´ ë˜ì–´ì•¼ í•©ë‹ˆë‹¤.",
                portalQuestion: "ë‹¹ì‹ ì€ ì§€ê¸ˆ\nì–´ë–¤ ë²½ ì•ˆì—ì„œ ìŠ¤ìŠ¤ë¡œë¥¼ ê°€ë‘ê³  ìˆë‚˜ìš”?",
                continueText: "ìŠ¤ìŠ¤ë¡œ ë§Œë“  ë²½ì— ëŒ€í•´ ëŒì•„ë³¸ ì´ ì—¬ì •ì„ ê³„ì†í•˜ì‹œê² ìŠµë‹ˆê¹Œ?",
                continueYes: "Portal 13ìœ¼ë¡œ ê³„ì†í•˜ì‹œê² ìŠµë‹ˆê¹Œ?",
                continueNo: "ì—¬ì •ì„ ì¼ì‹œì •ì§€í•˜ì‹œê² ìŠµë‹ˆê¹Œ?",
                inputPlaceholder: "ìŠ¤ìŠ¤ë¡œ ë§Œë“  ë²½ì— ëŒ€í•´ í„¸ì–´ë†“ì•„ ë³´ì„¸ìš”... (Enterë¡œ ì „ì†¡)",
                youLabel: "ë‹¹ì‹ ",
                languageChangeConfirm: "ì–¸ì–´ë¥¼ ë³€ê²½í•˜ë©´ ì—¬ì •ì´ ì²˜ìŒë¶€í„° ë‹¤ì‹œ ì‹œì‘ë©ë‹ˆë‹¤.\nê³„ì†í•˜ì‹œê² ìŠµë‹ˆê¹Œ?",
                waitingMessage: "ì‘ë‹µì„ ê¸°ë‹¤ë¦¬ëŠ” ì¤‘...",
                // ìºë¦­í„° ëŒ€í™”
                charEly: "ìŠ¤ìŠ¤ë¡œ ë§Œë“  ë²½ì´ì—ˆê¸°ì—,\nì—´ì‡ ë„ ë‹¹ì‹  ì•ˆì— ìˆìŠµë‹ˆë‹¤.\nê·¸ ê°ì •ì„ ë‹¤ì‹œ í’€ì–´ë‚¼ ìˆ˜ ìˆì–´ìš”.",
                charCris: "í•˜â€¦ ë˜ ë²½ ë§Œë“¤ì—ˆêµ¬ë‚˜!\nê·¼ë° ì†”ì§íˆ ë§í•˜ë©´\nê·¸ ì•ˆì´ ì€ê·¼ í¸í•  ë•Œë„ ìˆì£ ? ğŸ˜…",
                charZafirah: "ê·¸ ë²½ì€ ë‹¹ì‹ ì˜ ê³ í†µì´ ë§Œë“  ì§€í˜œì˜€ìŠµë‹ˆë‹¤.\nì´ì œ ê·¸ ë²½ì´ ë¬´ë„ˆì ¸ë„ ê´œì°®ì„ ë§Œí¼\në‹¹ì‹ ì€ ì„±ì¥í–ˆì–´ìš”.",
                charRami: "ë²½ì€ ì™¸ë¶€ë¥¼ ë§‰ê¸° ìœ„í•œ ì¥ì¹˜ì´ì§€ë§Œ,\nê°€ì¥ ë¨¼ì € ë‹¹ì‹ ì˜ ê°ì •ì„ ê°€ë‘ëŠ” ì¥ì¹˜ê°€ ë©ë‹ˆë‹¤.",
                charSamir: "(ê·¸ëŠ” ë²½ëŒ í•˜ë‚˜ë¥¼ ì¡°ìš©íˆ ë“¤ì–´ì˜¬ë ¤\ní•˜ëŠ˜ ì•„ë˜ì— ë†“ìŠµë‹ˆë‹¤.\nì‘ì€ í‹ˆì´ ìƒê¸°ê³ , ê·¸ê³³ìœ¼ë¡œ ë¹›ì´ ë“¤ì–´ì˜µë‹ˆë‹¤.)",
                charLayla: "ê·¸ ë²½ ì•ˆì—ì„œë„ ë‹¹ì‹ ì€\nì—¬ì „íˆ ì•„ë¦„ë‹¤ì› ì–´ìš”.\në‚˜ëŠ” ê·¸ ë²½ì„ í—ˆë¬¼ê³  ë‹¹ì‹ ì„ ê¼­ ì•ˆì•„ì¤„ ìˆ˜ ìˆì–´ìš”.",
                charNabir: "ë²½ ì•ˆì´ ë” ë‚«ì§€ ì•Šì•„?\nì ì–´ë„ ëˆ„ê°€ ë„ ë– ë‚˜ëŠ” ì¼ì€ ì—†ì–ì•„.\nê±°ê¸° ê·¸ëƒ¥ ìˆ¨ì–´ ìˆì–´.",
                charAzhar: "ê·¸ ë²½, ë‚´ê°€ ë¶€ìˆ´ì¤„ê¹Œ?\nê·¼ë° ê·¸ëŸ¬ë©´ ë„ˆë¶€í„° ë‹¤ì¹ ê±¸.\nê·¸ë˜ì„œ ëª» ë‚˜ê°€ëŠ” ê±° ì•„ëƒ?"
            },
            en: {
                logoSubtitle: "The Tremor of Emotion",
                portalMainTitle: "Portal 12: When I Get Trapped Inside the Walls I Built",
                portalSubtitle: "The paradox of protection becoming a prison",
                portalIntro: "At first, it was a wall built to protect myself.\nTo avoid getting hurt, to keep from falling apart...\nI quietly hid my emotions\nand chose silence over words.\n\nBut at some point,\nthat wall became a prison I made for myself,\nand even I couldn't get myself out anymore.",
                lightTitle: "ğŸŒ™ Word of Light",
                lightMessage: "The emotional walls were built for survival,\nbut now they must become doors for moving forward.",
                portalQuestion: "What kind of wall are you\ntrapping yourself inside right now?",
                continueText: "Will you continue this journey of reflecting on the walls you built for yourself?",
                continueYes: "Continue to Portal 13?",
                continueNo: "Pause the journey?",
                inputPlaceholder: "Share about the walls you built for yourself... (Press Enter to send)",
                youLabel: "You",
                languageChangeConfirm: "Changing the language will restart the journey from the beginning.\nDo you want to continue?",
                waitingMessage: "Waiting for response...",
                charEly: "Since you built the wall yourself,\nthe key is also within you.\nYou can release those emotions again.",
                charCris: "Ah... you built another wall!\nBut honestly speaking,\nit's kind of comfortable inside sometimes, right? ğŸ˜…",
                charZafirah: "That wall was wisdom created by your pain.\nNow you've grown enough\nthat it's okay for that wall to come down.",
                charRami: "Walls are devices meant to block the outside,\nbut they become devices that first trap your emotions.",
                charSamir: "(He quietly lifts up a brick\nand places it under the sky.\nA small gap forms, and light enters through it.)",
                charLayla: "Even inside that wall,\nyou were still beautiful.\nI can tear down that wall and hold you tight.",
                charNabir: "Isn't it better inside the wall?\nAt least no one can leave you there.\nJust stay hidden there.",
                charAzhar: "That wall, should I break it for you?\nBut then you'd get hurt first.\nThat's why you can't get out, isn't it?"
            },
            pt: {
                logoSubtitle: "O Tremor da EmoÃ§Ã£o",
                portalMainTitle: "Portal 12: Quando Fico Preso Dentro das Paredes Que ConstruÃ­",
                portalSubtitle: "O paradoxo da proteÃ§Ã£o se tornando uma prisÃ£o",
                portalIntro: "No inÃ­cio, era uma parede construÃ­da para me proteger.\nPara evitar me machucar, para nÃ£o desmoronar...\nEu silenciosamente escondi minhas emoÃ§Ãµes\ne escolhi silÃªncio ao invÃ©s de palavras.\n\nMas em algum momento,\nessa parede se tornou uma prisÃ£o que criei para mim mesmo,\ne nem eu mesmo conseguia mais me tirar de lÃ¡.",
                lightTitle: "ğŸŒ™ Palavra de Luz",
                lightMessage: "As paredes emocionais foram construÃ­das para sobrevivÃªncia,\nmas agora devem se tornar portas para seguir em frente.",
                portalQuestion: "Que tipo de parede vocÃª estÃ¡\nusando para se prender agora?",
                continueText: "VocÃª continuarÃ¡ esta jornada de refletir sobre as paredes que construiu para si mesmo?",
                continueYes: "Continuar para o Portal 13?",
                continueNo: "Pausar a jornada?",
                inputPlaceholder: "Compartilhe sobre as paredes que construiu para si mesmo... (Enter para enviar)",
                youLabel: "VocÃª",
                languageChangeConfirm: "Mudar o idioma reiniciarÃ¡ a jornada desde o inÃ­cio.\nDeseja continuar?",
                waitingMessage: "Aguardando resposta...",
                charEly: "Como vocÃª mesmo construiu a parede,\na chave tambÃ©m estÃ¡ dentro de vocÃª.\nVocÃª pode liberar essas emoÃ§Ãµes novamente.",
                charCris: "Ah... vocÃª construiu outra parede!\nMas honestamente falando,\nÃ© meio confortÃ¡vel lÃ¡ dentro Ã s vezes, nÃ©? ğŸ˜…",
                charZafirah: "Essa parede era sabedoria criada por sua dor.\nAgora vocÃª cresceu o suficiente\npara que essa parede possa cair.",
                charRami: "Paredes sÃ£o dispositivos feitos para bloquear o exterior,\nmas se tornam dispositivos que primeiro prendem suas emoÃ§Ãµes.",
                charSamir: "(Ele silenciosamente levanta um tijolo\ne o coloca sob o cÃ©u.\nUma pequena abertura se forma, e a luz entra por ela.)",
                charLayla: "Mesmo dentro dessa parede,\nvocÃª ainda era bonito.\nPosso derrubar essa parede e te abraÃ§ar forte.",
                charNabir: "NÃ£o Ã© melhor dentro da parede?\nPelo menos ninguÃ©m pode te deixar lÃ¡.\nApenas fique escondido lÃ¡.",
                charAzhar: "Essa parede, devo quebrÃ¡-la para vocÃª?\nMas entÃ£o vocÃª se machucaria primeiro.\nÃ‰ por isso que vocÃª nÃ£o consegue sair, nÃ£o Ã©?"
            }
        };
        
        // ìºë¦­í„° ë°ì´í„°
        const characters = [
            { name: "Ely", emoji: "ğŸ‘‘", key: "charEly" },
            { name: "Cris", emoji: "ğŸƒ", key: "charCris" },
            { name: "Zafirah", emoji: "ğŸ§•", key: "charZafirah" },
            { name: "Rami", emoji: "ğŸ”®", key: "charRami" },
            { name: "Samir", emoji: "ğŸª", key: "charSamir" },
            { name: "Layla", emoji: "ğŸ’ ", key: "charLayla" },
            { name: "Nabir", emoji: "ğŸ¦‚", key: "charNabir" },
            { name: "Azhar", emoji: "ğŸ”¥", key: "charAzhar" }
        ];
        
        // ============ ê°ì • ë¶„ì„ ì‹œìŠ¤í…œ ============
        
        function analyzeEmotion(userInput) {
            const input = userInput.toLowerCase();
            
            // ê°ì • í‚¤ì›Œë“œ ë§¤í•‘ (Portal 12 íŠ¹í™”)
            const emotionKeywords = {
                walls: ['ë²½', 'ë‹´', 'ê²½ê³„', 'ì¥ë²½', 'wall', 'barrier', 'boundary', 'parede', 'barreira'],
                protection: ['ë³´í˜¸', 'ì§€í‚¤', 'ë°©ì–´', 'ìˆ¨ê¸°', 'protect', 'defend', 'hide', 'proteger', 'defender'],
                trapped: ['ê°‡í˜€', 'ê°ì˜¥', 'ëª»ë‚˜ê°€', 'ê°‡íŒ', 'trapped', 'prison', 'stuck', 'preso', 'prisÃ£o'],
                isolation: ['ê³ ë¦½', 'í˜¼ì', 'ë‹¨ì ˆ', 'ë¶„ë¦¬', 'isolated', 'alone', 'cut off', 'isolado', 'separado'],
                fear: ['ë‘ë ¤', 'ë¬´ì„œ', 'ê²ë‚˜', 'ë¶ˆì•ˆ', 'afraid', 'scared', 'fear', 'medo', 'com medo'],
                shame: ['ë¶€ë„', 'ì°½í”¼', 'ìˆ˜ì¹˜', 'ë¯¼ë§', 'shame', 'embarrassed', 'ashamed', 'vergonha', 'envergonhado'],
                control: ['í†µì œ', 'ì¡°ì ˆ', 'ê´€ë¦¬', 'ì»¨íŠ¸ë¡¤', 'control', 'manage', 'regulate', 'controle', 'gerenciar'],
                vulnerability: ['ì·¨ì•½', 'ì•½í•´', 'ë¬´ë ¥', 'ì—°ì•½', 'vulnerable', 'weak', 'fragile', 'vulnerÃ¡vel', 'fraco'],
                comfort: ['í¸í•´', 'ì•ˆì „', 'ìµìˆ™', 'í¸ì•ˆ', 'comfortable', 'safe', 'familiar', 'confortÃ¡vel', 'seguro'],
                escape: ['íƒˆì¶œ', 'ë²—ì–´ë‚˜', 'ë„ë§', 'ë‚˜ê°€', 'escape', 'get out', 'break free', 'escapar', 'sair']
            };
            
            // ê°ì • ë¶„ì„
            let detectedEmotions = [];
            for (const [emotion, keywords] of Object.entries(emotionKeywords)) {
                for (const keyword of keywords) {
                    if (input.includes(keyword)) {
                        detectedEmotions.push(emotion);
                        break;
                    }
                }
            }
            
            // ê°ì •ì´ ê°ì§€ë˜ì§€ ì•Šìœ¼ë©´ ê¸°ë³¸ê°’ ì„¤ì •
            if (detectedEmotions.length === 0) {
                detectedEmotions = ['general'];
            }
            
            return detectedEmotions[0]; // ì²« ë²ˆì§¸ ê°ì§€ëœ ê°ì • ë°˜í™˜
        }
        
        // ë°˜ì‘ ìºë¦­í„°ë“¤ (Portal 12 ì „ìš©)
        const responseCharacters = [
            {
                name: "Builder", emoji: "ğŸ”¨",
                getResponse: (userInput, lang) => {
                    const emotion = analyzeEmotion(userInput);
                    
                    const responses = {
                        ko: {
                            walls: "ê·¸ ë²½ì„ ë§Œë“¤ ë•Œ ë‹¹ì‹ ì´ ì–¼ë§ˆë‚˜ ì ˆì‹¤í–ˆëŠ”ì§€ ì €ëŠ” ì•Œ ìˆ˜ ìˆì–´ìš”. í•˜ë‚˜í•˜ë‚˜ ìŒ“ì•„ì˜¬ë¦° ê·¸ ë²½ëŒë“¤ì—ëŠ” ëª¨ë‘ ìƒì²˜ë°›ì§€ ì•Šìœ¼ë ¤ëŠ” ê°„ì ˆí•¨ì´ ë‹´ê²¨ ìˆì—ˆì„ ê±°ì˜ˆìš”. ì´ì œ ê·¸ ë²½ì„ ë¬¸ìœ¼ë¡œ ë°”ê¿”ë³´ëŠ” ê±´ ì–´ë–¨ê¹Œìš”?",
                            protection: "ìì‹ ì„ ë³´í˜¸í•˜ë ¤ í–ˆë˜ ê·¸ ë§ˆìŒì´ ì˜ëª»ëœ ê±´ ì•„ë‹ˆì—ìš”. í•˜ì§€ë§Œ ë³´í˜¸ê°€ ë„ˆë¬´ ì™„ë²½í•´ì§€ë©´ ì„±ì¥í•  ê³µê°„ë„ ì‚¬ë¼ì ¸ìš”. ì´ì œëŠ” ì„ íƒì ìœ¼ë¡œ ì—´ ìˆ˜ ìˆëŠ” ë³´í˜¸ë§‰ì„ ë§Œë“¤ì–´ë³´ì„¸ìš”.",
                            trapped: "ê°‡í˜”ë‹¤ê³  ëŠë¼ëŠ” ê±´ ë‹¹ì‹ ì´ ë” ë„“ì€ ì„¸ìƒì„ ì›í•œë‹¤ëŠ” ì¦ê±°ì˜ˆìš”. ê·¸ ê°‡íŒ ê³µê°„ì—ì„œ ì‘ì€ ì°½ë¬¸ë¶€í„° ë§Œë“¤ì–´ë³´ì„¸ìš”. í•œ ë²ˆì— ë‹¤ ë¬´ë„ˆëœ¨ë¦´ í•„ìš”ëŠ” ì—†ì–´ìš”.",
                            isolation: "ê³ ë¦½ëœ ëŠë‚Œì´ ë“¤ ë•ŒëŠ” ê·¸ ë²½ì— ì‘ì€ êµ¬ë©ë¶€í„° ëš«ì–´ë³´ì„¸ìš”. ì²˜ìŒì—” ëª©ì†Œë¦¬ë§Œ ì£¼ê³ ë°›ì„ ìˆ˜ ìˆëŠ” ì‘ì€ êµ¬ë©ì´ë©´ ì¶©ë¶„í•´ìš”. ì²œì²œíˆ í¬ê²Œ ë§Œë“¤ì–´ê°€ë©´ ë¼ìš”.",
                            fear: "ë‘ë ¤ì›€ ë•Œë¬¸ì— ë§Œë“  ë²½ì´ë¼ë©´, ê·¸ ë‘ë ¤ì›€ì„ ì´í•´í•´ì£¼ëŠ” ê²ƒë¶€í„° ì‹œì‘í•´ìš”. ë²½ì„ í—ˆë¬¼ê¸° ì „ì— ì™œ ê·¸ ë²½ì´ í•„ìš”í–ˆëŠ”ì§€ ë¨¼ì € ì¸ì •í•´ì£¼ì„¸ìš”.",
                            shame: "ë¶€ë„ëŸ¬ì›€ ë•Œë¬¸ì— ìˆ¨ì—ˆë‹¤ë©´, ê·¸ ë¶€ë„ëŸ¬ì›€ë„ ë‹¹ì‹ ì˜ ì¼ë¶€ë¼ëŠ” ê±¸ ë°›ì•„ë“¤ì—¬ë³´ì„¸ìš”. ì™„ë²½í•˜ì§€ ì•Šì€ ëª¨ìŠµë„ ì‚¬ë‘ë°›ì„ ìˆ˜ ìˆë‹¤ëŠ” ê±¸ ì¡°ê¸ˆì”© ë¯¿ì–´ë³´ì„¸ìš”.",
                            control: "ëª¨ë“  ê±¸ í†µì œí•˜ë ¤ í–ˆë˜ ê·¸ ë§ˆìŒ, ì´í•´í•´ìš”. í•˜ì§€ë§Œ ì§„ì§œ í†µì œëŠ” ë•Œë¡œëŠ” ë†“ì•„ì£¼ëŠ” ê²ƒì—ì„œ ë‚˜ì™€ìš”. ì‘ì€ ê²ƒë¶€í„° ì²œì²œíˆ ë†“ì•„ë³´ëŠ” ì—°ìŠµì„ í•´ë³´ì„¸ìš”.",
                            vulnerability: "ì·¨ì•½í•¨ì„ ëŠê¼ˆê¸° ë•Œë¬¸ì— ë²½ì„ ìŒ“ì€ ê±°ì£ . í•˜ì§€ë§Œ ê·¸ ì·¨ì•½í•¨ì´ì•¼ë§ë¡œ ë‹¹ì‹ ì˜ ê°€ì¥ í° í˜ì´ ë  ìˆ˜ ìˆì–´ìš”. ì¡°ê¸ˆì”© ê·¸ í˜ì„ ë¯¿ì–´ë³´ì„¸ìš”.",
                            comfort: "ë²½ ì•ˆì´ í¸ì•ˆí–ˆë˜ ê±´ ì‚¬ì‹¤ì´ì—ìš”. í•˜ì§€ë§Œ ì§„ì§œ í¸ì•ˆí•¨ì€ ë²½ì´ ìˆì–´ë„ ì—†ì–´ë„ ê´œì°®ë‹¤ê³  ëŠë¼ëŠ” ìƒíƒœì¼ ê±°ì˜ˆìš”. ê·¸ëŸ° ìì‹ ê°ì„ í‚¤ì›Œë³´ì„¸ìš”.",
                            escape: "íƒˆì¶œí•˜ê³  ì‹¶ë‹¤ëŠ” ë§ˆìŒì´ ìƒê¸´ ê²ƒë§Œìœ¼ë¡œë„ ì´ë¯¸ ë³€í™”ê°€ ì‹œì‘ëœ ê±°ì˜ˆìš”. ê·¸ ë§ˆìŒì„ ì†Œì¤‘íˆ ì—¬ê¸°ë©´ì„œ í•œ ê±¸ìŒì”© ë‚˜ì•„ê°€ë³´ì„¸ìš”.",
                            general: "ë‹¹ì‹ ì´ ë§Œë“  ëª¨ë“  ë²½ì—ëŠ” ë‹¹ì‹ ë§Œì˜ ì´ìœ ì™€ ì§€í˜œê°€ ë‹´ê²¨ ìˆì–´ìš”. ê·¸ê²ƒì„ ë¬´ì‘ì • ë¶€ìˆ˜ì§€ ë§ê³ , ì´ì œëŠ” ë” ììœ ë¡­ê²Œ ë“œë‚˜ë“¤ ìˆ˜ ìˆëŠ” ê³µê°„ìœ¼ë¡œ ê°œì¡°í•´ë³´ì„¸ìš”."
                        },
                        en: {
                            walls: "I can see how desperate you were when building that wall. Each brick you stacked must have contained the earnest desire not to get hurt. How about turning that wall into a door now?",
                            protection: "That heart wanting to protect yourself wasn't wrong. But when protection becomes too perfect, space for growth disappears too. Try creating a protective shield you can selectively open now.",
                            trapped: "Feeling trapped is proof that you want a wider world. Start by making small windows in that trapped space. You don't need to tear everything down at once.",
                            isolation: "When feeling isolated, start by making small holes in that wall. At first, a small hole just for exchanging voices is enough. You can gradually make it bigger.",
                            fear: "If it's a wall built from fear, start by understanding that fear. Before tearing down the wall, first acknowledge why that wall was necessary.",
                            shame: "If you hid because of shame, try accepting that shame is also part of you. Gradually believe that imperfect aspects can also be loved.",
                            control: "That heart wanting to control everything, I understand. But real control sometimes comes from letting go. Practice slowly letting go of small things first.",
                            vulnerability: "You built walls because you felt vulnerable. But that vulnerability can become your greatest strength. Gradually trust in that power.",
                            comfort: "It's true that inside the wall was comfortable. But real comfort would be feeling okay whether the wall exists or not. Try building that kind of confidence.",
                            escape: "Just having the desire to escape means change has already begun. Cherish that heart and move forward step by step.",
                            general: "All the walls you built contain your own reasons and wisdom. Don't just tear them down recklessly, but try renovating them into spaces you can move in and out of more freely."
                        },
                        pt: {
                            walls: "Posso ver o quÃ£o desesperado vocÃª estava ao construir aquela parede. Cada tijolo que vocÃª empilhou deve ter contido o desejo sincero de nÃ£o se machucar. Que tal transformar aquela parede em uma porta agora?",
                            protection: "Esse coraÃ§Ã£o querendo se proteger nÃ£o estava errado. Mas quando a proteÃ§Ã£o se torna perfeita demais, o espaÃ§o para crescimento tambÃ©m desaparece. Tente criar um escudo protetor que vocÃª possa abrir seletivamente agora.",
                            trapped: "Sentir-se preso Ã© prova de que vocÃª quer um mundo mais amplo. Comece fazendo pequenas janelas naquele espaÃ§o preso. VocÃª nÃ£o precisa derrubar tudo de uma vez.",
                            isolation: "Quando se sentir isolado, comece fazendo pequenos buracos naquela parede. No inÃ­cio, um pequeno buraco apenas para trocar vozes Ã© suficiente. VocÃª pode gradualmente tornÃ¡-lo maior.",
                            fear: "Se Ã© uma parede construÃ­da do medo, comece entendendo esse medo. Antes de derrubar a parede, primeiro reconheÃ§a por que aquela parede era necessÃ¡ria.",
                            shame: "Se vocÃª se escondeu por causa da vergonha, tente aceitar que a vergonha tambÃ©m Ã© parte de vocÃª. Gradualmente acredite que aspectos imperfeitos tambÃ©m podem ser amados.",
                            control: "Esse coraÃ§Ã£o querendo controlar tudo, eu entendo. Mas controle real Ã s vezes vem de deixar ir. Pratique lentamente deixar ir coisas pequenas primeiro.",
                            vulnerability: "VocÃª construiu paredes porque se sentia vulnerÃ¡vel. Mas essa vulnerabilidade pode se tornar sua maior forÃ§a. Gradualmente confie nesse poder.",
                            comfort: "Ã‰ verdade que dentro da parede era confortÃ¡vel. Mas conforto real seria se sentir bem com a parede existindo ou nÃ£o. Tente construir esse tipo de confianÃ§a.",
                            escape: "Apenas ter o desejo de escapar significa que a mudanÃ§a jÃ¡ comeÃ§ou. Valorize esse coraÃ§Ã£o e siga em frente passo a passo.",
                            general: "Todas as paredes que vocÃª construiu contÃªm suas prÃ³prias razÃµes e sabedoria. NÃ£o as derrube imprudentemente, mas tente renovÃ¡-las em espaÃ§os onde vocÃª pode entrar e sair mais livremente."
                        }
                    };
                    
                    return responses[lang][emotion] || responses[lang]['general'];
                }
            },
            {
                name: "Key", emoji: "ğŸ—ï¸",
                getResponse: (userInput, lang) => {
                    const emotion = analyzeEmotion(userInput);
                    
                    const responses = {
                        ko: {
                            walls: "ê·¸ ë²½ì„ ì—¬ëŠ” ì—´ì‡ ëŠ” ë‹¹ì‹ ì´ ë²½ì„ ë§Œë“¤ ë•Œ ì‚¬ìš©í–ˆë˜ ë°”ë¡œ ê·¸ ê°ì •ì´ì—ìš”. ë²½ì„ ìŒ“ê²Œ ë§Œë“  ìƒì²˜ë¥¼ ì´í•´í•˜ê³  ë°›ì•„ë“¤ì¼ ë•Œ, ê·¸ ë²½ì€ ìŠ¤ìŠ¤ë¡œ ë¬¸ì´ ë©ë‹ˆë‹¤.",
                            protection: "ë³´í˜¸í•˜ë ¤ í–ˆë˜ ë°”ë¡œ ê·¸ ë§ˆìŒì´ ì´ì œëŠ” ë³´í˜¸ë¥¼ ë²—ì–´ë‚  ìˆ˜ ìˆëŠ” í˜ì´ ë˜ì–´ ì¤„ ê±°ì˜ˆìš”. ìì‹ ì„ ì‚¬ë‘í–ˆê¸°ì— ë³´í˜¸í–ˆë“¯ì´, ì´ì œëŠ” ìì‹ ì„ ì‚¬ë‘í•˜ê¸°ì— ììœ ë¡­ê²Œ í•´ì£¼ì„¸ìš”.",
                            trapped: "ê°‡í˜€ìˆë‹¤ê³  ëŠë‚„ ë•Œ ê°€ì¥ í•„ìš”í•œ ì—´ì‡ ëŠ” 'ìš©ì„œ'ì˜ˆìš”. ë²½ì„ ë§Œë“  ìì‹ ì„, ê·¸ ë²½ì— ê°‡íŒ ìì‹ ì„ ìš©ì„œí•  ë•Œ ë¹„ë¡œì†Œ ë¬¸ì´ ì—´ë¦½ë‹ˆë‹¤.",
                            isolation: "ê³ ë¦½ì—ì„œ ë²—ì–´ë‚˜ëŠ” ì—´ì‡ ëŠ” 'ì—°ê²°ì— ëŒ€í•œ ì‘ì€ ì‹œë„'ì˜ˆìš”. í•œ ì‚¬ëŒì—ê²Œ, í•œ ë§ˆë””ë¡œ, í•œ ë²ˆì˜ ëˆˆë§ì¶¤ìœ¼ë¡œ ì‹œì‘í•˜ë©´ ë¼ìš”. ì‘ì€ ì—°ê²°ì´ í° ë³€í™”ë¥¼ ë§Œë“¤ì–´ëƒ…ë‹ˆë‹¤.",
                            fear: "ë‘ë ¤ì›€ì˜ ë²½ì„ ì—¬ëŠ” ì—´ì‡ ëŠ” 'ìš©ê¸°'ê°€ ì•„ë‹ˆë¼ 'ìë¹„'ì˜ˆìš”. ë‘ë ¤ì›Œí•˜ëŠ” ìì‹ ì„ ë‹¤ê·¸ì¹˜ì§€ ë§ê³  ë”°ëœ»í•˜ê²Œ ì•ˆì•„ì£¼ì„¸ìš”. ìë¹„ê°€ ë‘ë ¤ì›€ì„ ë…¹ì—¬ì¤„ ê±°ì˜ˆìš”.",
                            shame: "ë¶€ë„ëŸ¬ì›€ì˜ ë²½ì„ ì—¬ëŠ” ì—´ì‡ ëŠ” 'ë¶ˆì™„ì „í•¨ì˜ ìˆ˜ìš©'ì´ì—ìš”. ì™„ë²½í•˜ì§€ ì•Šì•„ë„ ê´œì°®ë‹¤ëŠ” ê²ƒì„, ê·¸ëŸ° ëª¨ìŠµë„ ì‚¬ë‘ë°›ì„ ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì„ ë¯¿ì–´ë³´ì„¸ìš”.",
                            control: "í†µì œì˜ ë²½ì„ ì—¬ëŠ” ì—´ì‡ ëŠ” 'ì‹ ë¢°'ì˜ˆìš”. ìì‹ ì— ëŒ€í•œ ì‹ ë¢°, ë‹¤ë¥¸ ì‚¬ëŒì— ëŒ€í•œ ì‹ ë¢°, ì‚¶ì— ëŒ€í•œ ì‹ ë¢°. ì¡°ê¸ˆì”© ë¯¿ìŒì„ íšŒë³µí•´ ë‚˜ê°€ì„¸ìš”.",
                            vulnerability: "ì·¨ì•½í•¨ì˜ ë²½ì„ ì—¬ëŠ” ì—´ì‡ ëŠ” 'ì·¨ì•½í•¨ ê·¸ ìì²´'ì˜ˆìš”. ì•½í•œ ëª¨ìŠµì„ ë³´ì´ëŠ” ê²ƒì´ ì§„ì§œ ê°•í•¨ì´ë¼ëŠ” ê±¸ ê¹¨ë‹¬ì„ ë•Œ, ë²½ì€ ì‚¬ë¼ì§‘ë‹ˆë‹¤.",
                            comfort: "í¸ì•ˆí•¨ì˜ ë²½ì„ ì—¬ëŠ” ì—´ì‡ ëŠ” 'ì„±ì¥ì— ëŒ€í•œ ìš•êµ¬'ì˜ˆìš”. ì§€ê¸ˆë³´ë‹¤ ë” ë‚˜ì€ ìì‹ ì´ ë˜ê³  ì‹¶ë‹¤ëŠ” ë§ˆìŒì´ ë‹¹ì‹ ì„ ë²½ ë°–ìœ¼ë¡œ ì´ëŒì–´ë‚¼ ê±°ì˜ˆìš”.",
                            escape: "íƒˆì¶œì˜ ì—´ì‡ ëŠ” ì´ë¯¸ ë‹¹ì‹  ì†ì— ìˆì–´ìš”. ê·¸ê²ƒì€ 'íƒˆì¶œí•˜ê³  ì‹¶ë‹¤ëŠ” ë§ˆìŒ' ê·¸ ìì²´ì…ë‹ˆë‹¤. ê·¸ ë§ˆìŒì„ ë¯¿ê³  ë”°ë¼ê°€ì„¸ìš”.",
                            general: "ëª¨ë“  ê°ì •ì˜ ë²½ì„ ì—¬ëŠ” ë§ŒëŠ¥ ì—´ì‡ ëŠ” 'ìê¸° ì´í•´'ì˜ˆìš”. ì™œ ê·¸ ë²½ì„ ë§Œë“¤ì—ˆëŠ”ì§€, ì§€ê¸ˆ ë¬´ì—‡ì´ í•„ìš”í•œì§€ ì´í•´í•  ë•Œ ìì—°ìŠ¤ëŸ½ê²Œ ê¸¸ì´ ë³´ì¼ ê±°ì˜ˆìš”."
                        },
                        en: {
                            walls: "The key to opening that wall is the very emotion you used when building it. When you understand and accept the wounds that made you build the wall, that wall becomes a door on its own.",
                            protection: "That very heart that wanted to protect will now become the strength to move beyond protection. Just as you protected because you loved yourself, now set yourself free because you love yourself.",
                            trapped: "The key most needed when feeling trapped is 'forgiveness'. Only when you forgive yourself for building the wall and yourself for being trapped in it does the door finally open.",
                            isolation: "The key to escaping isolation is 'small attempts at connection'. Start with one person, one word, one moment of eye contact. Small connections create big changes.",
                            fear: "The key to opening fear's wall isn't 'courage' but 'compassion'. Don't scold yourself for being afraid, but warmly embrace yourself. Compassion will melt the fear.",
                            shame: "The key to opening shame's wall is 'acceptance of imperfection'. Believe that it's okay not to be perfect, that such aspects can also be loved.",
                            control: "The key to opening control's wall is 'trust'. Trust in yourself, trust in others, trust in life. Gradually restore your faith.",
                            vulnerability: "The key to opening vulnerability's wall is 'vulnerability itself'. When you realize that showing weakness is true strength, the wall disappears.",
                            comfort: "The key to opening comfort's wall is 'desire for growth'. The heart wanting to become a better version of yourself will lead you outside the wall.",
                            escape: "The key to escape is already in your hands. It is the very 'heart wanting to escape'. Trust and follow that heart.",
                            general: "The master key to opening all emotional walls is 'self-understanding'. When you understand why you built that wall and what you need now, the path will naturally become visible."
                        },
                        pt: {
                            walls: "A chave para abrir aquela parede Ã© a prÃ³pria emoÃ§Ã£o que vocÃª usou ao construÃ­-la. Quando vocÃª entende e aceita as feridas que fizeram vocÃª construir a parede, aquela parede se torna uma porta por si sÃ³.",
                            protection: "Esse prÃ³prio coraÃ§Ã£o que queria proteger agora se tornarÃ¡ a forÃ§a para ir alÃ©m da proteÃ§Ã£o. Assim como vocÃª protegeu porque se amava, agora se liberte porque se ama.",
                            trapped: "A chave mais necessÃ¡ria quando se sente preso Ã© 'perdÃ£o'. Apenas quando vocÃª perdoa a si mesmo por construir a parede e a si mesmo por estar preso nela Ã© que a porta finalmente se abre.",
                            isolation: "A chave para escapar do isolamento Ã© 'pequenas tentativas de conexÃ£o'. Comece com uma pessoa, uma palavra, um momento de contato visual. Pequenas conexÃµes criam grandes mudanÃ§as.",
                            fear: "A chave para abrir a parede do medo nÃ£o Ã© 'coragem' mas 'compaixÃ£o'. NÃ£o se repreenda por ter medo, mas se abrace com carinho. A compaixÃ£o derreterÃ¡ o medo.",
                            shame: "A chave para abrir a parede da vergonha Ã© 'aceitaÃ§Ã£o da imperfeiÃ§Ã£o'. Acredite que estÃ¡ tudo bem nÃ£o ser perfeito, que tais aspectos tambÃ©m podem ser amados.",
                            control: "A chave para abrir a parede do controle Ã© 'confianÃ§a'. ConfianÃ§a em si mesmo, confianÃ§a nos outros, confianÃ§a na vida. Gradualmente restaure sua fÃ©.",
                            vulnerability: "A chave para abrir a parede da vulnerabilidade Ã© a 'prÃ³pria vulnerabilidade'. Quando vocÃª percebe que mostrar fraqueza Ã© verdadeira forÃ§a, a parede desaparece.",
                            comfort: "A chave para abrir a parede do conforto Ã© 'desejo de crescimento'. O coraÃ§Ã£o querendo se tornar uma versÃ£o melhor de si mesmo te levarÃ¡ para fora da parede.",
                            escape: "A chave para escapar jÃ¡ estÃ¡ em suas mÃ£os. Ã‰ o prÃ³prio 'coraÃ§Ã£o querendo escapar'. Confie e siga esse coraÃ§Ã£o.",
                            general: "A chave mestra para abrir todas as paredes emocionais Ã© 'autocompreensÃ£o'. Quando vocÃª entende por que construiu aquela parede e o que precisa agora, o caminho naturalmente se tornarÃ¡ visÃ­vel."
                        }
                    };
                    
                    return responses[lang][emotion] || responses[lang]['general'];
                }
            },
            {
                name: "Freedom", emoji: "ğŸ•Šï¸",
                getResponse: (userInput, lang) => {
                    const emotion = analyzeEmotion(userInput);
                    
                    const responses = {
                        ko: {
                            walls: "ì§„ì •í•œ ììœ ëŠ” ë²½ì´ ì—†ëŠ” ìƒíƒœê°€ ì•„ë‹ˆë¼ ë²½ì´ ìˆì–´ë„ ì—†ì–´ë„ ê´œì°®ë‹¤ê³  ëŠë¼ëŠ” ìƒíƒœì˜ˆìš”. ë²½ì„ í—ˆë¬¼ ë•Œë„, ë‹¤ì‹œ ì„¸ìš¸ ë•Œë„ ìì‹ ì˜ ì„ íƒìœ¼ë¡œ í•  ìˆ˜ ìˆì„ ë•Œ ê·¸ê²ƒì´ ì§„ì§œ ììœ ì…ë‹ˆë‹¤.",
                            protection: "ë³´í˜¸ë°›ê³  ì‹¶ë‹¤ëŠ” ìš•êµ¬ëŠ” ìì—°ìŠ¤ëŸ¬ì›Œìš”. í•˜ì§€ë§Œ ê°€ì¥ ì¢‹ì€ ë³´í˜¸ëŠ” ìŠ¤ìŠ¤ë¡œë¥¼ ë¯¿ëŠ” ê²ƒì—ì„œ ë‚˜ì™€ìš”. ì–´ë–¤ ìƒí™©ì´ ì™€ë„ ìì‹ ì„ ì§€í‚¬ ìˆ˜ ìˆë‹¤ëŠ” ë¯¿ìŒì´ ì§„ì§œ ë³´í˜¸ì…ë‹ˆë‹¤.",
                            trapped: "ê°‡í˜”ë‹¤ê³  ëŠë¼ëŠ” ìˆœê°„ì´ ì‹¤ì€ ê°€ì¥ ììœ ë¡œì›Œì§ˆ ìˆ˜ ìˆëŠ” ìˆœê°„ì´ì—ìš”. ì™œëƒí•˜ë©´ ê·¸ë•Œì•¼ ë¹„ë¡œì†Œ ììœ ê°€ ì–¼ë§ˆë‚˜ ì†Œì¤‘í•œì§€ ê¹¨ë‹«ê²Œ ë˜ë‹ˆê¹Œìš”. ê·¸ ê¹¨ë‹¬ìŒì´ ë‹¹ì‹ ì„ ììœ ë¡­ê²Œ í•  ê±°ì˜ˆìš”.",
                            isolation: "ì§„ì •í•œ ì—°ê²°ì€ ê³ ë¦½ì„ ê²½í—˜í•´ë³¸ ì‚¬ëŒë§Œì´ ë§Œë“¤ ìˆ˜ ìˆì–´ìš”. í˜¼ìì˜€ë˜ ì‹œê°„ì´ ë‹¹ì‹ ì—ê²Œ ì§„ì§œ ì—°ê²°ì˜ ì˜ë¯¸ë¥¼ ê°€ë¥´ì³ì¤¬ì„ ê±°ì˜ˆìš”. ì´ì œ ê·¸ ì§€í˜œë¡œ ìƒˆë¡œìš´ ê´€ê³„ë¥¼ ë§Œë“¤ì–´ê°€ì„¸ìš”.",
                            fear: "ë‘ë ¤ì›€ì„ ì—†ì• ë ¤ í•˜ì§€ ë§ˆì„¸ìš”. ë‘ë ¤ì›€ê³¼ í•¨ê»˜ ì‚´ì•„ê°€ëŠ” ë²•ì„ ë°°ìš°ì„¸ìš”. ë‘ë ¤ì›Œí•˜ë©´ì„œë„ ì•ìœ¼ë¡œ ë‚˜ì•„ê°ˆ ìˆ˜ ìˆì„ ë•Œ, ê·¸ê²ƒì´ ì§„ì •í•œ ìš©ê¸°ì´ê³  ììœ ì…ë‹ˆë‹¤.",
                            shame: "ë¶€ë„ëŸ¬ì›€ë„ ë‹¹ì‹ ì˜ ì¼ë¶€ì˜ˆìš”. ê·¸ê²ƒì„ ìˆ¨ê¸°ë ¤ í•˜ì§€ ë§ê³  ë°›ì•„ë“¤ì´ì„¸ìš”. ë¶ˆì™„ì „í•œ ìì‹ ì„ ì‚¬ë‘í•  ìˆ˜ ìˆì„ ë•Œ ë¹„ë¡œì†Œ ì™„ì „í•œ ììœ ë¥¼ ê²½í—˜í•˜ê²Œ ë  ê±°ì˜ˆìš”.",
                            control: "ëª¨ë“  ê²ƒì„ í†µì œí•˜ë ¤ëŠ” ìš•êµ¬ë¥¼ ë†“ì•„ì£¼ì„¸ìš”. í†µì œí•  ìˆ˜ ì—†ëŠ” ê²ƒë“¤ì— ëŒ€í•´ì„œëŠ” ë°›ì•„ë“¤ì´ê³ , í†µì œí•  ìˆ˜ ìˆëŠ” ê²ƒë“¤ì— ì§‘ì¤‘í•˜ì„¸ìš”. ê·¸ êµ¬ë¶„ì´ ì§„ì •í•œ ììœ ì˜ ì‹œì‘ì…ë‹ˆë‹¤.",
                            vulnerability: "ì·¨ì•½í•¨ì„ ë°›ì•„ë“¤ì´ëŠ” ê²ƒì´ ê°€ì¥ ê°•í•œ ëª¨ìŠµì´ì—ìš”. ì•½í•œ ëª¨ìŠµì„ ë³´ì—¬ë„ ê´œì°®ë‹¤ê³  ëŠë‚„ ë•Œ, ë‹¹ì‹ ì€ ê°€ì¥ ììœ ë¡œìš´ ìƒíƒœê°€ ë  ê±°ì˜ˆìš”.",
                            comfort: "í¸ì•ˆí•¨ë„ ì¢‹ì§€ë§Œ ì„±ì¥ë„ í•„ìš”í•´ìš”. í¸ì•ˆí•¨ê³¼ ì„±ì¥ ì‚¬ì´ì—ì„œ ê· í˜•ì„ ì°¾ìœ¼ì„¸ìš”. ë‘˜ ë‹¤ ì„ íƒí•  ìˆ˜ ìˆëŠ” ììœ ê°€ ë‹¹ì‹ ì—ê²Œ ìˆìŠµë‹ˆë‹¤.",
                            escape: "íƒˆì¶œí•˜ê³  ì‹¶ë‹¤ëŠ” ë§ˆìŒ ìì²´ê°€ ì´ë¯¸ ììœ ì˜ ì‹œì‘ì´ì—ìš”. ê·¸ ë§ˆìŒì„ ë”°ë¼ê°€ë©´ì„œ ì²œì²œíˆ, í•˜ì§€ë§Œ í™•ì‹¤í•˜ê²Œ ìì‹ ë§Œì˜ ììœ ë¥¼ ì°¾ì•„ê°€ì„¸ìš”.",
                            general: "ì§„ì •í•œ ììœ ëŠ” ì™¸ë¶€ ì¡°ê±´ì— ë‹¬ë ¤ìˆì§€ ì•Šì•„ìš”. ë§ˆìŒì˜ ììœ ê°€ ì§„ì§œ ììœ ì…ë‹ˆë‹¤. ì–´ë–¤ ìƒí™©ì—ì„œë„ ì„ íƒí•  ìˆ˜ ìˆëŠ” ë‚´ì  ììœ ë¥¼ í‚¤ì›Œë‚˜ê°€ì„¸ìš”."
                        },
                        en: {
                            walls: "True freedom isn't a state without walls, but feeling okay whether walls exist or not. When you can choose to tear down walls or build them again, that's real freedom.",
                            protection: "The desire to be protected is natural. But the best protection comes from believing in yourself. The belief that you can protect yourself in any situation is true protection.",
                            trapped: "The moment you feel trapped is actually when you can become most free. Because that's when you finally realize how precious freedom is. That realization will set you free.",
                            isolation: "True connection can only be created by those who've experienced isolation. The time you were alone taught you the meaning of real connection. Now create new relationships with that wisdom.",
                            fear: "Don't try to eliminate fear. Learn to live with fear. When you can move forward while being afraid, that's true courage and freedom.",
                            shame: "Shame is also part of you. Don't try to hide it, but accept it. When you can love your imperfect self, you'll finally experience complete freedom.",
                            control: "Let go of the desire to control everything. Accept what you can't control and focus on what you can. That distinction is the beginning of true freedom.",
                            vulnerability: "Accepting vulnerability is the strongest form. When you feel okay showing weakness, you'll be in your most free state.",
                            comfort: "Comfort is good but growth is also necessary. Find balance between comfort and growth. You have the freedom to choose both.",
                            escape: "The very heart wanting to escape is already the beginning of freedom. Follow that heart and slowly but surely find your own freedom.",
                            general: "True freedom doesn't depend on external conditions. Mental freedom is real freedom. Cultivate the internal freedom to choose in any situation."
                        },
                        pt: {
                            walls: "Verdadeira liberdade nÃ£o Ã© um estado sem paredes, mas se sentir bem com paredes existindo ou nÃ£o. Quando vocÃª pode escolher derrubar paredes ou construÃ­-las novamente, essa Ã© a liberdade real.",
                            protection: "O desejo de ser protegido Ã© natural. Mas a melhor proteÃ§Ã£o vem de acreditar em si mesmo. A crenÃ§a de que vocÃª pode se proteger em qualquer situaÃ§Ã£o Ã© proteÃ§Ã£o verdadeira.",
                            trapped: "O momento que vocÃª se sente preso Ã© na verdade quando vocÃª pode se tornar mais livre. Porque Ã© quando vocÃª finalmente percebe quÃ£o preciosa Ã© a liberdade. Essa percepÃ§Ã£o te libertarÃ¡.",
                            isolation: "Verdadeira conexÃ£o sÃ³ pode ser criada por aqueles que experimentaram isolamento. O tempo que vocÃª esteve sozinho te ensinou o significado de conexÃ£o real. Agora crie novos relacionamentos com essa sabedoria.",
                            fear: "NÃ£o tente eliminar o medo. Aprenda a viver com o medo. Quando vocÃª pode seguir em frente mesmo com medo, essa Ã© verdadeira coragem e liberdade.",
                            shame: "Vergonha tambÃ©m Ã© parte de vocÃª. NÃ£o tente escondÃª-la, mas aceite-a. Quando vocÃª pode amar seu eu imperfeito, finalmente experimentarÃ¡ liberdade completa.",
                            control: "Deixe ir o desejo de controlar tudo. Aceite o que vocÃª nÃ£o pode controlar e foque no que pode. Essa distinÃ§Ã£o Ã© o comeÃ§o da verdadeira liberdade.",
                            vulnerability: "Aceitar vulnerabilidade Ã© a forma mais forte. Quando vocÃª se sente bem mostrando fraqueza, estarÃ¡ em seu estado mais livre.",
                            comfort: "Conforto Ã© bom mas crescimento tambÃ©m Ã© necessÃ¡rio. Encontre equilÃ­brio entre conforto e crescimento. VocÃª tem a liberdade de escolher ambos.",
                            escape: "O prÃ³prio coraÃ§Ã£o querendo escapar jÃ¡ Ã© o comeÃ§o da liberdade. Siga esse coraÃ§Ã£o e lenta mas certamente encontre sua prÃ³pria liberdade.",
                            general: "Verdadeira liberdade nÃ£o depende de condiÃ§Ãµes externas. Liberdade mental Ã© liberdade real. Cultive a liberdade interna para escolher em qualquer situaÃ§Ã£o."
                        }
                    };
                    
                    return responses[lang][emotion] || responses[lang]['general'];
                }
            }
        ];
        
        let currentLanguage = 'en'; // ê¸°ë³¸ ì–¸ì–´ë¥¼ ì˜ì–´ë¡œ ì„¤ì •
        let currentUser = null;
        let userResponse = '';
        let journeyStarted = false;
        let currentTypingElement = null;
        let typingIntervals = [];
        
        // ============ ì—¬ì • ì´ˆê¸°í™” í•¨ìˆ˜ ============
        
        function resetJourney() {
            console.log('=== ì—¬ì • ì´ˆê¸°í™” ì‹œì‘ ===');
            
            // 1. ëª¨ë“  íƒ€ì´í•‘ íš¨ê³¼ ì™„ì „ ì •ë¦¬
            clearAllTypingEffects();
            
            // ì¶”ê°€ ì•ˆì „ì¥ì¹˜ - ëª¨ë“  timer ì •ë¦¬
            for (let i = 1; i < 99999; i++) window.clearInterval(i);
            for (let i = 1; i < 99999; i++) window.clearTimeout(i);
            
            // 2. ëª¨ë“  ì½˜í…ì¸  ì„¹ì…˜ ì™„ì „ ì´ˆê¸°í™”
            const sectionsToReset = [
                'portalIntroSection',
                'characterResponsesSection', 
                'lightMessageSection',
                'portalQuestionSection',
                'userInputSection',
                'userReactionsSection',
                'continueSection'
            ];
            
            sectionsToReset.forEach(sectionId => {
                const section = document.getElementById(sectionId);
                if (section) {
                    section.classList.remove('show');
                    section.style.opacity = '0';
                    
                    if (sectionId === 'characterResponsesSection' || 
                        sectionId === 'userInputSection' || 
                        sectionId === 'userReactionsSection') {
                        section.innerHTML = '';
                    } else {
                        const textElements = section.querySelectorAll('.portal-intro, .light-message, .portal-question, .continue-text');
                        textElements.forEach(el => {
                            el.innerHTML = '';
                            el.textContent = '';
                        });
                    }
                }
            });
            
            // 3. íŠ¹ì • ìš”ì†Œë“¤ ê°œë³„ ì´ˆê¸°í™”
            const portalIntro = document.getElementById('portalIntro');
            const lightMessage = document.getElementById('lightMessage');
            const portalQuestion = document.getElementById('portalQuestion');
            const continueText = document.getElementById('continueText');
            
            if (portalIntro) portalIntro.innerHTML = '';
            if (lightMessage) lightMessage.innerHTML = '';
            if (portalQuestion) portalQuestion.innerHTML = '';
            if (continueText) continueText.innerHTML = '';
            
            // 4. í…ìŠ¤íŠ¸ì˜ì—­ ì™„ì „ ì´ˆê¸°í™”
            const userTextarea = document.getElementById('userTextarea');
            if (userTextarea) {
                userTextarea.disabled = false;
                userTextarea.value = '';
                userTextarea.style.height = 'auto';
                userTextarea.placeholder = translations[currentLanguage].inputPlaceholder;
            }
            
            // 5. ìŠ¤í¬ë¡¤ ìœ„ì¹˜ ì´ˆê¸°í™”
            const mainContent = document.getElementById('mainContent');
            if (mainContent) {
                mainContent.scrollTop = 0;
            }
            
            // 6. ìƒíƒœ ë³€ìˆ˜ ì™„ì „ ì´ˆê¸°í™”
            userResponse = '';
            currentTypingElement = null;
            
            console.log('=== ì—¬ì • ì´ˆê¸°í™” ì™„ë£Œ ===');
        }
        
        // ============ ê°œì„ ëœ ì–¸ì–´ ë³€ê²½ í•¨ìˆ˜ ============
        
        function changeLanguage(lang) {
            if (!translations[lang]) {
                console.error('ì§€ì›í•˜ì§€ ì•ŠëŠ” ì–¸ì–´:', lang);
                return;
            }
            
            if (currentLanguage === lang) {
                return;
            }
            
            if (journeyStarted) {
                const confirmMessage = translations[currentLanguage].languageChangeConfirm;
                const shouldRestart = confirm(confirmMessage);
                
                if (!shouldRestart) {
                    return;
                }
            }
            
            const previousLanguage = currentLanguage;
            currentLanguage = lang;
            
            console.log(`ì–¸ì–´ ë³€ê²½: ${previousLanguage} â†’ ${currentLanguage}`);
            
            if (journeyStarted) {
                resetJourney();
            }
            
            updateLanguageButtons(lang);
            updateStaticTranslations(lang);
            
            if (journeyStarted) {
                setTimeout(() => {
                    console.log(`ìƒˆë¡œìš´ ì–¸ì–´(${currentLanguage})ë¡œ ì—¬ì • ì¬ì‹œì‘`);
                    startPortalSequence();
                }, 1000);
            }
        }
        
        // ============ UI ì—…ë°ì´íŠ¸ í•¨ìˆ˜ë“¤ ============
        
        function updateLanguageButtons(lang) {
            document.querySelectorAll('.lang-btn').forEach(btn => {
                btn.classList.remove('active');
                if (btn.dataset.lang === lang) {
                    btn.classList.add('active');
                }
            });
        }
        
        function updateStaticTranslations(lang) {
            // ê°œë³„ ìš”ì†Œ ì—…ë°ì´íŠ¸
            const elements = [
                'logoSubtitle',
                'portalMainTitle', 
                'portalSubtitle',
                'lightTitle',
                'continueYesBtn',
                'continueNoBtn'
            ];
            
            elements.forEach(elementId => {
                const element = document.getElementById(elementId);
                if (element && translations[lang]) {
                    const key = elementId.replace('Btn', 'Button').replace('Subtitle', 'Subtitle');
                    let translationKey = key;
                    
                    const keyMapping = {
                        'logoSubtitle': 'logoSubtitle',
                        'portalMainTitle': 'portalMainTitle',
                        'portalSubtitle': 'portalSubtitle',
                        'lightTitle': 'lightTitle',
                        'continueYesButton': 'continueYes',
                        'continueNoButton': 'continueNo'
                    };
                    
                    translationKey = keyMapping[key] || key;
                    
                    if (translations[lang][translationKey]) {
                        element.textContent = translations[lang][translationKey];
                    }
                }
            });
            
            // placeholder ì—…ë°ì´íŠ¸
            const textarea = document.getElementById('userTextarea');
            if (textarea) textarea.placeholder = translations[lang].inputPlaceholder;
        }
        
        // ============ ê°œì„ ëœ íƒ€ì´í•‘ íš¨ê³¼ + ìŠ¤í¬ë¡¤ ì¶”ì  ì‹œìŠ¤í…œ ============
        
        function typewriterEffect(element, text, speed = 80) {
            return new Promise((resolve) => {
                if (currentTypingElement) {
                    currentTypingElement.classList.remove('typing-cursor');
                }
                
                let i = 0;
                element.innerHTML = '';
                element.classList.add('typing-cursor');
                currentTypingElement = element;
                
                const typingInterval = setInterval(() => {
                    if (!document.contains(element)) {
                        clearInterval(typingInterval);
                        resolve();
                        return;
                    }
                    
                    element.innerHTML += text.charAt(i);
                    i++;
                    
                    if (i % 10 === 0) {
                        scrollToFollowTyping(element);
                    }
                    
                    if (i === text.length) {
                        clearInterval(typingInterval);
                        element.classList.remove('typing-cursor');
                        currentTypingElement = null;
                        
                        setTimeout(() => {
                            if (document.contains(element)) {
                                scrollToFollowTyping(element);
                            }
                        }, 200);
                        
                        resolve();
                    }
                }, speed);
                
                typingIntervals.push(typingInterval);
            });
        }
        
        function clearAllTypingEffects() {
            typingIntervals.forEach(interval => clearInterval(interval));
            typingIntervals = [];
            
            if (currentTypingElement) {
                currentTypingElement.classList.remove('typing-cursor');
                currentTypingElement = null;
            }
        }
        
        // ============ ìŠ¤ë§ˆíŠ¸ ìŠ¤í¬ë¡¤ ì‹œìŠ¤í…œ ============
        
        function scrollToFollowTyping(element) {
            const mainContent = document.getElementById('mainContent');
            const elementRect = element.getBoundingClientRect();
            const containerRect = mainContent.getBoundingClientRect();
            
            if (elementRect.bottom > containerRect.bottom - 150) {
                const scrollTop = mainContent.scrollTop;
                const elementOffsetTop = element.offsetTop;
                const targetScroll = elementOffsetTop - (containerRect.height / 2);
                
                mainContent.scrollTo({
                    top: Math.max(0, targetScroll),
                    behavior: 'smooth'
                });
            }
        }
        
        function scrollToElement(element) {
            const mainContent = document.getElementById('mainContent');
            const elementOffsetTop = element.offsetTop;
            const containerHeight = mainContent.clientHeight;
            const targetScroll = elementOffsetTop - (containerHeight / 3);
            
            mainContent.scrollTo({
                top: Math.max(0, targetScroll),
                behavior: 'smooth'
            });
        }
        
        // ============ ì–¸ì–´ ë²„íŠ¼ ì´ë²¤íŠ¸ ì„¤ì • ============
        
        function setupLanguageButtons() {
            const langButtons = document.querySelectorAll('.lang-btn');
            
            langButtons.forEach(btn => {
                btn.addEventListener('click', function(e) {
                    e.preventDefault();
                    const newLang = this.dataset.lang;
                    changeLanguage(newLang);
                });
            });
        }
        
        // ============ ë©”ì¸ ì—¬ì • ì‹œìŠ¤í…œ ============
        
        function initializeTemarix() {
            console.log('=== Temarix Portal 12 ì´ˆê¸°í™” ì‹œì‘ ===');
            
            setupLanguageButtons();
            setupTextareaAutoResize();
            setupInputEvents();
            
            journeyStarted = true;
            
            setTimeout(() => {
                startPortalSequence();
            }, 1000);
        }
        
        function startPortalSequence() {
            setTimeout(() => {
                showIntro();
            }, 1000);
        }
        
        // ============ ì—¬ì • ë‹¨ê³„ë“¤ ============
        
        async function showIntro() {
            const introSection = document.getElementById('portalIntroSection');
            const introElement = document.getElementById('portalIntro');
            
            introSection.classList.add('show');
            
            const introText = translations[currentLanguage].portalIntro;
            await typewriterEffect(introElement, introText, 60);
            
            setTimeout(() => {
                showCharacterResponses();
            }, 2000);
        }
        
        async function showCharacterResponses() {
            const responseSection = document.getElementById('characterResponsesSection');
            
            responseSection.classList.add('show');
            
            for (let i = 0; i < characters.length; i++) {
                const char = characters[i];
                const responseDiv = document.createElement('div');
                responseDiv.className = 'character-response';
                
                const nameDiv = document.createElement('div');
                nameDiv.className = 'character-name';
                nameDiv.textContent = `${char.emoji} ${char.name}`;
                
                const dialogueDiv = document.createElement('div');
                dialogueDiv.className = 'character-dialogue';
                
                responseDiv.appendChild(nameDiv);
                responseDiv.appendChild(dialogueDiv);
                responseSection.appendChild(responseDiv);
                
                responseDiv.style.opacity = '1';
                
                const dialogueText = translations[currentLanguage][char.key];
                await typewriterEffect(dialogueDiv, dialogueText, 70);
                
                if (i < characters.length - 1) {
                    await new Promise(resolve => setTimeout(resolve, 1500));
                }
            }
            
            setTimeout(() => {
                showLightMessage();
            }, 2000);
        }
        
        async function showLightMessage() {
            const lightSection = document.getElementById('lightMessageSection');
            const lightMessageEl = document.getElementById('lightMessage');
            
            lightSection.classList.add('show');
            
            const lightText = translations[currentLanguage].lightMessage;
            await typewriterEffect(lightMessageEl, lightText, 60);
            
            setTimeout(() => {
                showQuestion();
            }, 2000);
        }
        
        async function showQuestion() {
            const questionSection = document.getElementById('portalQuestionSection');
            const questionEl = document.getElementById('portalQuestion');
            
            questionSection.classList.add('show');
            
            const questionText = translations[currentLanguage].portalQuestion;
            await typewriterEffect(questionEl, questionText, 50);
            
            setTimeout(() => {
                enableUserInput();
            }, 1500);
        }
        
        // ============ ì‚¬ìš©ì ì…ë ¥ ì‹œìŠ¤í…œ ============
        
        function setupInputEvents() {
            const userTextarea = document.getElementById('userTextarea');
            
            userTextarea.addEventListener('keydown', handleTextareaKeydown);
            
            document.getElementById('continueYesBtn').addEventListener('click', function() {
                processContinue('Y');
            });
            
            document.getElementById('continueNoBtn').addEventListener('click', function() {
                processContinue('N');
            });
        }
        
        function handleTextareaKeydown(e) {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                const inputValue = this.value.trim();
                
                if (inputValue) {
                    processUserInput(inputValue);
                }
            }
        }
        
        function setupTextareaAutoResize() {
            const textarea = document.getElementById('userTextarea');
            
            textarea.addEventListener('input', function() {
                this.style.height = 'auto';
                this.style.height = Math.min(this.scrollHeight, 96) + 'px';
            });
        }
        
        async function processUserInput(inputText) {
            userResponse = inputText;
            disableUserInput();
            showUserResponse(inputText);
            
            setTimeout(() => {
                showUserReactions(inputText);
            }, 1000);
        }
        
        function disableUserInput() {
            const userTextarea = document.getElementById('userTextarea');
            userTextarea.disabled = true;
            userTextarea.value = '';
            userTextarea.style.height = 'auto';
            
            userTextarea.placeholder = translations[currentLanguage].waitingMessage;
        }
        
        function enableUserInput() {
            const userTextarea = document.getElementById('userTextarea');
            userTextarea.disabled = false;
            userTextarea.placeholder = translations[currentLanguage].inputPlaceholder;
            
            setTimeout(() => {
                userTextarea.focus();
            }, 100);
        }
        
        function showUserResponse(text) {
            const inputSection = document.getElementById('userInputSection');
            const userDiv = document.createElement('div');
            userDiv.className = 'user-response';
            const youLabel = translations[currentLanguage].youLabel;
            userDiv.innerHTML = `<strong>${youLabel}:</strong> "${text}"`;
            inputSection.appendChild(userDiv);
            inputSection.classList.add('show');
            
            setTimeout(() => {
                scrollToElement(inputSection);
            }, 100);
        }
        
        async function showUserReactions(userInput) {
            const reactionsSection = document.getElementById('userReactionsSection');
            
            reactionsSection.classList.add('show');
            
            for (let i = 0; i < responseCharacters.length; i++) {
                const char = responseCharacters[i];
                const responseDiv = document.createElement('div');
                responseDiv.className = 'character-response';
                
                const nameDiv = document.createElement('div');
                nameDiv.className = 'character-name';
                nameDiv.textContent = `${char.emoji} ${char.name}`;
                
                const dialogueDiv = document.createElement('div');
                dialogueDiv.className = 'character-dialogue';
                
                responseDiv.appendChild(nameDiv);
                responseDiv.appendChild(dialogueDiv);
                reactionsSection.appendChild(responseDiv);
                
                responseDiv.style.opacity = '1';
                
                const reactionText = char.getResponse(userInput, currentLanguage);
                await typewriterEffect(dialogueDiv, reactionText, 70);
                
                if (i < responseCharacters.length - 1) {
                    await new Promise(resolve => setTimeout(resolve, 1500));
                }
            }
            
            setTimeout(() => {
                showContinueOption();
            }, 2000);
        }
        
        async function showContinueOption() {
            const continueSection = document.getElementById('continueSection');
            const continueText = document.getElementById('continueText');
            
            continueSection.classList.add('show');
            
            const questionText = translations[currentLanguage].continueText;
            await typewriterEffect(continueText, questionText, 50);
            
            setTimeout(() => {
                scrollToElement(continueSection);
            }, 500);
        }
        
        function processContinue(input) {
            if (input === 'Y') {
                const message = currentLanguage === 'ko' ? 
                    'Portal 13ì´ ê³§ ì¤€ë¹„ë©ë‹ˆë‹¤. ê³„ì†í•´ì„œ ë” ê¹Šì€ ê°ì •ì˜ ì—¬ì •ì´ ì´ì–´ì§‘ë‹ˆë‹¤.' :
                    currentLanguage === 'en' ? 
                    'Portal 13 will be ready soon. The journey into deeper emotions continues.' :
                    'Portal 13 estarÃ¡ pronto em breve. A jornada para emoÃ§Ãµes mais profundas continua.';
                alert(message);
            } else if (input === 'N') {
                const message = currentLanguage === 'ko' ? 
                    'ì—¬ì •ì´ ì¼ì‹œ ì¤‘ì§€ë˜ì—ˆìŠµë‹ˆë‹¤. ì–¸ì œë“  ë‹¤ì‹œ ëŒì•„ì™€ ê³„ì†í•˜ì„¸ìš”.' :
                    currentLanguage === 'en' ? 
                    'The journey has been paused. Come back and continue anytime.' :
                    'A jornada foi pausada. Volte e continue a qualquer momento.';
                alert(message);
            }
        }
        
        // ============ ì´ˆê¸°í™” ============
        
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Temarix V2 Portal 12 DOM ë¡œë“œ ì™„ë£Œ');
            
            // ìë™ ë¡œê·¸ì¸ ì²˜ë¦¬ (ë¡œê·¸ì¸ ëª¨ë‹¬ ì œê±°)
            currentUser = { 
                uid: 'user-auto-' + Date.now(),
                email: 'auto@temarix.com'
            };
            
            memoryStorage.mockUser = currentUser;
            
            updateStaticTranslations(currentLanguage);
            initializeTemarix();
        });
    </script>
</body>
</html>