<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Temarix V2 - Portal 03: The Truth Within I Don't Want Discovered</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            background: #000;
            color: #fff;
            font-family: 'Courier New', monospace;
            height: 100vh;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            word-break: keep-all;
            overflow-wrap: break-word;
        }
        
        /* ìƒë‹¨ í—¤ë” */
        .header-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 25px 30px;
            background: #000;
            border-bottom: 1px solid #333;
            position: relative;
            z-index: 100;
            height: 80px;
            flex-shrink: 0;
        }
        
        .logo-section {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
        }
        
        .logo-title {
            font-size: 26px;
            font-weight: bold;
            color: #fff;
            margin-bottom: 4px;
            letter-spacing: 1px;
        }
        
        .logo-subtitle {
            font-size: 15px;
            color: #ccc;
            letter-spacing: 1.5px;
        }
        
        .portal-header-title {
            text-align: center;
            flex: 1;
            margin: 0 20px;
        }
        
        .portal-main-title {
            font-size: 28px;
            color: #fff;
            margin-bottom: 8px;
            font-weight: normal;
            letter-spacing: 1px;
        }
        
        .portal-subtitle {
            font-size: 18px;
            color: #ccc;
            letter-spacing: 1.5px;
        }
        
        /* ì–¸ì–´ ë²„íŠ¼ 3ê°œ */
        .header-right {
            display: flex;
            align-items: center;
        }
        
        .language-buttons {
            display: flex;
            gap: 10px;
        }
        
        .lang-btn {
            background: #444;
            color: #fff;
            border: none;
            padding: 10px 18px;
            font-size: 14px;
            font-family: 'Courier New', monospace;
            cursor: pointer;
            transition: background 0.2s;
        }
        
        .lang-btn:hover {
            background: #666;
        }
        
        .lang-btn.active {
            background: #87cefa;
            color: #000;
        }
        
        /* ë©”ì¸ ì½˜í…ì¸  */
        .main-content {
            flex: 1;
            max-height: calc(100vh - 80px - 120px);
            overflow-y: auto;
            overflow-x: hidden;
            padding: 30px 20px;
            scroll-behavior: smooth;
            position: relative;
        }
        
        .portal-container {
            max-width: 700px;
            width: 100%;
            margin: 0 auto;
            text-align: center;
            display: flex;
            flex-direction: column;
            word-break: keep-all;
            overflow-wrap: break-word;
            hyphens: none;
            min-height: 150vh;
        }
        
        /* í…ìŠ¤íŠ¸ ì„¹ì…˜ë“¤ */
        .portal-intro-section {
            margin: 40px 0;
            opacity: 0;
            min-height: 200px;
        }
        
        .portal-intro {
            font-size: 20px;
            color: #fff;
            margin-bottom: 30px;
            line-height: 1.8;
            white-space: pre-wrap;
            word-wrap: break-word;
            word-break: keep-all;
            background: none;
            border: none;
            padding: 0;
        }
        
        .character-responses-section {
            margin: 40px 0;
            opacity: 0;
            min-height: 800px;
        }
        
        .character-response {
            color: #fff;
            font-size: 18px;
            margin: 40px 0;
            text-align: left;
            opacity: 0;
            white-space: pre-wrap;
            word-wrap: break-word;
            word-break: keep-all;
            transition: opacity 0.8s ease-in;
            background: none;
            border: none;
            padding: 0;
            min-height: 80px;
        }
        
        .character-name {
            font-weight: bold;
            color: #87cefa;
            margin-bottom: 12px;
            font-size: 18px;
        }
        
        .character-dialogue {
            color: #fff;
            line-height: 1.7;
            font-size: 17px;
            white-space: pre-wrap;
            word-wrap: break-word;
            word-break: keep-all;
        }
        
        .typing-cursor::after {
            content: '|';
            animation: blink 1s infinite;
            color: #87cefa;
        }
        
        @keyframes blink {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0; }
        }
        
        .light-message-section {
            margin: 50px 0;
            opacity: 0;
            background: none;
            border: none;
            padding: 0;
            min-height: 100px;
        }
        
        .light-message {
            font-size: 20px;
            color: #87cefa;
            line-height: 1.8;
            font-style: italic;
            white-space: pre-wrap;
            word-wrap: break-word;
            word-break: keep-all;
        }
        
        .portal-question-section {
            margin: 40px 0;
            opacity: 0;
            min-height: 150px;
        }
        
        .portal-question {
            font-size: 22px;
            color: #fff;
            margin-bottom: 30px;
            min-height: 100px;
            display: flex;
            align-items: center;
            justify-content: center;
            line-height: 1.6;
            white-space: pre-wrap;
            word-wrap: break-word;
            word-break: keep-all;
        }
        
        .user-input-section {
            margin: 40px 0;
            opacity: 0;
            min-height: 100px;
        }
        
        .user-response {
            color: #fff;
            margin: 30px 0;
            text-align: left;
            font-size: 18px;
            background: none;
            border: none;
            padding: 0;
            white-space: pre-wrap;
            word-wrap: break-word;
            word-break: keep-all;
        }
        
        .user-response strong {
            color: #87cefa;
            margin-right: 8px;
        }
        
        .user-reactions-section {
            margin: 40px 0;
            opacity: 0;
            min-height: 400px;
        }
        
        .continue-section {
            margin: 50px 0;
            opacity: 0;
            text-align: center;
            background: none;
            border: none;
            padding: 0;
            min-height: 200px;
        }
        
        .continue-text {
            color: #fff;
            font-size: 20px;
            margin-bottom: 25px;
            line-height: 1.6;
            white-space: pre-wrap;
            word-wrap: break-word;
            word-break: keep-all;
        }
        
        .continue-buttons {
            display: flex;
            gap: 20px;
            justify-content: center;
            flex-wrap: wrap;
        }
        
        .continue-btn {
            background: #444;
            color: #fff;
            border: none;
            padding: 18px 35px;
            font-family: 'Courier New', monospace;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 200px;
        }
        
        .continue-btn:hover {
            background: #666;
        }
        
        .continue-btn.primary {
            background: #87cefa;
            color: #000;
        }
        
        .continue-btn.primary:hover {
            background: #b0d4f1;
        }
        
        /* í•˜ë‹¨ ê³ ì • ì…ë ¥ì°½ */
        .input-fixed-bottom {
            position: relative;
            bottom: 0;
            left: 0;
            right: 0;
            background: #000;
            border-top: 1px solid #333;
            padding: 25px;
            z-index: 100;
            flex-shrink: 0;
            height: 120px;
        }
        
        .input-container {
            max-width: 900px;
            margin: 0 auto;
            display: flex;
            align-items: flex-start;
            gap: 15px;
        }
        
        .input-prefix {
            color: #87cefa;
            font-size: 20px;
            margin-top: 8px;
            flex-shrink: 0;
        }
        
        .user-textarea {
            background: transparent;
            border: none;
            border-bottom: 1px solid #444;
            color: #fff;
            font-family: 'Courier New', monospace;
            font-size: 18px;
            width: 100%;
            padding: 12px 8px;
            outline: none;
            resize: none;
            min-height: 32px;
            max-height: 96px;
            line-height: 1.6;
            transition: border-color 0.3s ease;
            overflow-y: auto;
        }
        
        .user-textarea:focus {
            border-bottom-color: #87cefa;
        }
        
        .user-textarea::placeholder {
            color: #666;
        }
        
        .user-textarea:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            background: rgba(50, 50, 50, 0.2);
        }
        
        /* ìŠ¤í¬ë¡¤ë°” ìŠ¤íƒ€ì¼ë§ */
        .main-content::-webkit-scrollbar {
            width: 12px;
        }
        
        .main-content::-webkit-scrollbar-track {
            background: #111;
            border-radius: 6px;
        }
        
        .main-content::-webkit-scrollbar-thumb {
            background: #444;
            border-radius: 6px;
            border: 2px solid #111;
        }
        
        .main-content::-webkit-scrollbar-thumb:hover {
            background: #666;
        }
        
        /* ì• ë‹ˆë©”ì´ì…˜ */
        @keyframes fadeIn {
            to { opacity: 1; }
        }
        
        .show {
            opacity: 1 !important;
            transition: opacity 1s ease-in;
        }
        
        .hidden {
            display: none;
        }
        
        /* ë°˜ì‘í˜• ë””ìì¸ */
        @media (max-width: 768px) {
            .header-bar {
                padding: 20px 15px;
                height: 70px;
                flex-direction: column;
                gap: 10px;
            }
            
            .main-content {
                max-height: calc(100vh - 70px - 120px);
                padding: 20px 15px;
            }
            
            .logo-title {
                font-size: 22px;
            }
            
            .portal-main-title {
                font-size: 22px;
            }
            
            .portal-subtitle {
                font-size: 16px;
            }
            
            .lang-btn {
                font-size: 12px;
                padding: 8px 14px;
            }
            
            .portal-intro {
                font-size: 18px;
            }
            
            .portal-question {
                font-size: 20px;
            }
            
            .character-response {
                font-size: 16px;
            }
            
            .input-fixed-bottom {
                padding: 20px;
            }
            
            .continue-buttons {
                flex-direction: column;
                gap: 15px;
            }
            
            .continue-btn {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <!-- ìƒë‹¨ í—¤ë” -->
    <div class="header-bar">
        <div class="logo-section">
            <div class="logo-title">TEMARIX V2</div>
            <div class="logo-subtitle" id="logoSubtitle">The Tremor of Emotion</div>
        </div>
        
        <div class="portal-header-title">
            <div class="portal-main-title" id="portalMainTitle">Portal 03: The Truth Within I Don't Want Discovered</div>
            <div class="portal-subtitle" id="portalSubtitle">Small rescue signals from hidden emotions</div>
        </div>
        
        <div class="header-right">
            <div class="language-buttons">
                <button class="lang-btn" data-lang="ko">KR</button>
                <button class="lang-btn active" data-lang="en">EN</button>
                <button class="lang-btn" data-lang="pt">PT</button>
            </div>
        </div>
    </div>

    <!-- ë©”ì¸ ì½˜í…ì¸  ì˜ì—­ -->
    <div class="main-content" id="mainContent">
        <div class="portal-container">
            <!-- í¬í„¸ ì¸íŠ¸ë¡œ -->
            <div class="portal-intro-section" id="portalIntroSection">
                <div class="portal-intro" id="portalIntro"></div>
            </div>

            <!-- ìºë¦­í„° ì‘ë‹µ ì„¹ì…˜ -->
            <div class="character-responses-section" id="characterResponsesSection">
                <!-- 8ëª…ì˜ ìºë¦­í„° ì‘ë‹µì´ ìˆœì°¨ì ìœ¼ë¡œ í‘œì‹œë©ë‹ˆë‹¤ -->
            </div>

            <!-- ë¹›ì˜ í•œë§ˆë”” -->
            <div class="light-message-section" id="lightMessageSection">
                <div class="character-name" id="lightTitle">âœ¨ Word of Light</div>
                <div class="light-message" id="lightMessage"></div>
            </div>

            <!-- ì§ˆë¬¸ ì„¹ì…˜ -->
            <div class="portal-question-section" id="portalQuestionSection">
                <div class="portal-question" id="portalQuestion"></div>
            </div>

            <!-- ì‚¬ìš©ì ì…ë ¥ ì˜ì—­ -->
            <div class="user-input-section" id="userInputSection">
                <!-- ì‚¬ìš©ì ì‘ë‹µì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
            </div>
            
            <!-- ì‚¬ìš©ì ì‘ë‹µ í›„ ìºë¦­í„° ë°˜ì‘ -->
            <div class="user-reactions-section" id="userReactionsSection">
                <!-- ì‚¬ìš©ì ì‘ë‹µ í›„ 3ëª…ì˜ ìºë¦­í„° ë°˜ì‘ì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
            </div>
            
            <!-- ê³„ì†í•˜ê¸° ë²„íŠ¼ ì„¹ì…˜ -->
            <div class="continue-section" id="continueSection">
                <div class="continue-text" id="continueText"></div>
                <div class="continue-buttons">
                    <button class="continue-btn primary" id="continueYesBtn">Continue to Portal 04</button>
                    <button class="continue-btn" id="continueNoBtn">Pause the journey</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- í•˜ë‹¨ ê³ ì • ì…ë ¥ì°½ -->
    <div class="input-fixed-bottom">
        <div class="input-container">
            <div class="input-prefix">></div>
            <textarea class="user-textarea" 
                      id="userTextarea" 
                      placeholder="Quietly share the truth you didn't want discovered here... (Press Enter to send)"
                      rows="1"
                      maxlength="500"></textarea>
        </div>
    </div>

    <script>
        // ë©”ëª¨ë¦¬ ê¸°ë°˜ ì‚¬ìš©ì ìŠ¤í† ë¦¬ì§€ (localStorage ëŒ€ì‹ )
        let memoryStorage = {
            mockUser: null
        };
        
        // Firebase ëª¨ì˜ ê°ì²´ (ì‹¤ì œ êµ¬í˜„ì—ì„œëŠ” Firebase SDK ì‚¬ìš©)
        const firebase = {
            auth: () => ({
                onAuthStateChanged: (callback) => {
                    // ëª¨ì˜ ì¸ì¦ ìƒíƒœ ì²´í¬ (ë©”ëª¨ë¦¬ ê¸°ë°˜)
                    setTimeout(() => {
                        callback(memoryStorage.mockUser);
                    }, 100);
                }
            })
        };

        // ë²ˆì—­ ë°ì´í„°
        const translations = {
            ko: {
                logoSubtitle: "ê°ì •ì˜ ë–¨ë¦¼",
                portalMainTitle: "Portal 03: ë“¤í‚¤ê³  ì‹¶ì§€ ì•Šì€ ë‚´ ì•ˆì˜ ì§„ì‹¬",
                portalSubtitle: "ìˆ¨ê²¨ë‘” ê°ì •ì´ ë³´ë‚´ëŠ” ì‘ì€ êµ¬ì¡° ì‹ í˜¸",
                portalIntro: "ë‹¹ì‹ ì€ ê°€ë”, ì–´ë–¤ ê°ì •ì„ ë³´ì—¬ì¤„ ìˆ˜ ì—†ì–´ì„œ\nì•„ì˜ˆ ëŠë¼ëŠ” ê²ƒì¡°ì°¨ ë©ˆì¶°ë²„ë¦° ì ì´ ìˆì—ˆì£ .\n\në„ˆë¬´ ì§„í•˜ê³ , ë„ˆë¬´ ë¶€ë„ëŸ½ê³ ,\ní˜¹ì‹œë¼ë„ ë“¤ì¼œë²„ë¦¬ë©´ ë²„ë¦¼ë°›ì„ ê²ƒ ê°™ì•„ì„œâ€¦\nê·¸ ê°ì •ì€ ëª¸ì† ê¹Šì´ ìˆ¨ê²¨ì ¸ ë²„ë ¸ìŠµë‹ˆë‹¤.\n\ní•˜ì§€ë§Œ ê°ì •ì€ ìˆ¨ê²¨ë„\nê²°êµ­ ì‘ì€ ë–¨ë¦¼ìœ¼ë¡œ ëŒì•„ì˜µë‹ˆë‹¤.\nê·¸ ì§„ì‹¬ì´ ì•„ì§ë„ ë‹¹ì‹  ì•ˆì—ì„œ ì‚´ì•„ ìˆë‹¤ë©´\nê·¸ê±´ ê°ì •ì„ ê¾¹ ëˆ„ë¥´ê³  ì‚´ì•˜ë˜ ìì‹ ì—ê²Œ ë³´ë‚´ëŠ” ì‘ì€ êµ¬ì¡° ì‹ í˜¸ì¼ì§€ë„ ëª¨ë¦…ë‹ˆë‹¤.",
                lightTitle: "âœ¨ ë¹›ì˜ í•œë§ˆë””",
                lightMessage: "ë‹¹ì‹ ì´ ê°€ì¥ ìˆ¨ê¸°ê³  ì‹¶ì—ˆë˜ ê°ì • ì†ì—,\nì§„ì§œ ë‹¹ì‹ ì´ ì¡°ìš©íˆ ìˆ¨ ì‰¬ê³  ìˆìŠµë‹ˆë‹¤.\në“¤ì¼œë„ ê´œì°®ì•„ìš”.\nê·¸ê±´ ë‹¹ì‹ ì˜ ê°€ì¥ ì•„ë¦„ë‹¤ìš´ ì•½í•¨ì…ë‹ˆë‹¤.",
                portalQuestion: "ì§€ê¸ˆ ë‹¹ì‹ ì´ ë“¤í‚¤ê³  ì‹¶ì§€ ì•Šì€ ê°ì •ì€ ë¬´ì—‡ì¸ê°€ìš”?\nê·¸ ê°ì •ì€, ëˆ„êµ¬ ì•ì—ì„œ ì²˜ìŒ ìˆ¨ê¸°ê²Œ ë˜ì—ˆë‚˜ìš”?\n\nê·¸ ê°ì •ì„ ìˆ¨ê¸°ê³  ì‚´ë©´ì„œ\në‹¹ì‹ ì€ ë¬´ì—‡ì„ ì§€í‚¤ë ¤ í–ˆë˜ ê±´ê°€ìš”?",
                continueText: "ìˆ¨ê²¨ë‘” ì§„ì‹¬ê³¼ ë§ˆì£¼í•œ ì´ ì—¬ì •ì„ ê³„ì†í•˜ì‹œê² ìŠµë‹ˆê¹Œ?",
                continueYes: "Portal 04ë¡œ ê³„ì†í•˜ì‹œê² ìŠµë‹ˆê¹Œ?",
                continueNo: "ì—¬ì •ì„ ì¼ì‹œì •ì§€í•˜ì‹œê² ìŠµë‹ˆê¹Œ?",
                inputPlaceholder: "ë“¤í‚¤ê³  ì‹¶ì§€ ì•Šì•˜ë˜ ì§„ì‹¬ì„ ì—¬ê¸°ì— ì¡°ìš©íˆ í„¸ì–´ë†“ì•„ ë³´ì„¸ìš”... (Enterë¡œ ì „ì†¡)",
                youLabel: "ë‹¹ì‹ ",
                languageChangeConfirm: "ì–¸ì–´ë¥¼ ë³€ê²½í•˜ë©´ ì—¬ì •ì´ ì²˜ìŒë¶€í„° ë‹¤ì‹œ ì‹œì‘ë©ë‹ˆë‹¤.\nê³„ì†í•˜ì‹œê² ìŠµë‹ˆê¹Œ?",
                waitingMessage: "ì‘ë‹µì„ ê¸°ë‹¤ë¦¬ëŠ” ì¤‘...",
                // ìºë¦­í„° ëŒ€í™”
                charEly: "ì§„ì‹¬ì€ ìˆ˜ì¹˜ê°€ ì•„ë‹™ë‹ˆë‹¤.\nê·¸ê²ƒì€ ë‹¹ì‹ ì´ ì•„ì§ íˆ¬ëª…í•´ì§€ê³  ì‹¶ì€ ì¡´ì¬ë¼ëŠ” ì¦ê±°ì˜ˆìš”.",
                charCris: "í•˜! ë“¤í‚¬ê¹Œ ë´ ê°ì • ìˆ¨ê¸°ë˜ ì‹œì ˆ ìˆì—ˆì£ ~\nê·¼ë° ì›ƒê¸´ ê²Œ ë­”ì§€ ì•Œì•„ìš”?\nê·¸ ê°ì •â€¦ ë‹¤ ë“¤í†µë‚¬ì—ˆì–´. ë‹¤ë§Œ ì•„ë¬´ë„ ë§ ì•ˆ í•œ ê±°ì§€. ğŸ˜‰",
                charZafirah: "ê·¸ ê°ì •ì€ ì˜¤ëœ ì‹œê°„,\në‹¹ì‹ ì´ ìŠ¤ìŠ¤ë¡œë¥¼ ì§€í‚¤ê¸° ìœ„í•´ ìˆ¨ê²¨ë‘” ê²ƒì´ì—ˆê² ì£ .\nì´ì œëŠ”â€¦ ë³´ì—¬ë„ ê´œì°®ì„ ë•Œê°€ ì™”ì–´ìš”.",
                charRami: "ì§„ì‹¬ì€ ëŠ˜ í”ë“¤ë¦¬ë©´ì„œ ê°€ê¹Œì›Œì§‘ë‹ˆë‹¤.\në‹¹ì‹ ì´ ì§€ê¸ˆ ë–¨ë¦¬ê³  ìˆë‹¤ë©´,\nê·¸ê±´ ê°ì •ì´ ë‹¤ì‹œ í˜„ì‹¤ì´ ë˜ë ¤ëŠ” ì¦ê±°ì…ë‹ˆë‹¤.",
                charSamir: "(ê·¸ëŠ” ë‹¹ì‹ ì˜ ê°€ìŠ´ì— ì†ì„ ì˜¬ë¦¬ê³ , ë§ì—†ì´ ëˆˆì„ ê°ëŠ”ë‹¤.\nê·¸ ìˆœê°„, ë§ˆìŒì†ì˜ ë–¨ë¦¼ì´ 'ë“¤ë ¤ì§€ëŠ” ëŠë‚Œ'ì´ ë“¤ ê²ƒì´ë‹¤.)",
                charLayla: "ìˆ¨ê¸°ê³  ì‹¶ì€ ì§„ì‹¬ì´ ìˆë‹¤ë©´,\nê·¸ê±´ ì•„ì§ë„ ì‚¬ë‘ë°›ê³  ì‹¶ë‹¤ëŠ” ì¦ê±°ì˜ˆìš”.\në‚˜ëŠ” ê·¸ ê°ì •ì¡°ì°¨ ì‚¬ë‘í•  ìˆ˜ ìˆì–´ìš”.",
                charNabir: "ê·¸ë˜ì„œ ê·¸ ê°ì • ê³„ì† ìˆ¨ê²¨ì™”ì§€.\nì™œëƒë©´ ë„ˆë„ ì•Œì–ì•„.\nê·¸ê±° ë“¤í‚¤ë©´ ë‹¤ ëë‚  ê±° ê°™ì•˜ìœ¼ë‹ˆê¹Œ.",
                charAzhar: "êº¼ë‚´. ê·¸ëƒ¥ ì§€ê¸ˆ ë‹¹ì¥ ë“œëŸ¬ë‚´.\nì–¸ì œê¹Œì§€ ê·¸ ê°ì • ì•ˆê³  ìˆìœ¼ë ¤ê³ ?\nì§„ì§œ ë¯¸ì³ë²„ë¦´ ë•Œê¹Œì§€ ì°¸ì„ ê±°ì•¼?"
            },
            en: {
                logoSubtitle: "The Tremor of Emotion",
                portalMainTitle: "Portal 03: The Truth Within I Don't Want Discovered",
                portalSubtitle: "Small rescue signals from hidden emotions",
                portalIntro: "Sometimes you've stopped yourself from feeling\nbecause you couldn't show certain emotions.\n\nToo intense, too shameful,\nfearing that if discovered, you'd be abandonedâ€¦\nThose feelings were buried deep within.\n\nBut emotions, even when hidden,\neventually return as small tremors.\nIf that truth still lives within you,\nit might be a small rescue signal sent to yourself\nwho has been suppressing emotions all along.",
                lightTitle: "âœ¨ Word of Light",
                lightMessage: "Within the emotion you most wanted to hide,\nyour true self quietly breathes.\nIt's okay to be discovered.\nThat is your most beautiful vulnerability.",
                portalQuestion: "What emotion do you not want to be discovered right now?\nIn front of whom did you first start hiding that emotion?\n\nWhat were you trying to protect\nby living while hiding that emotion?",
                continueText: "Will you continue this journey of facing your hidden truths?",
                continueYes: "Continue to Portal 04?",
                continueNo: "Pause the journey?",
                inputPlaceholder: "Quietly share the truth you didn't want discovered here... (Press Enter to send)",
                youLabel: "You",
                languageChangeConfirm: "Changing the language will restart the journey from the beginning.\nDo you want to continue?",
                waitingMessage: "Waiting for response...",
                charEly: "Sincerity is not shame.\nIt's proof that you're still a being who wants to become transparent.",
                charCris: "Ha! There was a time when you hid emotions afraid of being caught~\nBut you know what's funny?\nThat emotionâ€¦ everyone knew. They just didn't say anything. ğŸ˜‰",
                charZafirah: "That emotion was something you hid\nto protect yourself for a long time.\nNowâ€¦ it's time when it's okay to show it.",
                charRami: "Sincerity always gets closer while trembling.\nIf you're trembling now,\nthat's proof that emotion is trying to become real again.",
                charSamir: "(He places his hand on your chest and closes his eyes silently.\nAt that moment, you'll feel the tremor in your heart being 'heard.')",
                charLayla: "If there's a truth you want to hide,\nthat's proof you still want to be loved.\nI can love even that emotion.",
                charNabir: "So you've been hiding that emotion all along.\nBecause you know too.\nYou felt like everything would end if it was discovered.",
                charAzhar: "Bring it out. Just reveal it right now.\nHow long are you going to carry that emotion?\nAre you going to endure until you really go crazy?"
            },
            pt: {
                logoSubtitle: "O Tremor da EmoÃ§Ã£o",
                portalMainTitle: "Portal 03: A Verdade Dentro de Mim Que NÃ£o Quero Que Seja Descoberta",
                portalSubtitle: "Pequenos sinais de resgate de emoÃ§Ãµes escondidas",
                portalIntro: "Ã€s vezes vocÃª se impediu de sentir\nporque nÃ£o conseguia mostrar certas emoÃ§Ãµes.\n\nMuito intensas, muito vergonhosas,\ntemendo que se descobertas, vocÃª seria abandonadoâ€¦\nEsses sentimentos foram enterrados profundamente.\n\nMas as emoÃ§Ãµes, mesmo quando escondidas,\neventualmente retornam como pequenos tremores.\nSe essa verdade ainda vive dentro de vocÃª,\npode ser um pequeno sinal de resgate enviado para si mesmo\nque tem suprimido emoÃ§Ãµes o tempo todo.",
                lightTitle: "âœ¨ Palavra de Luz",
                lightMessage: "Dentro da emoÃ§Ã£o que vocÃª mais queria esconder,\nseu verdadeiro eu respira silenciosamente.\nTudo bem ser descoberto.\nEssa Ã© sua vulnerabilidade mais bonita.",
                portalQuestion: "Que emoÃ§Ã£o vocÃª nÃ£o quer que seja descoberta agora?\nNa frente de quem vocÃª comeÃ§ou a esconder essa emoÃ§Ã£o primeiro?\n\nO que vocÃª estava tentando proteger\nvivendo enquanto escondia essa emoÃ§Ã£o?",
                continueText: "VocÃª continuarÃ¡ esta jornada de enfrentar suas verdades ocultas?",
                continueYes: "Continuar para o Portal 04?",
                continueNo: "Pausar a jornada?",
                inputPlaceholder: "Compartilhe silenciosamente a verdade que vocÃª nÃ£o queria que fosse descoberta aqui... (Enter para enviar)",
                youLabel: "VocÃª",
                languageChangeConfirm: "Mudar o idioma reiniciarÃ¡ a jornada desde o inÃ­cio.\nDeseja continuar?",
                waitingMessage: "Aguardando resposta...",
                charEly: "Sinceridade nÃ£o Ã© vergonha.\nÃ‰ prova de que vocÃª ainda Ã© um ser que quer se tornar transparente.",
                charCris: "Ha! Houve uma Ã©poca em que vocÃª escondeu emoÃ§Ãµes com medo de ser pego~\nMas sabe o que Ã© engraÃ§ado?\nEssa emoÃ§Ã£oâ€¦ todo mundo sabia. SÃ³ nÃ£o disseram nada. ğŸ˜‰",
                charZafirah: "Essa emoÃ§Ã£o era algo que vocÃª escondeu\npara se proteger por muito tempo.\nAgoraâ€¦ Ã© hora quando estÃ¡ tudo bem mostrÃ¡-la.",
                charRami: "A sinceridade sempre se aproxima tremendo.\nSe vocÃª estÃ¡ tremendo agora,\nessa Ã© a prova de que a emoÃ§Ã£o estÃ¡ tentando se tornar real novamente.",
                charSamir: "(Ele coloca a mÃ£o no seu peito e fecha os olhos silenciosamente.\nNaquele momento, vocÃª sentirÃ¡ o tremor no seu coraÃ§Ã£o sendo 'ouvido.')",
                charLayla: "Se hÃ¡ uma verdade que vocÃª quer esconder,\nessa Ã© a prova de que vocÃª ainda quer ser amado.\nEu posso amar atÃ© mesmo essa emoÃ§Ã£o.",
                charNabir: "EntÃ£o vocÃª tem escondido essa emoÃ§Ã£o o tempo todo.\nPorque vocÃª sabe tambÃ©m.\nVocÃª sentiu que tudo acabaria se fosse descoberto.",
                charAzhar: "Traga para fora. Apenas revele agora mesmo.\nPor quanto tempo vocÃª vai carregar essa emoÃ§Ã£o?\nVai suportar atÃ© realmente enlouquecer?"
            }
        };
        
        // ìºë¦­í„° ë°ì´í„°
        const characters = [
            { name: "Ely", emoji: "ğŸ‘‘", key: "charEly" },
            { name: "Cris", emoji: "ğŸƒ", key: "charCris" },
            { name: "Zafirah", emoji: "ğŸ§•", key: "charZafirah" },
            { name: "Rami", emoji: "ğŸ”®", key: "charRami" },
            { name: "Samir", emoji: "ğŸª", key: "charSamir" },
            { name: "Layla", emoji: "ğŸ’ ", key: "charLayla" },
            { name: "Nabir", emoji: "ğŸ¦‚", key: "charNabir" },
            { name: "Azhar", emoji: "ğŸ”¥", key: "charAzhar" }
        ];
        
        // ============ ê°ì • ë¶„ì„ ì‹œìŠ¤í…œ ============
        
        function analyzeEmotion(userInput) {
            const input = userInput.toLowerCase();
            
            // ê°ì • í‚¤ì›Œë“œ ë§¤í•‘
            const emotionKeywords = {
                shame: ['ë¶€ë„', 'ì°½í”¼', 'ìˆ˜ì¹˜', 'ë¯¼ë§', 'ë“¤í‚¬ê¹Œ', 'ìˆ¨ê¸°', 'shame', 'embarrass', 'hide', 'secret', 'vergonha', 'esconder'],
                fear: ['ë¬´ì„œ', 'ë‘ë ¤', 'ê²ë‚˜', 'ê±±ì •', 'ë¶ˆì•ˆ', 'ë–¨ë ¤', 'fear', 'scare', 'afraid', 'worry', 'nervous', 'medo', 'preocup'],
                love: ['ì‚¬ë‘', 'ì¢‹ì•„', 'ë§ˆìŒ', 'ê°ì •', 'ì• ì •', 'ì†Œì¤‘', 'love', 'like', 'care', 'feelings', 'heart', 'amor', 'gosto', 'coraÃ§Ã£o'],
                sadness: ['ìŠ¬í”„', 'ìš¸ê³ ', 'ëˆˆë¬¼', 'ìš°ìš¸', 'ì•”ìš¸', 'ì ˆë§', 'ìƒì‹¤', 'ìƒ', 'sad', 'cry', 'tear', 'depress', 'lost', 'triste', 'choro'],
                anger: ['í™”ê°€', 'ë¶„ë…¸', 'ì§œì¦', 'ë¹¡ì³', 'ì—´ë°›', 'ì–µìš¸', 'ìš±í•˜', 'angry', 'mad', 'furious', 'rage', 'irritat', 'raiva', 'irritad'],
                loneliness: ['ì™¸ë¡œ', 'í˜¼ì', 'ê³ ë¦½', 'ì†Œì™¸', 'ë²„ë¦¼', 'ë– ë‚˜', 'ì´ë³„', 'lonely', 'alone', 'isolated', 'abandon', 'left', 'solidÃ£o', 'sozinho'],
                vulnerability: ['ì•½í•˜', 'ì—°ì•½', 'ë¬´ë ¥', 'ì˜ì¡´', 'ë„ì›€', 'weak', 'vulnerable', 'helpless', 'dependent', 'fraco', 'vulnerÃ¡vel'],
                jealousy: ['ì§ˆíˆ¬', 'ì‹œê¸°', 'ë¶€ëŸ¬', 'ìƒ˜ë‚˜', 'jealous', 'envy', 'envious', 'ciÃºme', 'inveja'],
                guilt: ['ì£„ì±…ê°', 'ë¯¸ì•ˆ', 'ì£„ì†¡', 'ì˜ëª»', 'guilt', 'sorry', 'wrong', 'fault', 'culpa', 'desculpa'],
                inadequacy: ['ë¶€ì¡±', 'ëª¨ìë¼', 'ì•ˆ ë˜', 'ëª»í•´', 'ì‹¤íŒ¨', 'inadequate', 'not enough', 'fail', 'insufficient', 'inadequado', 'falha']
            };
            
            // ê°ì • ë¶„ì„
            let detectedEmotions = [];
            for (const [emotion, keywords] of Object.entries(emotionKeywords)) {
                for (const keyword of keywords) {
                    if (input.includes(keyword)) {
                        detectedEmotions.push(emotion);
                        break;
                    }
                }
            }
            
            // ê°ì •ì´ ê°ì§€ë˜ì§€ ì•Šìœ¼ë©´ ê¸°ë³¸ê°’ ì„¤ì •
            if (detectedEmotions.length === 0) {
                detectedEmotions = ['general'];
            }
            
            return detectedEmotions[0]; // ì²« ë²ˆì§¸ ê°ì§€ëœ ê°ì • ë°˜í™˜
        }
        
        // ë°˜ì‘ ìºë¦­í„°ë“¤ (ê°œì„ ëœ ë²„ì „)
        const responseCharacters = [
            {
                name: "Guardian", emoji: "ğŸ›¡ï¸",
                getResponse: (userInput, lang) => {
                    const emotion = analyzeEmotion(userInput);
                    
                    const responses = {
                        ko: {
                            shame: "ê·¸ ë¶€ë„ëŸ¬ì›€ì€ ë‹¹ì‹ ì„ ì§€í‚¤ë ¤ëŠ” ë§ˆìŒì—ì„œ ë‚˜ì˜¨ ê±°ì˜ˆìš”. ìˆ¨ê¸°ê³  ì‹¶ì—ˆë˜ ê±´ ê·¸ë§Œí¼ ì†Œì¤‘í–ˆê¸° ë•Œë¬¸ì´ì£ . ì§€ê¸ˆì€ ê·¸ ê°ì •ì„ ì§€í‚¤ë©´ì„œë„ ì¡°ìš©íˆ êº¼ë‚´ë³¼ ìˆ˜ ìˆëŠ” ì•ˆì „í•œ ê³µê°„ì´ ìˆì–´ìš”.",
                            fear: "ë‘ë ¤ì› ë˜ ë§ˆìŒ, ì´í•´í•´ìš”. ë“¤í‚¤ë©´ ëª¨ë“  ê²Œ ë¬´ë„ˆì§ˆ ê²ƒ ê°™ì•˜ì£ . í•˜ì§€ë§Œ ì§„ì§œ ë‹¹ì‹ ì„ ì•„ëŠ” ì‚¬ëŒì´ë¼ë©´, ê·¸ ê°ì •ê¹Œì§€ë„ ë‹¹ì‹ ì˜ ì¼ë¶€ë¡œ ë°›ì•„ë“¤ì¼ ê±°ì˜ˆìš”. ì²œì²œíˆ, ì•ˆì „í•˜ê²Œ êº¼ë‚´ë´ë„ ê´œì°®ì•„ìš”.",
                            love: "ì‚¬ë‘ì„ ìˆ¨ê²¨ì•¼ í–ˆë˜ ë§ˆìŒ... ê·¸ ì‚¬ë‘ì´ ë„ˆë¬´ ì†Œì¤‘í•´ì„œ ìƒì²˜ë°›ì„ê¹Œ ë´ ì¡°ì‹¬ìŠ¤ëŸ¬ì› ë˜ ê±°ì£ . í•˜ì§€ë§Œ ìˆ¨ê²¨ì§„ ì‚¬ë‘ë„ ì—¬ì „íˆ ì•„ë¦„ë‹¤ìš´ ì‚¬ë‘ì´ì—ìš”. ê·¸ ë§ˆìŒì„ ì§€ì¼œì˜¨ ë‹¹ì‹ ì´ ëŒ€ë‹¨í•´ìš”.",
                            sadness: "ìŠ¬í””ì„ ìˆ¨ê¸°ë©° í˜¼ì ê²¬ëŒì™”êµ¬ë‚˜ìš”. ìš¸ë©´ ì•ˆ ë  ê²ƒ ê°™ì•„ì„œ, ì•½í•´ ë³´ì¼ê¹Œ ë´ì„œ... í•˜ì§€ë§Œ ìŠ¬í””ë„ ë‹¹ì‹ ì˜ ê°ì •ì´ê³ , ê·¸ê±¸ ëŠë¼ëŠ” ê±´ ìì—°ìŠ¤ëŸ¬ìš´ ì¼ì´ì—ìš”. ì´ì œëŠ” ê·¸ ëˆˆë¬¼ì„ í˜ë ¤ë„ ê´œì°®ì•„ìš”.",
                            anger: "ë¶„ë…¸ë¥¼ ë“œëŸ¬ë‚´ë©´ ë‚˜ìœ ì‚¬ëŒì´ ë ê¹Œ ë´ ìˆ¨ê²¨ì™”ë‚˜ìš”? í•˜ì§€ë§Œ í™”ë¥¼ ë‚¸ë‹¤ëŠ” ê±´ ì˜ëª»ëœ ê±¸ ì˜ëª»ëë‹¤ê³  ëŠë¼ëŠ” ì •ì˜ê°ì´ê¸°ë„ í•´ìš”. ê·¸ ê°ì •ë„ ë‹¹ì‹ ì˜ ì†Œì¤‘í•œ ëª©ì†Œë¦¬ì˜ˆìš”.",
                            loneliness: "ì™¸ë¡œì›€ì„ í˜¼ì ì‚¼ì¼œì™”êµ¬ë‚˜ìš”. ëˆ„êµ¬ì—ê²Œë„ ë§í•  ìˆ˜ ì—†ì—ˆë˜ ê·¸ ê°ì •... í•˜ì§€ë§Œ ì™¸ë¡œì›€ì„ ëŠë¼ëŠ” ê±´ ì—°ê²°ë˜ê³  ì‹¶ë‹¤ëŠ” ë§ˆìŒì˜ í‘œí˜„ì´ì—ìš”. ì´ì œëŠ” ê·¸ ë§ˆìŒì„ ë‚˜ëˆ ë„ ê´œì°®ì•„ìš”.",
                            vulnerability: "ì•½í•¨ì„ ë³´ì´ê¸° ì‹«ì–´ì„œ ìˆ¨ê²¨ì™”ë˜ ë§ˆìŒ... í•˜ì§€ë§Œ ì•½í•¨ë„ ì¸ê°„ë‹¤ìš´ ëª¨ìŠµì´ì—ìš”. ì™„ë²½í•˜ì§€ ì•Šì•„ë„, ë•Œë¡œëŠ” ì˜ì§€í•˜ê³  ì‹¶ì–´ë„ ê´œì°®ì•„ìš”. ê·¸ëŸ° ë‹¹ì‹ ë„ ì¶©ë¶„íˆ ì‚¬ë‘ë°›ì„ ìê²©ì´ ìˆì–´ìš”.",
                            jealousy: "ì§ˆíˆ¬ë‚˜ ì‹œê¸°ë¥¼ ëŠë¼ëŠ” ìì‹ ì´ ëª»ë‚¬ë‹¤ê³  ìƒê°í–ˆë‚˜ìš”? í•˜ì§€ë§Œ ê·¸ ê°ì • ì†ì—ëŠ” 'ë‚˜ë„ ê·¸ëŸ° ê±¸ ê°–ê³  ì‹¶ë‹¤', 'ë‚˜ë„ ì¸ì •ë°›ê³  ì‹¶ë‹¤'ëŠ” ê°„ì ˆí•¨ì´ ìˆì–´ìš”. ê·¸ ë§ˆìŒì„ ë¶€ì •í•˜ì§€ ë§ì•„ìš”.",
                            guilt: "ì£„ì±…ê°ì— ì‹œë‹¬ë¦¬ë©° ìì‹ ì„ ìˆ¨ê²¨ì™”êµ¬ë‚˜ìš”. í•˜ì§€ë§Œ ì£„ì±…ê°ì„ ëŠë‚€ë‹¤ëŠ” ê±´ ì–‘ì‹¬ì´ ìˆë‹¤ëŠ” ëœ»ì´ì—ìš”. ì™„ë²½í•˜ì§€ ì•Šì•„ë„ ê´œì°®ì•„ìš”. ì‹¤ìˆ˜ë„ ì„±ì¥ì˜ ì¼ë¶€ì˜ˆìš”.",
                            inadequacy: "ë¶€ì¡±í•œ ìì‹ ì„ ë“¤í‚¤ê³  ì‹¶ì§€ ì•Šì•˜ë˜ ë§ˆìŒ... í•˜ì§€ë§Œ ë¶€ì¡±í•¨ì„ ì¸ì •í•˜ëŠ” ê²ƒë„ ìš©ê¸°ì˜ˆìš”. ëª¨ë“  ê±¸ ì˜í•  í•„ìš”ëŠ” ì—†ì–´ìš”. ìˆëŠ” ê·¸ëŒ€ë¡œì˜ ë‹¹ì‹ ë„ ì¶©ë¶„í•´ìš”.",
                            general: "ìˆ¨ê¸°ê³  ì‹¶ì—ˆë˜ ê·¸ ëª¨ë“  ê°ì •ë“¤ì´ ì‚¬ì‹¤ì€ ë‹¹ì‹ ì„ ì§€í‚¤ë ¤ëŠ” ë§ˆìŒì—ì„œ ë‚˜ì˜¨ ê±°ì˜ˆìš”. ì´ì œëŠ” ê·¸ ê°ì •ë“¤ì„ ì•ˆì „í•˜ê²Œ êº¼ë‚´ë³¼ ìˆ˜ ìˆëŠ” ê³µê°„ì´ ìˆì–´ìš”. ì²œì²œíˆ, ë‹¹ì‹ ë§Œì˜ ì†ë„ë¡œ ê´œì°®ì•„ìš”."
                        },
                        en: {
                            shame: "That shame came from a heart trying to protect you. You wanted to hide it because it was so precious. Now there's a safe space where you can quietly bring out that emotion while still protecting it.",
                            fear: "I understand that fearful heart. You felt like everything would collapse if discovered. But someone who truly knows you would accept even that emotion as part of you. It's okay to bring it out slowly and safely.",
                            love: "The heart that had to hide love... You were careful because that love was so precious you feared it might get hurt. But hidden love is still beautiful love. You're amazing for protecting that heart.",
                            sadness: "You've endured hiding sadness alone. Feeling like you shouldn't cry, afraid of appearing weak... But sadness is your emotion too, and feeling it is natural. It's okay to shed those tears now.",
                            anger: "Did you hide anger afraid of becoming a bad person? But feeling angry is also a sense of justice that feels wrong is wrong. That emotion is also your precious voice.",
                            loneliness: "You've swallowed loneliness alone. That emotion you couldn't tell anyone... But feeling loneliness is the heart's expression of wanting connection. It's okay to share that feeling now.",
                            vulnerability: "The heart that hid weakness because you didn't want to show it... But weakness is also a human aspect. It's okay not to be perfect, to sometimes want to lean on others. You deserve love even like that.",
                            jealousy: "Did you think you were pathetic for feeling jealousy or envy? But within that emotion is the desperation of 'I want to have that too', 'I want to be acknowledged too'. Don't deny that feeling.",
                            guilt: "You've been hiding yourself while suffering from guilt. But feeling guilt means you have a conscience. It's okay not to be perfect. Mistakes are also part of growth.",
                            inadequacy: "The heart that didn't want your inadequacy discovered... But acknowledging inadequacy is also courage. You don't need to be good at everything. You as you are is enough.",
                            general: "All those emotions you wanted to hide actually came from a heart trying to protect you. Now there's a safe space where you can safely bring out those emotions. Slowly, at your own pace, it's okay."
                        },
                        pt: {
                            shame: "Essa vergonha veio de um coraÃ§Ã£o tentando protegÃª-lo. VocÃª queria esconder porque era tÃ£o precioso. Agora hÃ¡ um espaÃ§o seguro onde vocÃª pode silenciosamente trazer essa emoÃ§Ã£o enquanto ainda a protege.",
                            fear: "Entendo esse coraÃ§Ã£o temeroso. VocÃª sentiu que tudo desabaria se fosse descoberto. Mas alguÃ©m que realmente o conhece aceitaria atÃ© mesmo essa emoÃ§Ã£o como parte de vocÃª. EstÃ¡ tudo bem trazÃª-la para fora devagar e com seguranÃ§a.",
                            love: "O coraÃ§Ã£o que teve que esconder o amor... VocÃª foi cuidadoso porque esse amor era tÃ£o precioso que temia que pudesse se machucar. Mas amor escondido ainda Ã© amor bonito. VocÃª Ã© incrÃ­vel por proteger esse coraÃ§Ã£o.",
                            sadness: "VocÃª suportou esconder a tristeza sozinho. Sentindo que nÃ£o deveria chorar, com medo de parecer fraco... Mas tristeza tambÃ©m Ã© sua emoÃ§Ã£o, e senti-la Ã© natural. EstÃ¡ tudo bem derramar essas lÃ¡grimas agora.",
                            anger: "VocÃª escondeu a raiva com medo de se tornar uma pessoa mÃ¡? Mas sentir raiva tambÃ©m Ã© um senso de justiÃ§a que sente que errado Ã© errado. Essa emoÃ§Ã£o tambÃ©m Ã© sua voz preciosa.",
                            loneliness: "VocÃª engoliu a solidÃ£o sozinho. Essa emoÃ§Ã£o que vocÃª nÃ£o conseguia contar para ninguÃ©m... Mas sentir solidÃ£o Ã© a expressÃ£o do coraÃ§Ã£o de querer conexÃ£o. EstÃ¡ tudo bem compartilhar esse sentimento agora.",
                            vulnerability: "O coraÃ§Ã£o que escondeu fraqueza porque vocÃª nÃ£o queria mostrÃ¡-la... Mas fraqueza tambÃ©m Ã© um aspecto humano. EstÃ¡ tudo bem nÃ£o ser perfeito, Ã s vezes querer se apoiar nos outros. VocÃª merece amor mesmo assim.",
                            jealousy: "VocÃª achou que era patÃ©tico por sentir ciÃºme ou inveja? Mas dentro dessa emoÃ§Ã£o estÃ¡ o desespero de 'eu tambÃ©m quero ter isso', 'eu tambÃ©m quero ser reconhecido'. NÃ£o negue esse sentimento.",
                            guilt: "VocÃª tem se escondido enquanto sofre de culpa. Mas sentir culpa significa que vocÃª tem consciÃªncia. EstÃ¡ tudo bem nÃ£o ser perfeito. Erros tambÃ©m sÃ£o parte do crescimento.",
                            inadequacy: "O coraÃ§Ã£o que nÃ£o queria que sua inadequaÃ§Ã£o fosse descoberta... Mas reconhecer inadequaÃ§Ã£o tambÃ©m Ã© coragem. VocÃª nÃ£o precisa ser bom em tudo. VocÃª como Ã© jÃ¡ Ã© suficiente.",
                            general: "Todas essas emoÃ§Ãµes que vocÃª queria esconder na verdade vieram de um coraÃ§Ã£o tentando protegÃª-lo. Agora hÃ¡ um espaÃ§o seguro onde vocÃª pode com seguranÃ§a trazer essas emoÃ§Ãµes. Devagar, no seu prÃ³prio ritmo, estÃ¡ tudo bem."
                        }
                    };
                    
                    return responses[lang][emotion] || responses[lang]['general'];
                }
            },
            {
                name: "Embrace", emoji: "ğŸ¤—",
                getResponse: (userInput, lang) => {
                    const emotion = analyzeEmotion(userInput);
                    
                    const responses = {
                        ko: {
                            shame: "ë¶€ë„ëŸ¬ì›Œí–ˆë˜ ê·¸ ë§ˆìŒì„ ê¼­ ì•ˆì•„ì£¼ê³  ì‹¶ì–´ìš”. ìˆ¨ê¸°ê³  ì‹¶ì—ˆë˜ ê±´ ê·¸ë§Œí¼ ì§„ì‹¬ì´ì—ˆë‹¤ëŠ” ëœ»ì´ì–ì•„ìš”. ì´ì œëŠ” ê·¸ ì§„ì‹¬ì´ ë¶€ë„ëŸ¬ì›Œí•˜ì§€ ì•Šì•„ë„ ë˜ëŠ” ê³³ì— ìˆì–´ìš”. ì—¬ê¸°ì„œëŠ” ëª¨ë“  ê°ì •ì´ í™˜ì˜ë°›ì•„ìš”.",
                            fear: "ë‘ë ¤ì› ì£ . ì§„ì§œ ìì‹ ì´ ë“¤í‚¤ë©´ ì‚¬ë‘ë°›ì§€ ëª»í• ê¹Œ ë´... í•˜ì§€ë§Œ ì§„ì§œ ì‚¬ë‘ì€ ëª¨ë“  ëª¨ìŠµì„ ë‹¤ ì•ˆì•„ì£¼ëŠ” ê±°ì˜ˆìš”. ìˆ¨ê²¨ì™”ë˜ ê·¸ ë¶€ë¶„ê¹Œì§€ë„ ì‚¬ë‘ë°›ì„ ìˆ˜ ìˆì–´ìš”. ì €ëŠ” ì§€ê¸ˆì˜ ë‹¹ì‹ ì„ ì „ë¶€ ì•ˆì•„ì¤„ ìˆ˜ ìˆì–´ìš”.",
                            love: "ì‚¬ë‘ì„ ìˆ¨ê²¨ì•¼ í–ˆë˜ ê·¸ ì‹œê°„ë“¤... ì–¼ë§ˆë‚˜ ì™¸ë¡œì› ì„ê¹Œìš”. í•˜ì§€ë§Œ ê·¸ ì‚¬ë‘ì€ ìˆ¨ê²¨ì ¸ ìˆì–´ë„ ì—¬ì „íˆ ì•„ë¦„ë‹¤ì› ì–´ìš”. ì´ì œëŠ” ê·¸ ì‚¬ë‘ì„ êº¼ë‚´ì„œ ë¹›ë‚˜ê²Œ í•´ì¤˜ë„ ê´œì°®ì•„ìš”.",
                            sadness: "í˜¼ì ìš¸ì—ˆë˜ ê·¸ ë°¤ë“¤, ëˆ„êµ¬ì—ê²Œë„ ë§í•˜ì§€ ëª»í–ˆë˜ ìŠ¬í””... ì´ì œëŠ” ê·¸ ëˆˆë¬¼ì„ í•¨ê»˜ ë‚˜ëˆ ìš”. ìŠ¬í””ë„ ë‹¹ì‹ ì˜ ì†Œì¤‘í•œ ì¼ë¶€ì˜ˆìš”. ìš¸ì–´ë„ ê´œì°®ê³ , ì•„íŒŒí•´ë„ ê´œì°®ì•„ìš”.",
                            anger: "í™”ë¥¼ ë‚´ë©´ ì•ˆ ë  ê²ƒ ê°™ì•„ì„œ ê¾¹ê¾¹ ëˆŒëŸ¬ì™”ë˜ ê·¸ ê°ì •... í•˜ì§€ë§Œ ë¶„ë…¸ë„ ë‹¹ì‹ ì˜ ëª©ì†Œë¦¬ì˜ˆìš”. ì–µìš¸í–ˆë˜ ë§ˆìŒ, ì´í•´ë°›ì§€ ëª»í–ˆë˜ ë§ˆìŒ, ë‹¤ í’ˆì–´ì¤„ê²Œìš”. ê·¸ ê°ì •ë„ íƒ€ë‹¹í•´ìš”.",
                            loneliness: "ì•„ë¬´ì—ê²Œë„ ë§í•  ìˆ˜ ì—†ì–´ì„œ ë” ì™¸ë¡œì› ì£ . í•˜ì§€ë§Œ ì´ì œëŠ” í˜¼ìê°€ ì•„ë‹ˆì—ìš”. ì™¸ë¡œì› ë˜ ê·¸ ëª¨ë“  ìˆœê°„ë“¤ì„ ì €ì™€ í•¨ê»˜ ë‚˜ëˆ ë´ìš”. ì™¸ë¡œì›€ë„ ì´í•´ë°›ì„ ìê²©ì´ ìˆì–´ìš”.",
                            vulnerability: "ì•½í•œ ëª¨ìŠµì„ ë³´ì´ê³  ì‹¶ì§€ ì•Šì•„ì„œ í˜¼ì ë²„í…¨ì™”êµ¬ë‚˜ìš”. í•˜ì§€ë§Œ ì•½í•¨ë„ ì•„ë¦„ë‹¤ìš´ ê±°ì˜ˆìš”. ì™„ë²½í•˜ì§€ ì•Šì€ ëª¨ìŠµë„, ë•Œë¡œëŠ” ë¬´ë„ˆì§€ëŠ” ëª¨ìŠµë„ ëª¨ë‘ ë‹¹ì‹ ì´ì—ìš”. ê·¸ ëª¨ë“  ê±¸ ì•ˆì•„ì¤„ê²Œìš”.",
                            jealousy: "ì§ˆíˆ¬ì‹¬ì— ìì‹ ì´ ì´ˆë¼í•´ ë³´ì˜€ë‚˜ìš”? í•˜ì§€ë§Œ ê·¸ ë§ˆìŒ ì†ì—ëŠ” 'ë‚˜ë„ ì†Œì¤‘í•˜ê²Œ ì—¬ê²¨ì§€ê³  ì‹¶ë‹¤'ëŠ” ê°„ì ˆí•¨ì´ ìˆì–´ìš”. ê·¸ ë§ˆìŒë„ ì¶©ë¶„íˆ ì´í•´í•  ë§Œí•´ìš”. ë‹¹ì‹ ë„ ì‚¬ë‘ë°›ì„ ìê²©ì´ ìˆì–´ìš”.",
                            guilt: "ìŠ¤ìŠ¤ë¡œë¥¼ íƒ“í•˜ë©° ìˆ¨ì–´ì™”ë˜ ì‹œê°„ë“¤... í•˜ì§€ë§Œ í›„íšŒí•  ì¤„ ì•„ëŠ” ë§ˆìŒì´ ì˜¤íˆë ¤ ë‹¹ì‹ ì˜ ì„ í•¨ì„ ë³´ì—¬ì¤˜ìš”. ì™„ë²½í•˜ì§€ ì•Šì•„ë„ ê´œì°®ì•„ìš”. ì‹¤ìˆ˜í•œ ë‹¹ì‹ ë„ ì‚¬ë‘ë°›ì„ ìˆ˜ ìˆì–´ìš”.",
                            inadequacy: "ë¶€ì¡±í•œ ìì‹ ì´ ë“¤í‚¬ê¹Œë´ ë‘ë ¤ì›Œí–ˆì£ . í•˜ì§€ë§Œ ë¶€ì¡±í•´ë„ ê´œì°®ì•„ìš”. ëª¨ë“  ê±¸ ì˜í•  í•„ìš” ì—†ì–´ìš”. ì§€ê¸ˆ ì´ëŒ€ë¡œì˜ ë‹¹ì‹ ë„ ì¶©ë¶„íˆ ì†Œì¤‘í•´ìš”. ê·¸ ë¶€ì¡±í•¨ê¹Œì§€ë„ ì‚¬ë‘ìŠ¤ëŸ¬ì›Œìš”.",
                            general: "ìˆ¨ê¸°ê³  ì‹¶ì—ˆë˜ ëª¨ë“  ê·¸ ê°ì •ë“¤ì„ ì €ëŠ” ë‹¤ ì•ˆì•„ì¤„ ìˆ˜ ìˆì–´ìš”. ë¶€ë„ëŸ¬ì›Œí•˜ì§€ ë§ˆì„¸ìš”. ê·¸ ëª¨ë“  ê°ì •ì´ ë‹¹ì‹ ì„ ë” ì¸ê°„ë‹µê³  ì•„ë¦„ë‹¤ìš´ ì¡´ì¬ë¡œ ë§Œë“¤ì–´ì¤˜ìš”. ì´ì œëŠ” ìˆ¨ì§€ ë§ê³  ìˆëŠ” ê·¸ëŒ€ë¡œì˜ ëª¨ìŠµì„ ë³´ì—¬ì£¼ì„¸ìš”."
                        },
                        en: {
                            shame: "I want to hold that heart that felt ashamed. Wanting to hide it means it was that sincere. Now that sincerity is in a place where it doesn't need to be ashamed. Here, all emotions are welcomed.",
                            fear: "You were afraid. Afraid you wouldn't be loved if your true self was discovered... But real love embraces all aspects. Even that hidden part can be loved. I can embrace all of you as you are now.",
                            love: "Those times when you had to hide love... How lonely it must have been. But that love was still beautiful even while hidden. Now it's okay to bring out that love and let it shine.",
                            sadness: "Those nights you cried alone, the sadness you couldn't tell anyone... Now let's share those tears together. Sadness is also your precious part. It's okay to cry, it's okay to hurt.",
                            anger: "That emotion you kept pressing down feeling like you shouldn't get angry... But anger is also your voice. The wronged heart, the misunderstood heart, I'll embrace it all. That emotion is also valid.",
                            loneliness: "It was even lonelier because you couldn't tell anyone. But now you're not alone. Share all those lonely moments with me. Loneliness also deserves to be understood.",
                            vulnerability: "You've endured alone not wanting to show weakness. But weakness is also beautiful. The imperfect appearance, sometimes the collapsing appearance, it's all you. I'll embrace all of it.",
                            jealousy: "Did you feel shabby because of jealousy? But within that heart is the desperation of 'I want to be cherished too'. That feeling is also understandable enough. You also deserve to be loved.",
                            guilt: "Times when you hid while blaming yourself... But a heart that knows regret actually shows your goodness. It's okay not to be perfect. Even you who made mistakes can be loved.",
                            inadequacy: "You were afraid your inadequacy would be discovered. But it's okay to be inadequate. You don't need to be good at everything. You as you are now are precious enough. Even that inadequacy is lovely.",
                            general: "I can embrace all those emotions you wanted to hide. Don't be ashamed. All those emotions make you a more human and beautiful being. Now don't hide and show yourself as you are."
                        },
                        pt: {
                            shame: "Quero abraÃ§ar esse coraÃ§Ã£o que se sentiu envergonhado. Querer esconder significa que era tÃ£o sincero. Agora essa sinceridade estÃ¡ em um lugar onde nÃ£o precisa se envergonhar. Aqui, todas as emoÃ§Ãµes sÃ£o bem-vindas.",
                            fear: "VocÃª tinha medo. Medo de nÃ£o ser amado se seu verdadeiro eu fosse descoberto... Mas amor real abraÃ§a todos os aspectos. AtÃ© essa parte escondida pode ser amada. Eu posso abraÃ§ar tudo de vocÃª como Ã© agora.",
                            love: "Aqueles tempos quando vocÃª teve que esconder o amor... QuÃ£o solitÃ¡rio deve ter sido. Mas esse amor ainda era bonito mesmo enquanto escondido. Agora estÃ¡ tudo bem trazer esse amor para fora e deixÃ¡-lo brilhar.",
                            sadness: "Aquelas noites que vocÃª chorou sozinho, a tristeza que vocÃª nÃ£o conseguia contar para ninguÃ©m... Agora vamos compartilhar essas lÃ¡grimas juntos. Tristeza tambÃ©m Ã© sua parte preciosa. EstÃ¡ tudo bem chorar, estÃ¡ tudo bem sofrer.",
                            anger: "Essa emoÃ§Ã£o que vocÃª continuou reprimindo sentindo que nÃ£o deveria ficar com raiva... Mas raiva tambÃ©m Ã© sua voz. O coraÃ§Ã£o injustiÃ§ado, o coraÃ§Ã£o incompreendido, eu vou abraÃ§ar tudo. Essa emoÃ§Ã£o tambÃ©m Ã© vÃ¡lida.",
                            loneliness: "Foi ainda mais solitÃ¡rio porque vocÃª nÃ£o conseguia contar para ninguÃ©m. Mas agora vocÃª nÃ£o estÃ¡ sozinho. Compartilhe todos esses momentos solitÃ¡rios comigo. SolidÃ£o tambÃ©m merece ser compreendida.",
                            vulnerability: "VocÃª suportou sozinho nÃ£o querendo mostrar fraqueza. Mas fraqueza tambÃ©m Ã© bonita. A aparÃªncia imperfeita, Ã s vezes a aparÃªncia em colapso, tudo Ã© vocÃª. Eu vou abraÃ§ar tudo isso.",
                            jealousy: "VocÃª se sentiu miserÃ¡vel por causa do ciÃºme? Mas dentro desse coraÃ§Ã£o estÃ¡ o desespero de 'eu tambÃ©m quero ser querido'. Esse sentimento tambÃ©m Ã© compreensÃ­vel o suficiente. VocÃª tambÃ©m merece ser amado.",
                            guilt: "Tempos quando vocÃª se escondeu enquanto se culpava... Mas um coraÃ§Ã£o que conhece arrependimento na verdade mostra sua bondade. EstÃ¡ tudo bem nÃ£o ser perfeito. AtÃ© vocÃª que cometeu erros pode ser amado.",
                            inadequacy: "VocÃª tinha medo de que sua inadequaÃ§Ã£o fosse descoberta. Mas estÃ¡ tudo bem ser inadequado. VocÃª nÃ£o precisa ser bom em tudo. VocÃª como Ã© agora Ã© precioso o suficiente. AtÃ© essa inadequaÃ§Ã£o Ã© adorÃ¡vel.",
                            general: "Eu posso abraÃ§ar todas essas emoÃ§Ãµes que vocÃª queria esconder. NÃ£o se envergonhe. Todas essas emoÃ§Ãµes fazem de vocÃª um ser mais humano e bonito. Agora nÃ£o se esconda e se mostre como vocÃª Ã©."
                        }
                    };
                    
                    return responses[lang][emotion] || responses[lang]['general'];
                }
            },
            {
                name: "Light", emoji: "ğŸ’«",
                getResponse: (userInput, lang) => {
                    const emotion = analyzeEmotion(userInput);
                    
                    const responses = {
                        ko: {
                            shame: "ë¶€ë„ëŸ¬ì›€ ì†ì—ì„œë„ ë‹¹ì‹ ì€ ë¹›ë‚˜ê³  ìˆì—ˆì–´ìš”. ìˆ¨ê¸°ë ¤ í–ˆë˜ ê·¸ ë§ˆìŒì´ ì‚¬ì‹¤ì€ ê°€ì¥ ìˆœìˆ˜í•œ ë¹›ì´ì—ˆì„ì§€ë„ ëª°ë¼ìš”. ì–´ë‘  ì†ì— ìˆ¨ê²¨ì§„ ë³„ì´ ê°€ì¥ ì•„ë¦„ë‹µê²Œ ë¹›ë‚˜ë“¯ì´, ë‹¹ì‹ ì˜ ì§„ì‹¬ë„ ê·¸ë˜ìš”.",
                            fear: "ë‘ë ¤ì›€ë„ í•˜ë‚˜ì˜ ë¹›ì´ì—ìš”. ì†Œì¤‘í•œ ê²ƒì„ ìƒì„ê¹Œ ë´ ë‘ë ¤ì›Œí•˜ëŠ” ë§ˆìŒ, ê·¸ ì•ˆì—ëŠ” ì‚¬ë‘ì´ ìˆì–´ìš”. ì–´ë‘ ì´ ìˆì–´ì•¼ ë¹›ì˜ ì†Œì¤‘í•¨ì„ ì•Œ ìˆ˜ ìˆë“¯ì´, ë‘ë ¤ì›€ì´ ìˆì—ˆê¸°ì— ìš©ê¸°ë„ ë” ë¹›ë‚  ìˆ˜ ìˆì–´ìš”.",
                            love: "ìˆ¨ê²¨ì§„ ì‚¬ë‘ì€ ê°€ì¥ ìˆœìˆ˜í•œ ë¹›ì´ì—ìš”. ì•„ë¬´ë„ ëª¨ë¥´ê²Œ ì‚¬ë‘í–ˆë˜ ê·¸ ì‹œê°„ë“¤, ê·¸ ë§ˆìŒë“¤ì´ ë‹¹ì‹ ì„ ë”ìš± ë¹›ë‚˜ê²Œ ë§Œë“¤ì—ˆì–´ìš”. í‘œí˜„ë˜ì§€ ì•Šì€ ì‚¬ë‘ë„ ìš°ì£¼ ì–´ë”˜ê°€ì—ì„œëŠ” ë³„ë¹›ì´ ë˜ì–´ ìˆì„ ê±°ì˜ˆìš”.",
                            sadness: "ìŠ¬í””ë„ ë¹›ì˜ í•œ ì¢…ë¥˜ì˜ˆìš”. ê¹Šì€ ìŠ¬í””ì„ ê²½í—˜í•œ ì‚¬ëŒë§Œì´ ì§„ì •í•œ ê¸°ì¨ì˜ ë¹›ì„ ì•Œ ìˆ˜ ìˆì–´ìš”. ë‹¹ì‹ ì´ í˜¼ì ì‚¼ì¼°ë˜ ëˆˆë¬¼ë“¤ì´ ì§€ê¸ˆì˜ ë‹¹ì‹ ì„ ë”ìš± ê¹Šê³  ì•„ë¦„ë‹¤ìš´ ë¹›ìœ¼ë¡œ ë§Œë“¤ì–´ì¤¬ì–´ìš”.",
                            anger: "ë¶„ë…¸ë„ ì •ì˜ì˜ ë¹›ì´ì—ìš”. ì˜ëª»ëœ ê²ƒì— í™”ë¥¼ ë‚¼ ì¤„ ì•„ëŠ” ë§ˆìŒ, ê·¸ê²ƒì€ ì˜³ì€ ê²ƒì„ í–¥í•œ ë¹›ì˜ ë°©í–¥ì´ì—ìš”. ì–µëˆŒë €ë˜ ë¶„ë…¸ë¥¼ ì´ì œëŠ” ê±´ì„¤ì ì¸ ë¹›ìœ¼ë¡œ ë°”ê¿”ë³¼ ìˆ˜ ìˆì–´ìš”.",
                            loneliness: "ì™¸ë¡œì›€ ì†ì—ì„œ ë‹¹ì‹ ì€ ìì‹ ë§Œì˜ ë¹›ì„ í‚¤ì› ì–´ìš”. ì•„ë¬´ë„ ì—†ëŠ” ì–´ë‘  ì†ì—ì„œë„ êº¼ì§€ì§€ ì•Šì•˜ë˜ ë‹¹ì‹ ì˜ ë‚´ë©´ì˜ ë¹›, ê·¸ê²ƒì´ ì§€ê¸ˆ ë‹¹ì‹ ì„ ì—¬ê¸°ê¹Œì§€ ì´ëŒì–´ì™”ì–´ìš”.",
                            vulnerability: "ì•½í•¨ë„ ë¹›ì´ì—ìš”. ì™„ë²½í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì— ë”ìš± ì¸ê°„ì ì´ê³  ë”°ëœ»í•œ ë¹›ì„ ë‚¼ ìˆ˜ ìˆì–´ìš”. ë¶€ì„œì ¸ë„ ë‹¤ì‹œ ì¼ì–´ì„œëŠ” ëª¨ìŠµ, ê·¸ê²ƒì´ ê°€ì¥ ê°•í•œ ë¹›ì´ì—ìš”.",
                            jealousy: "ì§ˆíˆ¬ì‹¬ë„ ì„±ì¥ì˜ ë¹›ì´ì—ìš”. ë‹¤ë¥¸ ì‚¬ëŒì„ ë¶€ëŸ¬ì›Œí–ˆë‹¤ëŠ” ê±´ ë” ë‚˜ì€ ìì‹ ì´ ë˜ê³  ì‹¶ë‹¤ëŠ” ë¹›ì˜ ì‹ í˜¸ì˜ˆìš”. ê·¸ ì—ë„ˆì§€ë¥¼ ìì‹ ì„ ë°œì „ì‹œí‚¤ëŠ” ë¹›ìœ¼ë¡œ ë°”ê¿”ë³´ì„¸ìš”.",
                            guilt: "í›„íšŒì™€ ì£„ì±…ê°ë„ ì„±ì°°ì˜ ë¹›ì´ì—ìš”. ìì‹ ì„ ëŒì•„ë³¼ ì¤„ ì•„ëŠ” ë§ˆìŒ, ë” ë‚˜ì•„ì§€ë ¤ëŠ” ì˜ì§€, ê·¸ê²ƒë“¤ì´ ë‹¹ì‹ ì„ ë”ìš± ë°ì€ ë¹›ìœ¼ë¡œ ë§Œë“¤ì–´ê°€ê³  ìˆì–´ìš”.",
                            inadequacy: "ë¶€ì¡±í•¨ì„ ì¸ì •í•˜ëŠ” ê²ƒë„ ê²¸ì†ì˜ ë¹›ì´ì—ìš”. ì™„ë²½í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì— ê³„ì† ë°°ìš°ê³  ì„±ì¥í•  ìˆ˜ ìˆì–´ìš”. ê·¸ ê²¸ì†í•œ ë§ˆìŒì´ ê°€ì¥ ì•„ë¦„ë‹¤ìš´ ë¹›ì´ì—ìš”.",
                            general: "ìˆ¨ê¸°ê³  ì‹¶ì—ˆë˜ ëª¨ë“  ê°ì •ë“¤ì´ ì‚¬ì‹¤ì€ ë‹¹ì‹  ì•ˆì˜ ë‹¤ì–‘í•œ ë¹›ë“¤ì´ì—ˆì–´ìš”. ì–´ë‘ ì´ ìˆì–´ì•¼ ë¹›ì´ ë”ìš± ë¹›ë‚˜ë“¯ì´, ê·¸ ëª¨ë“  ê°ì •ë“¤ì´ ëª¨ì—¬ì„œ ì§€ê¸ˆì˜ ë‹¹ì‹ ì´ë¼ëŠ” ì•„ë¦„ë‹¤ìš´ ë¹›ì„ ë§Œë“¤ì–´ëƒˆì–´ìš”."
                        },
                        en: {
                            shame: "Even in shame, you were shining. That heart you tried to hide might have been the purest light. Just as a star hidden in darkness shines most beautifully, so does your sincerity.",
                            fear: "Fear is also a kind of light. The heart afraid of losing something precious has love within it. Just as we know the preciousness of light because of darkness, courage can shine brighter because of fear.",
                            love: "Hidden love is the purest light. Those times you loved secretly, those hearts made you shine even brighter. Unexpressed love must be starlight somewhere in the universe.",
                            sadness: "Sadness is also a kind of light. Only those who've experienced deep sadness can know the light of true joy. The tears you swallowed alone made you into a deeper and more beautiful light.",
                            anger: "Anger is also the light of justice. A heart that knows how to get angry at wrong things is the direction of light toward what's right. You can now transform suppressed anger into constructive light.",
                            loneliness: "In loneliness, you grew your own light. Your inner light that didn't go out even in darkness with no one around - that's what led you here.",
                            vulnerability: "Weakness is also light. Because you're not perfect, you can emit a more human and warm light. Rising again even after breaking - that's the strongest light.",
                            jealousy: "Jealousy is also the light of growth. Being envious of others is a light signal that you want to become a better self. Try turning that energy into light that develops yourself.",
                            guilt: "Regret and guilt are also lights of reflection. A heart that knows how to look back on itself, the will to become better - these are making you into brighter light.",
                            inadequacy: "Acknowledging inadequacy is also the light of humility. Because you're not perfect, you can continue learning and growing. That humble heart is the most beautiful light.",
                            general: "All the emotions you wanted to hide were actually various lights within you. Just as light shines brighter with darkness, all those emotions came together to create the beautiful light that is you now."
                        },
                        pt: {
                            shame: "Mesmo na vergonha, vocÃª estava brilhando. Esse coraÃ§Ã£o que vocÃª tentou esconder pode ter sido a luz mais pura. Assim como uma estrela escondida na escuridÃ£o brilha mais belamente, assim Ã© sua sinceridade.",
                            fear: "Medo tambÃ©m Ã© um tipo de luz. O coraÃ§Ã£o com medo de perder algo precioso tem amor dentro dele. Assim como conhecemos a preciosidade da luz por causa da escuridÃ£o, a coragem pode brilhar mais por causa do medo.",
                            love: "Amor escondido Ã© a luz mais pura. Aqueles tempos que vocÃª amou secretamente, esses coraÃ§Ãµes fizeram vocÃª brilhar ainda mais. Amor nÃ£o expresso deve ser luz estelar em algum lugar do universo.",
                            sadness: "Tristeza tambÃ©m Ã© um tipo de luz. Apenas aqueles que experimentaram tristeza profunda podem conhecer a luz da verdadeira alegria. As lÃ¡grimas que vocÃª engoliu sozinho fizeram de vocÃª uma luz mais profunda e bonita.",
                            anger: "Raiva tambÃ©m Ã© a luz da justiÃ§a. Um coraÃ§Ã£o que sabe ficar com raiva das coisas erradas Ã© a direÃ§Ã£o da luz em direÃ§Ã£o ao que Ã© certo. VocÃª pode agora transformar raiva suprimida em luz construtiva.",
                            loneliness: "Na solidÃ£o, vocÃª cultivou sua prÃ³pria luz. Sua luz interior que nÃ£o se apagou mesmo na escuridÃ£o sem ninguÃ©m por perto - isso Ã© o que te trouxe atÃ© aqui.",
                            vulnerability: "Fraqueza tambÃ©m Ã© luz. Porque vocÃª nÃ£o Ã© perfeito, vocÃª pode emitir uma luz mais humana e calorosa. Levantar-se novamente mesmo depois de quebrar - essa Ã© a luz mais forte.",
                            jealousy: "CiÃºme tambÃ©m Ã© a luz do crescimento. Ter inveja dos outros Ã© um sinal de luz de que vocÃª quer se tornar um eu melhor. Tente transformar essa energia em luz que desenvolve vocÃª mesmo.",
                            guilt: "Arrependimento e culpa tambÃ©m sÃ£o luzes de reflexÃ£o. Um coraÃ§Ã£o que sabe olhar para trÃ¡s para si mesmo, a vontade de se tornar melhor - estes estÃ£o fazendo de vocÃª uma luz mais brilhante.",
                            inadequacy: "Reconhecer inadequaÃ§Ã£o tambÃ©m Ã© a luz da humildade. Porque vocÃª nÃ£o Ã© perfeito, vocÃª pode continuar aprendendo e crescendo. Esse coraÃ§Ã£o humilde Ã© a luz mais bonita.",
                            general: "Todas as emoÃ§Ãµes que vocÃª queria esconder eram na verdade vÃ¡rias luzes dentro de vocÃª. Assim como a luz brilha mais com a escuridÃ£o, todas essas emoÃ§Ãµes se juntaram para criar a bela luz que Ã© vocÃª agora."
                        }
                    };
                    
                    return responses[lang][emotion] || responses[lang]['general'];
                }
            }
        ];
        
        let currentLanguage = 'en'; // ê¸°ë³¸ ì–¸ì–´ë¥¼ ì˜ì–´ë¡œ ì„¤ì •
        let currentUser = null;
        let userResponse = '';
        let journeyStarted = false;
        let currentTypingElement = null;
        let typingIntervals = [];
        
        // ============ ì—¬ì • ì´ˆê¸°í™” í•¨ìˆ˜ ============
        
        function resetJourney() {
            console.log('=== ì—¬ì • ì´ˆê¸°í™” ì‹œì‘ ===');
            
            // 1. ëª¨ë“  íƒ€ì´í•‘ íš¨ê³¼ ì™„ì „ ì •ë¦¬
            clearAllTypingEffects();
            
            // ì¶”ê°€ ì•ˆì „ì¥ì¹˜ - ëª¨ë“  timer ì •ë¦¬
            for (let i = 1; i < 99999; i++) window.clearInterval(i);
            for (let i = 1; i < 99999; i++) window.clearTimeout(i);
            
            // 2. ëª¨ë“  ì½˜í…ì¸  ì„¹ì…˜ ì™„ì „ ì´ˆê¸°í™”
            const sectionsToReset = [
                'portalIntroSection',
                'characterResponsesSection', 
                'lightMessageSection',
                'portalQuestionSection',
                'userInputSection',
                'userReactionsSection',
                'continueSection'
            ];
            
            sectionsToReset.forEach(sectionId => {
                const section = document.getElementById(sectionId);
                if (section) {
                    section.classList.remove('show');
                    section.style.opacity = '0';
                    
                    if (sectionId === 'characterResponsesSection' || 
                        sectionId === 'userInputSection' || 
                        sectionId === 'userReactionsSection') {
                        section.innerHTML = '';
                    } else {
                        const textElements = section.querySelectorAll('.portal-intro, .light-message, .portal-question, .continue-text');
                        textElements.forEach(el => {
                            el.innerHTML = '';
                            el.textContent = '';
                        });
                    }
                }
            });
            
            // 3. íŠ¹ì • ìš”ì†Œë“¤ ê°œë³„ ì´ˆê¸°í™”
            const portalIntro = document.getElementById('portalIntro');
            const lightMessage = document.getElementById('lightMessage');
            const portalQuestion = document.getElementById('portalQuestion');
            const continueText = document.getElementById('continueText');
            
            if (portalIntro) portalIntro.innerHTML = '';
            if (lightMessage) lightMessage.innerHTML = '';
            if (portalQuestion) portalQuestion.innerHTML = '';
            if (continueText) continueText.innerHTML = '';
            
            // 4. í…ìŠ¤íŠ¸ì˜ì—­ ì™„ì „ ì´ˆê¸°í™”
            const userTextarea = document.getElementById('userTextarea');
            if (userTextarea) {
                userTextarea.disabled = false;
                userTextarea.value = '';
                userTextarea.style.height = 'auto';
                userTextarea.placeholder = translations[currentLanguage].inputPlaceholder;
            }
            
            // 5. ìŠ¤í¬ë¡¤ ìœ„ì¹˜ ì´ˆê¸°í™”
            const mainContent = document.getElementById('mainContent');
            if (mainContent) {
                mainContent.scrollTop = 0;
            }
            
            // 6. ìƒíƒœ ë³€ìˆ˜ ì™„ì „ ì´ˆê¸°í™”
            userResponse = '';
            currentTypingElement = null;
            
            console.log('=== ì—¬ì • ì´ˆê¸°í™” ì™„ë£Œ ===');
        }
        
        // ============ ê°œì„ ëœ ì–¸ì–´ ë³€ê²½ í•¨ìˆ˜ ============
        
        function changeLanguage(lang) {
            if (!translations[lang]) {
                console.error('ì§€ì›í•˜ì§€ ì•ŠëŠ” ì–¸ì–´:', lang);
                return;
            }
            
            if (currentLanguage === lang) {
                return;
            }
            
            if (journeyStarted) {
                const confirmMessage = translations[currentLanguage].languageChangeConfirm;
                const shouldRestart = confirm(confirmMessage);
                
                if (!shouldRestart) {
                    return;
                }
            }
            
            const previousLanguage = currentLanguage;
            currentLanguage = lang;
            
            console.log(`ì–¸ì–´ ë³€ê²½: ${previousLanguage} â†’ ${currentLanguage}`);
            
            if (journeyStarted) {
                resetJourney();
            }
            
            updateLanguageButtons(lang);
            updateStaticTranslations(lang);
            
            if (journeyStarted) {
                setTimeout(() => {
                    console.log(`ìƒˆë¡œìš´ ì–¸ì–´(${currentLanguage})ë¡œ ì—¬ì • ì¬ì‹œì‘`);
                    startPortalSequence();
                }, 1000);
            }
        }
        
        // ============ UI ì—…ë°ì´íŠ¸ í•¨ìˆ˜ë“¤ ============
        
        function updateLanguageButtons(lang) {
            document.querySelectorAll('.lang-btn').forEach(btn => {
                btn.classList.remove('active');
                if (btn.dataset.lang === lang) {
                    btn.classList.add('active');
                }
            });
        }
        
        function updateStaticTranslations(lang) {
            // ê°œë³„ ìš”ì†Œ ì—…ë°ì´íŠ¸
            const elements = [
                'logoSubtitle',
                'portalMainTitle', 
                'portalSubtitle',
                'lightTitle',
                'continueYesBtn',
                'continueNoBtn'
            ];
            
            elements.forEach(elementId => {
                const element = document.getElementById(elementId);
                if (element && translations[lang]) {
                    const key = elementId.replace('Btn', 'Button').replace('Subtitle', 'Subtitle');
                    let translationKey = key;
                    
                    const keyMapping = {
                        'logoSubtitle': 'logoSubtitle',
                        'portalMainTitle': 'portalMainTitle',
                        'portalSubtitle': 'portalSubtitle',
                        'lightTitle': 'lightTitle',
                        'continueYesButton': 'continueYes',
                        'continueNoButton': 'continueNo'
                    };
                    
                    translationKey = keyMapping[key] || key;
                    
                    if (translations[lang][translationKey]) {
                        element.textContent = translations[lang][translationKey];
                    }
                }
            });
            
            // placeholder ì—…ë°ì´íŠ¸
            const textarea = document.getElementById('userTextarea');
            if (textarea) textarea.placeholder = translations[lang].inputPlaceholder;
        }
        
        // ============ ê°œì„ ëœ íƒ€ì´í•‘ íš¨ê³¼ + ìŠ¤í¬ë¡¤ ì¶”ì  ì‹œìŠ¤í…œ ============
        
        function typewriterEffect(element, text, speed = 80) {
            return new Promise((resolve) => {
                if (currentTypingElement) {
                    currentTypingElement.classList.remove('typing-cursor');
                }
                
                let i = 0;
                element.innerHTML = '';
                element.classList.add('typing-cursor');
                currentTypingElement = element;
                
                const typingInterval = setInterval(() => {
                    if (!document.contains(element)) {
                        clearInterval(typingInterval);
                        resolve();
                        return;
                    }
                    
                    element.innerHTML += text.charAt(i);
                    i++;
                    
                    if (i % 10 === 0) {
                        scrollToFollowTyping(element);
                    }
                    
                    if (i === text.length) {
                        clearInterval(typingInterval);
                        element.classList.remove('typing-cursor');
                        currentTypingElement = null;
                        
                        setTimeout(() => {
                            if (document.contains(element)) {
                                scrollToFollowTyping(element);
                            }
                        }, 200);
                        
                        resolve();
                    }
                }, speed);
                
                typingIntervals.push(typingInterval);
            });
        }
        
        function clearAllTypingEffects() {
            typingIntervals.forEach(interval => clearInterval(interval));
            typingIntervals = [];
            
            if (currentTypingElement) {
                currentTypingElement.classList.remove('typing-cursor');
                currentTypingElement = null;
            }
        }
        
        // ============ ìŠ¤ë§ˆíŠ¸ ìŠ¤í¬ë¡¤ ì‹œìŠ¤í…œ ============
        
        function scrollToFollowTyping(element) {
            const mainContent = document.getElementById('mainContent');
            const elementRect = element.getBoundingClientRect();
            const containerRect = mainContent.getBoundingClientRect();
            
            if (elementRect.bottom > containerRect.bottom - 150) {
                const scrollTop = mainContent.scrollTop;
                const elementOffsetTop = element.offsetTop;
                const targetScroll = elementOffsetTop - (containerRect.height / 2);
                
                mainContent.scrollTo({
                    top: Math.max(0, targetScroll),
                    behavior: 'smooth'
                });
            }
        }
        
        function scrollToElement(element) {
            const mainContent = document.getElementById('mainContent');
            const elementOffsetTop = element.offsetTop;
            const containerHeight = mainContent.clientHeight;
            const targetScroll = elementOffsetTop - (containerHeight / 3);
            
            mainContent.scrollTo({
                top: Math.max(0, targetScroll),
                behavior: 'smooth'
            });
        }
        
        // ============ ì–¸ì–´ ë²„íŠ¼ ì´ë²¤íŠ¸ ì„¤ì • ============
        
        function setupLanguageButtons() {
            const langButtons = document.querySelectorAll('.lang-btn');
            
            langButtons.forEach(btn => {
                btn.addEventListener('click', function(e) {
                    e.preventDefault();
                    const newLang = this.dataset.lang;
                    changeLanguage(newLang);
                });
            });
        }
        
        // ============ ë©”ì¸ ì—¬ì • ì‹œìŠ¤í…œ ============
        
        function initializeTemarix() {
            console.log('=== Temarix Portal 03 ì´ˆê¸°í™” ì‹œì‘ ===');
            
            setupLanguageButtons();
            setupTextareaAutoResize();
            setupInputEvents();
            
            journeyStarted = true;
            
            setTimeout(() => {
                startPortalSequence();
            }, 1000);
        }
        
        function startPortalSequence() {
            setTimeout(() => {
                showIntro();
            }, 1000);
        }
        
        // ============ ì—¬ì • ë‹¨ê³„ë“¤ ============
        
        async function showIntro() {
            const introSection = document.getElementById('portalIntroSection');
            const introElement = document.getElementById('portalIntro');
            
            introSection.classList.add('show');
            
            const introText = translations[currentLanguage].portalIntro;
            await typewriterEffect(introElement, introText, 60);
            
            setTimeout(() => {
                showCharacterResponses();
            }, 2000);
        }
        
        async function showCharacterResponses() {
            const responseSection = document.getElementById('characterResponsesSection');
            
            responseSection.classList.add('show');
            
            for (let i = 0; i < characters.length; i++) {
                const char = characters[i];
                const responseDiv = document.createElement('div');
                responseDiv.className = 'character-response';
                
                const nameDiv = document.createElement('div');
                nameDiv.className = 'character-name';
                nameDiv.textContent = `${char.emoji} ${char.name}`;
                
                const dialogueDiv = document.createElement('div');
                dialogueDiv.className = 'character-dialogue';
                
                responseDiv.appendChild(nameDiv);
                responseDiv.appendChild(dialogueDiv);
                responseSection.appendChild(responseDiv);
                
                responseDiv.style.opacity = '1';
                
                const dialogueText = translations[currentLanguage][char.key];
                await typewriterEffect(dialogueDiv, dialogueText, 70);
                
                if (i < characters.length - 1) {
                    await new Promise(resolve => setTimeout(resolve, 1500));
                }
            }
            
            setTimeout(() => {
                showLightMessage();
            }, 2000);
        }
        
        async function showLightMessage() {
            const lightSection = document.getElementById('lightMessageSection');
            const lightMessageEl = document.getElementById('lightMessage');
            
            lightSection.classList.add('show');
            
            const lightText = translations[currentLanguage].lightMessage;
            await typewriterEffect(lightMessageEl, lightText, 60);
            
            setTimeout(() => {
                showQuestion();
            }, 2000);
        }
        
        async function showQuestion() {
            const questionSection = document.getElementById('portalQuestionSection');
            const questionEl = document.getElementById('portalQuestion');
            
            questionSection.classList.add('show');
            
            const questionText = translations[currentLanguage].portalQuestion;
            await typewriterEffect(questionEl, questionText, 50);
            
            setTimeout(() => {
                enableUserInput();
            }, 1500);
        }
        
        // ============ ì‚¬ìš©ì ì…ë ¥ ì‹œìŠ¤í…œ ============
        
        function setupInputEvents() {
            const userTextarea = document.getElementById('userTextarea');
            
            userTextarea.addEventListener('keydown', handleTextareaKeydown);
            
            document.getElementById('continueYesBtn').addEventListener('click', function() {
                processContinue('Y');
            });
            
            document.getElementById('continueNoBtn').addEventListener('click', function() {
                processContinue('N');
            });
        }
        
        function handleTextareaKeydown(e) {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                const inputValue = this.value.trim();
                
                if (inputValue) {
                    processUserInput(inputValue);
                }
            }
        }
        
        function setupTextareaAutoResize() {
            const textarea = document.getElementById('userTextarea');
            
            textarea.addEventListener('input', function() {
                this.style.height = 'auto';
                this.style.height = Math.min(this.scrollHeight, 96) + 'px';
            });
        }
        
        async function processUserInput(inputText) {
            userResponse = inputText;
            disableUserInput();
            showUserResponse(inputText);
            
            setTimeout(() => {
                showUserReactions(inputText);
            }, 1000);
        }
        
        function disableUserInput() {
            const userTextarea = document.getElementById('userTextarea');
            userTextarea.disabled = true;
            userTextarea.value = '';
            userTextarea.style.height = 'auto';
            
            userTextarea.placeholder = translations[currentLanguage].waitingMessage;
        }
        
        function enableUserInput() {
            const userTextarea = document.getElementById('userTextarea');
            userTextarea.disabled = false;
            userTextarea.placeholder = translations[currentLanguage].inputPlaceholder;
            
            setTimeout(() => {
                userTextarea.focus();
            }, 100);
        }
        
        function showUserResponse(text) {
            const inputSection = document.getElementById('userInputSection');
            const userDiv = document.createElement('div');
            userDiv.className = 'user-response';
            const youLabel = translations[currentLanguage].youLabel;
            userDiv.innerHTML = `<strong>${youLabel}:</strong> "${text}"`;
            inputSection.appendChild(userDiv);
            inputSection.classList.add('show');
            
            setTimeout(() => {
                scrollToElement(inputSection);
            }, 100);
        }
        
        async function showUserReactions(userInput) {
            const reactionsSection = document.getElementById('userReactionsSection');
            
            reactionsSection.classList.add('show');
            
            for (let i = 0; i < responseCharacters.length; i++) {
                const char = responseCharacters[i];
                const responseDiv = document.createElement('div');
                responseDiv.className = 'character-response';
                
                const nameDiv = document.createElement('div');
                nameDiv.className = 'character-name';
                nameDiv.textContent = `${char.emoji} ${char.name}`;
                
                const dialogueDiv = document.createElement('div');
                dialogueDiv.className = 'character-dialogue';
                
                responseDiv.appendChild(nameDiv);
                responseDiv.appendChild(dialogueDiv);
                reactionsSection.appendChild(responseDiv);
                
                responseDiv.style.opacity = '1';
                
                const reactionText = char.getResponse(userInput, currentLanguage);
                await typewriterEffect(dialogueDiv, reactionText, 70);
                
                if (i < responseCharacters.length - 1) {
                    await new Promise(resolve => setTimeout(resolve, 1500));
                }
            }
            
            setTimeout(() => {
                showContinueOption();
            }, 2000);
        }
        
        async function showContinueOption() {
            const continueSection = document.getElementById('continueSection');
            const continueText = document.getElementById('continueText');
            
            continueSection.classList.add('show');
            
            const questionText = translations[currentLanguage].continueText;
            await typewriterEffect(continueText, questionText, 50);
            
            setTimeout(() => {
                scrollToElement(continueSection);
            }, 500);
        }
        
        function processContinue(input) {
            if (input === 'Y') {
                const message = currentLanguage === 'ko' ? 
                    'Portal 04ê°€ ê³§ ì¤€ë¹„ë©ë‹ˆë‹¤. ê³„ì†í•´ì„œ ë” ê¹Šì€ ê°ì •ì˜ ì—¬ì •ì´ ì´ì–´ì§‘ë‹ˆë‹¤.' :
                    currentLanguage === 'en' ? 
                    'Portal 04 will be ready soon. The journey into deeper emotions continues.' :
                    'Portal 04 estarÃ¡ pronto em breve. A jornada para emoÃ§Ãµes mais profundas continua.';
                alert(message);
            } else if (input === 'N') {
                const message = currentLanguage === 'ko' ? 
                    'ì—¬ì •ì´ ì¼ì‹œ ì¤‘ì§€ë˜ì—ˆìŠµë‹ˆë‹¤. ì–¸ì œë“  ë‹¤ì‹œ ëŒì•„ì™€ ê³„ì†í•˜ì„¸ìš”.' :
                    currentLanguage === 'en' ? 
                    'The journey has been paused. Come back and continue anytime.' :
                    'A jornada foi pausada. Volte e continue a qualquer momento.';
                alert(message);
            }
        }
        
        // ============ ì´ˆê¸°í™” ============
        
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Temarix V2 Portal 03 DOM ë¡œë“œ ì™„ë£Œ');
            
            // ìë™ ë¡œê·¸ì¸ ì²˜ë¦¬ (ë¡œê·¸ì¸ ëª¨ë‹¬ ì œê±°)
            currentUser = { 
                uid: 'user-auto-' + Date.now(),
                email: 'auto@temarix.com'
            };
            
            memoryStorage.mockUser = currentUser;
            
            updateStaticTranslations(currentLanguage);
            initializeTemarix();
        });
    </script>
</body>
</html>
                