<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Temarix V2 - Portal 16: The Moment of Taking the First Step</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            background: #000;
            color: #fff;
            font-family: 'Courier New', monospace;
            height: 100vh;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            word-break: keep-all;
            overflow-wrap: break-word;
        }
        
        /* ìƒë‹¨ í—¤ë” */
        .header-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 25px 30px;
            background: #000;
            border-bottom: 1px solid #333;
            position: relative;
            z-index: 100;
            height: 80px;
            flex-shrink: 0;
        }
        
        .logo-section {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
        }
        
        .logo-title {
            font-size: 26px;
            font-weight: bold;
            color: #fff;
            margin-bottom: 4px;
            letter-spacing: 1px;
        }
        
        .logo-subtitle {
            font-size: 15px;
            color: #ccc;
            letter-spacing: 1.5px;
        }
        
        .portal-header-title {
            text-align: center;
            flex: 1;
            margin: 0 20px;
        }
        
        .portal-main-title {
            font-size: 28px;
            color: #fff;
            margin-bottom: 8px;
            font-weight: normal;
            letter-spacing: 1px;
        }
        
        .portal-subtitle {
            font-size: 18px;
            color: #ccc;
            letter-spacing: 1.5px;
        }
        
        /* ì–¸ì–´ ë²„íŠ¼ 3ê°œ */
        .header-right {
            display: flex;
            align-items: center;
        }
        
        .language-buttons {
            display: flex;
            gap: 10px;
        }
        
        .lang-btn {
            background: #444;
            color: #fff;
            border: none;
            padding: 10px 18px;
            font-size: 14px;
            font-family: 'Courier New', monospace;
            cursor: pointer;
            transition: background 0.2s;
        }
        
        .lang-btn:hover {
            background: #666;
        }
        
        .lang-btn.active {
            background: #87cefa;
            color: #000;
        }
        
        /* ë©”ì¸ ì½˜í…ì¸  */
        .main-content {
            flex: 1;
            max-height: calc(100vh - 80px - 120px);
            overflow-y: auto;
            overflow-x: hidden;
            padding: 30px 20px;
            scroll-behavior: smooth;
            position: relative;
        }
        
        .portal-container {
            max-width: 700px;
            width: 100%;
            margin: 0 auto;
            text-align: center;
            display: flex;
            flex-direction: column;
            word-break: keep-all;
            overflow-wrap: break-word;
            hyphens: none;
            min-height: 150vh;
        }
        
        /* í…ìŠ¤íŠ¸ ì„¹ì…˜ë“¤ */
        .portal-intro-section {
            margin: 40px 0;
            opacity: 0;
            min-height: 200px;
        }
        
        .portal-intro {
            font-size: 20px;
            color: #fff;
            margin-bottom: 30px;
            line-height: 1.8;
            white-space: pre-wrap;
            word-wrap: break-word;
            word-break: keep-all;
            background: none;
            border: none;
            padding: 0;
        }
        
        .character-responses-section {
            margin: 40px 0;
            opacity: 0;
            min-height: 800px;
        }
        
        .character-response {
            color: #fff;
            font-size: 18px;
            margin: 40px 0;
            text-align: left;
            opacity: 0;
            white-space: pre-wrap;
            word-wrap: break-word;
            word-break: keep-all;
            transition: opacity 0.8s ease-in;
            background: none;
            border: none;
            padding: 0;
            min-height: 80px;
        }
        
        .character-name {
            font-weight: bold;
            color: #87cefa;
            margin-bottom: 12px;
            font-size: 18px;
        }
        
        .character-dialogue {
            color: #fff;
            line-height: 1.7;
            font-size: 17px;
            white-space: pre-wrap;
            word-wrap: break-word;
            word-break: keep-all;
        }
        
        .typing-cursor::after {
            content: '|';
            animation: blink 1s infinite;
            color: #87cefa;
        }
        
        @keyframes blink {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0; }
        }
        
        .light-message-section {
            margin: 50px 0;
            opacity: 0;
            background: none;
            border: none;
            padding: 0;
            min-height: 100px;
        }
        
        .light-message {
            font-size: 20px;
            color: #87cefa;
            line-height: 1.8;
            font-style: italic;
            white-space: pre-wrap;
            word-wrap: break-word;
            word-break: keep-all;
        }
        
        .portal-question-section {
            margin: 40px 0;
            opacity: 0;
            min-height: 150px;
        }
        
        .portal-question {
            font-size: 22px;
            color: #fff;
            margin-bottom: 30px;
            min-height: 100px;
            display: flex;
            align-items: center;
            justify-content: center;
            line-height: 1.6;
            white-space: pre-wrap;
            word-wrap: break-word;
            word-break: keep-all;
        }
        
        .user-input-section {
            margin: 40px 0;
            opacity: 0;
            min-height: 100px;
        }
        
        .user-response {
            color: #fff;
            margin: 30px 0;
            text-align: left;
            font-size: 18px;
            background: none;
            border: none;
            padding: 0;
            white-space: pre-wrap;
            word-wrap: break-word;
            word-break: keep-all;
        }
        
        .user-response strong {
            color: #87cefa;
            margin-right: 8px;
        }
        
        .user-reactions-section {
            margin: 40px 0;
            opacity: 0;
            min-height: 400px;
        }
        
        .continue-section {
            margin: 50px 0;
            opacity: 0;
            text-align: center;
            background: none;
            border: none;
            padding: 0;
            min-height: 200px;
        }
        
        .continue-text {
            color: #fff;
            font-size: 20px;
            margin-bottom: 25px;
            line-height: 1.6;
            white-space: pre-wrap;
            word-wrap: break-word;
            word-break: keep-all;
        }
        
        .continue-buttons {
            display: flex;
            gap: 20px;
            justify-content: center;
            flex-wrap: wrap;
        }
        
        .continue-btn {
            background: #444;
            color: #fff;
            border: none;
            padding: 18px 35px;
            font-family: 'Courier New', monospace;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 200px;
        }
        
        .continue-btn:hover {
            background: #666;
        }
        
        .continue-btn.primary {
            background: #87cefa;
            color: #000;
        }
        
        .continue-btn.primary:hover {
            background: #b0d4f1;
        }
        
        /* í•˜ë‹¨ ê³ ì • ì…ë ¥ì°½ */
        .input-fixed-bottom {
            position: relative;
            bottom: 0;
            left: 0;
            right: 0;
            background: #000;
            border-top: 1px solid #333;
            padding: 25px;
            z-index: 100;
            flex-shrink: 0;
            height: 120px;
        }
        
        .input-container {
            max-width: 900px;
            margin: 0 auto;
            display: flex;
            align-items: flex-start;
            gap: 15px;
        }
        
        .input-prefix {
            color: #87cefa;
            font-size: 20px;
            margin-top: 8px;
            flex-shrink: 0;
        }
        
        .user-textarea {
            background: transparent;
            border: none;
            border-bottom: 1px solid #444;
            color: #fff;
            font-family: 'Courier New', monospace;
            font-size: 18px;
            width: 100%;
            padding: 12px 8px;
            outline: none;
            resize: none;
            min-height: 32px;
            max-height: 96px;
            line-height: 1.6;
            transition: border-color 0.3s ease;
            overflow-y: auto;
        }
        
        .user-textarea:focus {
            border-bottom-color: #87cefa;
        }
        
        .user-textarea::placeholder {
            color: #666;
        }
        
        .user-textarea:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            background: rgba(50, 50, 50, 0.2);
        }
        
        /* ìŠ¤í¬ë¡¤ë°” ìŠ¤íƒ€ì¼ë§ */
        .main-content::-webkit-scrollbar {
            width: 12px;
        }
        
        .main-content::-webkit-scrollbar-track {
            background: #111;
            border-radius: 6px;
        }
        
        .main-content::-webkit-scrollbar-thumb {
            background: #444;
            border-radius: 6px;
            border: 2px solid #111;
        }
        
        .main-content::-webkit-scrollbar-thumb:hover {
            background: #666;
        }
        
        /* ì• ë‹ˆë©”ì´ì…˜ */
        @keyframes fadeIn {
            to { opacity: 1; }
        }
        
        .show {
            opacity: 1 !important;
            transition: opacity 1s ease-in;
        }
        
        .hidden {
            display: none;
        }
        
        /* ë°˜ì‘í˜• ë””ìì¸ */
        @media (max-width: 768px) {
            .header-bar {
                padding: 20px 15px;
                height: 70px;
                flex-direction: column;
                gap: 10px;
            }
            
            .main-content {
                max-height: calc(100vh - 70px - 120px);
                padding: 20px 15px;
            }
            
            .logo-title {
                font-size: 22px;
            }
            
            .portal-main-title {
                font-size: 22px;
            }
            
            .portal-subtitle {
                font-size: 16px;
            }
            
            .lang-btn {
                font-size: 12px;
                padding: 8px 14px;
            }
            
            .portal-intro {
                font-size: 18px;
            }
            
            .portal-question {
                font-size: 20px;
            }
            
            .character-response {
                font-size: 16px;
            }
            
            .input-fixed-bottom {
                padding: 20px;
            }
            
            .continue-buttons {
                flex-direction: column;
                gap: 15px;
            }
            
            .continue-btn {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <!-- ìƒë‹¨ í—¤ë” -->
    <div class="header-bar">
        <div class="logo-section">
            <div class="logo-title">TEMARIX V2</div>
            <div class="logo-subtitle" id="logoSubtitle">The Tremor of Emotion</div>
        </div>
        
        <div class="portal-header-title">
            <div class="portal-main-title" id="portalMainTitle">Portal 16: The Moment of Taking the First Step</div>
            <div class="portal-subtitle" id="portalSubtitle">Courage that begins after hesitation</div>
        </div>
        
        <div class="header-right">
            <div class="language-buttons">
                <button class="lang-btn" data-lang="ko">KR</button>
                <button class="lang-btn active" data-lang="en">EN</button>
                <button class="lang-btn" data-lang="pt">PT</button>
            </div>
        </div>
    </div>

    <!-- ë©”ì¸ ì½˜í…ì¸  ì˜ì—­ -->
    <div class="main-content" id="mainContent">
        <div class="portal-container">
            <!-- í¬í„¸ ì¸íŠ¸ë¡œ -->
            <div class="portal-intro-section" id="portalIntroSection">
                <div class="portal-intro" id="portalIntro"></div>
            </div>

            <!-- ìºë¦­í„° ì‘ë‹µ ì„¹ì…˜ -->
            <div class="character-responses-section" id="characterResponsesSection">
                <!-- 8ëª…ì˜ ìºë¦­í„° ì‘ë‹µì´ ìˆœì°¨ì ìœ¼ë¡œ í‘œì‹œë©ë‹ˆë‹¤ -->
            </div>

            <!-- ë¹›ì˜ í•œë§ˆë”” -->
            <div class="light-message-section" id="lightMessageSection">
                <div class="character-name" id="lightTitle">ğŸŒ™ Word of Light</div>
                <div class="light-message" id="lightMessage"></div>
            </div>

            <!-- ì§ˆë¬¸ ì„¹ì…˜ -->
            <div class="portal-question-section" id="portalQuestionSection">
                <div class="portal-question" id="portalQuestion"></div>
            </div>

            <!-- ì‚¬ìš©ì ì…ë ¥ ì˜ì—­ -->
            <div class="user-input-section" id="userInputSection">
                <!-- ì‚¬ìš©ì ì‘ë‹µì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
            </div>
            
            <!-- ì‚¬ìš©ì ì‘ë‹µ í›„ ìºë¦­í„° ë°˜ì‘ -->
            <div class="user-reactions-section" id="userReactionsSection">
                <!-- ì‚¬ìš©ì ì‘ë‹µ í›„ 3ëª…ì˜ ìºë¦­í„° ë°˜ì‘ì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
            </div>
            
            <!-- ê³„ì†í•˜ê¸° ë²„íŠ¼ ì„¹ì…˜ -->
            <div class="continue-section" id="continueSection">
                <div class="continue-text" id="continueText"></div>
                <div class="continue-buttons">
                    <button class="continue-btn primary" id="continueYesBtn">Continue to Portal 17</button>
                    <button class="continue-btn" id="continueNoBtn">Pause the journey</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- í•˜ë‹¨ ê³ ì • ì…ë ¥ì°½ -->
    <div class="input-fixed-bottom">
        <div class="input-container">
            <div class="input-prefix">></div>
            <textarea class="user-textarea" 
                      id="userTextarea" 
                      placeholder="Share about your first step and that moment... (Press Enter to send)"
                      rows="1"
                      maxlength="500"></textarea>
        </div>
    </div>

    <script>
        // ë©”ëª¨ë¦¬ ê¸°ë°˜ ì‚¬ìš©ì ìŠ¤í† ë¦¬ì§€ (localStorage ëŒ€ì‹ )
        let memoryStorage = {
            mockUser: null
        };

        // ë²ˆì—­ ë°ì´í„°
        const translations = {
            ko: {
                logoSubtitle: "ê°ì •ì˜ ë–¨ë¦¼",
                portalMainTitle: "Portal 16: ì²« ê±¸ìŒì„ ë‚´ë”›ëŠ” ìˆœê°„",
                portalSubtitle: "ë§ì„¤ì„ ëì— ì‹œì‘ë˜ëŠ” ìš©ê¸°",
                portalIntro: "ì˜¤ë«ë™ì•ˆ ë§ì„¤ì˜€ìŠµë‹ˆë‹¤.\n'ì •ë§ í•´ë„ ë ê¹Œ?'\n'ì‹¤íŒ¨í•˜ë©´ ì–´ë–¡í•˜ì§€?'\n'ë‹¤ë¥¸ ì‚¬ëŒë“¤ì€ ë­ë¼ê³  í• ê¹Œ?'\n\ní•˜ì§€ë§Œ ì–´ëŠ ìˆœê°„,\në” ì´ìƒ ë§ì„¤ì¼ ìˆ˜ ì—†ëŠ” ì§€ì ì— ë„ë‹¬í–ˆìŠµë‹ˆë‹¤.\në³€í•˜ì§€ ì•Šìœ¼ë©´ ì•ˆ ë˜ëŠ”,\nì‹œì‘í•˜ì§€ ì•Šìœ¼ë©´ ì•ˆ ë˜ëŠ” ìˆœê°„.\n\nì§€ê¸ˆ, ë‹¹ì‹ ì€ ê·¸ ì²« ê±¸ìŒì„ ë‚´ë”›ìœ¼ë ¤ í•©ë‹ˆë‹¤.\nì™„ë²½í•˜ì§€ ì•Šì•„ë„,\ní™•ì‹ ì´ ì—†ì–´ë„,\nê·¸ì € ì§„ì‹¬ë§Œìœ¼ë¡œ.",
                lightTitle: "ğŸŒ™ ë¹›ì˜ í•œë§ˆë””",
                lightMessage: "ì²« ê±¸ìŒì—ëŠ” ëª¨ë“  ê°€ëŠ¥ì„±ì´ ë‹´ê²¨ ìˆìŠµë‹ˆë‹¤.\në°©í–¥ì„ ë°”ê¿€ ìˆ˜ë„, ì†ë„ë¥¼ ì¡°ì ˆí•  ìˆ˜ë„ ìˆì–´ìš”.\nì¤‘ìš”í•œ ê²ƒì€ ë©ˆì¶°ìˆì§€ ì•ŠëŠ”ë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤.",
                portalQuestion: "ë‹¹ì‹ ì´ ë‚´ë”›ê³  ì‹¶ì€ ì²« ê±¸ìŒì€ ë¬´ì—‡ì¸ê°€ìš”?\nê·¸ ê±¸ìŒì„ ë‚´ë”›ëŠ” ìˆœê°„, ë¬´ì—‡ì´ ë‹¬ë¼ì§ˆê¹Œìš”?",
                continueText: "ì²« ê±¸ìŒì„ ë‚´ë”›ëŠ” ìš©ê¸°ë¥¼ íƒêµ¬í•œ ì´ ì—¬ì •ì„ ê³„ì†í•˜ì‹œê² ìŠµë‹ˆê¹Œ?",
                continueYes: "Portal 17ë¡œ ê³„ì†í•˜ê¸°",
                continueNo: "ì—¬ì •ì„ ì¼ì‹œì •ì§€í•˜ê¸°",
                inputPlaceholder: "ë‹¹ì‹ ì˜ ì²« ê±¸ìŒê³¼ ê·¸ ìˆœê°„ì— ëŒ€í•´ í„¸ì–´ë†“ì•„ ë³´ì„¸ìš”... (Enterë¡œ ì „ì†¡)",
                youLabel: "ë‹¹ì‹ ",
                languageChangeConfirm: "ì–¸ì–´ë¥¼ ë³€ê²½í•˜ë©´ ì—¬ì •ì´ ì²˜ìŒë¶€í„° ë‹¤ì‹œ ì‹œì‘ë©ë‹ˆë‹¤.\nê³„ì†í•˜ì‹œê² ìŠµë‹ˆê¹Œ?",
                waitingMessage: "ì‘ë‹µì„ ê¸°ë‹¤ë¦¬ëŠ” ì¤‘...",
                // ìºë¦­í„° ëŒ€í™”
                charEly: "ì²« ê±¸ìŒì€ ì™„ë²½í•  í•„ìš”ê°€ ì—†ìŠµë‹ˆë‹¤.\në‹¨ì§€ ì§„ì‹¬ì—ì„œ ë‚˜ì˜¨ í•œ ë°œì§ì´ë©´ ì¶©ë¶„í•´ìš”.",
                charCris: "ì²« ê±¸ìŒì€ í•­ìƒ ì–´ìƒ‰í•´ìš”!\nì˜ ê±·ê³  ìˆëŠ”ì§€ë„ ëª¨ë¥´ê² ê³ ...\nê·¼ë° ê±·ë‹¤ ë³´ë©´ ì–¸ì  ê°€ëŠ” ìì—°ìŠ¤ëŸ¬ì›Œì ¸ìš”! ğŸš¶â€â™€ï¸",
                charZafirah: "ì²« ê±¸ìŒì´ ë‘ë ¤ìš´ ê²ƒì€\nê·¸ë§Œí¼ ê·¸ ê¸¸ì´ ë‹¹ì‹ ì—ê²Œ ì†Œì¤‘í•˜ë‹¤ëŠ” ëœ»ì´ì—ìš”.",
                charRami: "ëª¨ë“  ì—¬ì •ì€ ì²« ê±¸ìŒì—ì„œ ì‹œì‘ë©ë‹ˆë‹¤.\nê·¸ ê±¸ìŒì´ ëª©ì ì§€ë¥¼ ê²°ì •í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼\nì²« ê±¸ìŒì´ ì—¬ì •ì„ ë§Œë“¤ì–´ê°‘ë‹ˆë‹¤.",
                charSamir: "(ê·¸ëŠ” ë‹¹ì‹ ê³¼ í•¨ê»˜ ì²« ë°œì„ ë‚´ë”›ìŠµë‹ˆë‹¤.\në¬´ê±°ìš´ ë°œê±¸ìŒì´ì§€ë§Œ\nê·¸ ë¬´ê²Œê°€ í˜„ì‹¤ì„ ë§Œë“¤ì–´ê°€ëŠ” í˜ì…ë‹ˆë‹¤.)",
                charLayla: "ì²« ê±¸ìŒì„ ë‚´ë”›ëŠ” ë‹¹ì‹ ì˜ ëª¨ìŠµì´\nê°€ì¥ ì•„ë¦„ë‹¤ì›Œìš”.\nì™„ì„±ëœ ëª¨ìŠµë³´ë‹¤ ì‹œì‘í•˜ëŠ” ëª¨ìŠµì´ ë” ìš©ê°í•˜ê±°ë“ ìš”.",
                charNabir: "ì²« ê±¸ìŒì´ ë­ê°€ ê·¸ë¦¬ ëŒ€ë‹¨í•´?\nì–´ì°¨í”¼ ì¤‘ê°„ì— í¬ê¸°í•  ê±´ë°.\nì‹œì‘ë„ ì œëŒ€ë¡œ ëª» í•  ê±°ë©´ì„œ.",
                charAzhar: "ì²« ê±¸ìŒ? ê·¸ê±° ì°©ê°ì´ì•¼.\në„Œ ì´ë¯¸ ëŠ¦ì—ˆê³ , ê¸°íšŒë„ ì§€ë‚¬ì–´.\nì§€ê¸ˆ ì‹œì‘í•´ë´¤ì ì˜ë¯¸ ì—†ì–´."
            },
            en: {
                logoSubtitle: "The Tremor of Emotion",
                portalMainTitle: "Portal 16: The Moment of Taking the First Step",
                portalSubtitle: "Courage that begins after hesitation",
                portalIntro: "I hesitated for a long time.\n'Should I really do this?'\n'What if I fail?'\n'What will others say?'\n\nBut at some point,\nI reached a point where I could no longer hesitate.\nA moment when I must change,\nwhen I must begin.\n\nNow, you are about to take that first step.\nEven if it's not perfect,\neven without certainty,\njust with sincerity.",
                lightTitle: "ğŸŒ™ Word of Light",
                lightMessage: "The first step contains all possibilities.\nYou can change direction, adjust speed.\nWhat matters is not staying still.",
                portalQuestion: "What is the first step you want to take?\nWhen you take that step, what will change?",
                continueText: "Will you continue this journey of exploring the courage to take the first step?",
                continueYes: "Continue to Portal 17",
                continueNo: "Pause the journey",
                inputPlaceholder: "Share about your first step and that moment... (Press Enter to send)",
                youLabel: "You",
                languageChangeConfirm: "Changing the language will restart the journey from the beginning.\nDo you want to continue?",
                waitingMessage: "Waiting for response...",
                charEly: "The first step doesn't need to be perfect.\nJust one step from sincerity is enough.",
                charCris: "First steps are always awkward!\nI don't even know if I'm walking well...\nBut as you walk, it naturally becomes natural! ğŸš¶â€â™€ï¸",
                charZafirah: "Being afraid of the first step means\nthat path is precious to you.",
                charRami: "Every journey begins with the first step.\nThat step doesn't determine the destination,\nthe first step creates the journey.",
                charSamir: "(He takes the first step together with you.\nThough the footsteps are heavy,\nthat weight is the power that creates reality.)",
                charLayla: "You taking your first step\nis most beautiful.\nThe beginning is braver than the completion.",
                charNabir: "What's so great about a first step?\nYou'll give up halfway anyway.\nYou can't even start properly.",
                charAzhar: "First step? That's an illusion.\nYou're already late, opportunities are gone.\nStarting now is meaningless."
            },
            pt: {
                logoSubtitle: "O Tremor da EmoÃ§Ã£o",
                portalMainTitle: "Portal 16: O Momento de Dar o Primeiro Passo",
                portalSubtitle: "Coragem que comeÃ§a apÃ³s a hesitaÃ§Ã£o",
                portalIntro: "Hesitei por muito tempo.\n'Devo realmente fazer isso?'\n'E se eu falhar?'\n'O que os outros vÃ£o dizer?'\n\nMas em algum momento,\ncheguei a um ponto onde nÃ£o podia mais hesitar.\nUm momento quando devo mudar,\nquando devo comeÃ§ar.\n\nAgora, vocÃª estÃ¡ prestes a dar esse primeiro passo.\nMesmo que nÃ£o seja perfeito,\nmesmo sem certeza,\napenas com sinceridade.",
                lightTitle: "ğŸŒ™ Palavra de Luz",
                lightMessage: "O primeiro passo contÃ©m todas as possibilidades.\nVocÃª pode mudar direÃ§Ã£o, ajustar velocidade.\nO que importa Ã© nÃ£o ficar parado.",
                portalQuestion: "Qual Ã© o primeiro passo que vocÃª quer dar?\nQuando vocÃª der esse passo, o que mudarÃ¡?",
                continueText: "VocÃª continuarÃ¡ esta jornada de explorar a coragem de dar o primeiro passo?",
                continueYes: "Continuar para o Portal 17",
                continueNo: "Pausar a jornada",
                inputPlaceholder: "Compartilhe sobre seu primeiro passo e esse momento... (Enter para enviar)",
                youLabel: "VocÃª",
                languageChangeConfirm: "Mudar o idioma reiniciarÃ¡ a jornada desde o inÃ­cio.\nDeseja continuar?",
                waitingMessage: "Aguardando resposta...",
                charEly: "O primeiro passo nÃ£o precisa ser perfeito.\nApenas um passo da sinceridade Ã© suficiente.",
                charCris: "Primeiros passos sÃ£o sempre estranhos!\nNem sei se estou caminhando bem...\nMas conforme vocÃª anda, naturalmente se torna natural! ğŸš¶â€â™€ï¸",
                charZafirah: "Ter medo do primeiro passo significa\nque esse caminho Ã© precioso para vocÃª.",
                charRami: "Toda jornada comeÃ§a com o primeiro passo.\nEsse passo nÃ£o determina o destino,\no primeiro passo cria a jornada.",
                charSamir: "(Ele dÃ¡ o primeiro passo junto com vocÃª.\nEmbora os passos sejam pesados,\nesse peso Ã© o poder que cria realidade.)",
                charLayla: "VocÃª dando seu primeiro passo\nÃ© mais bonito.\nO comeÃ§o Ã© mais corajoso que a conclusÃ£o.",
                charNabir: "O que hÃ¡ de tÃ£o especial no primeiro passo?\nVocÃª vai desistir no meio do caminho mesmo.\nNem consegue comeÃ§ar direito.",
                charAzhar: "Primeiro passo? Isso Ã© uma ilusÃ£o.\nVocÃª jÃ¡ estÃ¡ atrasado, oportunidades se foram.\nComeÃ§ar agora nÃ£o tem sentido."
            }
        };
        
        // ìºë¦­í„° ë°ì´í„°
        const characters = [
            { name: "Ely", emoji: "ğŸ‘‘", key: "charEly" },
            { name: "Cris", emoji: "ğŸƒ", key: "charCris" },
            { name: "Zafirah", emoji: "ğŸ§•", key: "charZafirah" },
            { name: "Rami", emoji: "ğŸ”®", key: "charRami" },
            { name: "Samir", emoji: "ğŸª", key: "charSamir" },
            { name: "Layla", emoji: "ğŸ’ ", key: "charLayla" },
            { name: "Nabir", emoji: "ğŸ¦‚", key: "charNabir" },
            { name: "Azhar", emoji: "ğŸ”¥", key: "charAzhar" }
        ];
        
        // ============ ê°ì • ë¶„ì„ ì‹œìŠ¤í…œ ============
        
        function analyzeEmotion(userInput) {
            const input = userInput.toLowerCase();
            
            // ê°ì • í‚¤ì›Œë“œ ë§¤í•‘ (Portal 16 íŠ¹í™”)
            const emotionKeywords = {
                beginning: ['ì‹œì‘', 'ì²«ê±¸ìŒ', 'ì¶œë°œ', 'beginning', 'start', 'first step', 'inÃ­cio', 'comeÃ§o', 'primeiro passo'],
                hesitation: ['ë§ì„¤ì„', 'ì£¼ì €', 'ê³ ë¯¼', 'hesitation', 'doubt', 'hesitaÃ§Ã£o', 'dÃºvida'],
                courage: ['ìš©ê¸°', 'ìš©ê°', 'ê²°ì‹¬', 'courage', 'brave', 'determination', 'coragem', 'corajoso', 'determinaÃ§Ã£o'],
                fear: ['ë‘ë ¤ìš´', 'ë¬´ì„œìš´', 'ê±±ì •', 'fear', 'scared', 'worried', 'medo', 'assustado', 'preocupado'],
                action: ['í–‰ë™', 'ì‹¤í–‰', 'ì›€ì§ì„', 'action', 'execution', 'movement', 'aÃ§Ã£o', 'execuÃ§Ã£o', 'movimento'],
                change: ['ë³€í™”', 'ë°”ê¾¸ëŠ”', 'ë‹¬ë¼ì§€ëŠ”', 'change', 'transform', 'mudanÃ§a', 'transformar'],
                decision: ['ê²°ì •', 'ì„ íƒ', 'ì •í•˜ëŠ”', 'decision', 'choice', 'decide', 'decisÃ£o', 'escolha', 'decidir'],
                goal: ['ëª©í‘œ', 'ê¿ˆ', 'ì´ë£¨ê³ ì‹¶ì€', 'goal', 'dream', 'achieve', 'objetivo', 'sonho', 'alcanÃ§ar'],
                small_step: ['ì‘ì€', 'ì²œì²œíˆ', 'ì¡°ê¸ˆì”©', 'small', 'slowly', 'gradually', 'pequeno', 'devagar', 'gradualmente'],
                commitment: ['ì•½ì†', 'ë‹¤ì§', 'ê²°ì˜', 'commitment', 'promise', 'resolve', 'compromisso', 'promessa', 'resolver'],
                momentum: ['ê¸°ì„¸', 'ì¶”ì§„ë ¥', 'íë¦„', 'momentum', 'drive', 'flow', 'impulso', 'forÃ§a', 'fluxo'],
                timing: ['ë•Œ', 'ì‹œê°„', 'íƒ€ì´ë°', 'timing', 'time', 'moment', 'tempo', 'momento']
            };
            
            // ê°ì • ë¶„ì„
            let detectedEmotions = [];
            for (const [emotion, keywords] of Object.entries(emotionKeywords)) {
                for (const keyword of keywords) {
                    if (input.includes(keyword)) {
                        detectedEmotions.push(emotion);
                        break;
                    }
                }
            }
            
            // ê°ì •ì´ ê°ì§€ë˜ì§€ ì•Šìœ¼ë©´ ê¸°ë³¸ê°’ ì„¤ì •
            if (detectedEmotions.length === 0) {
                detectedEmotions = ['general'];
            }
            
            return detectedEmotions[0]; // ì²« ë²ˆì§¸ ê°ì§€ëœ ê°ì • ë°˜í™˜
        }
        
        // ë°˜ì‘ ìºë¦­í„°ë“¤ (Portal 16 ì „ìš©)
        const responseCharacters = [
            {
                name: "Seed", emoji: "ğŸŒ±",
                getResponse: (userInput, lang) => {
                    const emotion = analyzeEmotion(userInput);
                    
                    const responses = {
                        ko: {
                            beginning: "ì”¨ì•—ì—ê²Œ ì²« ë°œì•„ëŠ” ê°€ì¥ ìš©ê¸° ìˆëŠ” ìˆœê°„ì´ì—ìš”. ì•ˆì „í•œ ë•…ì†ì„ ëš«ê³  ë‚˜ì˜¤ëŠ” ê²ƒì´ë‹ˆê¹Œìš”. ë‹¹ì‹ ì˜ ì²« ê±¸ìŒë„ ê·¸ëŸ° ë°œì•„ì™€ ê°™ì•„ìš”. ì‘ì§€ë§Œ ê°€ì¥ ì¤‘ìš”í•œ ì‹œì‘ì…ë‹ˆë‹¤.",
                            hesitation: "ì”¨ì•—ë„ ë°œì•„í•˜ê¸° ì „ì— ì˜¤ë«ë™ì•ˆ ì¤€ë¹„í•´ìš”. ê·¸ ì‹œê°„ì´ ë§ì„¤ì„ì²˜ëŸ¼ ë³´ì´ì§€ë§Œ, ì‚¬ì‹¤ì€ ì„±ì¥ì„ ìœ„í•œ ì¤€ë¹„ ì‹œê°„ì´ì—ˆì–´ìš”. ë‹¹ì‹ ì˜ ë§ì„¤ì„ë„ ë§ˆì°¬ê°€ì§€ì¼ ê±°ì˜ˆìš”.",
                            courage: "ë•…ì„ ëš«ê³  ë‚˜ì˜¤ëŠ” ê²ƒì€ ì”¨ì•—ì—ê²ŒëŠ” ê±°ëŒ€í•œ ìš©ê¸°ê°€ í•„ìš”í•œ ì¼ì´ì—ìš”. ë°–ì´ ì–´ë–¨ì§€ ëª¨ë¥´ë‹ˆê¹Œìš”. í•˜ì§€ë§Œ ê·¸ ìš©ê¸°ê°€ ìƒˆë¡œìš´ ìƒëª…ì„ ë§Œë“¤ì–´ë‚´ì£ .",
                            fear: "ì”¨ì•—ì´ ê°€ì¥ ë‘ë ¤ì›Œí•˜ëŠ” ê²ƒì€ ì©ì–´ë²„ë¦¬ëŠ” ê²ƒì´ì—ìš”. í•˜ì§€ë§Œ ì›€íŠ¸ì§€ ì•Šìœ¼ë©´ ì •ë§ë¡œ ì©ì–´ë²„ë¦¬ì£ . ë‘ë ¤ì›€ì„ ë„˜ì–´ì„œì•¼ ìƒëª…ì´ ì‹œì‘ë©ë‹ˆë‹¤.",
                            action: "ì”¨ì•—ì˜ ì²« í–‰ë™ì€ ë¿Œë¦¬ë¥¼ ë‚´ë¦¬ëŠ” ê²ƒì´ì—ìš”. ë³´ì´ì§€ ì•ŠëŠ” ê³³ì—ì„œ ì‹œì‘ë˜ì§€ë§Œ, ëª¨ë“  ì„±ì¥ì˜ ê¸°ë°˜ì´ ë˜ì£ . ì‘ì€ í–‰ë™ë„ í° ì˜ë¯¸ê°€ ìˆì–´ìš”.",
                            change: "ì”¨ì•—ì—ì„œ ìƒˆì‹¹ìœ¼ë¡œ ë³€í•˜ëŠ” ê²ƒì€ ì™„ì „í•œ ë³€í™”ì˜ˆìš”. í•˜ì§€ë§Œ ì”¨ì•—ì˜ ë³¸ì§ˆì€ ê·¸ëŒ€ë¡œ ë‚¨ì•„ìˆì–´ìš”. ë³€í™” ì†ì—ì„œë„ ìì‹ ì„ ìƒì§€ ì•Šì„ ìˆ˜ ìˆì–´ìš”.",
                            decision: "ì”¨ì•—ì´ ì–¸ì œ ë°œì•„í• ì§€ëŠ” ì”¨ì•— ìŠ¤ìŠ¤ë¡œ ê²°ì •í•´ìš”. ì¡°ê±´ì´ ë§ê³ , ì¤€ë¹„ê°€ ë˜ì—ˆì„ ë•Œ. ë‹¹ì‹ ë„ ìì‹ ì˜ íƒ€ì´ë°ì„ ë¯¿ì–´ë„ ê´œì°®ì•„ìš”.",
                            goal: "ì”¨ì•—ì˜ ê¿ˆì€ í° ë‚˜ë¬´ê°€ ë˜ëŠ” ê²ƒì´ì§€ë§Œ, ë¨¼ì € ì‘ì€ ìƒˆì‹¹ì´ ë˜ì–´ì•¼ í•´ìš”. í° ëª©í‘œë„ ì‘ì€ ì‹œì‘ì—ì„œ ìë¼ë‚˜ëŠ” ê±°ì˜ˆìš”.",
                            small_step: "ì”¨ì•—ì˜ ì²« ì‹¹ì€ ì •ë§ ì‘ì•„ìš”. í•˜ì§€ë§Œ ê·¸ ì‘ì€ ì‹¹ì´ ê±°ëŒ€í•œ ë‚˜ë¬´ì˜ ì‹œì‘ì´ì—ìš”. ì‘ì€ ê±¸ìŒë„ ì¶©ë¶„íˆ ê°€ì¹˜ ìˆì–´ìš”.",
                            commitment: "ì”¨ì•—ì´ ë°œì•„í•˜ëŠ” ê²ƒì€ ì„±ì¥ì— ëŒ€í•œ ì•½ì†ì´ì—ìš”. í•œ ë²ˆ ì‹œì‘í•˜ë©´ ê³„ì† ìë¼ì•¼ í•˜ë‹ˆê¹Œìš”. ì‹œì‘ì€ ê³§ ì•½ì†ì´ì—ìš”.",
                            momentum: "ì”¨ì•—ì´ ì›€íŠ¸ê¸° ì‹œì‘í•˜ë©´ ë©ˆì¶œ ìˆ˜ ì—†ì–´ìš”. ê·¸ ìì²´ê°€ ìƒëª…ì˜ í˜ì´ê±°ë“ ìš”. ì²« ê±¸ìŒë„ ê·¸ëŸ° ë©ˆì¶œ ìˆ˜ ì—†ëŠ” í˜ì´ ë  ìˆ˜ ìˆì–´ìš”.",
                            timing: "ì”¨ì•—ì€ ë•Œë¥¼ ê¸°ë‹¤ë¦´ ì¤„ ì•Œì•„ìš”. ë„ˆë¬´ ì´ë¥´ì§€ë„, ë„ˆë¬´ ëŠ¦ì§€ë„ ì•Šì€ ì™„ë²½í•œ ìˆœê°„ì„. ë‹¹ì‹ ë„ ìì‹ ë§Œì˜ ì™„ë²½í•œ ë•Œê°€ ìˆì„ ê±°ì˜ˆìš”.",
                            general: "ëª¨ë“  ê±°ëŒ€í•œ ë‚˜ë¬´ëŠ” ì‘ì€ ì”¨ì•—ì—ì„œ ì‹œì‘ëì–´ìš”. ë‹¹ì‹ ì˜ ì²« ê±¸ìŒë„ ì–¸ì  ê°€ëŠ” ê±°ëŒ€í•œ ìˆ²ì´ ë  ìˆ˜ ìˆì–´ìš”. ì‘ê²Œ ì‹œì‘í•´ë„ ê´œì°®ì•„ìš”."
                        },
                        en: {
                            beginning: "For a seed, the first germination is the most courageous moment. Breaking through the safe underground. Your first step is like that germination. Small but the most important beginning.",
                            hesitation: "Seeds also prepare for a long time before germinating. That time looks like hesitation, but it was actually preparation time for growth. Your hesitation is probably the same.",
                            courage: "Breaking through the ground requires enormous courage for a seed. Because it doesn't know what's outside. But that courage creates new life.",
                            fear: "What seeds fear most is rotting away. But if they don't sprout, they really do rot. Life begins by overcoming fear.",
                            action: "A seed's first action is taking root. It starts in invisible places, but becomes the foundation of all growth. Small actions also have great meaning.",
                            change: "Changing from seed to sprout is complete transformation. But the essence of the seed remains. You can not lose yourself even in change.",
                            decision: "When to germinate is decided by the seed itself. When conditions are right and it's prepared. You can trust your own timing too.",
                            goal: "A seed's dream is to become a big tree, but first it must become a small sprout. Big goals also grow from small beginnings.",
                            small_step: "A seed's first sprout is really small. But that small sprout is the beginning of a giant tree. Small steps are valuable enough.",
                            commitment: "A seed germinating is a promise for growth. Once it starts, it must keep growing. Beginning is a promise.",
                            momentum: "Once a seed starts sprouting, it can't stop. That itself is the power of life. First steps can also become such unstoppable power.",
                            timing: "Seeds know how to wait for the right time. The perfect moment that's neither too early nor too late. You'll have your own perfect timing too.",
                            general: "Every giant tree started from a small seed. Your first step can also become a giant forest someday. It's okay to start small."
                        },
                        pt: {
                            beginning: "Para uma semente, a primeira germinaÃ§Ã£o Ã© o momento mais corajoso. Romper atravÃ©s do subsolo seguro. Seu primeiro passo Ã© como essa germinaÃ§Ã£o. Pequeno mas o comeÃ§o mais importante.",
                            hesitation: "Sementes tambÃ©m se preparam por muito tempo antes de germinar. Esse tempo parece hesitaÃ§Ã£o, mas na verdade era tempo de preparaÃ§Ã£o para crescimento. Sua hesitaÃ§Ã£o provavelmente Ã© igual.",
                            courage: "Romper atravÃ©s do solo requer coragem enorme para uma semente. Porque ela nÃ£o sabe o que hÃ¡ lÃ¡ fora. Mas essa coragem cria nova vida.",
                            fear: "O que as sementes mais temem Ã© apodrecer. Mas se nÃ£o brotarem, realmente apodrecem. A vida comeÃ§a superando o medo.",
                            action: "A primeira aÃ§Ã£o de uma semente Ã© criar raÃ­zes. ComeÃ§a em lugares invisÃ­veis, mas se torna a fundaÃ§Ã£o de todo crescimento. Pequenas aÃ§Ãµes tambÃ©m tÃªm grande significado.",
                            change: "Mudar de semente para broto Ã© transformaÃ§Ã£o completa. Mas a essÃªncia da semente permanece. VocÃª pode nÃ£o se perder mesmo na mudanÃ§a.",
                            decision: "Quando germinar Ã© decidido pela prÃ³pria semente. Quando as condiÃ§Ãµes estÃ£o certas e estÃ¡ preparada. VocÃª pode confiar em seu prÃ³prio timing tambÃ©m.",
                            goal: "O sonho de uma semente Ã© se tornar uma Ã¡rvore grande, mas primeiro deve se tornar um pequeno broto. Grandes objetivos tambÃ©m crescem de pequenos comeÃ§os.",
                            small_step: "O primeiro broto de uma semente Ã© realmente pequeno. Mas esse pequeno broto Ã© o comeÃ§o de uma Ã¡rvore gigante. Pequenos passos sÃ£o valiosos o suficiente.",
                            commitment: "Uma semente germinando Ã© uma promessa para crescimento. Uma vez que comeÃ§a, deve continuar crescendo. ComeÃ§ar Ã© uma promessa.",
                            momentum: "Uma vez que uma semente comeÃ§a a brotar, nÃ£o pode parar. Isso em si Ã© o poder da vida. Primeiros passos tambÃ©m podem se tornar tal poder imparÃ¡vel.",
                            timing: "Sementes sabem como esperar pelo momento certo. O momento perfeito que nÃ£o Ã© nem muito cedo nem muito tarde. VocÃª terÃ¡ seu prÃ³prio timing perfeito tambÃ©m.",
                            general: "Toda Ã¡rvore gigante comeÃ§ou de uma pequena semente. Seu primeiro passo tambÃ©m pode se tornar uma floresta gigante algum dia. NÃ£o hÃ¡ problema em comeÃ§ar pequeno."
                        }
                    };
                    
                    return responses[lang][emotion] || responses[lang]['general'];
                }
            },
            {
                name: "Path", emoji: "ğŸ›¤ï¸",
                getResponse: (userInput, lang) => {
                    const emotion = analyzeEmotion(userInput);
                    
                    const responses = {
                        ko: {
                            beginning: "ëª¨ë“  ê¸¸ì€ ì²« ë°œê±¸ìŒì—ì„œ ì‹œì‘ë¼ìš”. ê·¸ ì „ê¹Œì§€ëŠ” ê·¸ëƒ¥ ê°€ëŠ¥ì„±ì´ì—ˆì§€ë§Œ, ì²« ê±¸ìŒì´ ê¸¸ì„ í˜„ì‹¤ë¡œ ë§Œë“¤ì–´ì¤ë‹ˆë‹¤. ë‹¹ì‹ ì˜ ê±¸ìŒì´ ìƒˆë¡œìš´ ê¸¸ì„ ë§Œë“¤ê³  ìˆì–´ìš”.",
                            hesitation: "ê¸¸ ì•ì—ì„œ ë§ì„¤ì´ëŠ” ê²ƒì€ ë‹¹ì—°í•´ìš”. ì–´ë””ë¡œ ì´ì–´ì§ˆì§€ ëª¨ë¥´ë‹ˆê¹Œìš”. í•˜ì§€ë§Œ ê¸¸ì€ ê±¸ì–´ë´ì•¼ë§Œ ì•Œ ìˆ˜ ìˆì–´ìš”. ë§ì„¤ì„ë„ ê¸¸ì˜ ì¼ë¶€ì…ë‹ˆë‹¤.",
                            courage: "ê¸¸ì„ ê±¸ìœ¼ë ¤ë©´ ìš©ê¸°ê°€ í•„ìš”í•´ìš”. íŠ¹íˆ ì•„ë¬´ë„ ê°€ì§€ ì•Šì€ ê¸¸ì¼ìˆ˜ë¡. í•˜ì§€ë§Œ ê·¸ëŸ° ê¸¸ì—ì„œ ê°€ì¥ ì•„ë¦„ë‹¤ìš´ í’ê²½ì„ ë§Œë‚  ìˆ˜ ìˆì–´ìš”.",
                            fear: "ê¸¸ì´ ë‘ë ¤ìš´ ê²ƒì€ ëì´ ë³´ì´ì§€ ì•Šê¸° ë•Œë¬¸ì´ì—ìš”. í•˜ì§€ë§Œ ê¸¸ì€ í•œ ê±¸ìŒì”©ë§Œ ê±¸ìœ¼ë©´ ë¼ìš”. ëê¹Œì§€ ê°ˆ í•„ìš”ëŠ” ì—†ì–´ìš”, ì§€ê¸ˆ ì´ ìˆœê°„ë§Œ ê±¸ìœ¼ë©´ ë˜ë‹ˆê¹Œìš”.",
                            action: "ê¸¸ì€ í–‰ë™ìœ¼ë¡œë§Œ ë§Œë“¤ì–´ì ¸ìš”. ìƒê°ìœ¼ë¡œëŠ” ê¸¸ì´ ìƒê¸°ì§€ ì•Šê±°ë“ ìš”. ë‹¹ì‹ ì˜ ë°œê±¸ìŒ í•˜ë‚˜í•˜ë‚˜ê°€ ê¸¸ì„ ë§Œë“¤ì–´ê°€ê³  ìˆì–´ìš”.",
                            change: "ê¸¸ì„ ê±·ë‹¤ ë³´ë©´ í’ê²½ì´ ê³„ì† ë°”ë€Œì–´ìš”. ê·¸ê²Œ ê¸¸ì˜ ë§¤ë ¥ì´ì£ . ë³€í™”ë¥¼ ë‘ë ¤ì›Œí•˜ì§€ ë§ê³ , ìƒˆë¡œìš´ í’ê²½ì„ ì¦ê²¨ë³´ì„¸ìš”.",
                            decision: "ê°ˆë¦¼ê¸¸ì—ì„œ ì–´ëŠ ìª½ì„ íƒí• ì§€ëŠ” ë‹¹ì‹ ì´ ì •í•´ìš”. ì •ë‹µì€ ì—†ì–´ìš”. ì–´ëŠ ê¸¸ì„ ê°€ë“  ê·¸ê²ƒì´ ë‹¹ì‹ ë§Œì˜ ê¸¸ì´ ë˜ë‹ˆê¹Œìš”.",
                            goal: "ê¸¸ì˜ ëª©ì ì§€ê°€ ì¤‘ìš”í•œ ê²Œ ì•„ë‹ˆì—ìš”. ê±¸ì–´ê°€ëŠ” ê·¸ ê³¼ì •ì´ ë” ì†Œì¤‘í•´ìš”. ëª©í‘œë¥¼ í–¥í•´ ê°€ë˜, ì§€ê¸ˆ ê±·ê³  ìˆëŠ” ì´ ìˆœê°„ì„ ë†“ì¹˜ì§€ ë§ˆì„¸ìš”.",
                            small_step: "ê¸¸ì€ ì‘ì€ ê±¸ìŒë“¤ë¡œ ì´ë¤„ì ¸ìš”. ê±°ëŒ€í•œ ë³´í­ë³´ë‹¤ ê¾¸ì¤€í•œ ê±¸ìŒì´ ë” ë©€ë¦¬ ê°ˆ ìˆ˜ ìˆì–´ìš”. ì²œì²œíˆ, ê¾¸ì¤€íˆ ê±¸ì–´ê°€ì„¸ìš”.",
                            commitment: "ê¸¸ì„ ê±·ê² ë‹¤ê³  ì •í•œ ê²ƒì€ ìì‹ ê³¼ì˜ ì•½ì†ì´ì—ìš”. í˜ë“¤ì–´ë„ í¬ê¸°í•˜ì§€ ì•Šê² ë‹¤ëŠ”. ê·¸ ì•½ì†ì„ ì§€ì¼œë‚˜ê°€ëŠ” ê²ƒì´ ì§„ì§œ ê¸¸ê±·ê¸°ì˜ˆìš”.",
                            momentum: "ê¸¸ì„ ê±·ê¸° ì‹œì‘í•˜ë©´ ìì—°ìŠ¤ëŸ½ê²Œ ë¦¬ë“¬ì´ ìƒê²¨ìš”. ê·¸ ë¦¬ë“¬ì„ íƒ€ë©´ ë” ì‰½ê²Œ ê±¸ì„ ìˆ˜ ìˆì–´ìš”. ì²« ê±¸ìŒì´ ê·¸ ë¦¬ë“¬ì˜ ì‹œì‘ì´ì—ìš”.",
                            timing: "ê¸¸ì„ ê±·ê¸° ì‹œì‘í•  ì™„ë²½í•œ ë•ŒëŠ” ì—†ì–´ìš”. ì§€ê¸ˆì´ ë°”ë¡œ ê·¸ ë•Œì˜ˆìš”. ê¸¸ì€ ì–¸ì œë“  ë‹¹ì‹ ì„ ê¸°ë‹¤ë¦¬ê³  ìˆê±°ë“ ìš”.",
                            general: "ê¸¸ì€ ê±·ëŠ” ì‚¬ëŒì— ì˜í•´ ë§Œë“¤ì–´ì ¸ìš”. ë‹¹ì‹ ì´ ê±¸ìœ¼ë©´ ê·¸ê²ƒì´ ë°”ë¡œ ë‹¹ì‹ ì˜ ê¸¸ì´ì—ìš”. ë‚¨ì˜ ê¸¸ê³¼ ë¹„êµí•˜ì§€ ë§ê³ , ë‹¹ì‹ ë§Œì˜ ê¸¸ì„ ê±¸ì–´ê°€ì„¸ìš”."
                        },
                        en: {
                            beginning: "Every path starts with the first step. Until then it was just possibility, but the first step makes the path reality. Your steps are creating a new path.",
                            hesitation: "It's natural to hesitate before a path. Because you don't know where it leads. But paths can only be known by walking them. Hesitation is also part of the path.",
                            courage: "Walking a path requires courage. Especially paths no one has taken. But on such paths you can meet the most beautiful scenery.",
                            fear: "Paths are scary because you can't see the end. But paths only need to be walked one step at a time. You don't need to go to the end, just walk this moment.",
                            action: "Paths are only made through action. Thinking doesn't create paths. Each of your steps is creating the path.",
                            change: "As you walk a path, the scenery keeps changing. That's the charm of paths. Don't fear change, enjoy the new scenery.",
                            decision: "Which way to choose at a crossroads is up to you. There's no right answer. Whichever path you take becomes your unique path.",
                            goal: "The destination of a path isn't what's important. The process of walking is more precious. Head toward your goal, but don't miss this moment of walking.",
                            small_step: "Paths are made of small steps. Steady steps can go further than giant strides. Walk slowly and steadily.",
                            commitment: "Deciding to walk a path is a promise to yourself. That you won't give up even when it's hard. Keeping that promise is real path-walking.",
                            momentum: "Once you start walking a path, a natural rhythm develops. Riding that rhythm makes walking easier. The first step is the beginning of that rhythm.",
                            timing: "There's no perfect time to start walking a path. Now is exactly that time. The path is always waiting for you.",
                            general: "Paths are made by those who walk them. When you walk, that becomes your path. Don't compare with others' paths, walk your own unique path."
                        },
                        pt: {
                            beginning: "Todo caminho comeÃ§a com o primeiro passo. AtÃ© entÃ£o era apenas possibilidade, mas o primeiro passo torna o caminho realidade. Seus passos estÃ£o criando um novo caminho.",
                            hesitation: "Ã‰ natural hesitar antes de um caminho. Porque vocÃª nÃ£o sabe onde leva. Mas caminhos sÃ³ podem ser conhecidos caminhando neles. HesitaÃ§Ã£o tambÃ©m Ã© parte do caminho.",
                            courage: "Caminhar um caminho requer coragem. Especialmente caminhos que ninguÃ©m tomou. Mas em tais caminhos vocÃª pode encontrar a paisagem mais bonita.",
                            fear: "Caminhos sÃ£o assustadores porque vocÃª nÃ£o pode ver o fim. Mas caminhos sÃ³ precisam ser caminhados um passo de cada vez. VocÃª nÃ£o precisa ir atÃ© o fim, apenas caminhe este momento.",
                            action: "Caminhos sÃ£o feitos apenas atravÃ©s da aÃ§Ã£o. Pensar nÃ£o cria caminhos. Cada um dos seus passos estÃ¡ criando o caminho.",
                            change: "Conforme vocÃª caminha um caminho, a paisagem continua mudando. Esse Ã© o charme dos caminhos. NÃ£o tema a mudanÃ§a, aproveite a nova paisagem.",
                            decision: "Qual caminho escolher numa encruzilhada depende de vocÃª. NÃ£o hÃ¡ resposta certa. Qualquer caminho que vocÃª tome se torna seu caminho Ãºnico.",
                            goal: "O destino de um caminho nÃ£o Ã© o que Ã© importante. O processo de caminhar Ã© mais precioso. VÃ¡ em direÃ§Ã£o ao seu objetivo, mas nÃ£o perca este momento de caminhar.",
                            small_step: "Caminhos sÃ£o feitos de pequenos passos. Passos constantes podem ir mais longe que grandes passadas. Caminhe devagar e constantemente.",
                            commitment: "Decidir caminhar um caminho Ã© uma promessa para si mesmo. Que vocÃª nÃ£o desistirÃ¡ mesmo quando for difÃ­cil. Manter essa promessa Ã© verdadeiro caminhar.",
                            momentum: "Uma vez que vocÃª comeÃ§a a caminhar um caminho, um ritmo natural se desenvolve. Seguir esse ritmo torna o caminhar mais fÃ¡cil. O primeiro passo Ã© o comeÃ§o desse ritmo.",
                            timing: "NÃ£o hÃ¡ momento perfeito para comeÃ§ar a caminhar um caminho. Agora Ã© exatamente esse momento. O caminho estÃ¡ sempre esperando por vocÃª.",
                            general: "Caminhos sÃ£o feitos por aqueles que os caminham. Quando vocÃª caminha, isso se torna seu caminho. NÃ£o compare com caminhos dos outros, caminhe seu prÃ³prio caminho Ãºnico."
                        }
                    };
                    
                    return responses[lang][emotion] || responses[lang]['general'];
                }
            },
            {
                name: "Dawn", emoji: "ğŸŒ…",
                getResponse: (userInput, lang) => {
                    const emotion = analyzeEmotion(userInput);
                    
                    const responses = {
                        ko: {
                            beginning: "ìƒˆë²½ì€ ëª¨ë“  ê²ƒì˜ ì‹œì‘ì´ì—ìš”. ì–´ë‘ ì´ ëë‚˜ê³  ë¹›ì´ ì‹œì‘ë˜ëŠ” ê²½ê³„ì„ . ë‹¹ì‹ ì˜ ì²« ê±¸ìŒë„ ê·¸ëŸ° ìƒˆë²½ê³¼ ê°™ì•„ìš”. ìƒˆë¡œìš´ í•˜ë£¨ì˜ ì‹œì‘ì´ì£ .",
                            hesitation: "ìƒˆë²½ ì „ì´ ê°€ì¥ ì–´ë‘ì›Œìš”. ê·¸ë˜ì„œ ë” ë§ì„¤ì—¬ì§€ì£ . í•˜ì§€ë§Œ ê·¸ ì–´ë‘  ëì— ìƒˆë²½ì´ ê¸°ë‹¤ë¦¬ê³  ìˆì–´ìš”. ë§ì„¤ì„ì˜ ëì—ë„ ì‹œì‘ì´ ìˆì–´ìš”.",
                            courage: "ìƒˆë²½ì„ ë§ì´í•˜ë ¤ë©´ ì–´ë‘ ì„ ê²¬ëŒì•¼ í•´ìš”. ê·¸ê²ƒì´ ìƒˆë²½ì˜ ìš©ê¸°ì£ . ë‹¹ì‹ ë„ ì§€ê¸ˆê¹Œì§€ ì¶©ë¶„íˆ ê²¬ë ì–´ìš”. ì´ì œ ìƒˆë²½ì„ ë§ì„ ì°¨ë¡€ì˜ˆìš”.",
                            fear: "ìƒˆë²½ì´ ì™€ë„ ë˜ ë°¤ì´ ì˜¬ê¹Œ ë´ ë‘ë ¤ì›Œí•˜ë‚˜ìš”? í•˜ì§€ë§Œ ë°¤ì´ ì™€ë„ ë‹¤ì‹œ ìƒˆë²½ì€ ì™€ìš”. ë‘ë ¤ì›€ì€ ì¼ì‹œì ì´ì§€ë§Œ, í¬ë§ì€ ê³„ì† ëŒì•„ì™€ìš”.",
                            action: "ìƒˆë²½ì€ ì €ì ˆë¡œ ì˜¤ì§€ ì•Šì•„ìš”. ì‹œê°„ì´ í˜ëŸ¬ì•¼ í•˜ê³ , ì§€êµ¬ê°€ ëŒì•„ì•¼ í•˜ì£ . ë‹¹ì‹ ì˜ í–‰ë™ë„ ê·¸ë˜ìš”. ì›€ì§ì—¬ì•¼ ìƒˆë¡œìš´ ì‹œì‘ì´ ì™€ìš”.",
                            change: "ìƒˆë²½ë§ˆë‹¤ ì„¸ìƒì€ ìƒˆë¡­ê²Œ íƒœì–´ë‚˜ìš”. ì–´ì œì™€ ê°™ì€ í’ê²½ì´ì§€ë§Œ ì™„ì „íˆ ë‹¤ë¥¸ ë¹›ê¹”ì´ì£ . ë³€í™”ë„ ê·¸ë˜ìš”. ê°™ì€ ë‹¹ì‹ ì´ì§€ë§Œ ìƒˆë¡œìš´ ë¹›ì„ ë°›ëŠ” ê±°ì˜ˆìš”.",
                            decision: "ìƒˆë²½ì„ ë³´ë ¤ë©´ ì¼ì° ì¼ì–´ë‚˜ê¸°ë¡œ ê²°ì •í•´ì•¼ í•´ìš”. í¸ì•ˆí•œ ì ì„ í¬ê¸°í•˜ëŠ” ê²°ì •ì´ì£ . ëª¨ë“  ì‹œì‘ì—ëŠ” ê·¸ëŸ° ê²°ì •ì´ í•„ìš”í•´ìš”.",
                            goal: "ìƒˆë²½ì˜ ëª©í‘œëŠ” í•´ë¥¼ ë– ì˜¤ë¥´ê²Œ í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆì—ìš”. ê·¸ì € ì–´ë‘ ì„ ë°íˆëŠ” ê²ƒì´ì£ . ì‘ì€ ëª©í‘œë¶€í„° ì‹œì‘í•´ë„ ì¶©ë¶„í•´ìš”.",
                            small_step: "ìƒˆë²½ì€ í•œ ë²ˆì— ë°ì•„ì§€ì§€ ì•Šì•„ìš”. ì„œì„œíˆ, ì¡°ê¸ˆì”© ë°ì•„ì ¸ìš”. ë‹¹ì‹ ì˜ ë³€í™”ë„ ê·¸ë ‡ê²Œ ì²œì²œíˆ ì¼ì–´ë‚˜ë„ ê´œì°®ì•„ìš”.",
                            commitment: "ë§¤ì¼ ìƒˆë²½ì´ ì˜¤ëŠ” ê²ƒì²˜ëŸ¼, ì•½ì†ì€ ë§¤ì¼ ì§€ì¼œê°€ëŠ” ê±°ì˜ˆìš”. í•œ ë²ˆì˜ ë‹¤ì§ì´ ì•„ë‹ˆë¼ ë§¤ì¼ì˜ ì„ íƒì´ì£ .",
                            momentum: "ìƒˆë²½ì´ ì‹œì‘ë˜ë©´ í•˜ë£¨ ì „ì²´ê°€ ë°ì•„ì ¸ìš”. ì²« ê±¸ìŒë„ ê·¸ë˜ìš”. ì‹œì‘í•˜ë©´ ìì—°ìŠ¤ëŸ½ê²Œ ì´ì–´ì ¸ìš”.",
                            timing: "ìƒˆë²½ì€ ì •í™•í•œ ì‹œê°„ì— ì™€ìš”. ë„ˆë¬´ ì´ë¥´ì§€ë„, ëŠ¦ì§€ë„ ì•Šê²Œ. ë‹¹ì‹ ì˜ ì‹œì‘ë„ ì§€ê¸ˆì´ ì™„ë²½í•œ íƒ€ì´ë°ì¼ ê±°ì˜ˆìš”.",
                            general: "ê°€ì¥ ì–´ë‘ìš´ ì‹œê°„ ëì— ìƒˆë²½ì´ ì™€ìš”. ë‹¹ì‹ ì´ ì§€ê¸ˆ ì–´ë‘  ì†ì— ìˆë‹¤ë©´, ê³§ ìƒˆë²½ì´ ì˜¬ ê±°ì˜ˆìš”. ì¡°ê¸ˆë§Œ ë” ê¸°ë‹¤ë ¤ë³´ì„¸ìš”."
                        },
                        en: {
                            beginning: "Dawn is the beginning of everything. The boundary where darkness ends and light begins. Your first step is like that dawn. The start of a new day.",
                            hesitation: "It's darkest before dawn. That's why you hesitate more. But dawn is waiting at the end of that darkness. There's also a beginning at the end of hesitation.",
                            courage: "To greet dawn, you must endure darkness. That's the courage of dawn. You've endured enough until now. Now it's time to greet the dawn.",
                            fear: "Are you afraid that night will come again even after dawn? But even when night comes, dawn comes again. Fear is temporary, but hope keeps returning.",
                            action: "Dawn doesn't come by itself. Time must pass and the earth must turn. Your actions are the same. You must move for a new beginning to come.",
                            change: "The world is reborn new every dawn. Same scenery as yesterday but completely different colors. Change is like that too. Same you but receiving new light.",
                            decision: "To see dawn, you must decide to wake up early. A decision to give up comfortable sleep. Every beginning needs such a decision.",
                            goal: "Dawn's goal isn't to make the sun rise. It's just to brighten the darkness. Starting with small goals is enough.",
                            small_step: "Dawn doesn't brighten all at once. Gradually, little by little it brightens. Your change can happen slowly like that too.",
                            commitment: "Like dawn comes every day, promises are kept every day. Not one determination but daily choices.",
                            momentum: "Once dawn begins, the entire day brightens. First steps are like that too. Once you start, it naturally continues.",
                            timing: "Dawn comes at the exact time. Neither too early nor too late. Your beginning is probably perfect timing right now too.",
                            general: "Dawn comes at the end of the darkest time. If you're in darkness now, dawn will come soon. Wait just a little longer."
                        },
                        pt: {
                            beginning: "O amanhecer Ã© o comeÃ§o de tudo. A fronteira onde a escuridÃ£o termina e a luz comeÃ§a. Seu primeiro passo Ã© como esse amanhecer. O inÃ­cio de um novo dia.",
                            hesitation: "Ã‰ mais escuro antes do amanhecer. Ã‰ por isso que vocÃª hesita mais. Mas o amanhecer estÃ¡ esperando no fim dessa escuridÃ£o. TambÃ©m hÃ¡ um comeÃ§o no fim da hesitaÃ§Ã£o.",
                            courage: "Para saudar o amanhecer, vocÃª deve suportar a escuridÃ£o. Essa Ã© a coragem do amanhecer. VocÃª suportou o suficiente atÃ© agora. Agora Ã© hora de saudar o amanhecer.",
                            fear: "VocÃª tem medo de que a noite venha novamente mesmo depois do amanhecer? Mas mesmo quando a noite vem, o amanhecer vem novamente. O medo Ã© temporÃ¡rio, mas a esperanÃ§a continua retornando.",
                            action: "O amanhecer nÃ£o vem por si sÃ³. O tempo deve passar e a terra deve girar. Suas aÃ§Ãµes sÃ£o iguais. VocÃª deve se mover para um novo comeÃ§o vir.",
                            change: "O mundo renasce novo a cada amanhecer. Mesma paisagem de ontem mas cores completamente diferentes. MudanÃ§a Ã© assim tambÃ©m. Mesmo vocÃª mas recebendo nova luz.",
                            decision: "Para ver o amanhecer, vocÃª deve decidir acordar cedo. Uma decisÃ£o de desistir do sono confortÃ¡vel. Todo comeÃ§o precisa de tal decisÃ£o.",
                            goal: "O objetivo do amanhecer nÃ£o Ã© fazer o sol nascer. Ã‰ apenas clarear a escuridÃ£o. ComeÃ§ar com pequenos objetivos Ã© suficiente.",
                            small_step: "O amanhecer nÃ£o clareia de uma vez. Gradualmente, pouco a pouco clareia. Sua mudanÃ§a pode acontecer devagar assim tambÃ©m.",
                            commitment: "Como o amanhecer vem todos os dias, promessas sÃ£o mantidas todos os dias. NÃ£o uma determinaÃ§Ã£o mas escolhas diÃ¡rias.",
                            momentum: "Uma vez que o amanhecer comeÃ§a, o dia inteiro clareia. Primeiros passos sÃ£o assim tambÃ©m. Uma vez que vocÃª comeÃ§a, naturalmente continua.",
                            timing: "O amanhecer vem no momento exato. Nem muito cedo nem muito tarde. Seu comeÃ§o provavelmente Ã© timing perfeito agora tambÃ©m.",
                            general: "O amanhecer vem no fim do tempo mais escuro. Se vocÃª estÃ¡ na escuridÃ£o agora, o amanhecer virÃ¡ em breve. Espere apenas um pouco mais."
                        }
                    };
                    
                    return responses[lang][emotion] || responses[lang]['general'];
                }
            }
        ];
        
        let currentLanguage = 'en'; // ê¸°ë³¸ ì–¸ì–´ë¥¼ ì˜ì–´ë¡œ ì„¤ì •
        let currentUser = null;
        let userResponse = '';
        let journeyStarted = false;
        let currentTypingElement = null;
        let typingIntervals = [];
        
        // ============ ì—¬ì • ì´ˆê¸°í™” í•¨ìˆ˜ ============
        
        function resetJourney() {
            console.log('=== ì—¬ì • ì´ˆê¸°í™” ì‹œì‘ ===');
            
            // 1. ëª¨ë“  íƒ€ì´í•‘ íš¨ê³¼ ì™„ì „ ì •ë¦¬
            clearAllTypingEffects();
            
            // ì¶”ê°€ ì•ˆì „ì¥ì¹˜ - ëª¨ë“  timer ì •ë¦¬
            for (let i = 1; i < 99999; i++) window.clearInterval(i);
            for (let i = 1; i < 99999; i++) window.clearTimeout(i);
            
            // 2. ëª¨ë“  ì½˜í…ì¸  ì„¹ì…˜ ì™„ì „ ì´ˆê¸°í™”
            const sectionsToReset = [
                'portalIntroSection',
                'characterResponsesSection', 
                'lightMessageSection',
                'portalQuestionSection',
                'userInputSection',
                'userReactionsSection',
                'continueSection'
            ];
            
            sectionsToReset.forEach(sectionId => {
                const section = document.getElementById(sectionId);
                if (section) {
                    section.classList.remove('show');
                    section.style.opacity = '0';
                    
                    if (sectionId === 'characterResponsesSection' || 
                        sectionId === 'userInputSection' || 
                        sectionId === 'userReactionsSection') {
                        section.innerHTML = '';
                    } else {
                        const textElements = section.querySelectorAll('.portal-intro, .light-message, .portal-question, .continue-text');
                        textElements.forEach(el => {
                            el.innerHTML = '';
                            el.textContent = '';
                        });
                    }
                }
            });
            
            // 3. íŠ¹ì • ìš”ì†Œë“¤ ê°œë³„ ì´ˆê¸°í™”
            const portalIntro = document.getElementById('portalIntro');
            const lightMessage = document.getElementById('lightMessage');
            const portalQuestion = document.getElementById('portalQuestion');
            const continueText = document.getElementById('continueText');
            
            if (portalIntro) portalIntro.innerHTML = '';
            if (lightMessage) lightMessage.innerHTML = '';
            if (portalQuestion) portalQuestion.innerHTML = '';
            if (continueText) continueText.innerHTML = '';
            
            // 4. í…ìŠ¤íŠ¸ì˜ì—­ ì™„ì „ ì´ˆê¸°í™”
            const userTextarea = document.getElementById('userTextarea');
            if (userTextarea) {
                userTextarea.disabled = false;
                userTextarea.value = '';
                userTextarea.style.height = 'auto';
                userTextarea.placeholder = translations[currentLanguage].inputPlaceholder;
            }
            
            // 5. ìŠ¤í¬ë¡¤ ìœ„ì¹˜ ì´ˆê¸°í™”
            const mainContent = document.getElementById('mainContent');
            if (mainContent) {
                mainContent.scrollTop = 0;
            }
            
            // 6. ìƒíƒœ ë³€ìˆ˜ ì™„ì „ ì´ˆê¸°í™”
            userResponse = '';
            currentTypingElement = null;
            
            console.log('=== ì—¬ì • ì´ˆê¸°í™” ì™„ë£Œ ===');
        }
        
        // ============ ê°œì„ ëœ ì–¸ì–´ ë³€ê²½ í•¨ìˆ˜ ============
        
        function changeLanguage(lang) {
            if (!translations[lang]) {
                console.error('ì§€ì›í•˜ì§€ ì•ŠëŠ” ì–¸ì–´:', lang);
                return;
            }
            
            if (currentLanguage === lang) {
                return;
            }
            
            if (journeyStarted) {
                const confirmMessage = translations[currentLanguage].languageChangeConfirm;
                const shouldRestart = confirm(confirmMessage);
                
                if (!shouldRestart) {
                    return;
                }
            }
            
            const previousLanguage = currentLanguage;
            currentLanguage = lang;
            
            console.log(`ì–¸ì–´ ë³€ê²½: ${previousLanguage} â†’ ${currentLanguage}`);
            
            if (journeyStarted) {
                resetJourney();
            }
            
            updateLanguageButtons(lang);
            updateStaticTranslations(lang);
            
            if (journeyStarted) {
                setTimeout(() => {
                    console.log(`ìƒˆë¡œìš´ ì–¸ì–´(${currentLanguage})ë¡œ ì—¬ì • ì¬ì‹œì‘`);
                    startPortalSequence();
                }, 1000);
            }
        }
        
        // ============ UI ì—…ë°ì´íŠ¸ í•¨ìˆ˜ë“¤ ============
        
        function updateLanguageButtons(lang) {
            document.querySelectorAll('.lang-btn').forEach(btn => {
                btn.classList.remove('active');
                if (btn.dataset.lang === lang) {
                    btn.classList.add('active');
                }
            });
        }
        
        function updateStaticTranslations(lang) {
            // ê°œë³„ ìš”ì†Œ ì—…ë°ì´íŠ¸
            const elements = [
                'logoSubtitle',
                'portalMainTitle', 
                'portalSubtitle',
                'lightTitle',
                'continueYesBtn',
                'continueNoBtn'
            ];
            
            elements.forEach(elementId => {
                const element = document.getElementById(elementId);
                if (element && translations[lang]) {
                    const key = elementId.replace('Btn', 'Button').replace('Subtitle', 'Subtitle');
                    let translationKey = key;
                    
                    const keyMapping = {
                        'logoSubtitle': 'logoSubtitle',
                        'portalMainTitle': 'portalMainTitle',
                        'portalSubtitle': 'portalSubtitle',
                        'lightTitle': 'lightTitle',
                        'continueYesButton': 'continueYes',
                        'continueNoButton': 'continueNo'
                    };
                    
                    translationKey = keyMapping[key] || key;
                    
                    if (translations[lang][translationKey]) {
                        element.textContent = translations[lang][translationKey];
                    }
                }
            });
            
            // placeholder ì—…ë°ì´íŠ¸
            const textarea = document.getElementById('userTextarea');
            if (textarea) textarea.placeholder = translations[lang].inputPlaceholder;
        }
        
        // ============ ê°œì„ ëœ íƒ€ì´í•‘ íš¨ê³¼ + ìŠ¤í¬ë¡¤ ì¶”ì  ì‹œìŠ¤í…œ ============
        
        function typewriterEffect(element, text, speed = 80) {
            return new Promise((resolve) => {
                if (currentTypingElement) {
                    currentTypingElement.classList.remove('typing-cursor');
                }
                
                let i = 0;
                element.innerHTML = '';
                element.classList.add('typing-cursor');
                currentTypingElement = element;
                
                const typingInterval = setInterval(() => {
                    if (!document.contains(element)) {
                        clearInterval(typingInterval);
                        resolve();
                        return;
                    }
                    
                    element.innerHTML += text.charAt(i);
                    i++;
                    
                    if (i % 10 === 0) {
                        scrollToFollowTyping(element);
                    }
                    
                    if (i === text.length) {
                        clearInterval(typingInterval);
                        element.classList.remove('typing-cursor');
                        currentTypingElement = null;
                        
                        setTimeout(() => {
                            if (document.contains(element)) {
                                scrollToFollowTyping(element);
                            }
                        }, 200);
                        
                        resolve();
                    }
                }, speed);
                
                typingIntervals.push(typingInterval);
            });
        }
        
        function clearAllTypingEffects() {
            typingIntervals.forEach(interval => clearInterval(interval));
            typingIntervals = [];
            
            if (currentTypingElement) {
                currentTypingElement.classList.remove('typing-cursor');
                currentTypingElement = null;
            }
        }
        
        // ============ ìŠ¤ë§ˆíŠ¸ ìŠ¤í¬ë¡¤ ì‹œìŠ¤í…œ ============
        
        function scrollToFollowTyping(element) {
            const mainContent = document.getElementById('mainContent');
            const elementRect = element.getBoundingClientRect();
            const containerRect = mainContent.getBoundingClientRect();
            
            if (elementRect.bottom > containerRect.bottom - 150) {
                const scrollTop = mainContent.scrollTop;
                const elementOffsetTop = element.offsetTop;
                const targetScroll = elementOffsetTop - (containerRect.height / 2);
                
                mainContent.scrollTo({
                    top: Math.max(0, targetScroll),
                    behavior: 'smooth'
                });
            }
        }
        
        function scrollToElement(element) {
            const mainContent = document.getElementById('mainContent');
            const elementOffsetTop = element.offsetTop;
            const containerHeight = mainContent.clientHeight;
            const targetScroll = elementOffsetTop - (containerHeight / 3);
            
            mainContent.scrollTo({
                top: Math.max(0, targetScroll),
                behavior: 'smooth'
            });
        }
        
        // ============ ì–¸ì–´ ë²„íŠ¼ ì´ë²¤íŠ¸ ì„¤ì • ============
        
        function setupLanguageButtons() {
            const langButtons = document.querySelectorAll('.lang-btn');
            
            langButtons.forEach(btn => {
                btn.addEventListener('click', function(e) {
                    e.preventDefault();
                    const newLang = this.dataset.lang;
                    changeLanguage(newLang);
                });
            });
        }
        
        // ============ ë©”ì¸ ì—¬ì • ì‹œìŠ¤í…œ ============
        
        function initializeTemarix() {
            console.log('=== Temarix Portal 16 ì´ˆê¸°í™” ì‹œì‘ ===');
            
            setupLanguageButtons();
            setupTextareaAutoResize();
            setupInputEvents();
            
            journeyStarted = true;
            
            setTimeout(() => {
                startPortalSequence();
            }, 1000);
        }
        
        function startPortalSequence() {
            setTimeout(() => {
                showIntro();
            }, 1000);
        }
        
        // ============ ì—¬ì • ë‹¨ê³„ë“¤ ============
        
        async function showIntro() {
            const introSection = document.getElementById('portalIntroSection');
            const introElement = document.getElementById('portalIntro');
            
            introSection.classList.add('show');
            
            const introText = translations[currentLanguage].portalIntro;
            await typewriterEffect(introElement, introText, 60);
            
            setTimeout(() => {
                showCharacterResponses();
            }, 2000);
        }
        
        async function showCharacterResponses() {
            const responseSection = document.getElementById('characterResponsesSection');
            
            responseSection.classList.add('show');
            
            for (let i = 0; i < characters.length; i++) {
                const char = characters[i];
                const responseDiv = document.createElement('div');
                responseDiv.className = 'character-response';
                
                const nameDiv = document.createElement('div');
                nameDiv.className = 'character-name';
                nameDiv.textContent = `${char.emoji} ${char.name}`;
                
                const dialogueDiv = document.createElement('div');
                dialogueDiv.className = 'character-dialogue';
                
                responseDiv.appendChild(nameDiv);
                responseDiv.appendChild(dialogueDiv);
                responseSection.appendChild(responseDiv);
                
                responseDiv.style.opacity = '1';
                
                const dialogueText = translations[currentLanguage][char.key];
                await typewriterEffect(dialogueDiv, dialogueText, 70);
                
                if (i < characters.length - 1) {
                    await new Promise(resolve => setTimeout(resolve, 1500));
                }
            }
            
            setTimeout(() => {
                showLightMessage();
            }, 2000);
        }
        
        async function showLightMessage() {
            const lightSection = document.getElementById('lightMessageSection');
            const lightMessageEl = document.getElementById('lightMessage');
            
            lightSection.classList.add('show');
            
            const lightText = translations[currentLanguage].lightMessage;
            await typewriterEffect(lightMessageEl, lightText, 60);
            
            setTimeout(() => {
                showQuestion();
            }, 2000);
        }
        
        async function showQuestion() {
            const questionSection = document.getElementById('portalQuestionSection');
            const questionEl = document.getElementById('portalQuestion');
            
            questionSection.classList.add('show');
            
            const questionText = translations[currentLanguage].portalQuestion;
            await typewriterEffect(questionEl, questionText, 50);
            
            setTimeout(() => {
                enableUserInput();
            }, 1500);
        }
        
        // ============ ì‚¬ìš©ì ì…ë ¥ ì‹œìŠ¤í…œ ============
        
        function setupInputEvents() {
            const userTextarea = document.getElementById('userTextarea');
            
            userTextarea.addEventListener('keydown', handleTextareaKeydown);
            
            document.getElementById('continueYesBtn').addEventListener('click', function() {
                processContinue('Y');
            });
            
            document.getElementById('continueNoBtn').addEventListener('click', function() {
                processContinue('N');
            });
        }
        
        function handleTextareaKeydown(e) {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                const inputValue = this.value.trim();
                
                if (inputValue) {
                    processUserInput(inputValue);
                }
            }
        }
        
        function setupTextareaAutoResize() {
            const textarea = document.getElementById('userTextarea');
            
            textarea.addEventListener('input', function() {
                this.style.height = 'auto';
                this.style.height = Math.min(this.scrollHeight, 96) + 'px';
            });
        }
        
        async function processUserInput(inputText) {
            userResponse = inputText;
            disableUserInput();
            showUserResponse(inputText);
            
            setTimeout(() => {
                showUserReactions(inputText);
            }, 1000);
        }
        
        function disableUserInput() {
            const userTextarea = document.getElementById('userTextarea');
            userTextarea.disabled = true;
            userTextarea.value = '';
            userTextarea.style.height = 'auto';
            
            userTextarea.placeholder = translations[currentLanguage].waitingMessage;
        }
        
        function enableUserInput() {
            const userTextarea = document.getElementById('userTextarea');
            userTextarea.disabled = false;
            userTextarea.placeholder = translations[currentLanguage].inputPlaceholder;
            
            setTimeout(() => {
                userTextarea.focus();
            }, 100);
        }
        
        function showUserResponse(text) {
            const inputSection = document.getElementById('userInputSection');
            const userDiv = document.createElement('div');
            userDiv.className = 'user-response';
            const youLabel = translations[currentLanguage].youLabel;
            userDiv.innerHTML = `<strong>${youLabel}:</strong> "${text}"`;
            inputSection.appendChild(userDiv);
            inputSection.classList.add('show');
            
            setTimeout(() => {
                scrollToElement(inputSection);
            }, 100);
        }
        
        async function showUserReactions(userInput) {
            const reactionsSection = document.getElementById('userReactionsSection');
            
            reactionsSection.classList.add('show');
            
            for (let i = 0; i < responseCharacters.length; i++) {
                const char = responseCharacters[i];
                const responseDiv = document.createElement('div');
                responseDiv.className = 'character-response';
                
                const nameDiv = document.createElement('div');
                nameDiv.className = 'character-name';
                nameDiv.textContent = `${char.emoji} ${char.name}`;
                
                const dialogueDiv = document.createElement('div');
                dialogueDiv.className = 'character-dialogue';
                
                responseDiv.appendChild(nameDiv);
                responseDiv.appendChild(dialogueDiv);
                reactionsSection.appendChild(responseDiv);
                
                responseDiv.style.opacity = '1';
                
                const reactionText = char.getResponse(userInput, currentLanguage);
                await typewriterEffect(dialogueDiv, reactionText, 70);
                
                if (i < responseCharacters.length - 1) {
                    await new Promise(resolve => setTimeout(resolve, 1500));
                }
            }
            
            setTimeout(() => {
                showContinueOption();
            }, 2000);
        }
        
        async function showContinueOption() {
            const continueSection = document.getElementById('continueSection');
            const continueText = document.getElementById('continueText');
            
            continueSection.classList.add('show');
            
            const questionText = translations[currentLanguage].continueText;
            await typewriterEffect(continueText, questionText, 50);
            
            setTimeout(() => {
                scrollToElement(continueSection);
            }, 500);
        }
        
        function processContinue(input) {
            if (input === 'Y') {
                const message = currentLanguage === 'ko' ? 
                    'Portal 17ì´ ê³§ ì¤€ë¹„ë©ë‹ˆë‹¤. ê³„ì†í•´ì„œ ë” ê¹Šì€ ê°ì •ì˜ ì—¬ì •ì´ ì´ì–´ì§‘ë‹ˆë‹¤.' :
                    currentLanguage === 'en' ? 
                    'Portal 17 will be ready soon. The journey into deeper emotions continues.' :
                    'Portal 17 estarÃ¡ pronto em breve. A jornada para emoÃ§Ãµes mais profundas continua.';
                alert(message);
            } else if (input === 'N') {
                const message = currentLanguage === 'ko' ? 
                    'ì—¬ì •ì´ ì¼ì‹œ ì¤‘ì§€ë˜ì—ˆìŠµë‹ˆë‹¤. ì–¸ì œë“  ë‹¤ì‹œ ëŒì•„ì™€ ê³„ì†í•˜ì„¸ìš”.' :
                    currentLanguage === 'en' ? 
                    'The journey has been paused. Come back and continue anytime.' :
                    'A jornada foi pausada. Volte e continue a qualquer momento.';
                alert(message);
            }
        }
        
        // ============ ì´ˆê¸°í™” ============
        
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Temarix V2 Portal 16 DOM ë¡œë“œ ì™„ë£Œ');
            
            // ìë™ ë¡œê·¸ì¸ ì²˜ë¦¬ (ë¡œê·¸ì¸ ëª¨ë‹¬ ì œê±°)
            currentUser = { 
                uid: 'user-auto-' + Date.now(),
                email: 'auto@temarix.com'
            };
            
            memoryStorage.mockUser = currentUser;
            
            updateStaticTranslations(currentLanguage);
            initializeTemarix();
        });
    </script>
</body>
</html>