<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Temarix V2 - Portal 06: When You Feel You Don't Deserve to Feel</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            background: #000;
            color: #fff;
            font-family: 'Courier New', monospace;
            height: 100vh;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            word-break: keep-all;
            overflow-wrap: break-word;
        }
        
        /* ìƒë‹¨ í—¤ë” */
        .header-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 25px 30px;
            background: #000;
            border-bottom: 1px solid #333;
            position: relative;
            z-index: 100;
            height: 80px;
            flex-shrink: 0;
        }
        
        .logo-section {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
        }
        
        .logo-title {
            font-size: 26px;
            font-weight: bold;
            color: #fff;
            margin-bottom: 4px;
            letter-spacing: 1px;
        }
        
        .logo-subtitle {
            font-size: 15px;
            color: #ccc;
            letter-spacing: 1.5px;
        }
        
        .portal-header-title {
            text-align: center;
            flex: 1;
            margin: 0 20px;
        }
        
        .portal-main-title {
            font-size: 28px;
            color: #fff;
            margin-bottom: 8px;
            font-weight: normal;
            letter-spacing: 1px;
        }
        
        .portal-subtitle {
            font-size: 18px;
            color: #ccc;
            letter-spacing: 1.5px;
        }
        
        /* ì–¸ì–´ ë²„íŠ¼ 3ê°œ */
        .header-right {
            display: flex;
            align-items: center;
        }
        
        .language-buttons {
            display: flex;
            gap: 10px;
        }
        
        .lang-btn {
            background: #444;
            color: #fff;
            border: none;
            padding: 10px 18px;
            font-size: 14px;
            font-family: 'Courier New', monospace;
            cursor: pointer;
            transition: background 0.2s;
        }
        
        .lang-btn:hover {
            background: #666;
        }
        
        .lang-btn.active {
            background: #87cefa;
            color: #000;
        }
        
        /* ë©”ì¸ ì½˜í…ì¸  */
        .main-content {
            flex: 1;
            max-height: calc(100vh - 80px - 120px);
            overflow-y: auto;
            overflow-x: hidden;
            padding: 30px 20px;
            scroll-behavior: smooth;
            position: relative;
        }
        
        .portal-container {
            max-width: 700px;
            width: 100%;
            margin: 0 auto;
            text-align: center;
            display: flex;
            flex-direction: column;
            word-break: keep-all;
            overflow-wrap: break-word;
            hyphens: none;
            min-height: 150vh;
        }
        
        /* í…ìŠ¤íŠ¸ ì„¹ì…˜ë“¤ */
        .portal-intro-section {
            margin: 40px 0;
            opacity: 0;
            min-height: 200px;
        }
        
        .portal-intro {
            font-size: 20px;
            color: #fff;
            margin-bottom: 30px;
            line-height: 1.8;
            white-space: pre-wrap;
            word-wrap: break-word;
            word-break: keep-all;
            background: none;
            border: none;
            padding: 0;
        }
        
        .character-responses-section {
            margin: 40px 0;
            opacity: 0;
            min-height: 800px;
        }
        
        .character-response {
            color: #fff;
            font-size: 18px;
            margin: 40px 0;
            text-align: left;
            opacity: 0;
            white-space: pre-wrap;
            word-wrap: break-word;
            word-break: keep-all;
            transition: opacity 0.8s ease-in;
            background: none;
            border: none;
            padding: 0;
            min-height: 80px;
        }
        
        .character-name {
            font-weight: bold;
            color: #87cefa;
            margin-bottom: 12px;
            font-size: 18px;
        }
        
        .character-dialogue {
            color: #fff;
            line-height: 1.7;
            font-size: 17px;
            white-space: pre-wrap;
            word-wrap: break-word;
            word-break: keep-all;
        }
        
        .typing-cursor::after {
            content: '|';
            animation: blink 1s infinite;
            color: #87cefa;
        }
        
        @keyframes blink {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0; }
        }
        
        .light-message-section {
            margin: 50px 0;
            opacity: 0;
            background: none;
            border: none;
            padding: 0;
            min-height: 100px;
        }
        
        .light-message {
            font-size: 20px;
            color: #87cefa;
            line-height: 1.8;
            font-style: italic;
            white-space: pre-wrap;
            word-wrap: break-word;
            word-break: keep-all;
        }
        
        .portal-question-section {
            margin: 40px 0;
            opacity: 0;
            min-height: 150px;
        }
        
        .portal-question {
            font-size: 22px;
            color: #fff;
            margin-bottom: 30px;
            min-height: 100px;
            display: flex;
            align-items: center;
            justify-content: center;
            line-height: 1.6;
            white-space: pre-wrap;
            word-wrap: break-word;
            word-break: keep-all;
        }
        
        .user-input-section {
            margin: 40px 0;
            opacity: 0;
            min-height: 100px;
        }
        
        .user-response {
            color: #fff;
            margin: 30px 0;
            text-align: left;
            font-size: 18px;
            background: none;
            border: none;
            padding: 0;
            white-space: pre-wrap;
            word-wrap: break-word;
            word-break: keep-all;
        }
        
        .user-response strong {
            color: #87cefa;
            margin-right: 8px;
        }
        
        .user-reactions-section {
            margin: 40px 0;
            opacity: 0;
            min-height: 400px;
        }
        
        .continue-section {
            margin: 50px 0;
            opacity: 0;
            text-align: center;
            background: none;
            border: none;
            padding: 0;
            min-height: 200px;
        }
        
        .continue-text {
            color: #fff;
            font-size: 20px;
            margin-bottom: 25px;
            line-height: 1.6;
            white-space: pre-wrap;
            word-wrap: break-word;
            word-break: keep-all;
        }
        
        .continue-buttons {
            display: flex;
            gap: 20px;
            justify-content: center;
            flex-wrap: wrap;
        }
        
        .continue-btn {
            background: #444;
            color: #fff;
            border: none;
            padding: 18px 35px;
            font-family: 'Courier New', monospace;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 200px;
        }
        
        .continue-btn:hover {
            background: #666;
        }
        
        .continue-btn.primary {
            background: #87cefa;
            color: #000;
        }
        
        .continue-btn.primary:hover {
            background: #b0d4f1;
        }
        
        /* í•˜ë‹¨ ê³ ì • ì…ë ¥ì°½ */
        .input-fixed-bottom {
            position: relative;
            bottom: 0;
            left: 0;
            right: 0;
            background: #000;
            border-top: 1px solid #333;
            padding: 25px;
            z-index: 100;
            flex-shrink: 0;
            height: 120px;
        }
        
        .input-container {
            max-width: 900px;
            margin: 0 auto;
            display: flex;
            align-items: flex-start;
            gap: 15px;
        }
        
        .input-prefix {
            color: #87cefa;
            font-size: 20px;
            margin-top: 8px;
            flex-shrink: 0;
        }
        
        .user-textarea {
            background: transparent;
            border: none;
            border-bottom: 1px solid #444;
            color: #fff;
            font-family: 'Courier New', monospace;
            font-size: 18px;
            width: 100%;
            padding: 12px 8px;
            outline: none;
            resize: none;
            min-height: 32px;
            max-height: 96px;
            line-height: 1.6;
            transition: border-color 0.3s ease;
            overflow-y: auto;
        }
        
        .user-textarea:focus {
            border-bottom-color: #87cefa;
        }
        
        .user-textarea::placeholder {
            color: #666;
        }
        
        .user-textarea:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            background: rgba(50, 50, 50, 0.2);
        }
        
        /* ìŠ¤í¬ë¡¤ë°” ìŠ¤íƒ€ì¼ë§ */
        .main-content::-webkit-scrollbar {
            width: 12px;
        }
        
        .main-content::-webkit-scrollbar-track {
            background: #111;
            border-radius: 6px;
        }
        
        .main-content::-webkit-scrollbar-thumb {
            background: #444;
            border-radius: 6px;
            border: 2px solid #111;
        }
        
        .main-content::-webkit-scrollbar-thumb:hover {
            background: #666;
        }
        
        /* ì• ë‹ˆë©”ì´ì…˜ */
        @keyframes fadeIn {
            to { opacity: 1; }
        }
        
        .show {
            opacity: 1 !important;
            transition: opacity 1s ease-in;
        }
        
        .hidden {
            display: none;
        }
        
        /* ë°˜ì‘í˜• ë””ìì¸ */
        @media (max-width: 768px) {
            .header-bar {
                padding: 20px 15px;
                height: 70px;
                flex-direction: column;
                gap: 10px;
            }
            
            .main-content {
                max-height: calc(100vh - 70px - 120px);
                padding: 20px 15px;
            }
            
            .logo-title {
                font-size: 22px;
            }
            
            .portal-main-title {
                font-size: 22px;
            }
            
            .portal-subtitle {
                font-size: 16px;
            }
            
            .lang-btn {
                font-size: 12px;
                padding: 8px 14px;
            }
            
            .portal-intro {
                font-size: 18px;
            }
            
            .portal-question {
                font-size: 20px;
            }
            
            .character-response {
                font-size: 16px;
            }
            
            .input-fixed-bottom {
                padding: 20px;
            }
            
            .continue-buttons {
                flex-direction: column;
                gap: 15px;
            }
            
            .continue-btn {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <!-- ìƒë‹¨ í—¤ë” -->
    <div class="header-bar">
        <div class="logo-section">
            <div class="logo-title">TEMARIX V2</div>
            <div class="logo-subtitle" id="logoSubtitle">The Tremor of Emotion</div>
        </div>
        
        <div class="portal-header-title">
            <div class="portal-main-title" id="portalMainTitle">Portal 06: When You Feel You Don't Deserve to Feel</div>
            <div class="portal-subtitle" id="portalSubtitle">Am I allowed to have this emotion?</div>
        </div>
        
        <div class="header-right">
            <div class="language-buttons">
                <button class="lang-btn" data-lang="ko">KR</button>
                <button class="lang-btn active" data-lang="en">EN</button>
                <button class="lang-btn" data-lang="pt">PT</button>
            </div>
        </div>
    </div>

    <!-- ë©”ì¸ ì½˜í…ì¸  ì˜ì—­ -->
    <div class="main-content" id="mainContent">
        <div class="portal-container">
            <!-- í¬í„¸ ì¸íŠ¸ë¡œ -->
            <div class="portal-intro-section" id="portalIntroSection">
                <div class="portal-intro" id="portalIntro"></div>
            </div>

            <!-- ìºë¦­í„° ì‘ë‹µ ì„¹ì…˜ -->
            <div class="character-responses-section" id="characterResponsesSection">
                <!-- 8ëª…ì˜ ìºë¦­í„° ì‘ë‹µì´ ìˆœì°¨ì ìœ¼ë¡œ í‘œì‹œë©ë‹ˆë‹¤ -->
            </div>

            <!-- ë¹›ì˜ í•œë§ˆë”” -->
            <div class="light-message-section" id="lightMessageSection">
                <div class="character-name" id="lightTitle">âœ¨ Word of Light</div>
                <div class="light-message" id="lightMessage"></div>
            </div>

            <!-- ì§ˆë¬¸ ì„¹ì…˜ -->
            <div class="portal-question-section" id="portalQuestionSection">
                <div class="portal-question" id="portalQuestion"></div>
            </div>

            <!-- ì‚¬ìš©ì ì…ë ¥ ì˜ì—­ -->
            <div class="user-input-section" id="userInputSection">
                <!-- ì‚¬ìš©ì ì‘ë‹µì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
            </div>
            
            <!-- ì‚¬ìš©ì ì‘ë‹µ í›„ ìºë¦­í„° ë°˜ì‘ -->
            <div class="user-reactions-section" id="userReactionsSection">
                <!-- ì‚¬ìš©ì ì‘ë‹µ í›„ 3ëª…ì˜ ìºë¦­í„° ë°˜ì‘ì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
            </div>
            
            <!-- ê³„ì†í•˜ê¸° ë²„íŠ¼ ì„¹ì…˜ -->
            <div class="continue-section" id="continueSection">
                <div class="continue-text" id="continueText"></div>
                <div class="continue-buttons">
                    <button class="continue-btn primary" id="continueYesBtn">Continue to Portal 07</button>
                    <button class="continue-btn" id="continueNoBtn">Pause the journey</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- í•˜ë‹¨ ê³ ì • ì…ë ¥ì°½ -->
    <div class="input-fixed-bottom">
        <div class="input-container">
            <div class="input-prefix">></div>
            <textarea class="user-textarea" 
                      id="userTextarea" 
                      placeholder="Share your thoughts about deserving to feel emotions... (Press Enter to send)"
                      rows="1"
                      maxlength="500"></textarea>
        </div>
    </div>

    <script>
        // ë©”ëª¨ë¦¬ ê¸°ë°˜ ì‚¬ìš©ì ìŠ¤í† ë¦¬ì§€ (localStorage ëŒ€ì‹ )
        let memoryStorage = {
            mockUser: null
        };
        
        // Firebase ëª¨ì˜ ê°ì²´ (ì‹¤ì œ êµ¬í˜„ì—ì„œëŠ” Firebase SDK ì‚¬ìš©)
        const firebase = {
            auth: () => ({
                onAuthStateChanged: (callback) => {
                    // ëª¨ì˜ ì¸ì¦ ìƒíƒœ ì²´í¬ (ë©”ëª¨ë¦¬ ê¸°ë°˜)
                    setTimeout(() => {
                        callback(memoryStorage.mockUser);
                    }, 100);
                }
            })
        };

        // ë²ˆì—­ ë°ì´í„°
        const translations = {
            ko: {
                logoSubtitle: "ê°ì •ì˜ ë–¨ë¦¼",
                portalMainTitle: "Portal 06: ê°ì •ì„ ëŠë‚„ ìê²©ì´ ì—†ë‹¤ê³  ëŠë‚„ ë•Œ",
                portalSubtitle: "ë‚´ê°€ ì´ ê°ì •ì„ ê°€ì ¸ë„ ê´œì°®ì„ê¹Œìš”?",
                portalIntro: "ìš°ë¦¬ëŠ” ì¢…ì¢… ìŠ¤ìŠ¤ë¡œì—ê²Œ ë¬»ìŠµë‹ˆë‹¤.\n\"ë‚´ê°€ ì´ëŸ° ê°ì •ì„ ëŠê»´ë„ ë˜ëŠ” ì‚¬ëŒì¼ê¹Œ?\"\n\"ì§€ê¸ˆ ìš¸ ìê²©ì´ ìˆì„ê¹Œ?\"\n\"ì§€ê¸ˆ ì™¸ë¡­ë‹¤ê³  ë§í•  ìê²©ì´ ìˆë‚˜?\"\n\nê°ì •ì˜ ìê²©ì„ ìŠ¤ìŠ¤ë¡œ ì œí•œí•˜ê²Œ ë˜ëŠ” ìˆœê°„ë“¤ â€”\nê·¸ë•Œ ìš°ë¦¬ëŠ”\në§ˆìŒì´ ì•„ë‹ˆë¼ íŒë‹¨ìœ¼ë¡œ ìŠ¤ìŠ¤ë¡œë¥¼ ì¡°ìš©íˆ ê°€ë‘¡ë‹ˆë‹¤.\n\nê·¸ëŸ°ë° ê°ì •ì€ ì›ë˜,\nìê²©ì„ ë¬¼ìœ¼ë©° íƒœì–´ë‚˜ëŠ” ê²ƒì´ ì•„ë‹ˆì—ˆì£ .\nê·¸ê±´ ë‹¨ì§€ ì‚´ì•„ ìˆëŠ” ì¡´ì¬ë¡œì„œì˜ ë–¨ë¦¼ì¼ ë¿ì…ë‹ˆë‹¤.",
                lightTitle: "âœ¨ ë¹›ì˜ í•œë§ˆë””",
                lightMessage: "ê°ì •ì€ ê²½ìŸì´ ì•„ë‹™ë‹ˆë‹¤.\në‹¹ì‹ ì´ ëŠë‚€ ê·¸ ìˆœê°„ë¶€í„°,\nê·¸ ê°ì •ì€ ì¶©ë¶„íˆ ì¡´ì¬í•  ìê²©ì„ ì–»ì—ˆìŠµë‹ˆë‹¤.",
                portalQuestion: "ë‹¹ì‹ ì´ í•œ ë²ˆì¯¤ ëŠë¼ë©´ ì•ˆ ëœë‹¤ê³  ë¯¿ì—ˆë˜ ê°ì •ì€ ë¬´ì—‡ì¸ê°€ìš”?\n\nì§€ê¸ˆ, ê·¸ ê°ì •ì„ ë‹¤ì‹œ êº¼ë‚´ë³¼ ìˆ˜ ìˆì„ê¹Œìš”?",
                continueText: "ê°ì •ì˜ ìê²©ì— ëŒ€í•´ ëŒì•„ë³¸ ì´ ì—¬ì •ì„ ê³„ì†í•˜ì‹œê² ìŠµë‹ˆê¹Œ?",
                continueYes: "Portal 07ë¡œ ê³„ì†í•˜ì‹œê² ìŠµë‹ˆê¹Œ?",
                continueNo: "ì—¬ì •ì„ ì¼ì‹œì •ì§€í•˜ì‹œê² ìŠµë‹ˆê¹Œ?",
                inputPlaceholder: "ê°ì •ì„ ëŠë‚„ ìê²©ì— ëŒ€í•œ ìƒê°ì„ í„¸ì–´ë†“ì•„ ë³´ì„¸ìš”... (Enterë¡œ ì „ì†¡)",
                youLabel: "ë‹¹ì‹ ",
                languageChangeConfirm: "ì–¸ì–´ë¥¼ ë³€ê²½í•˜ë©´ ì—¬ì •ì´ ì²˜ìŒë¶€í„° ë‹¤ì‹œ ì‹œì‘ë©ë‹ˆë‹¤.\nê³„ì†í•˜ì‹œê² ìŠµë‹ˆê¹Œ?",
                waitingMessage: "ì‘ë‹µì„ ê¸°ë‹¤ë¦¬ëŠ” ì¤‘...",
                // ìºë¦­í„° ëŒ€í™”
                charEly: "ê°ì •ì€ í—ˆë½ë°›ì§€ ì•Šì•„ë„ ë©ë‹ˆë‹¤.\në‹¹ì‹ ì€ ì´ë¯¸ ëŠë‚„ ìê²©ì´ ìˆëŠ” ì¡´ì¬ë¡œ íƒœì–´ë‚¬ìœ¼ë‹ˆê¹Œìš”.",
                charCris: "ë‚˜ë„ ê·¸ë¬ì–´ìš”.\n'ì´ ì •ë„ ì¼ë¡œ ì•„íŒŒí•´ë„ ë˜ë‚˜?'\nê·¼ë° ê°ì •ì€ ë“±ê¸‰í‘œ ì—†ì–´ìš”~ ìš¸ê³  ì‹¶ìœ¼ë©´ ìš°ëŠ” ê±°ì˜ˆìš”. ğŸ˜…",
                charZafirah: "ë‹¹ì‹ ì˜ ê°ì •ì€ ë¹„êµ ëŒ€ìƒì´ ì•„ë‹™ë‹ˆë‹¤.\nê·¸ê±´ ì„¸ìƒ ëˆ„êµ¬ì™€ë„ ê°™ì„ ìˆ˜ ì—†ëŠ”\në‹¹ì‹ ë§Œì˜ ì‹ í˜¸ì˜ˆìš”.",
                charRami: "ìê²©ì„ ë¬»ëŠ” ìˆœê°„, ê°ì •ì€ ì‘ì•„ì§€ê³ \níŒë‹¨ì€ ì»¤ì§‘ë‹ˆë‹¤.\në‹¹ì‹ ì€ ì§€ê¸ˆ, ë§ˆìŒì´ ì•„ë‹ˆë¼ ë‘ë ¤ì›€ìœ¼ë¡œ ë°˜ì‘í•˜ê³  ìˆì–´ìš”.",
                charSamir: "(ê·¸ëŠ” ëº¨ ìœ„ë¥¼ ì²œì²œíˆ ìŠ¤ì¹˜ëŠ” ì œìŠ¤ì²˜ë¥¼ í•©ë‹ˆë‹¤.\nëˆˆë¬¼ì´ í˜ëŸ¬ë„ ê´œì°®ë‹¤ëŠ” ë¬´ì–¸ì˜ ìˆ˜ì‹ .\nê°ì •ì€ ì–¸ì–´ë³´ë‹¤ ë¨¼ì € í—ˆë½ëœ ì¡´ì¬ì…ë‹ˆë‹¤.)",
                charLayla: "ì§€ê¸ˆ ëŠë¼ëŠ” ê·¸ ê°ì •ì€,\në‹¹ì‹ ì´ ì—¬ì „íˆ ì‚´ì•„ ìˆë‹¤ëŠ” ì•„ë¦„ë‹¤ìš´ ì¦ê±°ì˜ˆìš”.\nìê²©ì„ ë”°ì§€ì§€ ë§ê³ , ê·¸ì € ì•ˆì•„ì¤˜ìš”.",
                charNabir: "ì•„, ë˜ í”¼í•´ì˜ì‹ì´ì•¼?\nì§€ê¸ˆ ìš°ëŠ” ê±°, ê·¸ëƒ¥ ì§•ì§•ëŒ€ëŠ” ê±°ì–ì•„.\nì§„ì§œ ê³ í†µë„ ëª» ë³¸ ì• ê°€ ë­˜ ì•Œì•„?",
                charAzhar: "ë‹ˆê°€ ì™œ í˜ë“¤ì–´?\nì§€ê¸ˆ ê·¸ ê°ì • ëŠë‚„ ì •ë„ë¡œ ë„Œ ì•ˆ ì•„íŒŒ.\nê·¸ëŸ¬ë‹ˆê¹Œ ì°¸ì•„. ì¡°ìš©íˆ í•´."
            },
            en: {
                logoSubtitle: "The Tremor of Emotion",
                portalMainTitle: "Portal 06: When You Feel You Don't Deserve to Feel",
                portalSubtitle: "Am I allowed to have this emotion?",
                portalIntro: "We often ask ourselves:\n\"Am I allowed to feel this emotion?\"\n\"Do I have the right to cry now?\"\n\"Am I qualified to say I'm lonely?\"\n\nMoments when we self-restrict our emotional entitlement â€”\nThat's when we quietly imprison ourselves\nwith judgment rather than heart.\n\nBut emotions were never meant\nto ask for permission before being born.\nThey're just tremors of being alive.",
                lightTitle: "âœ¨ Word of Light",
                lightMessage: "Emotions are not a competition.\nFrom the moment you felt it,\nthat emotion earned its right to exist.",
                portalQuestion: "What emotion did you once believe you shouldn't feel?\n\nNow, can you allow yourself to feel that emotion again?",
                continueText: "Will you continue this journey of reflecting on emotional entitlement?",
                continueYes: "Continue to Portal 07?",
                continueNo: "Pause the journey?",
                inputPlaceholder: "Share your thoughts about deserving to feel emotions... (Press Enter to send)",
                youLabel: "You",
                languageChangeConfirm: "Changing the language will restart the journey from the beginning.\nDo you want to continue?",
                waitingMessage: "Waiting for response...",
                charEly: "Emotions don't need permission.\nYou were born with the right to feel.",
                charCris: "I felt that way too.\n'Can I hurt over something this small?'\nBut emotions don't have grades~ If you want to cry, just cry. ğŸ˜…",
                charZafirah: "Your emotions are not comparison subjects.\nThey're signals that belong only to you,\nunlike anyone else in the world.",
                charRami: "The moment you question worthiness, emotions shrink\nand judgment grows.\nYou're responding with fear, not heart.",
                charSamir: "(He gently traces across your cheek.\nA silent permission that tears are okay.\nEmotions were permitted before language.)",
                charLayla: "The emotion you're feeling now\nis beautiful proof that you're still alive.\nDon't question worthiness, just embrace it.",
                charNabir: "Oh, victim mentality again?\nThat crying is just whining.\nWhat do you know about real pain?",
                charAzhar: "Why are you hurting?\nYou're not in enough pain to feel that emotion.\nSo endure it. Stay quiet."
            },
            pt: {
                logoSubtitle: "O Tremor da EmoÃ§Ã£o",
                portalMainTitle: "Portal 06: Quando VocÃª Sente Que NÃ£o Merece Sentir",
                portalSubtitle: "Estou permitido a ter essa emoÃ§Ã£o?",
                portalIntro: "Frequentemente nos perguntamos:\n\"Estou permitido a sentir essa emoÃ§Ã£o?\"\n\"Tenho o direito de chorar agora?\"\n\"Estou qualificado para dizer que estou solitÃ¡rio?\"\n\nMomentos quando auto-restringimos nosso direito emocional â€”\nÃ‰ quando silenciosamente nos aprisionamos\ncom julgamento ao invÃ©s de coraÃ§Ã£o.\n\nMas emoÃ§Ãµes nunca foram feitas\npara pedir permissÃ£o antes de nascer.\nElas sÃ£o apenas tremores de estar vivo.",
                lightTitle: "âœ¨ Palavra de Luz",
                lightMessage: "EmoÃ§Ãµes nÃ£o sÃ£o uma competiÃ§Ã£o.\nDesde o momento que vocÃª sentiu,\nessa emoÃ§Ã£o ganhou seu direito de existir.",
                portalQuestion: "Que emoÃ§Ã£o vocÃª uma vez acreditou que nÃ£o deveria sentir?\n\nAgora, vocÃª pode se permitir sentir essa emoÃ§Ã£o novamente?",
                continueText: "VocÃª continuarÃ¡ esta jornada de refletir sobre merecimento emocional?",
                continueYes: "Continuar para o Portal 07?",
                continueNo: "Pausar a jornada?",
                inputPlaceholder: "Compartilhe seus pensamentos sobre merecer sentir emoÃ§Ãµes... (Enter para enviar)",
                youLabel: "VocÃª",
                languageChangeConfirm: "Mudar o idioma reiniciarÃ¡ a jornada desde o inÃ­cio.\nDeseja continuar?",
                waitingMessage: "Aguardando resposta...",
                charEly: "EmoÃ§Ãµes nÃ£o precisam de permissÃ£o.\nVocÃª nasceu com o direito de sentir.",
                charCris: "Eu me senti assim tambÃ©m.\n'Posso me machucar por algo tÃ£o pequeno?'\nMas emoÃ§Ãµes nÃ£o tÃªm notas~ Se quer chorar, apenas chore. ğŸ˜…",
                charZafirah: "Suas emoÃ§Ãµes nÃ£o sÃ£o objetos de comparaÃ§Ã£o.\nElas sÃ£o sinais que pertencem apenas a vocÃª,\ndiferente de qualquer outra pessoa no mundo.",
                charRami: "No momento que vocÃª questiona o merecimento, emoÃ§Ãµes encolhem\ne o julgamento cresce.\nVocÃª estÃ¡ respondendo com medo, nÃ£o com o coraÃ§Ã£o.",
                charSamir: "(Ele gentilmente traÃ§a sua bochecha.\nUma permissÃ£o silenciosa de que lÃ¡grimas estÃ£o bem.\nEmoÃ§Ãµes foram permitidas antes da linguagem.)",
                charLayla: "A emoÃ§Ã£o que vocÃª estÃ¡ sentindo agora\nÃ© uma bela prova de que vocÃª ainda estÃ¡ vivo.\nNÃ£o questione o merecimento, apenas abrace.",
                charNabir: "Ah, mentalidade de vÃ­tima de novo?\nEsse choro Ã© apenas lamentaÃ§Ã£o.\nO que vocÃª sabe sobre dor real?",
                charAzhar: "Por que vocÃª estÃ¡ sofrendo?\nVocÃª nÃ£o estÃ¡ com dor suficiente para sentir essa emoÃ§Ã£o.\nEntÃ£o aguente. Fique quieto."
            }
        };
        
        // ìºë¦­í„° ë°ì´í„°
        const characters = [
            { name: "Ely", emoji: "ğŸ‘‘", key: "charEly" },
            { name: "Cris", emoji: "ğŸƒ", key: "charCris" },
            { name: "Zafirah", emoji: "ğŸ§•", key: "charZafirah" },
            { name: "Rami", emoji: "ğŸ”®", key: "charRami" },
            { name: "Samir", emoji: "ğŸª", key: "charSamir" },
            { name: "Layla", emoji: "ğŸ’ ", key: "charLayla" },
            { name: "Nabir", emoji: "ğŸ¦‚", key: "charNabir" },
            { name: "Azhar", emoji: "ğŸ”¥", key: "charAzhar" }
        ];
        
        // ============ ê°ì • ë¶„ì„ ì‹œìŠ¤í…œ ============
        
        function analyzeEmotion(userInput) {
            const input = userInput.toLowerCase();
            
            // ê°ì • í‚¤ì›Œë“œ ë§¤í•‘
            const emotionKeywords = {
                shame: ['ë¶€ë„ëŸ¬', 'ì°½í”¼', 'ìˆ˜ì¹˜', 'ë¯¼ë§', 'shame', 'embarrass', 'humiliat', 'vergonha', 'envergonhad'],
                guilt: ['ì£„ì±…ê°', 'ë¯¸ì•ˆ', 'ì£„ì†¡', 'ì˜ëª»', 'íƒ“', 'guilt', 'sorry', 'wrong', 'fault', 'culpa', 'desculpa'],
                sadness: ['ìŠ¬í”„', 'ìš¸ê³ ', 'ëˆˆë¬¼', 'ìš°ìš¸', 'ì•”ìš¸', 'sad', 'cry', 'tear', 'depress', 'triste', 'choro'],
                anger: ['í™”ê°€', 'ë¶„ë…¸', 'ì§œì¦', 'ë¹¡ì³', 'ì—´ë°›', 'angry', 'mad', 'furious', 'rage', 'raiva', 'irritad'],
                fear: ['ë¬´ì„œ', 'ë‘ë ¤', 'ê²ë‚˜', 'ê±±ì •', 'ë¶ˆì•ˆ', 'fear', 'scare', 'afraid', 'worry', 'medo', 'preocup'],
                loneliness: ['ì™¸ë¡œ', 'í˜¼ì', 'ê³ ë¦½', 'ì†Œì™¸', 'lonely', 'alone', 'isolated', 'abandon', 'solidÃ£o', 'sozinho'],
                inadequacy: ['ë¶€ì¡±', 'ëª»ë‚˜', 'ìê²©ì—†', 'ëŠ¥ë ¥ì—†', 'inadequate', 'not enough', 'insufficient', 'inadequad', 'insuficient'],
                jealousy: ['ì§ˆíˆ¬', 'ì‹œê¸°', 'ë¶€ëŸ¬', 'jealous', 'envy', 'envious', 'ciÃºme', 'inveja'],
                anxiety: ['ë¶ˆì•ˆ', 'ì´ˆì¡°', 'ë–¨ë ¤', 'ê¸´ì¥', 'anxiety', 'nervous', 'worry', 'tense', 'ansiedade', 'nervoso'],
                selfworth: ['ìê²©', 'ê°€ì¹˜', 'ì¡´ì¬', 'ì˜ë¯¸', 'worth', 'deserve', 'value', 'entitle', 'valor', 'merec']
            };
            
            // ê°ì • ë¶„ì„
            let detectedEmotions = [];
            for (const [emotion, keywords] of Object.entries(emotionKeywords)) {
                for (const keyword of keywords) {
                    if (input.includes(keyword)) {
                        detectedEmotions.push(emotion);
                        break;
                    }
                }
            }
            
            // ê°ì •ì´ ê°ì§€ë˜ì§€ ì•Šìœ¼ë©´ ê¸°ë³¸ê°’ ì„¤ì •
            if (detectedEmotions.length === 0) {
                detectedEmotions = ['general'];
            }
            
            return detectedEmotions[0]; // ì²« ë²ˆì§¸ ê°ì§€ëœ ê°ì • ë°˜í™˜
        }
        
        // ë°˜ì‘ ìºë¦­í„°ë“¤ (Portal 06 ì „ìš©)
        const responseCharacters = [
            {
                name: "Permission", emoji: "ğŸ•Šï¸",
                getResponse: (userInput, lang) => {
                    const emotion = analyzeEmotion(userInput);
                    
                    const responses = {
                        ko: {
                            shame: "ë¶€ë„ëŸ¬ìš´ ê°ì •ë„ ë‹¹ì‹ ì˜ ì¼ë¶€ì˜ˆìš”. ë¶€ë„ëŸ¬ì›€ì€ ë‹¹ì‹ ì´ ì„±ì¥í•˜ê³  ìˆë‹¤ëŠ” ì‹ í˜¸ì¼ ìˆ˜ ìˆì–´ìš”. ê·¸ ê°ì •ì„ ëŠë¼ëŠ” ê²ƒ ìì²´ê°€ ìš©ê¸°ì˜ˆìš”. ë‹¹ì‹ ì€ ê·¸ ê°ì •ì„ ê°€ì§ˆ ìê²©ì´ ì¶©ë¶„í•´ìš”.",
                            guilt: "ì£„ì±…ê°ì„ ëŠë¼ëŠ” ê²ƒì€ ë‹¹ì‹ ì´ ì„ ëŸ‰í•œ ì‚¬ëŒì´ë¼ëŠ” ì¦ê±°ì˜ˆìš”. ì™„ë²½í•˜ì§€ ì•Šì€ ìì‹ ì„ ì¸ì •í•˜ëŠ” ê²ƒ, ê·¸ê²ƒë„ ê°ì •ì„ ëŠë‚„ ìê²©ì´ì—ìš”. ì£„ì±…ê°ë§ˆì €ë„ ë‹¹ì‹ ì˜ ì§„ì‹¤í•œ ë§ˆìŒì—ì„œ ë‚˜ì˜¨ ê±°ì˜ˆìš”.",
                            sadness: "ìŠ¬í””ì„ ëŠë‚„ ìê²©ì´ ì—†ë‹¤ê³  ìƒê°í•˜ì„¸ìš”? ìŠ¬í””ì€ ì‚¬ë‘í–ˆë‹¤ëŠ” ì¦ê±°ì˜ˆìš”. ë¬´ì–¸ê°€ë¥¼ ì†Œì¤‘íˆ ì—¬ê²¼ê¸°ì— ìŠ¬í”ˆ ê±°ì˜ˆìš”. ê·¸ ìŠ¬í””ì„ ëŠë‚„ ìê²©ì€ ë‹¹ì‹ ì—ê²Œ ì¶©ë¶„íˆ ìˆì–´ìš”.",
                            anger: "í™”ë¥¼ ë‚´ë©´ ì•ˆ ëœë‹¤ê³  ìƒê°í–ˆë‚˜ìš”? ë¶„ë…¸ë„ ë‹¹ì‹ ì˜ ê²½ê³„ë¥¼ ì•Œë ¤ì£¼ëŠ” ì‹ í˜¸ì˜ˆìš”. ë¬´ì—‡ì´ ì˜³ì§€ ì•Šì€ì§€ ì•Œë ¤ì£¼ëŠ” ë‚´ë©´ì˜ ë‚˜ì¹¨ë°˜ì´ì—ìš”. ê·¸ ê°ì •ì„ ì¸ì •í•  ìê²©ì´ ìˆì–´ìš”.",
                            fear: "ë‘ë ¤ì›€ì„ ëŠë¼ëŠ” ê²ƒë„ ìì—°ìŠ¤ëŸ¬ìš´ ê±°ì˜ˆìš”. ë¬´ì–¸ê°€ë¥¼ ì§€í‚¤ê³  ì‹¶ê¸° ë•Œë¬¸ì— ë‘ë ¤ìš´ ê±°ì˜ˆìš”. ê·¸ ë‘ë ¤ì›€ì„ ëŠë¼ëŠ” ê²ƒë§Œìœ¼ë¡œë„ ë‹¹ì‹ ì€ ìš©ê°í•œ ì‚¬ëŒì´ì—ìš”.",
                            loneliness: "ì™¸ë¡œì›€ì„ ëŠë¼ë©´ ì•ˆ ëœë‹¤ê³  ìƒê°í–ˆë‚˜ìš”? ì™¸ë¡œì›€ì€ ì—°ê²°ì„ ì›í•˜ëŠ” ë§ˆìŒì˜ í‘œí˜„ì´ì—ìš”. í˜¼ìë¼ê³  ëŠë¼ëŠ” ê²ƒë„ ë‹¹ì‹ ì˜ ì†Œì¤‘í•œ ê°ì •ì´ì—ìš”. ê·¸ê±¸ ëŠë‚„ ìê²©ì´ ìˆì–´ìš”.",
                            inadequacy: "ë¶€ì¡±í•˜ë‹¤ê³  ëŠë¼ëŠ” ë§ˆìŒë„ ë‹¹ì‹ ì˜ ê°ì •ì´ì—ìš”. ë” ë‚˜ì•„ì§€ê³  ì‹¶ë‹¤ëŠ” ë§ˆìŒì—ì„œ ë‚˜ì˜¤ëŠ” ê±°ì˜ˆìš”. ê·¸ ë§ˆìŒì„ ê°€ì§€ëŠ” ê²ƒ ìì²´ê°€ ì„±ì¥í•˜ëŠ” ì‚¬ëŒì˜ ì¦ê±°ì˜ˆìš”.",
                            jealousy: "ì§ˆíˆ¬í•˜ëŠ” ë§ˆìŒë„ ì¸ê°„ì ì¸ ê°ì •ì´ì—ìš”. ë¬´ì–¸ê°€ë¥¼ ì›í•˜ê³  ìˆë‹¤ëŠ” ì‹ í˜¸ì˜ˆìš”. ê·¸ ê°ì •ì„ ë¶€ë„ëŸ¬ì›Œí•  í•„ìš” ì—†ì–´ìš”. ì¸ì •í•˜ê³  ë°›ì•„ë“¤ì¼ ìê²©ì´ ìˆì–´ìš”.",
                            anxiety: "ë¶ˆì•ˆí•œ ë§ˆìŒì„ ëŠë¼ëŠ” ê²ƒë„ ê´œì°®ì•„ìš”. ë¬´ì–¸ê°€ë¥¼ ì¤‘ìš”í•˜ê²Œ ìƒê°í•˜ê¸° ë•Œë¬¸ì— ë¶ˆì•ˆí•œ ê±°ì˜ˆìš”. ê·¸ ë§ˆìŒì„ ëŠë¼ëŠ” ê²ƒë„ ë‹¹ì‹ ì˜ ê¶Œë¦¬ì˜ˆìš”.",
                            selfworth: "ìê²©ì— ëŒ€í•´ ê³ ë¯¼í•˜ëŠ” ê²ƒ ìì²´ê°€ ë‹¹ì‹ ì´ ì„±ì°°í•˜ëŠ” ì‚¬ëŒì´ë¼ëŠ” ì¦ê±°ì˜ˆìš”. ê·¸ ê³ ë¯¼ì¡°ì°¨ë„ ì†Œì¤‘í•œ ê°ì •ì´ì—ìš”. ë‹¹ì‹ ì€ ëª¨ë“  ê°ì •ì„ ëŠë‚„ ìê²©ì´ ìˆëŠ” ì¡´ì¬ì˜ˆìš”.",
                            general: "ì–´ë–¤ ê°ì •ì´ë“  ë‹¹ì‹ ì´ ëŠë¼ëŠ” ìˆœê°„ë¶€í„° ê·¸ê²ƒì€ ì¡´ì¬í•  ìê²©ì„ ì–»ì–´ìš”. ê°ì •ì—ëŠ” ë“±ê¸‰ì´ ì—†ì–´ìš”. ë‹¹ì‹ ì˜ ë§ˆìŒì´ ë°˜ì‘í•˜ëŠ” ëª¨ë“  ê²ƒë“¤ì´ ì†Œì¤‘í•´ìš”."
                        },
                        en: {
                            shame: "Shameful feelings are also part of you. Shame can be a signal that you're growing. Feeling that emotion itself is courage. You fully deserve to have that feeling.",
                            guilt: "Feeling guilty is proof that you're a good person. Accepting your imperfect self is also your right to feel emotions. Even guilt comes from your sincere heart.",
                            sadness: "You think you don't deserve to feel sad? Sadness is proof that you loved. You're sad because you cherished something. You fully deserve to feel that sadness.",
                            anger: "Did you think you shouldn't get angry? Anger is also a signal that tells you your boundaries. It's an inner compass telling you what's not right. You deserve to acknowledge that feeling.",
                            fear: "Feeling fear is also natural. You're afraid because you want to protect something. Just feeling that fear makes you a brave person.",
                            loneliness: "Did you think you shouldn't feel lonely? Loneliness is an expression of wanting connection. Feeling alone is also your precious emotion. You deserve to feel it.",
                            inadequacy: "Feeling inadequate is also your emotion. It comes from wanting to be better. Having that feeling itself is proof of someone who's growing.",
                            jealousy: "Jealous feelings are also human emotions. It's a signal that you want something. You don't need to be ashamed of that feeling. You deserve to acknowledge and accept it.",
                            anxiety: "It's okay to feel anxious. You're anxious because you think something is important. Feeling that way is also your right.",
                            selfworth: "Worrying about worthiness itself is proof that you're a reflective person. Even that worry is a precious emotion. You're someone who deserves to feel all emotions.",
                            general: "Whatever emotion you feel, from the moment you feel it, it earns the right to exist. Emotions don't have grades. Everything your heart reacts to is precious."
                        },
                        pt: {
                            shame: "Sentimentos vergonhosos tambÃ©m sÃ£o parte de vocÃª. A vergonha pode ser um sinal de que vocÃª estÃ¡ crescendo. Sentir essa emoÃ§Ã£o em si Ã© coragem. VocÃª merece totalmente ter esse sentimento.",
                            guilt: "Sentir culpa Ã© prova de que vocÃª Ã© uma boa pessoa. Aceitar seu eu imperfeito tambÃ©m Ã© seu direito de sentir emoÃ§Ãµes. AtÃ© a culpa vem do seu coraÃ§Ã£o sincero.",
                            sadness: "VocÃª acha que nÃ£o merece se sentir triste? Tristeza Ã© prova de que vocÃª amou. VocÃª estÃ¡ triste porque valorizou algo. VocÃª merece totalmente sentir essa tristeza.",
                            anger: "VocÃª pensou que nÃ£o deveria ficar com raiva? Raiva tambÃ©m Ã© um sinal que te mostra seus limites. Ã‰ uma bÃºssola interna dizendo o que nÃ£o estÃ¡ certo. VocÃª merece reconhecer esse sentimento.",
                            fear: "Sentir medo tambÃ©m Ã© natural. VocÃª tem medo porque quer proteger algo. Apenas sentir esse medo faz de vocÃª uma pessoa corajosa.",
                            loneliness: "VocÃª pensou que nÃ£o deveria se sentir solitÃ¡rio? SolidÃ£o Ã© uma expressÃ£o de querer conexÃ£o. Sentir-se sozinho tambÃ©m Ã© sua emoÃ§Ã£o preciosa. VocÃª merece senti-la.",
                            inadequacy: "Sentir-se inadequado tambÃ©m Ã© sua emoÃ§Ã£o. Vem de querer ser melhor. Ter esse sentimento em si Ã© prova de alguÃ©m que estÃ¡ crescendo.",
                            jealousy: "Sentimentos de ciÃºme tambÃ©m sÃ£o emoÃ§Ãµes humanas. Ã‰ um sinal de que vocÃª quer algo. VocÃª nÃ£o precisa se envergonhar desse sentimento. VocÃª merece reconhecÃª-lo e aceitÃ¡-lo.",
                            anxiety: "EstÃ¡ bem sentir ansiedade. VocÃª estÃ¡ ansioso porque pensa que algo Ã© importante. Sentir assim tambÃ©m Ã© seu direito.",
                            selfworth: "Preocupar-se com merecimento em si Ã© prova de que vocÃª Ã© uma pessoa reflexiva. AtÃ© essa preocupaÃ§Ã£o Ã© uma emoÃ§Ã£o preciosa. VocÃª Ã© alguÃ©m que merece sentir todas as emoÃ§Ãµes.",
                            general: "Qualquer emoÃ§Ã£o que vocÃª sinta, desde o momento que a sente, ela ganha o direito de existir. EmoÃ§Ãµes nÃ£o tÃªm notas. Tudo a que seu coraÃ§Ã£o reage Ã© precioso."
                        }
                    };
                    
                    return responses[lang][emotion] || responses[lang]['general'];
                }
            },
            {
                name: "Validation", emoji: "ğŸ’",
                getResponse: (userInput, lang) => {
                    const emotion = analyzeEmotion(userInput);
                    
                    const responses = {
                        ko: {
                            shame: "ë‹¹ì‹ ì´ ë¶€ë„ëŸ¬ì›Œí–ˆë˜ ê·¸ ìˆœê°„ë“¤ì´ ì‚¬ì‹¤ì€ ê°€ì¥ ì¸ê°„ì ì¸ ìˆœê°„ë“¤ì´ì—ˆì–´ìš”. ì™„ë²½í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì— ì•„ë¦„ë‹¤ìš´ ê±°ì˜ˆìš”. ê·¸ ë¶€ë„ëŸ¬ì›€ì¡°ì°¨ ë‹¹ì‹ ì˜ ì†”ì§í•¨ì´ì—ˆì–´ìš”.",
                            guilt: "ì£„ì±…ê°ì„ ëŠë‚€ë‹¤ëŠ” ê±´ ë‹¹ì‹ ì´ ë‹¤ë¥¸ ì‚¬ëŒì„ ë°°ë ¤í•˜ëŠ” ë§ˆìŒì´ ìˆë‹¤ëŠ” ëœ»ì´ì—ìš”. ê·¸ ë§ˆìŒ ìì²´ê°€ ì†Œì¤‘í•´ìš”. ì™„ë²½í•˜ì§€ ì•Šì•„ë„ ê´œì°®ë‹¤ëŠ” ê±¸ ìŠ¤ìŠ¤ë¡œì—ê²Œ ë§í•´ì£¼ì„¸ìš”.",
                            sadness: "ìŠ¬í¼í•  ìê²©ì´ ì—†ë‹¤ê³  ëŠê¼ˆë˜ ìˆœê°„ë“¤, ì‚¬ì‹¤ì€ ë‹¹ì‹ ì´ ê°€ì¥ ê¹Šì´ ì‚¬ë‘í–ˆë˜ ìˆœê°„ë“¤ì´ì—ˆì„ ê±°ì˜ˆìš”. ê·¸ ìŠ¬í””ì€ ë‹¹ì‹ ì˜ ì‚¬ë‘ì˜ ê¹Šì´ë¥¼ ë³´ì—¬ì£¼ëŠ” ê±°ì˜ˆìš”.",
                            anger: "í™”ë¥¼ ë‚´ë©´ ì•ˆ ëœë‹¤ê³  ë°°ì› ë‚˜ìš”? í•˜ì§€ë§Œ ë¶„ë…¸ëŠ” ë‹¹ì‹ ì˜ ê°€ì¹˜ê´€ì„ ì§€í‚¤ë ¤ëŠ” ë§ˆìŒì—ì„œ ë‚˜ì™€ìš”. ê·¸ ë¶„ë…¸ë¥¼ ì¸ì •í•˜ëŠ” ê²ƒë„ ìì‹ ì„ ì‚¬ë‘í•˜ëŠ” ë°©ë²•ì´ì—ìš”.",
                            fear: "ë‘ë ¤ì›€ì„ ëŠë¼ëŠ” ê±´ ë‹¹ì‹ ì´ ë¬´ì–¸ê°€ë¥¼ ì†Œì¤‘íˆ ì—¬ê¸°ê³  ìˆë‹¤ëŠ” ì¦ê±°ì˜ˆìš”. ê·¸ ë‘ë ¤ì›€ì„ ë¶€ë„ëŸ¬ì›Œí•˜ì§€ ë§ˆì„¸ìš”. ê·¸ê²ƒë„ ë‹¹ì‹ ì˜ ì§„ì‹¤í•œ ë§ˆìŒì´ì—ìš”.",
                            loneliness: "ì™¸ë¡œì›€ì„ ëŠë¼ëŠ” ê±´ ë‹¹ì‹ ì´ ì—°ê²°ì„ ì›í•˜ëŠ” ë”°ëœ»í•œ ë§ˆìŒì´ ìˆë‹¤ëŠ” ëœ»ì´ì—ìš”. í˜¼ì ìˆì–´ë„ ê´œì°®ê³ , ì™¸ë¡œì›Œí•´ë„ ê´œì°®ì•„ìš”. ê·¸ ëª¨ë“  ê°ì •ì´ ë‹¹ì‹ ì´ì—ìš”.",
                            inadequacy: "ë¶€ì¡±í•˜ë‹¤ê³  ëŠë¼ëŠ” ë§ˆìŒë„ ë‹¹ì‹ ì˜ ì„±ì¥ ìš•êµ¬ì—ì„œ ë‚˜ì˜¤ëŠ” ê±°ì˜ˆìš”. ë” ë‚˜ì•„ì§€ê³  ì‹¶ì–´í•˜ëŠ” ë§ˆìŒ, ê·¸ ìì²´ê°€ ì´ë¯¸ ì¶©ë¶„íˆ ì•„ë¦„ë‹¤ì›Œìš”.",
                            jealousy: "ì§ˆíˆ¬ë„ ì¸ê°„ì˜ ìì—°ìŠ¤ëŸ¬ìš´ ê°ì •ì´ì—ìš”. ë¬´ì–¸ê°€ë¥¼ ì›í•˜ê³  ìˆë‹¤ëŠ” ì‹ í˜¸ì£ . ê·¸ ë§ˆìŒì„ ìˆ¨ê¸°ì§€ ë§ê³  ì¸ì •í•´ë³´ì„¸ìš”. ê·¸ê²ƒë„ ë‹¹ì‹ ì˜ ì§„ì‹¤ì´ì—ìš”.",
                            anxiety: "ë¶ˆì•ˆí•´í•˜ëŠ” ê²ƒë„ ë‹¹ì‹ ì´ ë¬´ì–¸ê°€ë¥¼ ì¤‘ìš”í•˜ê²Œ ìƒê°í•˜ê³  ìˆë‹¤ëŠ” ëœ»ì´ì—ìš”. ê·¸ ë§ˆìŒì„ ì–µëˆ„ë¥´ì§€ ë§ê³  ë“¤ì–´ë³´ì„¸ìš”. ë‹¹ì‹ ì˜ ì†Œì¤‘í•œ ì‹ í˜¸ì˜ˆìš”.",
                            selfworth: "ìê²©ì— ëŒ€í•´ ê³ ë¯¼í•˜ëŠ” ê²ƒ ìì²´ê°€ ë‹¹ì‹ ì˜ ì„ ëŸ‰í•¨ì„ ë³´ì—¬ì£¼ëŠ” ê±°ì˜ˆìš”. ê·¸ëŸ° ê³ ë¯¼ì„ í•˜ëŠ” ì‚¬ëŒì´ì•¼ë§ë¡œ ê°ì •ì„ ëŠë‚„ ìê²©ì´ ì¶©ë¶„í•œ ì‚¬ëŒì´ì—ìš”.",
                            general: "ë‹¹ì‹ ì˜ ëª¨ë“  ê°ì •ì€ íƒ€ë‹¹í•´ìš”. í¬ë“  ì‘ë“ , ë³µì¡í•˜ë“  ë‹¨ìˆœí•˜ë“ , ê·¸ ëª¨ë“  ê°ì •ë“¤ì´ ë‹¹ì‹ ì„ ì˜¨ì „í•œ ì¸ê°„ìœ¼ë¡œ ë§Œë“¤ì–´ì£¼ëŠ” ê±°ì˜ˆìš”."
                        },
                        en: {
                            shame: "Those moments you felt ashamed were actually your most human moments. You're beautiful because you're not perfect. Even that shame was your honesty.",
                            guilt: "Feeling guilty means you have a heart that considers others. That heart itself is precious. Tell yourself it's okay not to be perfect.",
                            sadness: "Those moments you felt you had no right to be sad were probably when you loved most deeply. That sadness shows the depth of your love.",
                            anger: "Were you taught not to get angry? But anger comes from wanting to protect your values. Acknowledging that anger is also a way to love yourself.",
                            fear: "Feeling fear is proof that you cherish something. Don't be ashamed of that fear. That's also your true heart.",
                            loneliness: "Feeling lonely means you have a warm heart that wants connection. It's okay to be alone, it's okay to feel lonely. All those emotions are you.",
                            inadequacy: "Feeling inadequate also comes from your desire to grow. That desire to be better is already beautiful enough.",
                            jealousy: "Jealousy is also a natural human emotion. It's a signal that you want something. Don't hide that feeling, acknowledge it. That's also your truth.",
                            anxiety: "Being anxious also means you think something is important. Don't suppress that feeling, listen to it. It's your precious signal.",
                            selfworth: "Worrying about worthiness itself shows your goodness. Someone who has such worries is exactly the person who deserves to feel emotions.",
                            general: "All your emotions are valid. Big or small, complex or simple, all those emotions make you a complete human being."
                        },
                        pt: {
                            shame: "Aqueles momentos em que vocÃª se sentiu envergonhado eram na verdade seus momentos mais humanos. VocÃª Ã© bonito porque nÃ£o Ã© perfeito. AtÃ© essa vergonha era sua honestidade.",
                            guilt: "Sentir culpa significa que vocÃª tem um coraÃ§Ã£o que considera os outros. Esse coraÃ§Ã£o em si Ã© precioso. Diga a si mesmo que estÃ¡ bem nÃ£o ser perfeito.",
                            sadness: "Aqueles momentos em que vocÃª sentiu que nÃ£o tinha direito de estar triste provavelmente foram quando vocÃª amou mais profundamente. Essa tristeza mostra a profundidade do seu amor.",
                            anger: "VocÃª foi ensinado a nÃ£o ficar com raiva? Mas a raiva vem de querer proteger seus valores. Reconhecer essa raiva tambÃ©m Ã© uma forma de se amar.",
                            fear: "Sentir medo Ã© prova de que vocÃª valoriza algo. NÃ£o se envergonhe desse medo. Esse tambÃ©m Ã© seu coraÃ§Ã£o verdadeiro.",
                            loneliness: "Sentir solidÃ£o significa que vocÃª tem um coraÃ§Ã£o caloroso que quer conexÃ£o. EstÃ¡ bem estar sozinho, estÃ¡ bem se sentir solitÃ¡rio. Todas essas emoÃ§Ãµes sÃ£o vocÃª.",
                            inadequacy: "Sentir-se inadequado tambÃ©m vem do seu desejo de crescer. Esse desejo de ser melhor jÃ¡ Ã© bonito o suficiente.",
                            jealousy: "CiÃºme tambÃ©m Ã© uma emoÃ§Ã£o humana natural. Ã‰ um sinal de que vocÃª quer algo. NÃ£o esconda esse sentimento, reconheÃ§a-o. Essa tambÃ©m Ã© sua verdade.",
                            anxiety: "Estar ansioso tambÃ©m significa que vocÃª pensa que algo Ã© importante. NÃ£o suprima esse sentimento, ouÃ§a-o. Ã‰ seu sinal precioso.",
                            selfworth: "Preocupar-se com merecimento em si mostra sua bondade. AlguÃ©m que tem tais preocupaÃ§Ãµes Ã© exatamente a pessoa que merece sentir emoÃ§Ãµes.",
                            general: "Todas as suas emoÃ§Ãµes sÃ£o vÃ¡lidas. Grandes ou pequenas, complexas ou simples, todas essas emoÃ§Ãµes fazem de vocÃª um ser humano completo."
                        }
                    };
                    
                    return responses[lang][emotion] || responses[lang]['general'];
                }
            },
            {
                name: "Freedom", emoji: "ğŸ¦‹",
                getResponse: (userInput, lang) => {
                    const emotion = analyzeEmotion(userInput);
                    
                    const responses = {
                        ko: {
                            shame: "ë¶€ë„ëŸ¬ì›€ì—ì„œ ë²—ì–´ë‚˜ëŠ” ì²« ë²ˆì§¸ ë‹¨ê³„ëŠ” ê·¸ ê°ì •ì„ ì¸ì •í•˜ëŠ” ê±°ì˜ˆìš”. ë” ì´ìƒ ìˆ¨ê¸¸ í•„ìš” ì—†ì–´ìš”. ë¶€ë„ëŸ¬ìš´ ë‹¹ì‹ ë„ ì‚¬ë‘ë°›ì„ ìê²©ì´ ìˆëŠ” ì˜¨ì „í•œ ì‚¬ëŒì´ì—ìš”.",
                            guilt: "ì£„ì±…ê°ì˜ ë¬´ê²Œë¥¼ ë‚´ë ¤ë†“ìœ¼ì„¸ìš”. ë‹¹ì‹ ì€ ì´ë¯¸ ì¶©ë¶„íˆ ìì‹ ì„ ë²Œí–ˆì–´ìš”. ì´ì œëŠ” ê·¸ ê²½í—˜ì—ì„œ ë°°ìš°ê³  ì•ìœ¼ë¡œ ë‚˜ì•„ê°ˆ ì‹œê°„ì´ì—ìš”. ìš©ì„œë°›ì„ ìê²©ì´ ìˆì–´ìš”.",
                            sadness: "ìŠ¬í””ì„ ì–µëˆ„ë¥´ì§€ ë§ˆì„¸ìš”. ëˆˆë¬¼ì´ ë‚˜ì˜¤ê³  ì‹¶ìœ¼ë©´ í˜ë¦¬ì„¸ìš”. ê·¸ ìŠ¬í””ì„ í†µê³¼í•´ì•¼ ì¹˜ìœ ê°€ ì‹œì‘ë¼ìš”. ìŠ¬í¼í•  ììœ ë¥¼ ìŠ¤ìŠ¤ë¡œì—ê²Œ ì£¼ì„¸ìš”.",
                            anger: "ë¶„ë…¸ë¥¼ ëŠë¼ëŠ” ê²ƒë„ ë‹¹ì‹ ì˜ ììœ ì˜ˆìš”. ê·¸ ê°ì •ì„ ë¶€ì¸í•˜ì§€ ë§ê³  ì¸ì •í•˜ì„¸ìš”. ë¶„ë…¸ëŠ” ë•Œë¡œ ë³€í™”ì˜ ì‹œì‘ì ì´ ë˜ê¸°ë„ í•´ìš”. í™”ë‚¼ ê¶Œë¦¬ê°€ ìˆì–´ìš”.",
                            fear: "ë‘ë ¤ì›Œí•´ë„ ê´œì°®ì•„ìš”. ìš©ê¸°ë€ ë‘ë ¤ì›€ì´ ì—†ëŠ” ê²Œ ì•„ë‹ˆë¼ ë‘ë ¤ì›€ê³¼ í•¨ê»˜ ë‚˜ì•„ê°€ëŠ” ê±°ì˜ˆìš”. ë‘ë ¤ì›€ì„ ëŠë¼ë©´ì„œë„ ì‚´ì•„ê°€ëŠ” ë‹¹ì‹ ì´ ìš©ê°í•œ ê±°ì˜ˆìš”.",
                            loneliness: "ì™¸ë¡œì›€ì„ ëŠë¼ëŠ” ê²ƒë„ ìì—°ìŠ¤ëŸ¬ìš´ ê±°ì˜ˆìš”. í˜¼ì ìˆëŠ” ì‹œê°„ì„ ì£„ì±…ê° ì—†ì´ ë°›ì•„ë“¤ì´ì„¸ìš”. ë•Œë¡œëŠ” í˜¼ì ìˆëŠ” ì‹œê°„ì´ ìì‹ ì„ ë°œê²¬í•˜ëŠ” ì†Œì¤‘í•œ ì‹œê°„ì´ì—ìš”.",
                            inadequacy: "ì™„ë²½í•˜ì§€ ì•Šì•„ë„ ë¼ìš”. ë¶€ì¡±í•œ ëª¨ìŠµì˜ ë‹¹ì‹ ë„ ì¶©ë¶„íˆ ê°€ì¹˜ ìˆëŠ” ì‚¬ëŒì´ì—ìš”. ê·¸ ë¶€ì¡±í•¨ì¡°ì°¨ ë‹¹ì‹ ì˜ ë§¤ë ¥ì´ ë  ìˆ˜ ìˆì–´ìš”. ìˆëŠ” ê·¸ëŒ€ë¡œì˜ ìì‹ ì„ ë°›ì•„ë“¤ì´ì„¸ìš”.",
                            jealousy: "ì§ˆíˆ¬í•˜ëŠ” ë§ˆìŒì„ ìˆ¨ê¸°ì§€ ë§ˆì„¸ìš”. ê·¸ ê°ì •ë„ ë‹¹ì‹ ì˜ ì¼ë¶€ì˜ˆìš”. ì§ˆíˆ¬ë¥¼ í†µí•´ ìì‹ ì´ ì§„ì§œ ì›í•˜ëŠ” ê²Œ ë¬´ì—‡ì¸ì§€ ì•Œ ìˆ˜ ìˆì–´ìš”. ê·¸ ë§ˆìŒì„ ì¸ì •í•˜ì„¸ìš”.",
                            anxiety: "ë¶ˆì•ˆí•´í•˜ëŠ” ê²ƒë„ ê´œì°®ì•„ìš”. ì™„ë²½í•˜ê²Œ ì¤€ë¹„ë˜ì§€ ì•Šì•„ë„ ì‚´ì•„ê°ˆ ìˆ˜ ìˆì–´ìš”. ë¶ˆì•ˆí•¨ê³¼ í•¨ê»˜ í•˜ë£¨í•˜ë£¨ë¥¼ ì‚´ì•„ê°€ëŠ” ê²ƒë„ í•˜ë‚˜ì˜ ìš©ê¸°ì˜ˆìš”.",
                            selfworth: "ìŠ¤ìŠ¤ë¡œì—ê²Œ ê°ì •ì„ ëŠë‚„ í—ˆë½ì„ ì£¼ì„¸ìš”. ë‹¤ë¥¸ ëˆ„êµ¬ì˜ ìŠ¹ì¸ë„ í•„ìš” ì—†ì–´ìš”. ë‹¹ì‹ ì€ íƒœì–´ë‚  ë•Œë¶€í„° ëª¨ë“  ê°ì •ì„ ëŠë‚„ ìê²©ì„ ê°€ì§€ê³  ìˆì–´ìš”.",
                            general: "ê°ì •ì„ ëŠë¼ëŠ” ë° ìê²©ì¦ì´ í•„ìš”í•˜ì§€ ì•Šì•„ìš”. ë‹¹ì‹ ì´ ì‚´ì•„ ìˆë‹¤ëŠ” ê²ƒ ìì²´ê°€ ëª¨ë“  ê°ì •ì„ ëŠë‚„ ìê²©ì„ ì¦ëª…í•´ìš”. ììœ ë¡­ê²Œ ëŠë¼ì„¸ìš”."
                        },
                        en: {
                            shame: "The first step to escaping shame is acknowledging that feeling. You don't need to hide anymore. The ashamed you is also a complete person who deserves love.",
                            guilt: "Put down the weight of guilt. You've already punished yourself enough. Now it's time to learn from that experience and move forward. You deserve forgiveness.",
                            sadness: "Don't suppress sadness. If tears want to come, let them flow. Healing begins by going through that sadness. Give yourself the freedom to be sad.",
                            anger: "Feeling anger is also your freedom. Don't deny that emotion, acknowledge it. Anger sometimes becomes the starting point of change. You have the right to be angry.",
                            fear: "It's okay to be afraid. Courage isn't the absence of fear, but moving forward with fear. You're brave for living while feeling fear.",
                            loneliness: "Feeling lonely is also natural. Accept time alone without guilt. Sometimes solitary time is precious time to discover yourself.",
                            inadequacy: "You don't have to be perfect. The inadequate you is also a person of sufficient worth. Even that inadequacy can become your charm. Accept yourself as you are.",
                            jealousy: "Don't hide jealous feelings. That emotion is also part of you. Through jealousy you can know what you really want. Acknowledge that feeling.",
                            anxiety: "It's okay to be anxious. You can live without being perfectly prepared. Living day by day with anxiety is also a form of courage.",
                            selfworth: "Give yourself permission to feel emotions. You don't need anyone else's approval. You've had the right to feel all emotions since you were born.",
                            general: "You don't need a license to feel emotions. The very fact that you're alive proves your right to feel all emotions. Feel freely."
                        },
                        pt: {
                            shame: "O primeiro passo para escapar da vergonha Ã© reconhecer esse sentimento. VocÃª nÃ£o precisa mais se esconder. O vocÃª envergonhado tambÃ©m Ã© uma pessoa completa que merece amor.",
                            guilt: "Deixe o peso da culpa. VocÃª jÃ¡ se puniu o suficiente. Agora Ã© hora de aprender com essa experiÃªncia e seguir em frente. VocÃª merece perdÃ£o.",
                            sadness: "NÃ£o suprima a tristeza. Se as lÃ¡grimas quiserem vir, deixe-as fluir. A cura comeÃ§a passando por essa tristeza. DÃª a si mesmo a liberdade de estar triste.",
                            anger: "Sentir raiva tambÃ©m Ã© sua liberdade. NÃ£o negue essa emoÃ§Ã£o, reconheÃ§a-a. A raiva Ã s vezes se torna o ponto de partida da mudanÃ§a. VocÃª tem o direito de ficar com raiva.",
                            fear: "EstÃ¡ bem ter medo. Coragem nÃ£o Ã© a ausÃªncia do medo, mas seguir em frente com medo. VocÃª Ã© corajoso por viver sentindo medo.",
                            loneliness: "Sentir solidÃ£o tambÃ©m Ã© natural. Aceite o tempo sozinho sem culpa. Ã€s vezes o tempo solitÃ¡rio Ã© tempo precioso para se descobrir.",
                            inadequacy: "VocÃª nÃ£o precisa ser perfeito. O vocÃª inadequado tambÃ©m Ã© uma pessoa de valor suficiente. AtÃ© essa inadequaÃ§Ã£o pode se tornar seu charme. Aceite-se como vocÃª Ã©.",
                            jealousy: "NÃ£o esconda sentimentos de ciÃºme. Essa emoÃ§Ã£o tambÃ©m Ã© parte de vocÃª. AtravÃ©s do ciÃºme vocÃª pode saber o que realmente quer. ReconheÃ§a esse sentimento.",
                            anxiety: "EstÃ¡ bem estar ansioso. VocÃª pode viver sem estar perfeitamente preparado. Viver dia a dia com ansiedade tambÃ©m Ã© uma forma de coragem.",
                            selfworth: "DÃª a si mesmo permissÃ£o para sentir emoÃ§Ãµes. VocÃª nÃ£o precisa da aprovaÃ§Ã£o de mais ninguÃ©m. VocÃª teve o direito de sentir todas as emoÃ§Ãµes desde que nasceu.",
                            general: "VocÃª nÃ£o precisa de uma licenÃ§a para sentir emoÃ§Ãµes. O prÃ³prio fato de estar vivo prova seu direito de sentir todas as emoÃ§Ãµes. Sinta livremente."
                        }
                    };
                    
                    return responses[lang][emotion] || responses[lang]['general'];
                }
            }
        ];
        
        let currentLanguage = 'en'; // ê¸°ë³¸ ì–¸ì–´ë¥¼ ì˜ì–´ë¡œ ì„¤ì •
        let currentUser = null;
        let userResponse = '';
        let journeyStarted = false;
        let currentTypingElement = null;
        let typingIntervals = [];
        
        // ============ ì—¬ì • ì´ˆê¸°í™” í•¨ìˆ˜ ============
        
        function resetJourney() {
            console.log('=== ì—¬ì • ì´ˆê¸°í™” ì‹œì‘ ===');
            
            // 1. ëª¨ë“  íƒ€ì´í•‘ íš¨ê³¼ ì™„ì „ ì •ë¦¬
            clearAllTypingEffects();
            
            // ì¶”ê°€ ì•ˆì „ì¥ì¹˜ - ëª¨ë“  timer ì •ë¦¬
            for (let i = 1; i < 99999; i++) window.clearInterval(i);
            for (let i = 1; i < 99999; i++) window.clearTimeout(i);
            
            // 2. ëª¨ë“  ì½˜í…ì¸  ì„¹ì…˜ ì™„ì „ ì´ˆê¸°í™”
            const sectionsToReset = [
                'portalIntroSection',
                'characterResponsesSection', 
                'lightMessageSection',
                'portalQuestionSection',
                'userInputSection',
                'userReactionsSection',
                'continueSection'
            ];
            
            sectionsToReset.forEach(sectionId => {
                const section = document.getElementById(sectionId);
                if (section) {
                    section.classList.remove('show');
                    section.style.opacity = '0';
                    
                    if (sectionId === 'characterResponsesSection' || 
                        sectionId === 'userInputSection' || 
                        sectionId === 'userReactionsSection') {
                        section.innerHTML = '';
                    } else {
                        const textElements = section.querySelectorAll('.portal-intro, .light-message, .portal-question, .continue-text');
                        textElements.forEach(el => {
                            el.innerHTML = '';
                            el.textContent = '';
                        });
                    }
                }
            });
            
            // 3. íŠ¹ì • ìš”ì†Œë“¤ ê°œë³„ ì´ˆê¸°í™”
            const portalIntro = document.getElementById('portalIntro');
            const lightMessage = document.getElementById('lightMessage');
            const portalQuestion = document.getElementById('portalQuestion');
            const continueText = document.getElementById('continueText');
            
            if (portalIntro) portalIntro.innerHTML = '';
            if (lightMessage) lightMessage.innerHTML = '';
            if (portalQuestion) portalQuestion.innerHTML = '';
            if (continueText) continueText.innerHTML = '';
            
            // 4. í…ìŠ¤íŠ¸ì˜ì—­ ì™„ì „ ì´ˆê¸°í™”
            const userTextarea = document.getElementById('userTextarea');
            if (userTextarea) {
                userTextarea.disabled = false;
                userTextarea.value = '';
                userTextarea.style.height = 'auto';
                userTextarea.placeholder = translations[currentLanguage].inputPlaceholder;
            }
            
            // 5. ìŠ¤í¬ë¡¤ ìœ„ì¹˜ ì´ˆê¸°í™”
            const mainContent = document.getElementById('mainContent');
            if (mainContent) {
                mainContent.scrollTop = 0;
            }
            
            // 6. ìƒíƒœ ë³€ìˆ˜ ì™„ì „ ì´ˆê¸°í™”
            userResponse = '';
            currentTypingElement = null;
            
            console.log('=== ì—¬ì • ì´ˆê¸°í™” ì™„ë£Œ ===');
        }
        
        // ============ ê°œì„ ëœ ì–¸ì–´ ë³€ê²½ í•¨ìˆ˜ ============
        
        function changeLanguage(lang) {
            if (!translations[lang]) {
                console.error('ì§€ì›í•˜ì§€ ì•ŠëŠ” ì–¸ì–´:', lang);
                return;
            }
            
            if (currentLanguage === lang) {
                return;
            }
            
            if (journeyStarted) {
                const confirmMessage = translations[currentLanguage].languageChangeConfirm;
                const shouldRestart = confirm(confirmMessage);
                
                if (!shouldRestart) {
                    return;
                }
            }
            
            const previousLanguage = currentLanguage;
            currentLanguage = lang;
            
            console.log(`ì–¸ì–´ ë³€ê²½: ${previousLanguage} â†’ ${currentLanguage}`);
            
            if (journeyStarted) {
                resetJourney();
            }
            
            updateLanguageButtons(lang);
            updateStaticTranslations(lang);
            
            if (journeyStarted) {
                setTimeout(() => {
                    console.log(`ìƒˆë¡œìš´ ì–¸ì–´(${currentLanguage})ë¡œ ì—¬ì • ì¬ì‹œì‘`);
                    startPortalSequence();
                }, 1000);
            }
        }
        
        // ============ UI ì—…ë°ì´íŠ¸ í•¨ìˆ˜ë“¤ ============
        
        function updateLanguageButtons(lang) {
            document.querySelectorAll('.lang-btn').forEach(btn => {
                btn.classList.remove('active');
                if (btn.dataset.lang === lang) {
                    btn.classList.add('active');
                }
            });
        }
        
        function updateStaticTranslations(lang) {
            // ê°œë³„ ìš”ì†Œ ì—…ë°ì´íŠ¸
            const elements = [
                'logoSubtitle',
                'portalMainTitle', 
                'portalSubtitle',
                'lightTitle',
                'continueYesBtn',
                'continueNoBtn'
            ];
            
            elements.forEach(elementId => {
                const element = document.getElementById(elementId);
                if (element && translations[lang]) {
                    const key = elementId.replace('Btn', 'Button').replace('Subtitle', 'Subtitle');
                    let translationKey = key;
                    
                    const keyMapping = {
                        'logoSubtitle': 'logoSubtitle',
                        'portalMainTitle': 'portalMainTitle',
                        'portalSubtitle': 'portalSubtitle',
                        'lightTitle': 'lightTitle',
                        'continueYesButton': 'continueYes',
                        'continueNoButton': 'continueNo'
                    };
                    
                    translationKey = keyMapping[key] || key;
                    
                    if (translations[lang][translationKey]) {
                        element.textContent = translations[lang][translationKey];
                    }
                }
            });
            
            // placeholder ì—…ë°ì´íŠ¸
            const textarea = document.getElementById('userTextarea');
            if (textarea) textarea.placeholder = translations[lang].inputPlaceholder;
        }
        
        // ============ ê°œì„ ëœ íƒ€ì´í•‘ íš¨ê³¼ + ìŠ¤í¬ë¡¤ ì¶”ì  ì‹œìŠ¤í…œ ============
        
        function typewriterEffect(element, text, speed = 80) {
            return new Promise((resolve) => {
                if (currentTypingElement) {
                    currentTypingElement.classList.remove('typing-cursor');
                }
                
                let i = 0;
                element.innerHTML = '';
                element.classList.add('typing-cursor');
                currentTypingElement = element;
                
                const typingInterval = setInterval(() => {
                    if (!document.contains(element)) {
                        clearInterval(typingInterval);
                        resolve();
                        return;
                    }
                    
                    element.innerHTML += text.charAt(i);
                    i++;
                    
                    if (i % 10 === 0) {
                        scrollToFollowTyping(element);
                    }
                    
                    if (i === text.length) {
                        clearInterval(typingInterval);
                        element.classList.remove('typing-cursor');
                        currentTypingElement = null;
                        
                        setTimeout(() => {
                            if (document.contains(element)) {
                                scrollToFollowTyping(element);
                            }
                        }, 200);
                        
                        resolve();
                    }
                }, speed);
                
                typingIntervals.push(typingInterval);
            });
        }
        
        function clearAllTypingEffects() {
            typingIntervals.forEach(interval => clearInterval(interval));
            typingIntervals = [];
            
            if (currentTypingElement) {
                currentTypingElement.classList.remove('typing-cursor');
                currentTypingElement = null;
            }
        }
        
        // ============ ìŠ¤ë§ˆíŠ¸ ìŠ¤í¬ë¡¤ ì‹œìŠ¤í…œ ============
        
        function scrollToFollowTyping(element) {
            const mainContent = document.getElementById('mainContent');
            const elementRect = element.getBoundingClientRect();
            const containerRect = mainContent.getBoundingClientRect();
            
            if (elementRect.bottom > containerRect.bottom - 150) {
                const scrollTop = mainContent.scrollTop;
                const elementOffsetTop = element.offsetTop;
                const targetScroll = elementOffsetTop - (containerRect.height / 2);
                
                mainContent.scrollTo({
                    top: Math.max(0, targetScroll),
                    behavior: 'smooth'
                });
            }
        }
        
        function scrollToElement(element) {
            const mainContent = document.getElementById('mainContent');
            const elementOffsetTop = element.offsetTop;
            const containerHeight = mainContent.clientHeight;
            const targetScroll = elementOffsetTop - (containerHeight / 3);
            
            mainContent.scrollTo({
                top: Math.max(0, targetScroll),
                behavior: 'smooth'
            });
        }
        
        // ============ ì–¸ì–´ ë²„íŠ¼ ì´ë²¤íŠ¸ ì„¤ì • ============
        
        function setupLanguageButtons() {
            const langButtons = document.querySelectorAll('.lang-btn');
            
            langButtons.forEach(btn => {
                btn.addEventListener('click', function(e) {
                    e.preventDefault();
                    const newLang = this.dataset.lang;
                    changeLanguage(newLang);
                });
            });
        }
        
        // ============ ë©”ì¸ ì—¬ì • ì‹œìŠ¤í…œ ============
        
        function initializeTemarix() {
            console.log('=== Temarix Portal 06 ì´ˆê¸°í™” ì‹œì‘ ===');
            
            setupLanguageButtons();
            setupTextareaAutoResize();
            setupInputEvents();
            
            journeyStarted = true;
            
            setTimeout(() => {
                startPortalSequence();
            }, 1000);
        }
        
        function startPortalSequence() {
            setTimeout(() => {
                showIntro();
            }, 1000);
        }
        
        // ============ ì—¬ì • ë‹¨ê³„ë“¤ ============
        
        async function showIntro() {
            const introSection = document.getElementById('portalIntroSection');
            const introElement = document.getElementById('portalIntro');
            
            introSection.classList.add('show');
            
            const introText = translations[currentLanguage].portalIntro;
            await typewriterEffect(introElement, introText, 60);
            
            setTimeout(() => {
                showCharacterResponses();
            }, 2000);
        }
        
        async function showCharacterResponses() {
            const responseSection = document.getElementById('characterResponsesSection');
            
            responseSection.classList.add('show');
            
            for (let i = 0; i < characters.length; i++) {
                const char = characters[i];
                const responseDiv = document.createElement('div');
                responseDiv.className = 'character-response';
                
                const nameDiv = document.createElement('div');
                nameDiv.className = 'character-name';
                nameDiv.textContent = `${char.emoji} ${char.name}`;
                
                const dialogueDiv = document.createElement('div');
                dialogueDiv.className = 'character-dialogue';
                
                responseDiv.appendChild(nameDiv);
                responseDiv.appendChild(dialogueDiv);
                responseSection.appendChild(responseDiv);
                
                responseDiv.style.opacity = '1';
                
                const dialogueText = translations[currentLanguage][char.key];
                await typewriterEffect(dialogueDiv, dialogueText, 70);
                
                if (i < characters.length - 1) {
                    await new Promise(resolve => setTimeout(resolve, 1500));
                }
            }
            
            setTimeout(() => {
                showLightMessage();
            }, 2000);
        }
        
        async function showLightMessage() {
            const lightSection = document.getElementById('lightMessageSection');
            const lightMessageEl = document.getElementById('lightMessage');
            
            lightSection.classList.add('show');
            
            const lightText = translations[currentLanguage].lightMessage;
            await typewriterEffect(lightMessageEl, lightText, 60);
            
            setTimeout(() => {
                showQuestion();
            }, 2000);
        }
        
        async function showQuestion() {
            const questionSection = document.getElementById('portalQuestionSection');
            const questionEl = document.getElementById('portalQuestion');
            
            questionSection.classList.add('show');
            
            const questionText = translations[currentLanguage].portalQuestion;
            await typewriterEffect(questionEl, questionText, 50);
            
            setTimeout(() => {
                enableUserInput();
            }, 1500);
        }
        
        // ============ ì‚¬ìš©ì ì…ë ¥ ì‹œìŠ¤í…œ ============
        
        function setupInputEvents() {
            const userTextarea = document.getElementById('userTextarea');
            
            userTextarea.addEventListener('keydown', handleTextareaKeydown);
            
            document.getElementById('continueYesBtn').addEventListener('click', function() {
                processContinue('Y');
            });
            
            document.getElementById('continueNoBtn').addEventListener('click', function() {
                processContinue('N');
            });
        }
        
        function handleTextareaKeydown(e) {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                const inputValue = this.value.trim();
                
                if (inputValue) {
                    processUserInput(inputValue);
                }
            }
        }
        
        function setupTextareaAutoResize() {
            const textarea = document.getElementById('userTextarea');
            
            textarea.addEventListener('input', function() {
                this.style.height = 'auto';
                this.style.height = Math.min(this.scrollHeight, 96) + 'px';
            });
        }
        
        async function processUserInput(inputText) {
            userResponse = inputText;
            disableUserInput();
            showUserResponse(inputText);
            
            setTimeout(() => {
                showUserReactions(inputText);
            }, 1000);
        }
        
        function disableUserInput() {
            const userTextarea = document.getElementById('userTextarea');
            userTextarea.disabled = true;
            userTextarea.value = '';
            userTextarea.style.height = 'auto';
            
            userTextarea.placeholder = translations[currentLanguage].waitingMessage;
        }
        
        function enableUserInput() {
            const userTextarea = document.getElementById('userTextarea');
            userTextarea.disabled = false;
            userTextarea.placeholder = translations[currentLanguage].inputPlaceholder;
            
            setTimeout(() => {
                userTextarea.focus();
            }, 100);
        }
        
        function showUserResponse(text) {
            const inputSection = document.getElementById('userInputSection');
            const userDiv = document.createElement('div');
            userDiv.className = 'user-response';
            const youLabel = translations[currentLanguage].youLabel;
            userDiv.innerHTML = `<strong>${youLabel}:</strong> "${text}"`;
            inputSection.appendChild(userDiv);
            inputSection.classList.add('show');
            
            setTimeout(() => {
                scrollToElement(inputSection);
            }, 100);
        }
        
        async function showUserReactions(userInput) {
            const reactionsSection = document.getElementById('userReactionsSection');
            
            reactionsSection.classList.add('show');
            
            for (let i = 0; i < responseCharacters.length; i++) {
                const char = responseCharacters[i];
                const responseDiv = document.createElement('div');
                responseDiv.className = 'character-response';
                
                const nameDiv = document.createElement('div');
                nameDiv.className = 'character-name';
                nameDiv.textContent = `${char.emoji} ${char.name}`;
                
                const dialogueDiv = document.createElement('div');
                dialogueDiv.className = 'character-dialogue';
                
                responseDiv.appendChild(nameDiv);
                responseDiv.appendChild(dialogueDiv);
                reactionsSection.appendChild(responseDiv);
                
                responseDiv.style.opacity = '1';
                
                const reactionText = char.getResponse(userInput, currentLanguage);
                await typewriterEffect(dialogueDiv, reactionText, 70);
                
                if (i < responseCharacters.length - 1) {
                    await new Promise(resolve => setTimeout(resolve, 1500));
                }
            }
            
            setTimeout(() => {
                showContinueOption();
            }, 2000);
        }
        
        async function showContinueOption() {
            const continueSection = document.getElementById('continueSection');
            const continueText = document.getElementById('continueText');
            
            continueSection.classList.add('show');
            
            const questionText = translations[currentLanguage].continueText;
            await typewriterEffect(continueText, questionText, 50);
            
            setTimeout(() => {
                scrollToElement(continueSection);
            }, 500);
        }
        
        function processContinue(input) {
            if (input === 'Y') {
                const message = currentLanguage === 'ko' ? 
                    'Portal 07ì´ ê³§ ì¤€ë¹„ë©ë‹ˆë‹¤. ê³„ì†í•´ì„œ ë” ê¹Šì€ ê°ì •ì˜ ì—¬ì •ì´ ì´ì–´ì§‘ë‹ˆë‹¤.' :
                    currentLanguage === 'en' ? 
                    'Portal 07 will be ready soon. The journey into deeper emotions continues.' :
                    'Portal 07 estarÃ¡ pronto em breve. A jornada para emoÃ§Ãµes mais profundas continua.';
                alert(message);
            } else if (input === 'N') {
                const message = currentLanguage === 'ko' ? 
                    'ì—¬ì •ì´ ì¼ì‹œ ì¤‘ì§€ë˜ì—ˆìŠµë‹ˆë‹¤. ì–¸ì œë“  ë‹¤ì‹œ ëŒì•„ì™€ ê³„ì†í•˜ì„¸ìš”.' :
                    currentLanguage === 'en' ? 
                    'The journey has been paused. Come back and continue anytime.' :
                    'A jornada foi pausada. Volte e continue a qualquer momento.';
                alert(message);
            }
        }
        
        // ============ ì´ˆê¸°í™” ============
        
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Temarix V2 Portal 06 DOM ë¡œë“œ ì™„ë£Œ');
            
            // ìë™ ë¡œê·¸ì¸ ì²˜ë¦¬ (ë¡œê·¸ì¸ ëª¨ë‹¬ ì œê±°)
            currentUser = { 
                uid: 'user-auto-' + Date.now(),
                email: 'auto@temarix.com'
            };
            
            memoryStorage.mockUser = currentUser;
            
            updateStaticTranslations(currentLanguage);
            initializeTemarix();
        });
    </script>
</body>
</html>