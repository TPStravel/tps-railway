<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Temarix V2 - Portal 08: Am I Really a Good Person?</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            background: #000;
            color: #fff;
            font-family: 'Courier New', monospace;
            height: 100vh;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            word-break: keep-all;
            overflow-wrap: break-word;
        }
        
        /* ìƒë‹¨ í—¤ë” */
        .header-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 25px 30px;
            background: #000;
            border-bottom: 1px solid #333;
            position: relative;
            z-index: 100;
            height: 80px;
            flex-shrink: 0;
        }
        
        .logo-section {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
        }
        
        .logo-title {
            font-size: 26px;
            font-weight: bold;
            color: #fff;
            margin-bottom: 4px;
            letter-spacing: 1px;
        }
        
        .logo-subtitle {
            font-size: 15px;
            color: #ccc;
            letter-spacing: 1.5px;
        }
        
        .portal-header-title {
            text-align: center;
            flex: 1;
            margin: 0 20px;
        }
        
        .portal-main-title {
            font-size: 28px;
            color: #fff;
            margin-bottom: 8px;
            font-weight: normal;
            letter-spacing: 1px;
        }
        
        .portal-subtitle {
            font-size: 18px;
            color: #ccc;
            letter-spacing: 1.5px;
        }
        
        /* ì–¸ì–´ ë²„íŠ¼ 3ê°œ */
        .header-right {
            display: flex;
            align-items: center;
        }
        
        .language-buttons {
            display: flex;
            gap: 10px;
        }
        
        .lang-btn {
            background: #444;
            color: #fff;
            border: none;
            padding: 10px 18px;
            font-size: 14px;
            font-family: 'Courier New', monospace;
            cursor: pointer;
            transition: background 0.2s;
        }
        
        .lang-btn:hover {
            background: #666;
        }
        
        .lang-btn.active {
            background: #87cefa;
            color: #000;
        }
        
        /* ë©”ì¸ ì½˜í…ì¸  */
        .main-content {
            flex: 1;
            max-height: calc(100vh - 80px - 120px);
            overflow-y: auto;
            overflow-x: hidden;
            padding: 30px 20px;
            scroll-behavior: smooth;
            position: relative;
        }
        
        .portal-container {
            max-width: 700px;
            width: 100%;
            margin: 0 auto;
            text-align: center;
            display: flex;
            flex-direction: column;
            word-break: keep-all;
            overflow-wrap: break-word;
            hyphens: none;
            min-height: 150vh;
        }
        
        /* í…ìŠ¤íŠ¸ ì„¹ì…˜ë“¤ */
        .portal-intro-section {
            margin: 40px 0;
            opacity: 0;
            min-height: 200px;
        }
        
        .portal-intro {
            font-size: 20px;
            color: #fff;
            margin-bottom: 30px;
            line-height: 1.8;
            white-space: pre-wrap;
            word-wrap: break-word;
            word-break: keep-all;
            background: none;
            border: none;
            padding: 0;
        }
        
        .character-responses-section {
            margin: 40px 0;
            opacity: 0;
            min-height: 800px;
        }
        
        .character-response {
            color: #fff;
            font-size: 18px;
            margin: 40px 0;
            text-align: left;
            opacity: 0;
            white-space: pre-wrap;
            word-wrap: break-word;
            word-break: keep-all;
            transition: opacity 0.8s ease-in;
            background: none;
            border: none;
            padding: 0;
            min-height: 80px;
        }
        
        .character-name {
            font-weight: bold;
            color: #87cefa;
            margin-bottom: 12px;
            font-size: 18px;
        }
        
        .character-dialogue {
            color: #fff;
            line-height: 1.7;
            font-size: 17px;
            white-space: pre-wrap;
            word-wrap: break-word;
            word-break: keep-all;
        }
        
        .typing-cursor::after {
            content: '|';
            animation: blink 1s infinite;
            color: #87cefa;
        }
        
        @keyframes blink {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0; }
        }
        
        .light-message-section {
            margin: 50px 0;
            opacity: 0;
            background: none;
            border: none;
            padding: 0;
            min-height: 100px;
        }
        
        .light-message {
            font-size: 20px;
            color: #87cefa;
            line-height: 1.8;
            font-style: italic;
            white-space: pre-wrap;
            word-wrap: break-word;
            word-break: keep-all;
        }
        
        .portal-question-section {
            margin: 40px 0;
            opacity: 0;
            min-height: 150px;
        }
        
        .portal-question {
            font-size: 22px;
            color: #fff;
            margin-bottom: 30px;
            min-height: 100px;
            display: flex;
            align-items: center;
            justify-content: center;
            line-height: 1.6;
            white-space: pre-wrap;
            word-wrap: break-word;
            word-break: keep-all;
        }
        
        .user-input-section {
            margin: 40px 0;
            opacity: 0;
            min-height: 100px;
        }
        
        .user-response {
            color: #fff;
            margin: 30px 0;
            text-align: left;
            font-size: 18px;
            background: none;
            border: none;
            padding: 0;
            white-space: pre-wrap;
            word-wrap: break-word;
            word-break: keep-all;
        }
        
        .user-response strong {
            color: #87cefa;
            margin-right: 8px;
        }
        
        .user-reactions-section {
            margin: 40px 0;
            opacity: 0;
            min-height: 400px;
        }
        
        .continue-section {
            margin: 50px 0;
            opacity: 0;
            text-align: center;
            background: none;
            border: none;
            padding: 0;
            min-height: 200px;
        }
        
        .continue-text {
            color: #fff;
            font-size: 20px;
            margin-bottom: 25px;
            line-height: 1.6;
            white-space: pre-wrap;
            word-wrap: break-word;
            word-break: keep-all;
        }
        
        .continue-buttons {
            display: flex;
            gap: 20px;
            justify-content: center;
            flex-wrap: wrap;
        }
        
        .continue-btn {
            background: #444;
            color: #fff;
            border: none;
            padding: 18px 35px;
            font-family: 'Courier New', monospace;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 200px;
        }
        
        .continue-btn:hover {
            background: #666;
        }
        
        .continue-btn.primary {
            background: #87cefa;
            color: #000;
        }
        
        .continue-btn.primary:hover {
            background: #b0d4f1;
        }
        
        /* í•˜ë‹¨ ê³ ì • ì…ë ¥ì°½ */
        .input-fixed-bottom {
            position: relative;
            bottom: 0;
            left: 0;
            right: 0;
            background: #000;
            border-top: 1px solid #333;
            padding: 25px;
            z-index: 100;
            flex-shrink: 0;
            height: 120px;
        }
        
        .input-container {
            max-width: 900px;
            margin: 0 auto;
            display: flex;
            align-items: flex-start;
            gap: 15px;
        }
        
        .input-prefix {
            color: #87cefa;
            font-size: 20px;
            margin-top: 8px;
            flex-shrink: 0;
        }
        
        .user-textarea {
            background: transparent;
            border: none;
            border-bottom: 1px solid #444;
            color: #fff;
            font-family: 'Courier New', monospace;
            font-size: 18px;
            width: 100%;
            padding: 12px 8px;
            outline: none;
            resize: none;
            min-height: 32px;
            max-height: 96px;
            line-height: 1.6;
            transition: border-color 0.3s ease;
            overflow-y: auto;
        }
        
        .user-textarea:focus {
            border-bottom-color: #87cefa;
        }
        
        .user-textarea::placeholder {
            color: #666;
        }
        
        .user-textarea:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            background: rgba(50, 50, 50, 0.2);
        }
        
        /* ìŠ¤í¬ë¡¤ë°” ìŠ¤íƒ€ì¼ë§ */
        .main-content::-webkit-scrollbar {
            width: 12px;
        }
        
        .main-content::-webkit-scrollbar-track {
            background: #111;
            border-radius: 6px;
        }
        
        .main-content::-webkit-scrollbar-thumb {
            background: #444;
            border-radius: 6px;
            border: 2px solid #111;
        }
        
        .main-content::-webkit-scrollbar-thumb:hover {
            background: #666;
        }
        
        /* ì• ë‹ˆë©”ì´ì…˜ */
        @keyframes fadeIn {
            to { opacity: 1; }
        }
        
        .show {
            opacity: 1 !important;
            transition: opacity 1s ease-in;
        }
        
        .hidden {
            display: none;
        }
        
        /* ë°˜ì‘í˜• ë””ìì¸ */
        @media (max-width: 768px) {
            .header-bar {
                padding: 20px 15px;
                height: 70px;
                flex-direction: column;
                gap: 10px;
            }
            
            .main-content {
                max-height: calc(100vh - 70px - 120px);
                padding: 20px 15px;
            }
            
            .logo-title {
                font-size: 22px;
            }
            
            .portal-main-title {
                font-size: 22px;
            }
            
            .portal-subtitle {
                font-size: 16px;
            }
            
            .lang-btn {
                font-size: 12px;
                padding: 8px 14px;
            }
            
            .portal-intro {
                font-size: 18px;
            }
            
            .portal-question {
                font-size: 20px;
            }
            
            .character-response {
                font-size: 16px;
            }
            
            .input-fixed-bottom {
                padding: 20px;
            }
            
            .continue-buttons {
                flex-direction: column;
                gap: 15px;
            }
            
            .continue-btn {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <!-- ìƒë‹¨ í—¤ë” -->
    <div class="header-bar">
        <div class="logo-section">
            <div class="logo-title">TEMARIX V2</div>
            <div class="logo-subtitle" id="logoSubtitle">The Tremor of Emotion</div>
        </div>
        
        <div class="portal-header-title">
            <div class="portal-main-title" id="portalMainTitle">Portal 08: Am I Really a Good Person?</div>
            <div class="portal-subtitle" id="portalSubtitle">The heart that can't give itself a complete 'yes'</div>
        </div>
        
        <div class="header-right">
            <div class="language-buttons">
                <button class="lang-btn" data-lang="ko">KR</button>
                <button class="lang-btn active" data-lang="en">EN</button>
                <button class="lang-btn" data-lang="pt">PT</button>
            </div>
        </div>
    </div>

    <!-- ë©”ì¸ ì½˜í…ì¸  ì˜ì—­ -->
    <div class="main-content" id="mainContent">
        <div class="portal-container">
            <!-- í¬í„¸ ì¸íŠ¸ë¡œ -->
            <div class="portal-intro-section" id="portalIntroSection">
                <div class="portal-intro" id="portalIntro"></div>
            </div>

            <!-- ìºë¦­í„° ì‘ë‹µ ì„¹ì…˜ -->
            <div class="character-responses-section" id="characterResponsesSection">
                <!-- 8ëª…ì˜ ìºë¦­í„° ì‘ë‹µì´ ìˆœì°¨ì ìœ¼ë¡œ í‘œì‹œë©ë‹ˆë‹¤ -->
            </div>

            <!-- ë¹›ì˜ í•œë§ˆë”” -->
            <div class="light-message-section" id="lightMessageSection">
                <div class="character-name" id="lightTitle">âœ¨ Word of Light</div>
                <div class="light-message" id="lightMessage"></div>
            </div>

            <!-- ì§ˆë¬¸ ì„¹ì…˜ -->
            <div class="portal-question-section" id="portalQuestionSection">
                <div class="portal-question" id="portalQuestion"></div>
            </div>

            <!-- ì‚¬ìš©ì ì…ë ¥ ì˜ì—­ -->
            <div class="user-input-section" id="userInputSection">
                <!-- ì‚¬ìš©ì ì‘ë‹µì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
            </div>
            
            <!-- ì‚¬ìš©ì ì‘ë‹µ í›„ ìºë¦­í„° ë°˜ì‘ -->
            <div class="user-reactions-section" id="userReactionsSection">
                <!-- ì‚¬ìš©ì ì‘ë‹µ í›„ 3ëª…ì˜ ìºë¦­í„° ë°˜ì‘ì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
            </div>
            
            <!-- ê³„ì†í•˜ê¸° ë²„íŠ¼ ì„¹ì…˜ -->
            <div class="continue-section" id="continueSection">
                <div class="continue-text" id="continueText"></div>
                <div class="continue-buttons">
                    <button class="continue-btn primary" id="continueYesBtn">Continue to Portal 09</button>
                    <button class="continue-btn" id="continueNoBtn">Pause the journey</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- í•˜ë‹¨ ê³ ì • ì…ë ¥ì°½ -->
    <div class="input-fixed-bottom">
        <div class="input-container">
            <div class="input-prefix">></div>
            <textarea class="user-textarea" 
                      id="userTextarea" 
                      placeholder="Share your thoughts about whether you're a good person... (Press Enter to send)"
                      rows="1"
                      maxlength="500"></textarea>
        </div>
    </div>

    <script>
        // ë©”ëª¨ë¦¬ ê¸°ë°˜ ì‚¬ìš©ì ìŠ¤í† ë¦¬ì§€ (localStorage ëŒ€ì‹ )
        let memoryStorage = {
            mockUser: null
        };
        
        // Firebase ëª¨ì˜ ê°ì²´ (ì‹¤ì œ êµ¬í˜„ì—ì„œëŠ” Firebase SDK ì‚¬ìš©)
        const firebase = {
            auth: () => ({
                onAuthStateChanged: (callback) => {
                    // ëª¨ì˜ ì¸ì¦ ìƒíƒœ ì²´í¬ (ë©”ëª¨ë¦¬ ê¸°ë°˜)
                    setTimeout(() => {
                        callback(memoryStorage.mockUser);
                    }, 100);
                }
            })
        };

        // ë²ˆì—­ ë°ì´í„°
        const translations = {
            ko: {
                logoSubtitle: "ê°ì •ì˜ ë–¨ë¦¼",
                portalMainTitle: "Portal 08: ë‚˜ëŠ” ì •ë§ ê´œì°®ì€ ì‚¬ëŒì´ ë§ì„ê¹Œ?",
                portalSubtitle: "ìŠ¤ìŠ¤ë¡œì—ê²Œ ì™„ì „í•œ 'ì˜ˆ'ë¥¼ ì£¼ì§€ ëª»í•˜ëŠ” ë§ˆìŒ",
                portalIntro: "ì•„ë¬´ë¦¬ ì˜í•´ë„,\në§ˆìŒ í•œêµ¬ì„ì— ëŠ˜ ë‚¨ì•„ ìˆëŠ” ì˜ë¬¸ì´ ìˆìŠµë‹ˆë‹¤.\n\"ë‚˜ëŠ” ê´œì°®ì€ ì‚¬ëŒì¼ê¹Œ?\"\n\"í˜¹ì‹œâ€¦ ëˆ„êµ°ê°€ì—ê²ŒëŠ” ë‚˜ë„ ìƒì²˜ì˜€ì„ê¹Œ?\"\n\nì‚¬ëŒë“¤ì˜ ë§,\në‚´ ì•ˆì˜ í›„íšŒ,\nê¸°ì–µ ì† ì–´ê¸‹ë‚œ ì¥ë©´ë“¤ ì‚¬ì´ì—ì„œ\nìš°ë¦¬ëŠ” ìŠ¤ìŠ¤ë¡œì—ê²Œ ì™„ì „í•œ 'ì˜ˆ'ë¥¼ ì£¼ì§€ ëª»í•©ë‹ˆë‹¤.\n\nì§€ê¸ˆ, ë‹¹ì‹ ì€\nìŠ¤ìŠ¤ë¡œë¥¼ ê´œì°®ì€ ì‚¬ëŒì´ë¼ ë§í•  ìˆ˜ ìˆë‚˜ìš”?",
                lightTitle: "âœ¨ ë¹›ì˜ í•œë§ˆë””",
                lightMessage: "ë‹¹ì‹ ì´ ë§¤ì¼ ë¬»ëŠ” ê·¸ ì§ˆë¬¸ ì†ì—ëŠ”\në‹¹ì‹ ì´ ê³„ì† ì‚¬ëŒìœ¼ë¡œ ì‚´ì•„ê°€ë ¤ëŠ” ì˜ì§€ê°€ ë‹´ê²¨ ìˆìŠµë‹ˆë‹¤.",
                portalQuestion: "ë‹¹ì‹ ì€ ìŠ¤ìŠ¤ë¡œë¥¼, ì •ë§ ê´œì°®ì€ ì‚¬ëŒì´ë¼ê³  ëŠë¼ì‹œë‚˜ìš”?\n\në¬´ì—‡ì´ ë‹¹ì‹ ì„ ì˜ì‹¬í•˜ê²Œ ë§Œë“¤ê³ ,\në¬´ì—‡ì´ ë‹¹ì‹ ì„ í™•ì‹ í•˜ê²Œ ë§Œë“œë‚˜ìš”?",
                continueText: "ìì‹ ì˜ ê´œì°®ìŒì— ëŒ€í•´ ëŒì•„ë³¸ ì´ ì—¬ì •ì„ ê³„ì†í•˜ì‹œê² ìŠµë‹ˆê¹Œ?",
                continueYes: "Portal 09ë¡œ ê³„ì†í•˜ì‹œê² ìŠµë‹ˆê¹Œ?",
                continueNo: "ì—¬ì •ì„ ì¼ì‹œì •ì§€í•˜ì‹œê² ìŠµë‹ˆê¹Œ?",
                inputPlaceholder: "ìì‹ ì´ ê´œì°®ì€ ì‚¬ëŒì¸ì§€ì— ëŒ€í•œ ìƒê°ì„ í„¸ì–´ë†“ì•„ ë³´ì„¸ìš”... (Enterë¡œ ì „ì†¡)",
                youLabel: "ë‹¹ì‹ ",
                languageChangeConfirm: "ì–¸ì–´ë¥¼ ë³€ê²½í•˜ë©´ ì—¬ì •ì´ ì²˜ìŒë¶€í„° ë‹¤ì‹œ ì‹œì‘ë©ë‹ˆë‹¤.\nê³„ì†í•˜ì‹œê² ìŠµë‹ˆê¹Œ?",
                waitingMessage: "ì‘ë‹µì„ ê¸°ë‹¤ë¦¬ëŠ” ì¤‘...",
                // ìºë¦­í„° ëŒ€í™”
                charEly: "'ê´œì°®ì€ ì‚¬ëŒ'ì´ë¼ëŠ” ë§ì€\ní•­ìƒ ì˜³ì•˜ë˜ ì‚¬ëŒì´ ì•„ë‹ˆë¼,\nëê¹Œì§€ ë¬¼ì–´ë³´ëŠ” ì‚¬ëŒì—ê²Œ ì£¼ì–´ì§€ëŠ” ê²ƒì…ë‹ˆë‹¤.",
                charCris: "ì•„ëƒ~ ê·¸ëŸ° ê±° ê³ ë¯¼í•˜ëŠ” ì‹œì ì—ì„œ\nì´ë¯¸ ë‹¹ì‹ ì€ ê´œì°®ì€ ì‚¬ëŒì„.\nì¸ì¦ ì™„ë£Œ~ ğŸ¤™ğŸ˜†",
                charZafirah: "ë‹¹ì‹ ì´ ê´œì°®ì§€ ì•Šë‹¤ê³  ëŠê¼ˆë˜ ë‚ ë“¤ì¡°ì°¨\nì‚¬ì‹¤ì€ ë‹¹ì‹ ì´ ì§„ì‹¬ì´ì—ˆë‹¤ëŠ” ì¦ê±°ì˜€ìŠµë‹ˆë‹¤.",
                charRami: "ë‚´ë©´ì—ì„œ ì†Ÿì•„ë‚˜ëŠ” ì˜ë¬¸ì€\nìê¸° íšŒí”¼ê°€ ì•„ë‹ˆë¼ ìê¸° ì¶©ì„±ì…ë‹ˆë‹¤.",
                charSamir: "(ê·¸ëŠ” ì‘ì€ ê±°ìš¸ í•˜ë‚˜ë¥¼ ë‹¹ì‹ ì—ê²Œ ê±´ë„µë‹ˆë‹¤.\nê·¸ ì•ˆì— ë¹„ì¹œ ì–¼êµ´ì€ ì§€ì³ ìˆì§€ë§Œ ì •ì§í•©ë‹ˆë‹¤.)",
                charLayla: "ë‹¹ì‹ ì˜ 'ê´œì°®ìŒ'ì€\nëˆ„êµ°ê°€ì˜ ì¸ì •ìœ¼ë¡œ ë§Œë“¤ì–´ì§€ëŠ” ê²Œ ì•„ë‹ˆì—ìš”.\në‹¹ì‹ ì´ ë‹¹ì‹ ì„ í’ˆëŠ” ìˆœê°„, ì´ë¯¸ ì¶©ë¶„í•´ìš”.",
                charNabir: "ê´œì°®ê¸´ ë­ê°€ ê´œì°®ì•„?\nê·¸ ìƒê°í•˜ëŠ” ê±° ìì²´ê°€ ë²Œì¨ ìê²© ì—†ìŒ ì¸ì¦ì´ì•¼.",
                charAzhar: "ë„Œ ëŠ˜ ê´œì°®ì€ ì²™ë§Œ í–ˆì–ì•„.\nì§„ì§œ ê´œì°®ì€ ì‚¬ëŒì€ ê·¸ë ‡ê²Œ ì¦ëª…í•˜ë ¤ê³  ì• ì“°ì§€ ì•Šì•„."
            },
            en: {
                logoSubtitle: "The Tremor of Emotion",
                portalMainTitle: "Portal 08: Am I Really a Good Person?",
                portalSubtitle: "The heart that can't give itself a complete 'yes'",
                portalIntro: "No matter how well you do,\nthere's always a doubt lingering in a corner of your heart.\n\"Am I a good person?\"\n\"Was I... perhaps a source of pain to someone?\"\n\nAmong people's words,\nregrets within me,\nmisaligned scenes in memory,\nwe cannot give ourselves a complete 'yes.'\n\nNow, can you\nsay you're a good person?",
                lightTitle: "âœ¨ Word of Light",
                lightMessage: "In that question you ask yourself every day\nlies your will to continue living as a person.",
                portalQuestion: "Do you truly feel you're a good person?\n\nWhat makes you doubt yourself,\nand what gives you confidence?",
                continueText: "Will you continue this journey of reflecting on your own goodness?",
                continueYes: "Continue to Portal 09?",
                continueNo: "Pause the journey?",
                inputPlaceholder: "Share your thoughts about whether you're a good person... (Press Enter to send)",
                youLabel: "You",
                languageChangeConfirm: "Changing the language will restart the journey from the beginning.\nDo you want to continue?",
                waitingMessage: "Waiting for response...",
                charEly: "Being called a 'good person'\nisn't given to those who were always right,\nbut to those who keep asking until the end.",
                charCris: "No way~ Just the fact that you're worrying about it\nmeans you're already a good person.\nCertification complete~ ğŸ¤™ğŸ˜†",
                charZafirah: "Even the days you felt you weren't good\nwere actually proof that you were sincere.",
                charRami: "The doubts arising from within\nare not self-avoidance but self-loyalty.",
                charSamir: "(He hands you a small mirror.\nThe face reflected in it is tired but honest.)",
                charLayla: "Your 'goodness'\nisn't created by someone else's approval.\nThe moment you embrace yourself, that's already enough.",
                charNabir: "Good? What's good about you?\nJust thinking about it proves you're not qualified.",
                charAzhar: "You've always just pretended to be okay.\nReally good people don't struggle to prove it like that."
            },
            pt: {
                logoSubtitle: "O Tremor da EmoÃ§Ã£o",
                portalMainTitle: "Portal 08: Eu Sou Realmente Uma Boa Pessoa?",
                portalSubtitle: "O coraÃ§Ã£o que nÃ£o consegue se dar um 'sim' completo",
                portalIntro: "NÃ£o importa quÃ£o bem vocÃª faÃ§a,\nhÃ¡ sempre uma dÃºvida persistindo em um canto do seu coraÃ§Ã£o.\n\"Eu sou uma boa pessoa?\"\n\"Eu fui... talvez uma fonte de dor para alguÃ©m?\"\n\nEntre as palavras das pessoas,\narrependimentos dentro de mim,\ncenas desalinhadas na memÃ³ria,\nnÃ£o conseguimos nos dar um 'sim' completo.\n\nAgora, vocÃª consegue\ndizer que Ã© uma boa pessoa?",
                lightTitle: "âœ¨ Palavra de Luz",
                lightMessage: "Nessa pergunta que vocÃª faz a si mesmo todos os dias\nreside sua vontade de continuar vivendo como pessoa.",
                portalQuestion: "VocÃª realmente sente que Ã© uma boa pessoa?\n\nO que faz vocÃª duvidar de si mesmo,\ne o que lhe dÃ¡ confianÃ§a?",
                continueText: "VocÃª continuarÃ¡ esta jornada de refletir sobre sua prÃ³pria bondade?",
                continueYes: "Continuar para o Portal 09?",
                continueNo: "Pausar a jornada?",
                inputPlaceholder: "Compartilhe seus pensamentos sobre se vocÃª Ã© uma boa pessoa... (Enter para enviar)",
                youLabel: "VocÃª",
                languageChangeConfirm: "Mudar o idioma reiniciarÃ¡ a jornada desde o inÃ­cio.\nDeseja continuar?",
                waitingMessage: "Aguardando resposta...",
                charEly: "Ser chamado de 'boa pessoa'\nnÃ£o Ã© dado Ã queles que sempre estiveram certos,\nmas Ã queles que continuam perguntando atÃ© o fim.",
                charCris: "NÃ£o pode ser~ SÃ³ o fato de vocÃª estar se preocupando com isso\nsignifica que vocÃª jÃ¡ Ã© uma boa pessoa.\nCertificaÃ§Ã£o completa~ ğŸ¤™ğŸ˜†",
                charZafirah: "AtÃ© os dias em que vocÃª sentiu que nÃ£o era bom\nforam na verdade prova de que vocÃª era sincero.",
                charRami: "As dÃºvidas surgindo de dentro\nnÃ£o sÃ£o auto-evitaÃ§Ã£o mas auto-lealdade.",
                charSamir: "(Ele lhe entrega um pequeno espelho.\nO rosto refletido nele estÃ¡ cansado mas honesto.)",
                charLayla: "Sua 'bondade'\nnÃ£o Ã© criada pela aprovaÃ§Ã£o de outra pessoa.\nNo momento em que vocÃª se abraÃ§a, isso jÃ¡ Ã© suficiente.",
                charNabir: "Bom? O que hÃ¡ de bom em vocÃª?\nSÃ³ pensar sobre isso prova que vocÃª nÃ£o estÃ¡ qualificado.",
                charAzhar: "VocÃª sempre apenas fingiu estar bem.\nPessoas realmente boas nÃ£o lutam para provar isso assim."
            }
        };
        
        // ìºë¦­í„° ë°ì´í„°
        const characters = [
            { name: "Ely", emoji: "ğŸ‘‘", key: "charEly" },
            { name: "Cris", emoji: "ğŸƒ", key: "charCris" },
            { name: "Zafirah", emoji: "ğŸ§•", key: "charZafirah" },
            { name: "Rami", emoji: "ğŸ”®", key: "charRami" },
            { name: "Samir", emoji: "ğŸª", key: "charSamir" },
            { name: "Layla", emoji: "ğŸ’ ", key: "charLayla" },
            { name: "Nabir", emoji: "ğŸ¦‚", key: "charNabir" },
            { name: "Azhar", emoji: "ğŸ”¥", key: "charAzhar" }
        ];
        
        // ============ ê°ì • ë¶„ì„ ì‹œìŠ¤í…œ ============
        
        function analyzeEmotion(userInput) {
            const input = userInput.toLowerCase();
            
            // ê°ì • í‚¤ì›Œë“œ ë§¤í•‘ (Portal 08 íŠ¹í™”)
            const emotionKeywords = {
                selfdoubt: ['ìì‹ ì—†', 'í™•ì‹ ì—†', 'ì˜ì‹¬', 'ê´œì°®ì€ì§€', 'ëª¨ë¥´ê² ', 'doubt', 'unsure', 'not sure', 'uncertain', 'dÃºvida', 'incerto'],
                guilt: ['ì£„ì±…ê°', 'ë¯¸ì•ˆ', 'ì£„ì†¡', 'ì˜ëª»', 'ìƒì²˜ì¤¬', 'guilt', 'sorry', 'hurt someone', 'wrong', 'culpa', 'machuquei'],
                inadequacy: ['ë¶€ì¡±', 'ëª»ë‚˜', 'ìê²©ì—†', 'ëŠ¥ë ¥ì—†', 'ì‹¤íŒ¨', 'inadequate', 'not enough', 'failure', 'inadequad', 'fracasso'],
                shame: ['ë¶€ë„ëŸ¬', 'ì°½í”¼', 'ìˆ˜ì¹˜', 'ë¯¼ë§', 'shame', 'embarrass', 'humiliat', 'vergonha', 'envergonhad'],
                impostor: ['ê°€ì§œ', 'ì²™í•˜', 'ì—°ê¸°', 'ì†ì´', 'ì§„ì§œê°€ ì•„ë‹Œ', 'fake', 'pretend', 'impostor', 'fraud', 'falso', 'fingindo'],
                perfectionism: ['ì™„ë²½', 'ì˜í•´ì•¼', 'ì‹¤ìˆ˜í•˜ë©´', 'ëª¨ë“ ê±¸', 'perfect', 'must do well', 'mistake', 'everything', 'perfeito', 'preciso fazer bem'],
                validation: ['ì¸ì •ë°›', 'ìŠ¹ì¸', 'ì¢‹ì€ ì‚¬ëŒ', 'ê´œì°®ë‹¤ê³ ', 'validation', 'approval', 'good person', 'recognition', 'validaÃ§Ã£o', 'aprovaÃ§Ã£o'],
                anxiety: ['ë¶ˆì•ˆ', 'ê±±ì •', 'ë‘ë ¤', 'ë–¨ë ¤', 'anxiety', 'worry', 'fear', 'nervous', 'ansiedade', 'preocup'],
                selfacceptance: ['ë°›ì•„ë“¤', 'ì¸ì •', 'ê´œì°®', 'ì‚¬ë‘', 'accept', 'okay', 'love myself', 'embrace', 'aceitar', 'amar-me'],
                compassion: ['ìë¹„', 'ì´í•´', 'ìš©ì„œ', 'ë”°ëœ»', 'compassion', 'understand', 'forgive', 'kind', 'compaixÃ£o', 'perdoar']
            };
            
            // ê°ì • ë¶„ì„
            let detectedEmotions = [];
            for (const [emotion, keywords] of Object.entries(emotionKeywords)) {
                for (const keyword of keywords) {
                    if (input.includes(keyword)) {
                        detectedEmotions.push(emotion);
                        break;
                    }
                }
            }
            
            // ê°ì •ì´ ê°ì§€ë˜ì§€ ì•Šìœ¼ë©´ ê¸°ë³¸ê°’ ì„¤ì •
            if (detectedEmotions.length === 0) {
                detectedEmotions = ['general'];
            }
            
            return detectedEmotions[0]; // ì²« ë²ˆì§¸ ê°ì§€ëœ ê°ì • ë°˜í™˜
        }
        
        // ë°˜ì‘ ìºë¦­í„°ë“¤ (Portal 08 ì „ìš©)
        const responseCharacters = [
            {
                name: "Affirmation", emoji: "âœ¨",
                getResponse: (userInput, lang) => {
                    const emotion = analyzeEmotion(userInput);
                    
                    const responses = {
                        ko: {
                            selfdoubt: "ìì‹ ì„ ì˜ì‹¬í•˜ëŠ” ê²ƒ ìì²´ê°€ ë‹¹ì‹ ì´ ì„±ì°°í•˜ëŠ” ì‚¬ëŒì´ë¼ëŠ” ì¦ê±°ì˜ˆìš”. ì§„ì§œ ë¬¸ì œê°€ ìˆëŠ” ì‚¬ëŒë“¤ì€ ì´ëŸ° ê³ ë¯¼ì¡°ì°¨ í•˜ì§€ ì•Šì•„ìš”. ì˜ì‹¬í•œë‹¤ëŠ” ê±´ ë” ë‚˜ì•„ì§€ê³  ì‹¶ë‹¤ëŠ” ë§ˆìŒì´ ìˆë‹¤ëŠ” ëœ»ì´ì—ìš”.",
                            guilt: "ì£„ì±…ê°ì„ ëŠë¼ëŠ” ê±´ ë‹¹ì‹ ì—ê²Œ ì–‘ì‹¬ì´ ìˆë‹¤ëŠ” ì¦ê±°ì˜ˆìš”. ì™„ë²½í•œ ì‚¬ëŒì€ ì—†ì–´ìš”. ì‹¤ìˆ˜í–ˆë‹¤ë©´ ê·¸ê²ƒì—ì„œ ë°°ìš°ê³  ë” ë‚˜ì€ ì‚¬ëŒì´ ë˜ë ¤ê³  ë…¸ë ¥í•˜ëŠ” ë‹¹ì‹ ì˜ ëª¨ìŠµì´ ì´ë¯¸ ê´œì°®ì€ ì‚¬ëŒì„ì„ ë³´ì—¬ì¤˜ìš”.",
                            inadequacy: "ë¶€ì¡±í•˜ë‹¤ê³  ëŠë¼ëŠ” ë§ˆìŒë„ ì„±ì¥í•˜ê³  ì‹¶ë‹¤ëŠ” ìš•êµ¬ì—ì„œ ë‚˜ì™€ìš”. ì™„ë²½í•˜ì§€ ì•Šì•„ë„ ê´œì°®ì•„ìš”. ë…¸ë ¥í•˜ëŠ” ê³¼ì • ìì²´ê°€ ë‹¹ì‹ ì„ ê´œì°®ì€ ì‚¬ëŒìœ¼ë¡œ ë§Œë“¤ì–´ê°€ê³  ìˆì–´ìš”.",
                            shame: "ë¶€ë„ëŸ¬ì›€ì„ ëŠë¼ëŠ” ê±´ ë‹¹ì‹ ì´ ë” ë‚˜ì€ ê¸°ì¤€ì„ ê°€ì§€ê³  ìˆë‹¤ëŠ” ëœ»ì´ì—ìš”. ê·¸ ê¸°ì¤€ì— ëª» ë¯¸ì³¤ë‹¤ê³  í•´ì„œ ë‚˜ìœ ì‚¬ëŒì€ ì•„ë‹ˆì—ìš”. ê³„ì† ë…¸ë ¥í•˜ë ¤ëŠ” ë§ˆìŒì´ ìˆë‹¤ë©´ ê·¸ê²ƒìœ¼ë¡œ ì¶©ë¶„í•´ìš”.",
                            impostor: "ê°€ì§œ ê°™ë‹¤ê³  ëŠë¼ëŠ” ê±´ ë‹¹ì‹ ì´ ì§„ì§œê°€ ë˜ê³  ì‹¶ì–´í•œë‹¤ëŠ” ë§ˆìŒì˜ í‘œí˜„ì´ì—ìš”. ì§„ì •ì„±ì„ ì¶”êµ¬í•˜ëŠ” ì‚¬ëŒë§Œì´ ì´ëŸ° ê³ ë¯¼ì„ í•´ìš”. ê·¸ ê³ ë¯¼ ìì²´ê°€ ë‹¹ì‹ ì˜ ì§„ì •ì„±ì„ ì¦ëª…í•´ìš”.",
                            perfectionism: "ì™„ë²½í•´ì•¼ í•œë‹¤ëŠ” ì••ë°•ê°ì„ ëŠë¼ëŠ” ê±´ ë‹¹ì‹ ì´ ì±…ì„ê° ìˆëŠ” ì‚¬ëŒì´ë¼ëŠ” ì¦ê±°ì˜ˆìš”. í•˜ì§€ë§Œ ì™„ë²½í•˜ì§€ ì•Šì•„ë„ ì¶©ë¶„íˆ ê°€ì¹˜ ìˆëŠ” ì‚¬ëŒì´ì—ìš”. ë…¸ë ¥í•˜ëŠ” ê³¼ì •ì´ ë” ì¤‘ìš”í•´ìš”.",
                            validation: "ì¸ì •ë°›ê³  ì‹¶ì–´í•˜ëŠ” ë§ˆìŒì€ ìì—°ìŠ¤ëŸ¬ìš´ ê±°ì˜ˆìš”. í•˜ì§€ë§Œ ê°€ì¥ ì¤‘ìš”í•œ ì¸ì •ì€ ìê¸° ìì‹ ì˜ ì¸ì •ì´ì—ìš”. ë‹¹ì‹ ì€ ì´ë¯¸ ì¸ì •ë°›ì„ ë§Œí•œ ê°€ì¹˜ê°€ ì¶©ë¶„í•œ ì‚¬ëŒì´ì—ìš”.",
                            anxiety: "ë¶ˆì•ˆí•´í•˜ëŠ” ê²ƒë„ ë‹¹ì‹ ì´ ì‹ ì¤‘í•˜ê³  ì±…ì„ê° ìˆëŠ” ì‚¬ëŒì´ë¼ëŠ” ì¦ê±°ì˜ˆìš”. ë¶ˆì•ˆì€ ë•Œë¡œ ìš°ë¦¬ë¥¼ ë” ë‚˜ì€ ì„ íƒìœ¼ë¡œ ì´ëŒì–´ì£¼ê¸°ë„ í•´ìš”. ê·¸ ë§ˆìŒì„ ë¶€ì •í•˜ì§€ ë§ˆì„¸ìš”.",
                            selfacceptance: "ìì‹ ì„ ë°›ì•„ë“¤ì´ë ¤ëŠ” ë§ˆìŒì´ ìƒê²¼ë‹¤ëŠ” ê²ƒ ìì²´ê°€ í° ì„±ì¥ì´ì—ìš”. ìˆëŠ” ê·¸ëŒ€ë¡œì˜ ìì‹ ì„ ì‚¬ë‘í•˜ëŠ” ê²ƒì´ ì§„ì •í•œ ê´œì°®ìŒì˜ ì‹œì‘ì´ì—ìš”.",
                            compassion: "ìì‹ ì—ê²Œ ìë¹„ë¡œìš´ ë§ˆìŒì„ ê°–ëŠ” ê±´ ì§€í˜œë¡œìš´ ì¼ì´ì—ìš”. ìì‹ ì„ ì´í•´í•˜ê³  ìš©ì„œí•  ìˆ˜ ìˆëŠ” ì‚¬ëŒì´ì•¼ë§ë¡œ ë‹¤ë¥¸ ì‚¬ëŒë„ ì´í•´í•  ìˆ˜ ìˆëŠ” ê´œì°®ì€ ì‚¬ëŒì´ì—ìš”.",
                            general: "ê´œì°®ì€ ì‚¬ëŒì¸ì§€ ê³ ë¯¼í•œë‹¤ëŠ” ê²ƒ ìì²´ê°€ ë‹¹ì‹ ì´ ê´œì°®ì€ ì‚¬ëŒì´ë¼ëŠ” ì¦ê±°ì˜ˆìš”. ì§„ì§œ ë¬¸ì œê°€ ìˆëŠ” ì‚¬ëŒë“¤ì€ ì´ëŸ° ìƒê°ì¡°ì°¨ í•˜ì§€ ì•Šê±°ë“ ìš”. ë‹¹ì‹ ì€ ì¶©ë¶„íˆ ê´œì°®ì€ ì‚¬ëŒì´ì—ìš”."
                        },
                        en: {
                            selfdoubt: "Doubting yourself is proof that you're a reflective person. People with real problems don't even have these concerns. Doubting means you have the desire to be better.",
                            guilt: "Feeling guilt is proof that you have a conscience. No one is perfect. If you made mistakes, learning from them and trying to be better shows you're already a good person.",
                            inadequacy: "Feeling inadequate also comes from wanting to grow. It's okay not to be perfect. The process of trying itself is making you into a good person.",
                            shame: "Feeling shame means you have better standards. Not meeting those standards doesn't make you a bad person. Having the desire to keep trying is enough.",
                            impostor: "Feeling fake is your heart's expression of wanting to be real. Only people pursuing authenticity have these concerns. That concern itself proves your authenticity.",
                            perfectionism: "Feeling pressure to be perfect is proof that you're a responsible person. But you're valuable enough even without being perfect. The process of trying is more important.",
                            validation: "Wanting recognition is natural. But the most important recognition is self-recognition. You're already a person worthy of recognition.",
                            anxiety: "Being anxious is also proof that you're careful and responsible. Anxiety sometimes leads us to better choices. Don't deny that feeling.",
                            selfacceptance: "Having the desire to accept yourself is itself great growth. Loving yourself as you are is the beginning of true goodness.",
                            compassion: "Having compassion for yourself is wise. Someone who can understand and forgive themselves is a good person who can also understand others.",
                            general: "Wondering if you're a good person is itself proof that you are. People with real problems don't even think about this. You're good enough."
                        },
                        pt: {
                            selfdoubt: "Duvidar de si mesmo Ã© prova de que vocÃª Ã© uma pessoa reflexiva. Pessoas com problemas reais nem tÃªm essas preocupaÃ§Ãµes. Duvidar significa que vocÃª tem o desejo de ser melhor.",
                            guilt: "Sentir culpa Ã© prova de que vocÃª tem consciÃªncia. NinguÃ©m Ã© perfeito. Se vocÃª cometeu erros, aprender com eles e tentar ser melhor mostra que vocÃª jÃ¡ Ã© uma boa pessoa.",
                            inadequacy: "Sentir-se inadequado tambÃ©m vem de querer crescer. EstÃ¡ bem nÃ£o ser perfeito. O processo de tentar em si estÃ¡ fazendo de vocÃª uma boa pessoa.",
                            shame: "Sentir vergonha significa que vocÃª tem padrÃµes melhores. NÃ£o atender a esses padrÃµes nÃ£o faz de vocÃª uma pessoa mÃ¡. Ter o desejo de continuar tentando Ã© suficiente.",
                            impostor: "Sentir-se falso Ã© a expressÃ£o do seu coraÃ§Ã£o de querer ser real. Apenas pessoas buscando autenticidade tÃªm essas preocupaÃ§Ãµes. Essa preocupaÃ§Ã£o em si prova sua autenticidade.",
                            perfectionism: "Sentir pressÃ£o para ser perfeito Ã© prova de que vocÃª Ã© uma pessoa responsÃ¡vel. Mas vocÃª Ã© valioso o suficiente mesmo sem ser perfeito. O processo de tentar Ã© mais importante.",
                            validation: "Querer reconhecimento Ã© natural. Mas o reconhecimento mais importante Ã© o auto-reconhecimento. VocÃª jÃ¡ Ã© uma pessoa digna de reconhecimento.",
                            anxiety: "Estar ansioso tambÃ©m Ã© prova de que vocÃª Ã© cuidadoso e responsÃ¡vel. A ansiedade Ã s vezes nos leva a melhores escolhas. NÃ£o negue esse sentimento.",
                            selfacceptance: "Ter o desejo de se aceitar Ã© em si um grande crescimento. Amar-se como vocÃª Ã© Ã© o inÃ­cio da verdadeira bondade.",
                            compassion: "Ter compaixÃ£o por si mesmo Ã© sÃ¡bio. AlguÃ©m que pode entender e perdoar a si mesmo Ã© uma boa pessoa que tambÃ©m pode entender outros.",
                            general: "Se perguntar se vocÃª Ã© uma boa pessoa Ã© em si prova de que vocÃª Ã©. Pessoas com problemas reais nem pensam sobre isso. VocÃª Ã© bom o suficiente."
                        }
                    };
                    
                    return responses[lang][emotion] || responses[lang]['general'];
                }
            },
            {
                name: "Growth", emoji: "ğŸŒ±",
                getResponse: (userInput, lang) => {
                    const emotion = analyzeEmotion(userInput);
                    
                    const responses = {
                        ko: {
                            selfdoubt: "ì˜ì‹¬ì€ ì„±ì¥ì˜ ì¶œë°œì ì´ì—ìš”. í™•ì‹ ë§Œ ìˆëŠ” ì‚¬ëŒì€ ë°œì „í•˜ì§€ ì•Šì•„ìš”. ë‹¹ì‹ ì˜ ì˜ì‹¬ì€ ë” ë‚˜ì€ ì‚¬ëŒì´ ë˜ê³  ì‹¶ë‹¤ëŠ” ì‹ í˜¸ì˜ˆìš”. ê·¸ ì—ë„ˆì§€ë¥¼ ì„±ì¥ìœ¼ë¡œ ë°”ê¿€ ìˆ˜ ìˆì–´ìš”.",
                            guilt: "ì£„ì±…ê°ì„ ì„±ì¥ì˜ ì—°ë£Œë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆì–´ìš”. ê³¼ê±°ì˜ ì‹¤ìˆ˜ì—ì„œ ë°°ìš´ êµí›ˆë“¤ì´ ë¯¸ë˜ì˜ ë‹¹ì‹ ì„ ë” í˜„ëª…í•˜ê²Œ ë§Œë“¤ì–´ì¤„ ê±°ì˜ˆìš”. ì™„ë²½í•˜ì§€ ì•Šì•˜ê¸°ì— ë” ì™„ì „í•´ì§ˆ ìˆ˜ ìˆì–´ìš”.",
                            inadequacy: "ë¶€ì¡±í•¨ì„ ì¸ì •í•˜ëŠ” ê²ƒì´ ì„±ì¥ì˜ ì²« ê±¸ìŒì´ì—ìš”. ëª¨ìë€ ë¶€ë¶„ì„ ì•Œì•„ì•¼ ì±„ìš¸ ìˆ˜ ìˆì–´ìš”. ì§€ê¸ˆì˜ ë¶€ì¡±í•¨ì€ ë¯¸ë˜ì˜ í’ìš”ë¡œì›€ì„ ìœ„í•œ ì¤€ë¹„ ê³¼ì •ì´ì—ìš”.",
                            shame: "ë¶€ë„ëŸ¬ì› ë˜ ê²½í—˜ë“¤ì´ ë‹¹ì‹ ì„ ë” ê²¸ì†í•˜ê³  ê³µê° ëŠ¥ë ¥ ìˆëŠ” ì‚¬ëŒìœ¼ë¡œ ë§Œë“¤ì—ˆì–´ìš”. ê·¸ ê²½í—˜ë“¤ ì—†ì´ëŠ” ì§€ê¸ˆì˜ ê¹Šì´ ìˆëŠ” ë‹¹ì‹ ì´ ë  ìˆ˜ ì—†ì—ˆì„ ê±°ì˜ˆìš”.",
                            impostor: "ì§„ì •ì„±ì— ëŒ€í•œ ê³ ë¯¼ì´ ìˆë‹¤ëŠ” ê±´ ë‹¹ì‹ ì´ ê³„ì† ì„±ì¥í•˜ê³  ìˆë‹¤ëŠ” ì¦ê±°ì˜ˆìš”. ì •ì²´ëœ ì‚¬ëŒì€ ì´ëŸ° ê³ ë¯¼ì„ í•˜ì§€ ì•Šì•„ìš”. ë³€í™”í•˜ëŠ” ê³¼ì •ì—ì„œ ëŠë¼ëŠ” ìì—°ìŠ¤ëŸ¬ìš´ ê°ì •ì´ì—ìš”.",
                            perfectionism: "ì™„ë²½ì£¼ì˜ëŠ” ë†’ì€ ê¸°ì¤€ì„ ê°€ì§„ ì¦ê±°ì˜ˆìš”. ê·¸ ê¸°ì¤€ì„ ì¡°ê¸ˆ ë‚®ì¶”ë©´ì„œë„ ê³„ì† ë°œì „í•´ë‚˜ê°ˆ ìˆ˜ ìˆì–´ìš”. ì™„ë²½í•˜ì§€ ì•Šì€ ê³¼ì • ì†ì—ì„œë„ ì„±ì¥ì€ ì¼ì–´ë‚˜ê³  ìˆì–´ìš”.",
                            validation: "ì™¸ë¶€ ì¸ì •ì„ êµ¬í•˜ëŠ” ë§ˆìŒì—ì„œ ë‚´ì  í™•ì‹ ìœ¼ë¡œ ë‚˜ì•„ê°€ëŠ” ê²ƒë„ ì„±ì¥ì´ì—ìš”. ë‹¤ë¥¸ ì‚¬ëŒì˜ í‰ê°€ë³´ë‹¤ ìì‹ ì˜ ì„±ì¥ì— ì§‘ì¤‘í•  ë•Œ ì§„ì •í•œ ë§Œì¡±ì„ ì–»ì„ ìˆ˜ ìˆì–´ìš”.",
                            anxiety: "ë¶ˆì•ˆì€ ë³€í™”ì˜ ì‹ í˜¸ì˜ˆìš”. ìƒˆë¡œìš´ ë‹¨ê³„ë¡œ ë„˜ì–´ê°ˆ ë•Œ ëŠë¼ëŠ” ìì—°ìŠ¤ëŸ¬ìš´ ê°ì •ì´ì—ìš”. ê·¸ ë¶ˆì•ˆì„ í†µê³¼í•˜ë©´ ë” ê°•í•´ì§„ ìì‹ ì„ ë§Œë‚  ìˆ˜ ìˆì–´ìš”.",
                            selfacceptance: "ìê¸° ìˆ˜ìš©ì€ ê°€ì¥ í° ì„±ì¥ì´ì—ìš”. ìì‹ ì„ ìˆëŠ” ê·¸ëŒ€ë¡œ ë°›ì•„ë“¤ì¼ ë•Œ ì§„ì •í•œ ë³€í™”ê°€ ì‹œì‘ë¼ìš”. ìŠ¤ìŠ¤ë¡œë¥¼ ì‚¬ë‘í•˜ëŠ” ë²•ì„ ë°°ìš°ê³  ìˆëŠ” ì¤‘ì´ì—ìš”.",
                            compassion: "ìê¸° ìë¹„ëŠ” ì„±ì¥ì„ ìœ„í•œ ìµœê³ ì˜ í† ì–‘ì´ì—ìš”. ìì‹ ì—ê²Œ ì¹œì ˆí•  ë•Œ ë” ìš©ê¸° ìˆê²Œ ë„ì „í•˜ê³  ì‹¤íŒ¨í•´ë„ ë‹¤ì‹œ ì¼ì–´ì„¤ ìˆ˜ ìˆì–´ìš”.",
                            general: "ëª¨ë“  ê³ ë¯¼ê³¼ ì˜ë¬¸ë“¤ì´ ë‹¹ì‹ ì„ ë” ê¹Šì´ ìˆëŠ” ì‚¬ëŒìœ¼ë¡œ ë§Œë“¤ì–´ê°€ê³  ìˆì–´ìš”. ì‰¬ìš´ ê¸¸ì„ íƒí•˜ì§€ ì•Šê³  ìŠ¤ìŠ¤ë¡œë¥¼ ëŒì•„ë³´ëŠ” ìš©ê¸°ê°€ ì§„ì •í•œ ì„±ì¥ì˜ ì¦ê±°ì˜ˆìš”."
                        },
                        en: {
                            selfdoubt: "Doubt is the starting point of growth. People with only certainty don't develop. Your doubt is a signal of wanting to be better. You can transform that energy into growth.",
                            guilt: "You can use guilt as fuel for growth. Lessons learned from past mistakes will make future you wiser. Because you weren't perfect, you can become more complete.",
                            inadequacy: "Acknowledging inadequacy is the first step of growth. You need to know what's lacking to fill it. Current inadequacy is preparation for future abundance.",
                            shame: "Shameful experiences made you more humble and empathetic. Without those experiences, you couldn't have become the deep person you are now.",
                            impostor: "Having concerns about authenticity is proof you're continuously growing. Stagnant people don't have these concerns. It's a natural feeling in the process of change.",
                            perfectionism: "Perfectionism is proof of having high standards. You can keep developing while lowering those standards a bit. Growth happens even in imperfect processes.",
                            validation: "Moving from seeking external validation to internal confidence is also growth. You can find true satisfaction when focusing on your growth rather than others' evaluations.",
                            anxiety: "Anxiety is a signal of change. It's a natural feeling when moving to a new stage. Passing through that anxiety will help you meet a stronger self.",
                            selfacceptance: "Self-acceptance is the greatest growth. True change begins when you accept yourself as you are. You're learning how to love yourself.",
                            compassion: "Self-compassion is the best soil for growth. When you're kind to yourself, you can challenge more courageously and rise again even after failure.",
                            general: "All your concerns and questions are making you a deeper person. The courage to reflect on yourself instead of taking easy paths is proof of true growth."
                        },
                        pt: {
                            selfdoubt: "A dÃºvida Ã© o ponto de partida do crescimento. Pessoas com apenas certeza nÃ£o se desenvolvem. Sua dÃºvida Ã© um sinal de querer ser melhor. VocÃª pode transformar essa energia em crescimento.",
                            guilt: "VocÃª pode usar a culpa como combustÃ­vel para crescimento. LiÃ§Ãµes aprendidas de erros passados tornarÃ£o o futuro vocÃª mais sÃ¡bio. Porque vocÃª nÃ£o era perfeito, pode se tornar mais completo.",
                            inadequacy: "Reconhecer inadequaÃ§Ã£o Ã© o primeiro passo do crescimento. VocÃª precisa saber o que estÃ¡ faltando para preenchÃª-lo. A inadequaÃ§Ã£o atual Ã© preparaÃ§Ã£o para abundÃ¢ncia futura.",
                            shame: "ExperiÃªncias vergonhosas fizeram de vocÃª uma pessoa mais humilde e empÃ¡tica. Sem essas experiÃªncias, vocÃª nÃ£o poderia ter se tornado a pessoa profunda que Ã© agora.",
                            impostor: "Ter preocupaÃ§Ãµes sobre autenticidade Ã© prova de que vocÃª estÃ¡ crescendo continuamente. Pessoas estagnadas nÃ£o tÃªm essas preocupaÃ§Ãµes. Ã‰ um sentimento natural no processo de mudanÃ§a.",
                            perfectionism: "Perfeccionismo Ã© prova de ter padrÃµes altos. VocÃª pode continuar se desenvolvendo enquanto abaixa esses padrÃµes um pouco. O crescimento acontece mesmo em processos imperfeitos.",
                            validation: "Mover-se de buscar validaÃ§Ã£o externa para confianÃ§a interna tambÃ©m Ã© crescimento. VocÃª pode encontrar verdadeira satisfaÃ§Ã£o quando foca no seu crescimento ao invÃ©s das avaliaÃ§Ãµes dos outros.",
                            anxiety: "Ansiedade Ã© um sinal de mudanÃ§a. Ã‰ um sentimento natural ao mover-se para um novo estÃ¡gio. Passar por essa ansiedade ajudarÃ¡ vocÃª a encontrar um eu mais forte.",
                            selfacceptance: "Auto-aceitaÃ§Ã£o Ã© o maior crescimento. MudanÃ§a verdadeira comeÃ§a quando vocÃª se aceita como Ã©. VocÃª estÃ¡ aprendendo como se amar.",
                            compassion: "Auto-compaixÃ£o Ã© o melhor solo para crescimento. Quando vocÃª Ã© gentil consigo mesmo, pode desafiar mais corajosamente e se erguer novamente mesmo apÃ³s falha.",
                            general: "Todas as suas preocupaÃ§Ãµes e questÃµes estÃ£o fazendo de vocÃª uma pessoa mais profunda. A coragem de refletir sobre si mesmo ao invÃ©s de tomar caminhos fÃ¡ceis Ã© prova de verdadeiro crescimento."
                        }
                    };
                    
                    return responses[lang][emotion] || responses[lang]['general'];
                }
            },
            {
                name: "Wisdom", emoji: "ğŸ¦‰",
                getResponse: (userInput, lang) => {
                    const emotion = analyzeEmotion(userInput);
                    
                    const responses = {
                        ko: {
                            selfdoubt: "ì˜ì‹¬ì€ ì§€í˜œë¡œìš´ ì‚¬ëŒì˜ íŠ¹ì§•ì´ì—ìš”. ì†Œí¬ë¼í…ŒìŠ¤ë„ 'ë‚˜ëŠ” ë‚´ê°€ ëª¨ë¥¸ë‹¤ëŠ” ê²ƒì„ ì•ˆë‹¤'ê³  í–ˆì£ . í™•ì‹  ì—†ìŒì´ ë•Œë¡œëŠ” ê°€ì¥ í˜„ëª…í•œ ìì„¸ì¼ ìˆ˜ ìˆì–´ìš”. ì—´ë¦° ë§ˆìŒìœ¼ë¡œ ê³„ì† ë°°ì›Œê°€ì„¸ìš”.",
                            guilt: "ì£„ì±…ê°ì€ ë„ë•ì  ë‚˜ì¹¨ë°˜ì´ ì‚´ì•„ìˆë‹¤ëŠ” ì¦ê±°ì˜ˆìš”. ê·¸ ê°ì •ì„ í†µí•´ ë” ë‚˜ì€ íŒë‹¨ì„ í•  ìˆ˜ ìˆê²Œ ë¼ìš”. ì™„ë²½í•œ ì‚¬ëŒì€ ì—†ì§€ë§Œ, ë°˜ì„±í•  ì¤„ ì•„ëŠ” ì‚¬ëŒì€ ì§€í˜œë¡œìš´ ì‚¬ëŒì´ì—ìš”.",
                            inadequacy: "ë¶€ì¡±í•¨ì„ ì•„ëŠ” ê²ƒì´ ì§„ì •í•œ ì§€í˜œì˜ ì‹œì‘ì´ì—ìš”. ëª¨ë“  ê²ƒì„ ì•ˆë‹¤ê³  ìƒê°í•˜ëŠ” ìˆœê°„ ì„±ì¥ì´ ë©ˆì¶°ìš”. ê²¸ì†í•œ ë§ˆìŒìœ¼ë¡œ ê³„ì† ë°°ì›Œë‚˜ê°€ëŠ” ë‹¹ì‹ ì´ í˜„ëª…í•œ ì‚¬ëŒì´ì—ìš”.",
                            shame: "ë¶€ë„ëŸ¬ì›€ì„ ëŠë‚„ ì¤„ ì•„ëŠ” ê²ƒì€ ë‚´ì  ê¸°ì¤€ì´ ìˆë‹¤ëŠ” ëœ»ì´ì—ìš”. ê·¸ ê¸°ì¤€ì´ ë‹¹ì‹ ì„ ë” ë‚˜ì€ ë°©í–¥ìœ¼ë¡œ ì´ëŒì–´ì£¼ê³  ìˆì–´ìš”. ë¶€ë„ëŸ¬ì›€ë„ ì„±ì¥ì„ ìœ„í•œ ê°ì •ì˜ ì„ ë¬¼ì´ì—ìš”.",
                            impostor: "ì§„ì •ì„±ì— ëŒ€í•œ ê³ ë¯¼ì€ ì² í•™ìë“¤ì´ ìˆ˜ì²œ ë…„ê°„ í•´ì˜¨ ì§ˆë¬¸ì´ì—ìš”. 'ë‚˜ëŠ” ëˆ„êµ¬ì¸ê°€?'ë¼ëŠ” ì§ˆë¬¸ì„ ë˜ì§€ëŠ” ê²ƒ ìì²´ê°€ ê¹Šì´ ìˆëŠ” ì‚¶ì„ ì‚¬ëŠ” ì¦ê±°ì˜ˆìš”.",
                            perfectionism: "ì™„ë²½í•¨ì— ëŒ€í•œ ìš•êµ¬ëŠ” íƒì›”í•¨ì„ ì¶”êµ¬í•˜ëŠ” ë§ˆìŒì—ì„œ ë‚˜ì™€ìš”. ë‹¤ë§Œ ê·¸ ê¸°ì¤€ì„ í˜„ì‹¤ì ìœ¼ë¡œ ì¡°ì •í•˜ëŠ” ì§€í˜œê°€ í•„ìš”í•´ìš”. ì™„ë²½ë³´ë‹¤ëŠ” ì§„ì „ì— ì§‘ì¤‘í•˜ëŠ” ê²ƒì´ í˜„ëª…í•´ìš”.",
                            validation: "íƒ€ì¸ì˜ ì¸ì •ì„ êµ¬í•˜ëŠ” ê²ƒì€ ì¸ê°„ì˜ ê¸°ë³¸ ìš•êµ¬ì˜ˆìš”. í•˜ì§€ë§Œ ì§„ì •í•œ í‰ê°€ëŠ” ë‚´ë©´ì—ì„œ ë‚˜ì™€ì•¼ í•´ìš”. ì™¸ë¶€ í‰ê°€ì™€ ë‚´ì  í™•ì‹ ì˜ ê· í˜•ì„ ì°¾ëŠ” ê²ƒì´ ì§€í˜œì˜ˆìš”.",
                            anxiety: "ë¶ˆì•ˆì€ ë¯¸ë˜ë¥¼ ìƒê°í•  ì¤„ ì•„ëŠ” ì§€ì„±ì˜ ì¦ê±°ì˜ˆìš”. ë‹¤ë§Œ ê·¸ ë¶ˆì•ˆì„ ê±´ì„¤ì ìœ¼ë¡œ í™œìš©í•˜ëŠ” ë²•ì„ ë°°ì›Œì•¼ í•´ìš”. ë¶ˆì•ˆì„ ëŒ€ë¹„ë¡œ ë°”ê¾¸ëŠ” ê²ƒì´ í˜„ëª…í•œ ë°©ë²•ì´ì—ìš”.",
                            selfacceptance: "ìê¸° ìˆ˜ìš©ì€ ê°€ì¥ ì–´ë ¤ìš°ë©´ì„œë„ ê°€ì¥ ì¤‘ìš”í•œ ì§€í˜œì˜ˆìš”. ìì‹ ì˜ í•œê³„ë¥¼ ì¸ì •í•˜ë©´ì„œë„ ê°€ëŠ¥ì„±ì„ í¬ê¸°í•˜ì§€ ì•ŠëŠ” ê· í˜•ì¡íŒ ì‹œê°ì´ í•„ìš”í•´ìš”.",
                            compassion: "ìê¸° ìë¹„ëŠ” ë™ì–‘ ì² í•™ì—ì„œ ë§í•˜ëŠ” 'ìì• 'ì™€ ê°™ì€ ê°œë…ì´ì—ìš”. ìì‹ ì—ê²Œ ì¹œì ˆí•  ì¤„ ì•„ëŠ” ì‚¬ëŒì´ ë‹¤ë¥¸ ì‚¬ëŒì—ê²Œë„ ì§„ì •í•œ ì¹œì ˆì„ ë² í’€ ìˆ˜ ìˆì–´ìš”.",
                            general: "ìŠ¤ìŠ¤ë¡œë¥¼ ì„±ì°°í•˜ëŠ” ëŠ¥ë ¥ì´ì•¼ë§ë¡œ ì¸ê°„ì„ ì¸ê°„ë‹µê²Œ ë§Œë“œëŠ” ê°€ì¥ í° íŠ¹ì§•ì´ì—ìš”. ê·¸ ê³ ë¯¼í•˜ëŠ” ë§ˆìŒ ìì²´ê°€ ë‹¹ì‹ ì˜ ì¸ê°„ë‹¤ì›€ì„ ì¦ëª…í•˜ê³  ìˆì–´ìš”."
                        },
                        en: {
                            selfdoubt: "Doubt is a characteristic of wise people. Socrates also said 'I know that I know nothing.' Sometimes uncertainty can be the wisest attitude. Keep learning with an open mind.",
                            guilt: "Guilt is proof that your moral compass is alive. Through that emotion, you can make better judgments. No one is perfect, but someone who can reflect is wise.",
                            inadequacy: "Knowing inadequacy is the beginning of true wisdom. Growth stops the moment you think you know everything. You're wise for continuing to learn with humility.",
                            shame: "Being able to feel shame means you have internal standards. Those standards are leading you toward better directions. Shame is also an emotional gift for growth.",
                            impostor: "Concerns about authenticity are questions philosophers have asked for thousands of years. Asking 'Who am I?' is itself proof of living a deep life.",
                            perfectionism: "The desire for perfection comes from pursuing excellence. However, you need wisdom to adjust those standards realistically. Focusing on progress rather than perfection is wise.",
                            validation: "Seeking others' recognition is a basic human need. But true evaluation must come from within. Finding balance between external evaluation and internal confidence is wisdom.",
                            anxiety: "Anxiety is proof of intelligence that can think about the future. However, you need to learn how to use that anxiety constructively. Turning anxiety into preparation is a wise method.",
                            selfacceptance: "Self-acceptance is the most difficult yet most important wisdom. You need a balanced perspective that acknowledges your limitations while not giving up on possibilities.",
                            compassion: "Self-compassion is the same concept as 'loving-kindness' in Eastern philosophy. Someone who knows how to be kind to themselves can show true kindness to others.",
                            general: "The ability to reflect on yourself is the greatest characteristic that makes humans human. That contemplative heart itself proves your humanity."
                        },
                        pt: {
                            selfdoubt: "A dÃºvida Ã© uma caracterÃ­stica de pessoas sÃ¡bias. SÃ³crates tambÃ©m disse 'Sei que nada sei.' Ã€s vezes a incerteza pode ser a atitude mais sÃ¡bia. Continue aprendendo com mente aberta.",
                            guilt: "Culpa Ã© prova de que sua bÃºssola moral estÃ¡ viva. AtravÃ©s dessa emoÃ§Ã£o, vocÃª pode fazer melhores julgamentos. NinguÃ©m Ã© perfeito, mas alguÃ©m que pode refletir Ã© sÃ¡bio.",
                            inadequacy: "Conhecer inadequaÃ§Ã£o Ã© o inÃ­cio da verdadeira sabedoria. O crescimento para no momento que vocÃª pensa que sabe tudo. VocÃª Ã© sÃ¡bio por continuar aprendendo com humildade.",
                            shame: "Ser capaz de sentir vergonha significa que vocÃª tem padrÃµes internos. Esses padrÃµes estÃ£o levando vocÃª para direÃ§Ãµes melhores. Vergonha tambÃ©m Ã© um presente emocional para crescimento.",
                            impostor: "PreocupaÃ§Ãµes sobre autenticidade sÃ£o questÃµes que filÃ³sofos fazem hÃ¡ milhares de anos. Perguntar 'Quem sou eu?' Ã© em si prova de viver uma vida profunda.",
                            perfectionism: "O desejo de perfeiÃ§Ã£o vem de buscar excelÃªncia. No entanto, vocÃª precisa de sabedoria para ajustar esses padrÃµes realisticamente. Focar no progresso ao invÃ©s de perfeiÃ§Ã£o Ã© sÃ¡bio.",
                            validation: "Buscar reconhecimento dos outros Ã© uma necessidade humana bÃ¡sica. Mas avaliaÃ§Ã£o verdadeira deve vir de dentro. Encontrar equilÃ­brio entre avaliaÃ§Ã£o externa e confianÃ§a interna Ã© sabedoria.",
                            anxiety: "Ansiedade Ã© prova de inteligÃªncia que pode pensar sobre o futuro. No entanto, vocÃª precisa aprender como usar essa ansiedade construtivamente. Transformar ansiedade em preparaÃ§Ã£o Ã© um mÃ©todo sÃ¡bio.",
                            selfacceptance: "Auto-aceitaÃ§Ã£o Ã© a sabedoria mais difÃ­cil e mais importante. VocÃª precisa de uma perspectiva equilibrada que reconhece suas limitaÃ§Ãµes enquanto nÃ£o desiste das possibilidades.",
                            compassion: "Auto-compaixÃ£o Ã© o mesmo conceito que 'bondade amorosa' na filosofia oriental. AlguÃ©m que sabe como ser gentil consigo mesmo pode mostrar verdadeira gentileza aos outros.",
                            general: "A capacidade de refletir sobre si mesmo Ã© a maior caracterÃ­stica que torna humanos humanos. Esse coraÃ§Ã£o contemplativo em si prova sua humanidade."
                        }
                    };
                    
                    return responses[lang][emotion] || responses[lang]['general'];
                }
            }
        ];
        
        let currentLanguage = 'en'; // ê¸°ë³¸ ì–¸ì–´ë¥¼ ì˜ì–´ë¡œ ì„¤ì •
        let currentUser = null;
        let userResponse = '';
        let journeyStarted = false;
        let currentTypingElement = null;
        let typingIntervals = [];
        
        // ============ ì—¬ì • ì´ˆê¸°í™” í•¨ìˆ˜ ============
        
        function resetJourney() {
            console.log('=== ì—¬ì • ì´ˆê¸°í™” ì‹œì‘ ===');
            
            // 1. ëª¨ë“  íƒ€ì´í•‘ íš¨ê³¼ ì™„ì „ ì •ë¦¬
            clearAllTypingEffects();
            
            // ì¶”ê°€ ì•ˆì „ì¥ì¹˜ - ëª¨ë“  timer ì •ë¦¬
            for (let i = 1; i < 99999; i++) window.clearInterval(i);
            for (let i = 1; i < 99999; i++) window.clearTimeout(i);
            
            // 2. ëª¨ë“  ì½˜í…ì¸  ì„¹ì…˜ ì™„ì „ ì´ˆê¸°í™”
            const sectionsToReset = [
                'portalIntroSection',
                'characterResponsesSection', 
                'lightMessageSection',
                'portalQuestionSection',
                'userInputSection',
                'userReactionsSection',
                'continueSection'
            ];
            
            sectionsToReset.forEach(sectionId => {
                const section = document.getElementById(sectionId);
                if (section) {
                    section.classList.remove('show');
                    section.style.opacity = '0';
                    
                    if (sectionId === 'characterResponsesSection' || 
                        sectionId === 'userInputSection' || 
                        sectionId === 'userReactionsSection') {
                        section.innerHTML = '';
                    } else {
                        const textElements = section.querySelectorAll('.portal-intro, .light-message, .portal-question, .continue-text');
                        textElements.forEach(el => {
                            el.innerHTML = '';
                            el.textContent = '';
                        });
                    }
                }
            });
            
            // 3. íŠ¹ì • ìš”ì†Œë“¤ ê°œë³„ ì´ˆê¸°í™”
            const portalIntro = document.getElementById('portalIntro');
            const lightMessage = document.getElementById('lightMessage');
            const portalQuestion = document.getElementById('portalQuestion');
            const continueText = document.getElementById('continueText');
            
            if (portalIntro) portalIntro.innerHTML = '';
            if (lightMessage) lightMessage.innerHTML = '';
            if (portalQuestion) portalQuestion.innerHTML = '';
            if (continueText) continueText.innerHTML = '';
            
            // 4. í…ìŠ¤íŠ¸ì˜ì—­ ì™„ì „ ì´ˆê¸°í™”
            const userTextarea = document.getElementById('userTextarea');
            if (userTextarea) {
                userTextarea.disabled = false;
                userTextarea.value = '';
                userTextarea.style.height = 'auto';
                userTextarea.placeholder = translations[currentLanguage].inputPlaceholder;
            }
            
            // 5. ìŠ¤í¬ë¡¤ ìœ„ì¹˜ ì´ˆê¸°í™”
            const mainContent = document.getElementById('mainContent');
            if (mainContent) {
                mainContent.scrollTop = 0;
            }
            
            // 6. ìƒíƒœ ë³€ìˆ˜ ì™„ì „ ì´ˆê¸°í™”
            userResponse = '';
            currentTypingElement = null;
            
            console.log('=== ì—¬ì • ì´ˆê¸°í™” ì™„ë£Œ ===');
        }
        
        // ============ ê°œì„ ëœ ì–¸ì–´ ë³€ê²½ í•¨ìˆ˜ ============
        
        function changeLanguage(lang) {
            if (!translations[lang]) {
                console.error('ì§€ì›í•˜ì§€ ì•ŠëŠ” ì–¸ì–´:', lang);
                return;
            }
            
            if (currentLanguage === lang) {
                return;
            }
            
            if (journeyStarted) {
                const confirmMessage = translations[currentLanguage].languageChangeConfirm;
                const shouldRestart = confirm(confirmMessage);
                
                if (!shouldRestart) {
                    return;
                }
            }
            
            const previousLanguage = currentLanguage;
            currentLanguage = lang;
            
            console.log(`ì–¸ì–´ ë³€ê²½: ${previousLanguage} â†’ ${currentLanguage}`);
            
            if (journeyStarted) {
                resetJourney();
            }
            
            updateLanguageButtons(lang);
            updateStaticTranslations(lang);
            
            if (journeyStarted) {
                setTimeout(() => {
                    console.log(`ìƒˆë¡œìš´ ì–¸ì–´(${currentLanguage})ë¡œ ì—¬ì • ì¬ì‹œì‘`);
                    startPortalSequence();
                }, 1000);
            }
        }
        
        // ============ UI ì—…ë°ì´íŠ¸ í•¨ìˆ˜ë“¤ ============
        
        function updateLanguageButtons(lang) {
            document.querySelectorAll('.lang-btn').forEach(btn => {
                btn.classList.remove('active');
                if (btn.dataset.lang === lang) {
                    btn.classList.add('active');
                }
            });
        }
        
        function updateStaticTranslations(lang) {
            // ê°œë³„ ìš”ì†Œ ì—…ë°ì´íŠ¸
            const elements = [
                'logoSubtitle',
                'portalMainTitle', 
                'portalSubtitle',
                'lightTitle',
                'continueYesBtn',
                'continueNoBtn'
            ];
            
            elements.forEach(elementId => {
                const element = document.getElementById(elementId);
                if (element && translations[lang]) {
                    const key = elementId.replace('Btn', 'Button').replace('Subtitle', 'Subtitle');
                    let translationKey = key;
                    
                    const keyMapping = {
                        'logoSubtitle': 'logoSubtitle',
                        'portalMainTitle': 'portalMainTitle',
                        'portalSubtitle': 'portalSubtitle',
                        'lightTitle': 'lightTitle',
                        'continueYesButton': 'continueYes',
                        'continueNoButton': 'continueNo'
                    };
                    
                    translationKey = keyMapping[key] || key;
                    
                    if (translations[lang][translationKey]) {
                        element.textContent = translations[lang][translationKey];
                    }
                }
            });
            
            // placeholder ì—…ë°ì´íŠ¸
            const textarea = document.getElementById('userTextarea');
            if (textarea) textarea.placeholder = translations[lang].inputPlaceholder;
        }
        
        // ============ ê°œì„ ëœ íƒ€ì´í•‘ íš¨ê³¼ + ìŠ¤í¬ë¡¤ ì¶”ì  ì‹œìŠ¤í…œ ============
        
        function typewriterEffect(element, text, speed = 80) {
            return new Promise((resolve) => {
                if (currentTypingElement) {
                    currentTypingElement.classList.remove('typing-cursor');
                }
                
                let i = 0;
                element.innerHTML = '';
                element.classList.add('typing-cursor');
                currentTypingElement = element;
                
                const typingInterval = setInterval(() => {
                    if (!document.contains(element)) {
                        clearInterval(typingInterval);
                        resolve();
                        return;
                    }
                    
                    element.innerHTML += text.charAt(i);
                    i++;
                    
                    if (i % 10 === 0) {
                        scrollToFollowTyping(element);
                    }
                    
                    if (i === text.length) {
                        clearInterval(typingInterval);
                        element.classList.remove('typing-cursor');
                        currentTypingElement = null;
                        
                        setTimeout(() => {
                            if (document.contains(element)) {
                                scrollToFollowTyping(element);
                            }
                        }, 200);
                        
                        resolve();
                    }
                }, speed);
                
                typingIntervals.push(typingInterval);
            });
        }
        
        function clearAllTypingEffects() {
            typingIntervals.forEach(interval => clearInterval(interval));
            typingIntervals = [];
            
            if (currentTypingElement) {
                currentTypingElement.classList.remove('typing-cursor');
                currentTypingElement = null;
            }
        }
        
        // ============ ìŠ¤ë§ˆíŠ¸ ìŠ¤í¬ë¡¤ ì‹œìŠ¤í…œ ============
        
        function scrollToFollowTyping(element) {
            const mainContent = document.getElementById('mainContent');
            const elementRect = element.getBoundingClientRect();
            const containerRect = mainContent.getBoundingClientRect();
            
            if (elementRect.bottom > containerRect.bottom - 150) {
                const scrollTop = mainContent.scrollTop;
                const elementOffsetTop = element.offsetTop;
                const targetScroll = elementOffsetTop - (containerRect.height / 2);
                
                mainContent.scrollTo({
                    top: Math.max(0, targetScroll),
                    behavior: 'smooth'
                });
            }
        }
        
        function scrollToElement(element) {
            const mainContent = document.getElementById('mainContent');
            const elementOffsetTop = element.offsetTop;
            const containerHeight = mainContent.clientHeight;
            const targetScroll = elementOffsetTop - (containerHeight / 3);
            
            mainContent.scrollTo({
                top: Math.max(0, targetScroll),
                behavior: 'smooth'
            });
        }
        
        // ============ ì–¸ì–´ ë²„íŠ¼ ì´ë²¤íŠ¸ ì„¤ì • ============
        
        function setupLanguageButtons() {
            const langButtons = document.querySelectorAll('.lang-btn');
            
            langButtons.forEach(btn => {
                btn.addEventListener('click', function(e) {
                    e.preventDefault();
                    const newLang = this.dataset.lang;
                    changeLanguage(newLang);
                });
            });
        }
        
        // ============ ë©”ì¸ ì—¬ì • ì‹œìŠ¤í…œ ============
        
        function initializeTemarix() {
            console.log('=== Temarix Portal 08 ì´ˆê¸°í™” ì‹œì‘ ===');
            
            setupLanguageButtons();
            setupTextareaAutoResize();
            setupInputEvents();
            
            journeyStarted = true;
            
            setTimeout(() => {
                startPortalSequence();
            }, 1000);
        }
        
        function startPortalSequence() {
            setTimeout(() => {
                showIntro();
            }, 1000);
        }
        
        // ============ ì—¬ì • ë‹¨ê³„ë“¤ ============
        
        async function showIntro() {
            const introSection = document.getElementById('portalIntroSection');
            const introElement = document.getElementById('portalIntro');
            
            introSection.classList.add('show');
            
            const introText = translations[currentLanguage].portalIntro;
            await typewriterEffect(introElement, introText, 60);
            
            setTimeout(() => {
                showCharacterResponses();
            }, 2000);
        }
        
        async function showCharacterResponses() {
            const responseSection = document.getElementById('characterResponsesSection');
            
            responseSection.classList.add('show');
            
            for (let i = 0; i < characters.length; i++) {
                const char = characters[i];
                const responseDiv = document.createElement('div');
                responseDiv.className = 'character-response';
                
                const nameDiv = document.createElement('div');
                nameDiv.className = 'character-name';
                nameDiv.textContent = `${char.emoji} ${char.name}`;
                
                const dialogueDiv = document.createElement('div');
                dialogueDiv.className = 'character-dialogue';
                
                responseDiv.appendChild(nameDiv);
                responseDiv.appendChild(dialogueDiv);
                responseSection.appendChild(responseDiv);
                
                responseDiv.style.opacity = '1';
                
                const dialogueText = translations[currentLanguage][char.key];
                await typewriterEffect(dialogueDiv, dialogueText, 70);
                
                if (i < characters.length - 1) {
                    await new Promise(resolve => setTimeout(resolve, 1500));
                }
            }
            
            setTimeout(() => {
                showLightMessage();
            }, 2000);
        }
        
        async function showLightMessage() {
            const lightSection = document.getElementById('lightMessageSection');
            const lightMessageEl = document.getElementById('lightMessage');
            
            lightSection.classList.add('show');
            
            const lightText = translations[currentLanguage].lightMessage;
            await typewriterEffect(lightMessageEl, lightText, 60);
            
            setTimeout(() => {
                showQuestion();
            }, 2000);
        }
        
        async function showQuestion() {
            const questionSection = document.getElementById('portalQuestionSection');
            const questionEl = document.getElementById('portalQuestion');
            
            questionSection.classList.add('show');
            
            const questionText = translations[currentLanguage].portalQuestion;
            await typewriterEffect(questionEl, questionText, 50);
            
            setTimeout(() => {
                enableUserInput();
            }, 1500);
        }
        
        // ============ ì‚¬ìš©ì ì…ë ¥ ì‹œìŠ¤í…œ ============
        
        function setupInputEvents() {
            const userTextarea = document.getElementById('userTextarea');
            
            userTextarea.addEventListener('keydown', handleTextareaKeydown);
            
            document.getElementById('continueYesBtn').addEventListener('click', function() {
                processContinue('Y');
            });
            
            document.getElementById('continueNoBtn').addEventListener('click', function() {
                processContinue('N');
            });
        }
        
        function handleTextareaKeydown(e) {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                const inputValue = this.value.trim();
                
                if (inputValue) {
                    processUserInput(inputValue);
                }
            }
        }
        
        function setupTextareaAutoResize() {
            const textarea = document.getElementById('userTextarea');
            
            textarea.addEventListener('input', function() {
                this.style.height = 'auto';
                this.style.height = Math.min(this.scrollHeight, 96) + 'px';
            });
        }
        
        async function processUserInput(inputText) {
            userResponse = inputText;
            disableUserInput();
            showUserResponse(inputText);
            
            setTimeout(() => {
                showUserReactions(inputText);
            }, 1000);
        }
        
        function disableUserInput() {
            const userTextarea = document.getElementById('userTextarea');
            userTextarea.disabled = true;
            userTextarea.value = '';
            userTextarea.style.height = 'auto';
            
            userTextarea.placeholder = translations[currentLanguage].waitingMessage;
        }
        
        function enableUserInput() {
            const userTextarea = document.getElementById('userTextarea');
            userTextarea.disabled = false;
            userTextarea.placeholder = translations[currentLanguage].inputPlaceholder;
            
            setTimeout(() => {
                userTextarea.focus();
            }, 100);
        }
        
        function showUserResponse(text) {
            const inputSection = document.getElementById('userInputSection');
            const userDiv = document.createElement('div');
            userDiv.className = 'user-response';
            const youLabel = translations[currentLanguage].youLabel;
            userDiv.innerHTML = `<strong>${youLabel}:</strong> "${text}"`;
            inputSection.appendChild(userDiv);
            inputSection.classList.add('show');
            
            setTimeout(() => {
                scrollToElement(inputSection);
            }, 100);
        }
        
        async function showUserReactions(userInput) {
            const reactionsSection = document.getElementById('userReactionsSection');
            
            reactionsSection.classList.add('show');
            
            for (let i = 0; i < responseCharacters.length; i++) {
                const char = responseCharacters[i];
                const responseDiv = document.createElement('div');
                responseDiv.className = 'character-response';
                
                const nameDiv = document.createElement('div');
                nameDiv.className = 'character-name';
                nameDiv.textContent = `${char.emoji} ${char.name}`;
                
                const dialogueDiv = document.createElement('div');
                dialogueDiv.className = 'character-dialogue';
                
                responseDiv.appendChild(nameDiv);
                responseDiv.appendChild(dialogueDiv);
                reactionsSection.appendChild(responseDiv);
                
                responseDiv.style.opacity = '1';
                
                const reactionText = char.getResponse(userInput, currentLanguage);
                await typewriterEffect(dialogueDiv, reactionText, 70);
                
                if (i < responseCharacters.length - 1) {
                    await new Promise(resolve => setTimeout(resolve, 1500));
                }
            }
            
            setTimeout(() => {
                showContinueOption();
            }, 2000);
        }
        
        async function showContinueOption() {
            const continueSection = document.getElementById('continueSection');
            const continueText = document.getElementById('continueText');
            
            continueSection.classList.add('show');
            
            const questionText = translations[currentLanguage].continueText;
            await typewriterEffect(continueText, questionText, 50);
            
            setTimeout(() => {
                scrollToElement(continueSection);
            }, 500);
        }
        
        function processContinue(input) {
            if (input === 'Y') {
                const message = currentLanguage === 'ko' ? 
                    'Portal 09ê°€ ê³§ ì¤€ë¹„ë©ë‹ˆë‹¤. ê³„ì†í•´ì„œ ë” ê¹Šì€ ê°ì •ì˜ ì—¬ì •ì´ ì´ì–´ì§‘ë‹ˆë‹¤.' :
                    currentLanguage === 'en' ? 
                    'Portal 09 will be ready soon. The journey into deeper emotions continues.' :
                    'Portal 09 estarÃ¡ pronto em breve. A jornada para emoÃ§Ãµes mais profundas continua.';
                alert(message);
            } else if (input === 'N') {
                const message = currentLanguage === 'ko' ? 
                    'ì—¬ì •ì´ ì¼ì‹œ ì¤‘ì§€ë˜ì—ˆìŠµë‹ˆë‹¤. ì–¸ì œë“  ë‹¤ì‹œ ëŒì•„ì™€ ê³„ì†í•˜ì„¸ìš”.' :
                    currentLanguage === 'en' ? 
                    'The journey has been paused. Come back and continue anytime.' :
                    'A jornada foi pausada. Volte e continue a qualquer momento.';
                alert(message);
            }
        }
        
        // ============ ì´ˆê¸°í™” ============
        
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Temarix V2 Portal 08 DOM ë¡œë“œ ì™„ë£Œ');
            
            // ìë™ ë¡œê·¸ì¸ ì²˜ë¦¬ (ë¡œê·¸ì¸ ëª¨ë‹¬ ì œê±°)
            currentUser = { 
                uid: 'user-auto-' + Date.now(),
                email: 'auto@temarix.com'
            };
            
            memoryStorage.mockUser = currentUser;
            
            updateStaticTranslations(currentLanguage);
            initializeTemarix();
        });
    </script>
</body>
</html>