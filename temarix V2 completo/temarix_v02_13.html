<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Temarix V2 - Portal 13: The Sense of 'Being Me' That I Lost</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            background: #000;
            color: #fff;
            font-family: 'Courier New', monospace;
            height: 100vh;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            word-break: keep-all;
            overflow-wrap: break-word;
        }
        
        /* ìƒë‹¨ í—¤ë” */
        .header-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 25px 30px;
            background: #000;
            border-bottom: 1px solid #333;
            position: relative;
            z-index: 100;
            height: 80px;
            flex-shrink: 0;
        }
        
        .logo-section {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
        }
        
        .logo-title {
            font-size: 26px;
            font-weight: bold;
            color: #fff;
            margin-bottom: 4px;
            letter-spacing: 1px;
        }
        
        .logo-subtitle {
            font-size: 15px;
            color: #ccc;
            letter-spacing: 1.5px;
        }
        
        .portal-header-title {
            text-align: center;
            flex: 1;
            margin: 0 20px;
        }
        
        .portal-main-title {
            font-size: 28px;
            color: #fff;
            margin-bottom: 8px;
            font-weight: normal;
            letter-spacing: 1px;
        }
        
        .portal-subtitle {
            font-size: 18px;
            color: #ccc;
            letter-spacing: 1.5px;
        }
        
        /* ì–¸ì–´ ë²„íŠ¼ 3ê°œ */
        .header-right {
            display: flex;
            align-items: center;
        }
        
        .language-buttons {
            display: flex;
            gap: 10px;
        }
        
        .lang-btn {
            background: #444;
            color: #fff;
            border: none;
            padding: 10px 18px;
            font-size: 14px;
            font-family: 'Courier New', monospace;
            cursor: pointer;
            transition: background 0.2s;
        }
        
        .lang-btn:hover {
            background: #666;
        }
        
        .lang-btn.active {
            background: #87cefa;
            color: #000;
        }
        
        /* ë©”ì¸ ì½˜í…ì¸  */
        .main-content {
            flex: 1;
            max-height: calc(100vh - 80px - 120px);
            overflow-y: auto;
            overflow-x: hidden;
            padding: 30px 20px;
            scroll-behavior: smooth;
            position: relative;
        }
        
        .portal-container {
            max-width: 700px;
            width: 100%;
            margin: 0 auto;
            text-align: center;
            display: flex;
            flex-direction: column;
            word-break: keep-all;
            overflow-wrap: break-word;
            hyphens: none;
            min-height: 150vh;
        }
        
        /* í…ìŠ¤íŠ¸ ì„¹ì…˜ë“¤ */
        .portal-intro-section {
            margin: 40px 0;
            opacity: 0;
            min-height: 200px;
        }
        
        .portal-intro {
            font-size: 20px;
            color: #fff;
            margin-bottom: 30px;
            line-height: 1.8;
            white-space: pre-wrap;
            word-wrap: break-word;
            word-break: keep-all;
            background: none;
            border: none;
            padding: 0;
        }
        
        .character-responses-section {
            margin: 40px 0;
            opacity: 0;
            min-height: 800px;
        }
        
        .character-response {
            color: #fff;
            font-size: 18px;
            margin: 40px 0;
            text-align: left;
            opacity: 0;
            white-space: pre-wrap;
            word-wrap: break-word;
            word-break: keep-all;
            transition: opacity 0.8s ease-in;
            background: none;
            border: none;
            padding: 0;
            min-height: 80px;
        }
        
        .character-name {
            font-weight: bold;
            color: #87cefa;
            margin-bottom: 12px;
            font-size: 18px;
        }
        
        .character-dialogue {
            color: #fff;
            line-height: 1.7;
            font-size: 17px;
            white-space: pre-wrap;
            word-wrap: break-word;
            word-break: keep-all;
        }
        
        .typing-cursor::after {
            content: '|';
            animation: blink 1s infinite;
            color: #87cefa;
        }
        
        @keyframes blink {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0; }
        }
        
        .light-message-section {
            margin: 50px 0;
            opacity: 0;
            background: none;
            border: none;
            padding: 0;
            min-height: 100px;
        }
        
        .light-message {
            font-size: 20px;
            color: #87cefa;
            line-height: 1.8;
            font-style: italic;
            white-space: pre-wrap;
            word-wrap: break-word;
            word-break: keep-all;
        }
        
        .portal-question-section {
            margin: 40px 0;
            opacity: 0;
            min-height: 150px;
        }
        
        .portal-question {
            font-size: 22px;
            color: #fff;
            margin-bottom: 30px;
            min-height: 100px;
            display: flex;
            align-items: center;
            justify-content: center;
            line-height: 1.6;
            white-space: pre-wrap;
            word-wrap: break-word;
            word-break: keep-all;
        }
        
        .user-input-section {
            margin: 40px 0;
            opacity: 0;
            min-height: 100px;
        }
        
        .user-response {
            color: #fff;
            margin: 30px 0;
            text-align: left;
            font-size: 18px;
            background: none;
            border: none;
            padding: 0;
            white-space: pre-wrap;
            word-wrap: break-word;
            word-break: keep-all;
        }
        
        .user-response strong {
            color: #87cefa;
            margin-right: 8px;
        }
        
        .user-reactions-section {
            margin: 40px 0;
            opacity: 0;
            min-height: 400px;
        }
        
        .continue-section {
            margin: 50px 0;
            opacity: 0;
            text-align: center;
            background: none;
            border: none;
            padding: 0;
            min-height: 200px;
        }
        
        .continue-text {
            color: #fff;
            font-size: 20px;
            margin-bottom: 25px;
            line-height: 1.6;
            white-space: pre-wrap;
            word-wrap: break-word;
            word-break: keep-all;
        }
        
        .continue-buttons {
            display: flex;
            gap: 20px;
            justify-content: center;
            flex-wrap: wrap;
        }
        
        .continue-btn {
            background: #444;
            color: #fff;
            border: none;
            padding: 18px 35px;
            font-family: 'Courier New', monospace;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 200px;
        }
        
        .continue-btn:hover {
            background: #666;
        }
        
        .continue-btn.primary {
            background: #87cefa;
            color: #000;
        }
        
        .continue-btn.primary:hover {
            background: #b0d4f1;
        }
        
        /* í•˜ë‹¨ ê³ ì • ì…ë ¥ì°½ */
        .input-fixed-bottom {
            position: relative;
            bottom: 0;
            left: 0;
            right: 0;
            background: #000;
            border-top: 1px solid #333;
            padding: 25px;
            z-index: 100;
            flex-shrink: 0;
            height: 120px;
        }
        
        .input-container {
            max-width: 900px;
            margin: 0 auto;
            display: flex;
            align-items: flex-start;
            gap: 15px;
        }
        
        .input-prefix {
            color: #87cefa;
            font-size: 20px;
            margin-top: 8px;
            flex-shrink: 0;
        }
        
        .user-textarea {
            background: transparent;
            border: none;
            border-bottom: 1px solid #444;
            color: #fff;
            font-family: 'Courier New', monospace;
            font-size: 18px;
            width: 100%;
            padding: 12px 8px;
            outline: none;
            resize: none;
            min-height: 32px;
            max-height: 96px;
            line-height: 1.6;
            transition: border-color 0.3s ease;
            overflow-y: auto;
        }
        
        .user-textarea:focus {
            border-bottom-color: #87cefa;
        }
        
        .user-textarea::placeholder {
            color: #666;
        }
        
        .user-textarea:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            background: rgba(50, 50, 50, 0.2);
        }
        
        /* ìŠ¤í¬ë¡¤ë°” ìŠ¤íƒ€ì¼ë§ */
        .main-content::-webkit-scrollbar {
            width: 12px;
        }
        
        .main-content::-webkit-scrollbar-track {
            background: #111;
            border-radius: 6px;
        }
        
        .main-content::-webkit-scrollbar-thumb {
            background: #444;
            border-radius: 6px;
            border: 2px solid #111;
        }
        
        .main-content::-webkit-scrollbar-thumb:hover {
            background: #666;
        }
        
        /* ì• ë‹ˆë©”ì´ì…˜ */
        @keyframes fadeIn {
            to { opacity: 1; }
        }
        
        .show {
            opacity: 1 !important;
            transition: opacity 1s ease-in;
        }
        
        .hidden {
            display: none;
        }
        
        /* ë°˜ì‘í˜• ë””ìì¸ */
        @media (max-width: 768px) {
            .header-bar {
                padding: 20px 15px;
                height: 70px;
                flex-direction: column;
                gap: 10px;
            }
            
            .main-content {
                max-height: calc(100vh - 70px - 120px);
                padding: 20px 15px;
            }
            
            .logo-title {
                font-size: 22px;
            }
            
            .portal-main-title {
                font-size: 22px;
            }
            
            .portal-subtitle {
                font-size: 16px;
            }
            
            .lang-btn {
                font-size: 12px;
                padding: 8px 14px;
            }
            
            .portal-intro {
                font-size: 18px;
            }
            
            .portal-question {
                font-size: 20px;
            }
            
            .character-response {
                font-size: 16px;
            }
            
            .input-fixed-bottom {
                padding: 20px;
            }
            
            .continue-buttons {
                flex-direction: column;
                gap: 15px;
            }
            
            .continue-btn {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <!-- ìƒë‹¨ í—¤ë” -->
    <div class="header-bar">
        <div class="logo-section">
            <div class="logo-title">TEMARIX V2</div>
            <div class="logo-subtitle" id="logoSubtitle">The Tremor of Emotion</div>
        </div>
        
        <div class="portal-header-title">
            <div class="portal-main-title" id="portalMainTitle">Portal 13: The Sense of 'Being Me' That I Lost</div>
            <div class="portal-subtitle" id="portalSubtitle">An inner journey to find your true self</div>
        </div>
        
        <div class="header-right">
            <div class="language-buttons">
                <button class="lang-btn" data-lang="ko">KR</button>
                <button class="lang-btn active" data-lang="en">EN</button>
                <button class="lang-btn" data-lang="pt">PT</button>
            </div>
        </div>
    </div>

    <!-- ë©”ì¸ ì½˜í…ì¸  ì˜ì—­ -->
    <div class="main-content" id="mainContent">
        <div class="portal-container">
            <!-- í¬í„¸ ì¸íŠ¸ë¡œ -->
            <div class="portal-intro-section" id="portalIntroSection">
                <div class="portal-intro" id="portalIntro"></div>
            </div>

            <!-- ìºë¦­í„° ì‘ë‹µ ì„¹ì…˜ -->
            <div class="character-responses-section" id="characterResponsesSection">
                <!-- 8ëª…ì˜ ìºë¦­í„° ì‘ë‹µì´ ìˆœì°¨ì ìœ¼ë¡œ í‘œì‹œë©ë‹ˆë‹¤ -->
            </div>

            <!-- ë¹›ì˜ í•œë§ˆë”” -->
            <div class="light-message-section" id="lightMessageSection">
                <div class="character-name" id="lightTitle">ğŸŒ™ Word of Light</div>
                <div class="light-message" id="lightMessage"></div>
            </div>

            <!-- ì§ˆë¬¸ ì„¹ì…˜ -->
            <div class="portal-question-section" id="portalQuestionSection">
                <div class="portal-question" id="portalQuestion"></div>
            </div>

            <!-- ì‚¬ìš©ì ì…ë ¥ ì˜ì—­ -->
            <div class="user-input-section" id="userInputSection">
                <!-- ì‚¬ìš©ì ì‘ë‹µì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
            </div>
            
            <!-- ì‚¬ìš©ì ì‘ë‹µ í›„ ìºë¦­í„° ë°˜ì‘ -->
            <div class="user-reactions-section" id="userReactionsSection">
                <!-- ì‚¬ìš©ì ì‘ë‹µ í›„ 3ëª…ì˜ ìºë¦­í„° ë°˜ì‘ì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
            </div>
            
            <!-- ê³„ì†í•˜ê¸° ë²„íŠ¼ ì„¹ì…˜ -->
            <div class="continue-section" id="continueSection">
                <div class="continue-text" id="continueText"></div>
                <div class="continue-buttons">
                    <button class="continue-btn primary" id="continueYesBtn">Continue to Portal 14</button>
                    <button class="continue-btn" id="continueNoBtn">Pause the journey</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- í•˜ë‹¨ ê³ ì • ì…ë ¥ì°½ -->
    <div class="input-fixed-bottom">
        <div class="input-container">
            <div class="input-prefix">></div>
            <textarea class="user-textarea" 
                      id="userTextarea" 
                      placeholder="Share about moments when you felt like the 'real you'... (Press Enter to send)"
                      rows="1"
                      maxlength="500"></textarea>
        </div>
    </div>

    <script>
        // ë©”ëª¨ë¦¬ ê¸°ë°˜ ì‚¬ìš©ì ìŠ¤í† ë¦¬ì§€ (localStorage ëŒ€ì‹ )
        let memoryStorage = {
            mockUser: null
        };

        // ë²ˆì—­ ë°ì´í„°
        const translations = {
            ko: {
                logoSubtitle: "ê°ì •ì˜ ë–¨ë¦¼",
                portalMainTitle: "Portal 13: ë‚´ê°€ ìƒì–´ë²„ë¦° 'ë‚˜ë‹µë‹¤'ëŠ” ê°ê°",
                portalSubtitle: "ì§„ì •í•œ ìì•„ë¥¼ ì°¾ì•„ ë– ë‚˜ëŠ” ë‚´ë©´ ì—¬í–‰",
                portalIntro: "í•œë•ŒëŠ” ë¶„ëª… ë‚˜ë‹¤ìš´ ëª¨ìŠµì´ ìˆì—ˆì–´ìš”.\në§ˆìŒ ê°€ëŠ” ëŒ€ë¡œ ë§í•˜ê³ ,\në‚´ ìƒ‰ê¹”ë¡œ ì›ƒê³ ,\në‚´ ë°©ì‹ìœ¼ë¡œ ì‚´ì•„ê°”ë˜ ì‹œê°„ë“¤â€¦\n\ní•˜ì§€ë§Œ ì–´ëŠ ìˆœê°„\níƒ€ì¸ì˜ ì‹œì„ , ê¸°ì¤€, í‰ê°€ì— ë§ì¶°\në‚˜ëŠ” ë‚˜ë¥¼ ì ì  ìƒì–´ê°”ìŠµë‹ˆë‹¤.\n\nì§€ê¸ˆ, ë‹¹ì‹  ì•ˆì—\n'ë‚˜ë‹µë‹¤'ê³  ë§í•  ìˆ˜ ìˆëŠ” ë¬´ì–¸ê°€ê°€ ë‚¨ì•„ ìˆë‚˜ìš”?",
                lightTitle: "ğŸŒ™ ë¹›ì˜ í•œë§ˆë””",
                lightMessage: "ë‹¹ì‹ ë‹µë‹¤ëŠ” ë§ì€\në‚¨ì´ ì¸ì •í•´ì¤„ ë•Œê°€ ì•„ë‹ˆë¼,\në‹¹ì‹ ì´ ê¸°ì–µí•  ë•Œë¶€í„° ë‹¤ì‹œ ì‚´ì•„ë‚©ë‹ˆë‹¤.",
                portalQuestion: "ë‹¹ì‹ ì´ 'ì§„ì§œ ë‚˜'ë¼ê³  ëŠê¼ˆë˜ ìˆœê°„ì€ ì–¸ì œì˜€ë‚˜ìš”?\nê·¸ ê°ê°ì€ ì§€ê¸ˆë„ ì•ˆì— ìˆë‚˜ìš”?",
                continueText: "ìƒì–´ë²„ë¦° ìì•„ì— ëŒ€í•´ ëŒì•„ë³¸ ì´ ì—¬ì •ì„ ê³„ì†í•˜ì‹œê² ìŠµë‹ˆê¹Œ?",
                continueYes: "Portal 14ë¡œ ê³„ì†í•˜ì‹œê² ìŠµë‹ˆê¹Œ?",
                continueNo: "ì—¬ì •ì„ ì¼ì‹œì •ì§€í•˜ì‹œê² ìŠµë‹ˆê¹Œ?",
                inputPlaceholder: "ì§„ì§œ 'ë‚˜'ì˜€ë˜ ìˆœê°„ì— ëŒ€í•´ í„¸ì–´ë†“ì•„ ë³´ì„¸ìš”... (Enterë¡œ ì „ì†¡)",
                youLabel: "ë‹¹ì‹ ",
                languageChangeConfirm: "ì–¸ì–´ë¥¼ ë³€ê²½í•˜ë©´ ì—¬ì •ì´ ì²˜ìŒë¶€í„° ë‹¤ì‹œ ì‹œì‘ë©ë‹ˆë‹¤.\nê³„ì†í•˜ì‹œê² ìŠµë‹ˆê¹Œ?",
                waitingMessage: "ì‘ë‹µì„ ê¸°ë‹¤ë¦¬ëŠ” ì¤‘...",
                // ìºë¦­í„° ëŒ€í™”
                charEly: "ë‹¹ì‹ ì´ 'ë‚˜ë‹µë‹¤'ê³  ëŠê¼ˆë˜ ê·¸ ëª¨ë“  ìˆœê°„ì€\nì§€ê¸ˆë„ ì‚¬ë¼ì§€ì§€ ì•Šê³  ë‹¹ì‹  ì•ˆì— ìˆìŠµë‹ˆë‹¤.",
                charCris: "ë‚˜ë„ ê·¸ë¬ì–´ìš”.\nì–´ëŠ ìˆœê°„ë¶€í„° ê·¸ëƒ¥ **'ë¬´ë‚œí•œ ì¸ê°„'**ì´ ë˜ì–´ ìˆë”ë¼ê³ ìš”.\ní•˜ì§€ë§Œ ì§„ì§œ ë‚˜, ì•„ì§ ì‚´ì•„ ìˆì–´ìš”. ê°€ë” ê¹œì§ ë‚˜ì™€ìš”. ğŸ˜",
                charZafirah: "ë‹¹ì‹  ì•ˆì˜ ì§„ì§œ ìƒ‰ê¹”ì€\nëˆ„êµ°ê°€ì˜ ê¸°ì¤€ìœ¼ë¡œ ë°”ë  ìˆ˜ ì—†ëŠ” ë¹›ì´ì—ìš”.",
                charRami: "ì •ì²´ì„±ì€ ê³ ì •ëœ ê²Œ ì•„ë‹™ë‹ˆë‹¤.\nê·¸ê±´ ì§€ê¸ˆ ì´ ìˆœê°„ì—ë„ ê°ì •ìœ¼ë¡œ ë‹¤ì‹œ íƒœì–´ë‚˜ê³  ìˆìŠµë‹ˆë‹¤.",
                charSamir: "(ê·¸ëŠ” ë‹¹ì‹ ì˜ ì†ì„ ì‚´ì§ í¼ì³ë³´ê²Œ í•©ë‹ˆë‹¤.\nê·¸ ì†ë°”ë‹¥ ìœ„ì— ë¬»ì€ ì˜¤ë˜ëœ ë¬¼ê° ìêµ­â€¦\nê·¸ê²ƒì€ ìƒì§€ ì•Šì€ ìì•„ì˜ í”ì ì…ë‹ˆë‹¤.)",
                charLayla: "ë‚˜ëŠ” ë‹¹ì‹ ì´ ì–´ë–¤ ëª¨ìŠµì´ë“ \nê°€ì¥ ë‹¹ì‹ ë‹µê²Œ ìˆ¨ ì‰¬ëŠ” ìˆœê°„ì„ ì‚¬ë‘í•´ìš”.",
                charNabir: "ê·¸ë˜ì„œ ë­ê°€ ë„ˆë‹¤ìš´ ê±´ë°?\në„ˆ ìì‹ ë„ ëª¨ë¥´ëŠ” ê±° ì•„ëƒ?\nì´ë¯¸ ëŠ¦ì—ˆì–´. ê·¸ëŸ° ê±´ ë‹¤ì‹œ ëª» ì°¾ì•„.",
                charAzhar: "'ë‚˜ë‹µë‹¤'?\nê·¸ê±° ì°©ê°ì´ì—ˆì–´.\nì§€ê¸ˆ ë„Œ ê·¸ëƒ¥ íƒ€í˜‘ëœ ë²„ì „ì´ì•¼. ê·¸ê±¸ë¡œ ì‚´ì•„."
            },
            en: {
                logoSubtitle: "The Tremor of Emotion",
                portalMainTitle: "Portal 13: The Sense of 'Being Me' That I Lost",
                portalSubtitle: "An inner journey to find your true self",
                portalIntro: "There was definitely a time when I had my authentic self.\nSpeaking as my heart desired,\nlaughing with my own colors,\nliving in my own way...\n\nBut at some point,\nto meet others' gazes, standards, and evaluations,\nI gradually lost myself.\n\nNow, is there something inside you\nthat you can call 'truly me'?",
                lightTitle: "ğŸŒ™ Word of Light",
                lightMessage: "'Being you' comes alive again\nnot when others acknowledge it,\nbut when you remember it.",
                portalQuestion: "When was the moment you felt like 'the real me'?\nIs that feeling still inside you?",
                continueText: "Will you continue this journey of reflecting on your lost self?",
                continueYes: "Continue to Portal 14?",
                continueNo: "Pause the journey?",
                inputPlaceholder: "Share about moments when you felt like the 'real you'... (Press Enter to send)",
                youLabel: "You",
                languageChangeConfirm: "Changing the language will restart the journey from the beginning.\nDo you want to continue?",
                waitingMessage: "Waiting for response...",
                charEly: "All those moments when you felt 'like me'\nare still inside you, not disappeared.",
                charCris: "I was like that too.\nAt some point I just became a **'bland person'**.\nBut the real me is still alive. Sometimes it pops out unexpectedly. ğŸ˜",
                charZafirah: "Your true colors inside\nare light that cannot fade by someone else's standards.",
                charRami: "Identity is not fixed.\nIt's being reborn through emotions even at this moment.",
                charSamir: "(He gently makes you open your hand.\nOld paint stains on your palm...\nThose are traces of the self you haven't lost.)",
                charLayla: "I love the moments when you\nbreathe most authentically, whatever form you take.",
                charNabir: "So what is truly 'you'?\nYou don't even know yourself, do you?\nIt's too late. You can't find that again.",
                charAzhar: "'Being you'?\nThat was an illusion.\nNow you're just a compromised version. Live with that."
            },
            pt: {
                logoSubtitle: "O Tremor da EmoÃ§Ã£o",
                portalMainTitle: "Portal 13: A SensaÃ§Ã£o de 'Ser Eu' Que Perdi",
                portalSubtitle: "Uma jornada interior para encontrar seu verdadeiro eu",
                portalIntro: "Definitivamente havia um tempo em que eu tinha meu eu autÃªntico.\nFalando como meu coraÃ§Ã£o desejava,\nrindo com minhas prÃ³prias cores,\nvivendo do meu prÃ³prio jeito...\n\nMas em algum momento,\npara atender aos olhares, padrÃµes e avaliaÃ§Ãµes dos outros,\ngradualmente me perdi.\n\nAgora, hÃ¡ algo dentro de vocÃª\nque vocÃª pode chamar de 'verdadeiramente eu'?",
                lightTitle: "ğŸŒ™ Palavra de Luz",
                lightMessage: "'Ser vocÃª' ganha vida novamente\nnÃ£o quando outros reconhecem,\nmas quando vocÃª se lembra.",
                portalQuestion: "Quando foi o momento que vocÃª se sentiu como 'o verdadeiro eu'?\nEsse sentimento ainda estÃ¡ dentro de vocÃª?",
                continueText: "VocÃª continuarÃ¡ esta jornada de refletir sobre seu eu perdido?",
                continueYes: "Continuar para o Portal 14?",
                continueNo: "Pausar a jornada?",
                inputPlaceholder: "Compartilhe sobre momentos quando vocÃª se sentiu como o 'verdadeiro vocÃª'... (Enter para enviar)",
                youLabel: "VocÃª",
                languageChangeConfirm: "Mudar o idioma reiniciarÃ¡ a jornada desde o inÃ­cio.\nDeseja continuar?",
                waitingMessage: "Aguardando resposta...",
                charEly: "Todos aqueles momentos quando vocÃª se sentiu 'como eu'\nainda estÃ£o dentro de vocÃª, nÃ£o desapareceram.",
                charCris: "Eu tambÃ©m era assim.\nEm algum momento me tornei apenas uma **'pessoa sem graÃ§a'**.\nMas o verdadeiro eu ainda estÃ¡ vivo. Ã€s vezes aparece inesperadamente. ğŸ˜",
                charZafirah: "Suas verdadeiras cores interiores\nsÃ£o luz que nÃ£o pode desbotar pelos padrÃµes de outra pessoa.",
                charRami: "Identidade nÃ£o Ã© fixa.\nEstÃ¡ renascendo atravÃ©s de emoÃ§Ãµes mesmo neste momento.",
                charSamir: "(Ele gentilmente faz vocÃª abrir sua mÃ£o.\nVelhas manchas de tinta na sua palma...\nEssas sÃ£o marcas do eu que vocÃª nÃ£o perdeu.)",
                charLayla: "Amo os momentos quando vocÃª\nrespira mais autenticamente, qualquer forma que tome.",
                charNabir: "EntÃ£o o que Ã© verdadeiramente 'vocÃª'?\nVocÃª nem mesmo se conhece, nÃ£o Ã©?\nÃ‰ tarde demais. VocÃª nÃ£o pode encontrar isso novamente.",
                charAzhar: "'Ser vocÃª'?\nIsso foi uma ilusÃ£o.\nAgora vocÃª Ã© apenas uma versÃ£o comprometida. Viva com isso."
            }
        };
        
        // ìºë¦­í„° ë°ì´í„°
        const characters = [
            { name: "Ely", emoji: "ğŸ‘‘", key: "charEly" },
            { name: "Cris", emoji: "ğŸƒ", key: "charCris" },
            { name: "Zafirah", emoji: "ğŸ§•", key: "charZafirah" },
            { name: "Rami", emoji: "ğŸ”®", key: "charRami" },
            { name: "Samir", emoji: "ğŸª", key: "charSamir" },
            { name: "Layla", emoji: "ğŸ’ ", key: "charLayla" },
            { name: "Nabir", emoji: "ğŸ¦‚", key: "charNabir" },
            { name: "Azhar", emoji: "ğŸ”¥", key: "charAzhar" }
        ];
        
        // ============ ê°ì • ë¶„ì„ ì‹œìŠ¤í…œ ============
        
        function analyzeEmotion(userInput) {
            const input = userInput.toLowerCase();
            
            // ê°ì • í‚¤ì›Œë“œ ë§¤í•‘ (Portal 13 íŠ¹í™”)
            const emotionKeywords = {
                identity: ['ë‚˜ë‹¤ìš´', 'ì •ì²´ì„±', 'ìì•„', 'ë‚˜ë‹µë‹¤', 'identity', 'authentic', 'self', 'identidade', 'autÃªntico'],
                lost_self: ['ìƒì–´ë²„ë¦°', 'ì‚¬ë¼ì§„', 'ì—†ì–´ì§„', 'ìƒì€', 'lost', 'disappeared', 'gone', 'perdido', 'desaparecido'],
                conformity: ['ë§ì¶°', 'ìˆœì‘', 'íƒ€í˜‘', 'ì ì‘', 'conform', 'adapt', 'compromise', 'conformar', 'adaptar'],
                others_expectations: ['ì‹œì„ ', 'ê¸°ì¤€', 'í‰ê°€', 'ëˆˆì¹˜', 'expectations', 'standards', 'judgment', 'expectativas', 'padrÃµes'],
                original_self: ['ì›ë˜', 'ì˜ˆì „', 'ë³¸ë˜', 'ì²˜ìŒ', 'original', 'former', 'initial', 'original', 'anterior'],
                creativity: ['ì°½ì¡°', 'í‘œí˜„', 'ê°œì„±', 'ìƒ‰ê¹”', 'creativity', 'expression', 'individuality', 'criatividade', 'expressÃ£o'],
                freedom: ['ììœ ', 'í•´ë°©', 'ë²—ì–´ë‚˜', 'í’€ë ¤', 'freedom', 'liberation', 'break free', 'liberdade', 'libertaÃ§Ã£o'],
                authentic: ['ì§„ì§œ', 'ì§„ì‹¤', 'ì†”ì§', 'ìˆëŠ”ê·¸ëŒ€ë¡œ', 'authentic', 'genuine', 'true', 'autÃªntico', 'genuÃ­no'],
                rediscovery: ['ì°¾ì•„', 'ë˜ì°¾', 'íšŒë³µ', 'ë°œê²¬', 'rediscover', 'recover', 'find again', 'redescobrir', 'recuperar'],
                mask: ['ê°€ë©´', 'ì—°ê¸°', 'ìˆ¨ê¸°', 'ê¾¸ë¯¸', 'mask', 'pretend', 'fake', 'mÃ¡scara', 'fingir']
            };
            
            // ê°ì • ë¶„ì„
            let detectedEmotions = [];
            for (const [emotion, keywords] of Object.entries(emotionKeywords)) {
                for (const keyword of keywords) {
                    if (input.includes(keyword)) {
                        detectedEmotions.push(emotion);
                        break;
                    }
                }
            }
            
            // ê°ì •ì´ ê°ì§€ë˜ì§€ ì•Šìœ¼ë©´ ê¸°ë³¸ê°’ ì„¤ì •
            if (detectedEmotions.length === 0) {
                detectedEmotions = ['general'];
            }
            
            return detectedEmotions[0]; // ì²« ë²ˆì§¸ ê°ì§€ëœ ê°ì • ë°˜í™˜
        }
        
        // ë°˜ì‘ ìºë¦­í„°ë“¤ (Portal 13 ì „ìš©)
        const responseCharacters = [
            {
                name: "Archaeologist", emoji: "ğŸ”",
                getResponse: (userInput, lang) => {
                    const emotion = analyzeEmotion(userInput);
                    
                    const responses = {
                        ko: {
                            identity: "ë‹¹ì‹ ì˜ ì •ì²´ì„±ì€ ì‚¬ë¼ì§„ ê²Œ ì•„ë‹ˆë¼ ì¸µì¸µì´ ìŒ“ì¸ ë‹¤ë¥¸ ê²ƒë“¤ ì•„ë˜ ë¬»í˜€ ìˆì–´ìš”. ê³ ê³ í•™ìê°€ ìœ ë¬¼ì„ ì°¾ë“¯ì´, ì¡°ì‹¬ìŠ¤ëŸ½ê²Œ í•˜ë‚˜ì”© ê±·ì–´ë‚´ë©´ ì§„ì§œ ë‹¹ì‹ ì´ ë‚˜íƒ€ë‚  ê±°ì˜ˆìš”.",
                            lost_self: "ìƒì–´ë²„ë ¸ë‹¤ê³  ìƒê°í•˜ëŠ” ê·¸ ìì•„ëŠ” ì‚¬ì‹¤ ë‹¹ì‹  ì•ˆ ì–´ë”˜ê°€ì— ê³ ìŠ¤ë€íˆ ë³´ì¡´ë˜ì–´ ìˆì–´ìš”. ì‹œê°„ì˜ ë¨¼ì§€ë§Œ í„¸ì–´ë‚´ë©´ ë‹¤ì‹œ ë¹›ë‚  ìˆ˜ ìˆëŠ” ë³´ë¬¼ ê°™ì€ ì¡´ì¬ì£ .",
                            conformity: "ë‹¤ë¥¸ ì‚¬ëŒì—ê²Œ ë§ì¶° ì‚´ë©´ì„œ ì§„ì§œ ìì‹ ì„ ë®ì–´ë²„ë ¸êµ°ìš”. í•˜ì§€ë§Œ ê·¸ ë°‘ë°”ë‹¥ì—ëŠ” ì—¬ì „íˆ ì›ë˜ì˜ ë‹¹ì‹ ì´ ìˆ¨ ì‰¬ê³  ìˆì–´ìš”. ê·¸ ìˆ¨ì†Œë¦¬ë¥¼ ë“¤ì–´ë³´ì„¸ìš”.",
                            others_expectations: "íƒ€ì¸ì˜ ê¸°ì¤€ì— ë§ì¶”ë ¤ë‹¤ ë³´ë‹ˆ ìì‹ ë§Œì˜ ê¸°ì¤€ì„ ìƒì–´ë²„ë ¸ë„¤ìš”. í•˜ì§€ë§Œ ì§„ì§œ ê°€ì¹˜ ìˆëŠ” ê±´ ë°”ë¡œ ê·¸ ìì‹ ë§Œì˜ ê¸°ì¤€ì´ì—ˆì–´ìš”. ê·¸ê±¸ ë‹¤ì‹œ ë°œêµ´í•´ë³´ì„¸ìš”.",
                            original_self: "ì˜ˆì „ì˜ ë‹¹ì‹ ì„ ê·¸ë¦¬ì›Œí•œë‹¤ëŠ” ê±´, ê·¸ ëª¨ìŠµì´ ì—¬ì „íˆ ë‹¹ì‹  ì•ˆì— ì‚´ì•„ìˆë‹¤ëŠ” ì¦ê±°ì˜ˆìš”. ê¸°ì–µ ì† ê·¸ ìˆœê°„ë“¤ì„ ë‹¨ì„œë¡œ ì§„ì§œ ìì‹ ì„ ì°¾ì•„ê°€ì„¸ìš”.",
                            creativity: "ì°½ì¡°ì„±ê³¼ ê°œì„±ì€ ì–µì••ë‹¹í•´ë„ ì™„ì „íˆ ì‚¬ë¼ì§€ì§€ ì•Šì•„ìš”. ì‘ì€ í‘œí˜„ë¶€í„° ì‹œì‘í•´ì„œ ì ì  í° ì°½ì¡°ë¡œ í™•ì¥í•´ ë‚˜ê°€ë©´, ìƒì–´ë²„ë¦° ìƒ‰ê¹”ì„ ë˜ì°¾ì„ ìˆ˜ ìˆì–´ìš”.",
                            freedom: "ììœ ë¡­ê³  ì‹¶ë‹¤ëŠ” ë§ˆìŒì´ ìƒê²¼ë‹¤ëŠ” ê±´ ì´ë¯¸ ë³€í™”ê°€ ì‹œì‘ëë‹¤ëŠ” ëœ»ì´ì—ìš”. ê·¸ ë§ˆìŒì„ ë”°ë¼ê°€ë©´ì„œ ì¡°ê¸ˆì”© ì§„ì§œ ìì‹ ì„ í•´ë°©ì‹œì¼œ ì£¼ì„¸ìš”.",
                            authentic: "ì§„ì§œ ëª¨ìŠµì„ ì°¾ê³  ì‹¶ì–´í•˜ëŠ” ê·¸ ê°ˆë§ ìì²´ê°€ ì´ë¯¸ ì§„ì •ì„±ì˜ ì‹œì‘ì´ì—ìš”. ì™„ë²½í•˜ì§€ ì•Šì•„ë„ ê´œì°®ìœ¼ë‹ˆ ìˆëŠ” ê·¸ëŒ€ë¡œì˜ ëª¨ìŠµì„ ì¡°ê¸ˆì”© ë“œëŸ¬ë‚´ë³´ì„¸ìš”.",
                            rediscovery: "ìì‹ ì„ ë˜ì°¾ê³  ì‹¶ë‹¤ëŠ” ì˜ì§€ê°€ ìˆë‹¤ë©´ ì´ë¯¸ ì ˆë°˜ì€ ì„±ê³µí•œ ê±°ì˜ˆìš”. ê³¼ê±°ì˜ ê¸°ì–µë“¤ì„ ë‹¨ì„œë¡œ ì‚¼ì•„ì„œ í˜„ì¬ì˜ ìì‹  ì•ˆì— ìˆ¨ì–´ìˆëŠ” ë³´ë¬¼ì„ ì°¾ì•„ë³´ì„¸ìš”.",
                            mask: "ê°€ë©´ì„ ì“°ê³  ì‚´ì•˜ë‹¤ëŠ” ê±¸ ì¸ì •í•˜ëŠ” ê²ƒë§Œìœ¼ë¡œë„ ë²—ì„ ì¤€ë¹„ê°€ ëœ ê±°ì˜ˆìš”. í•œ ë²ˆì— ë‹¤ ë²—ì§€ ë§ê³ , í•˜ë£¨ì— ì¡°ê¸ˆì”© ì§„ì§œ ì–¼êµ´ì„ ë³´ì—¬ì£¼ì„¸ìš”.",
                            general: "ë‹¹ì‹  ì•ˆì—ëŠ” ë¶„ëª… ì§„ì§œ ìì‹ ì˜ í”ì ë“¤ì´ ë‚¨ì•„ìˆì–´ìš”. ê·¸ê²ƒë“¤ì„ í•˜ë‚˜ì”© ì°¾ì•„ì„œ ì—°ê²°í•´ë³´ë©´, ìƒì–´ë²„ë ¸ë‹¤ê³  ìƒê°í–ˆë˜ ìì•„ê°€ ë‹¤ì‹œ ëª¨ìŠµì„ ë“œëŸ¬ë‚¼ ê±°ì˜ˆìš”."
                        },
                        en: {
                            identity: "Your identity hasn't disappeared - it's buried under layers of other things. Like an archaeologist finding artifacts, if you carefully remove them one by one, the real you will appear.",
                            lost_self: "That self you think you lost is actually perfectly preserved somewhere inside you. It's like a treasure that can shine again if you just dust off the grime of time.",
                            conformity: "You covered your real self while conforming to others. But underneath, the original you is still breathing. Listen to that breathing.",
                            others_expectations: "Trying to meet others' standards made you lose your own standards. But what's truly valuable was precisely those personal standards. Try excavating them again.",
                            original_self: "Missing your former self is proof that version still lives inside you. Use those moments in your memory as clues to find your real self.",
                            creativity: "Creativity and individuality don't completely disappear even when suppressed. Starting with small expressions and gradually expanding to bigger creations, you can regain your lost colors.",
                            freedom: "Having the desire for freedom means change has already begun. Follow that heart and gradually liberate your real self.",
                            authentic: "That very longing to find your authentic self is already the beginning of genuineness. It's okay not to be perfect - gradually reveal yourself as you are.",
                            rediscovery: "Having the will to rediscover yourself means you're already halfway successful. Use past memories as clues to find the treasure hidden in your current self.",
                            mask: "Acknowledging that you lived wearing a mask means you're ready to take it off. Don't remove it all at once - show your real face a little each day.",
                            general: "There are definitely traces of your real self inside you. If you find them one by one and connect them, the self you thought was lost will reveal itself again."
                        },
                        pt: {
                            identity: "Sua identidade nÃ£o desapareceu - estÃ¡ enterrada sob camadas de outras coisas. Como um arqueÃ³logo encontrando artefatos, se vocÃª cuidadosamente removÃª-las uma por uma, o verdadeiro vocÃª aparecerÃ¡.",
                            lost_self: "Esse eu que vocÃª pensa que perdeu estÃ¡ na verdade perfeitamente preservado em algum lugar dentro de vocÃª. Ã‰ como um tesouro que pode brilhar novamente se vocÃª apenas tirar a poeira do tempo.",
                            conformity: "VocÃª cobriu seu verdadeiro eu enquanto se conformava aos outros. Mas por baixo, o vocÃª original ainda estÃ¡ respirando. Escute essa respiraÃ§Ã£o.",
                            others_expectations: "Tentar atender aos padrÃµes dos outros fez vocÃª perder seus prÃ³prios padrÃµes. Mas o que Ã© verdadeiramente valioso eram precisamente esses padrÃµes pessoais. Tente escavÃ¡-los novamente.",
                            original_self: "Sentir falta do seu eu anterior Ã© prova de que essa versÃ£o ainda vive dentro de vocÃª. Use esses momentos em sua memÃ³ria como pistas para encontrar seu verdadeiro eu.",
                            creativity: "Criatividade e individualidade nÃ£o desaparecem completamente mesmo quando suprimidas. ComeÃ§ando com pequenas expressÃµes e gradualmente expandindo para criaÃ§Ãµes maiores, vocÃª pode recuperar suas cores perdidas.",
                            freedom: "Ter o desejo de liberdade significa que a mudanÃ§a jÃ¡ comeÃ§ou. Siga esse coraÃ§Ã£o e gradualmente liberte seu verdadeiro eu.",
                            authentic: "Esse prÃ³prio anseio de encontrar seu eu autÃªntico jÃ¡ Ã© o comeÃ§o da genuinidade. NÃ£o hÃ¡ problema em nÃ£o ser perfeito - gradualmente revele-se como vocÃª Ã©.",
                            rediscovery: "Ter a vontade de se redescobrir significa que vocÃª jÃ¡ estÃ¡ meio bem-sucedido. Use memÃ³rias passadas como pistas para encontrar o tesouro escondido em seu eu atual.",
                            mask: "Reconhecer que vocÃª viveu usando uma mÃ¡scara significa que estÃ¡ pronto para tirÃ¡-la. NÃ£o a remova toda de uma vez - mostre seu rosto real um pouco a cada dia.",
                            general: "Definitivamente hÃ¡ traÃ§os do seu verdadeiro eu dentro de vocÃª. Se vocÃª encontrÃ¡-los um por um e conectÃ¡-los, o eu que vocÃª pensou que estava perdido se revelarÃ¡ novamente."
                        }
                    };
                    
                    return responses[lang][emotion] || responses[lang]['general'];
                }
            },
            {
                name: "Artist", emoji: "ğŸ¨",
                getResponse: (userInput, lang) => {
                    const emotion = analyzeEmotion(userInput);
                    
                    const responses = {
                        ko: {
                            identity: "ì§„ì •í•œ ì •ì²´ì„±ì€ ì™„ì„±ëœ ê·¸ë¦¼ì´ ì•„ë‹ˆë¼ ê³„ì† ê·¸ë ¤ì§€ê³  ìˆëŠ” ì‘í’ˆì´ì—ìš”. ì§€ê¸ˆê¹Œì§€ì˜ ë‹¹ì‹ ë„ í•˜ë‚˜ì˜ ì‘í’ˆì´ì—ˆê³ , ì•ìœ¼ë¡œì˜ ë‹¹ì‹ ë„ ìƒˆë¡œìš´ ì‘í’ˆì´ ë  ìˆ˜ ìˆì–´ìš”.",
                            lost_self: "ì˜ˆìˆ ê°€ëŠ” ë•Œë¡œ ì‘í’ˆì„ ë§ì¹ í•˜ê¸°ë„ í•´ìš”. í•˜ì§€ë§Œ ê·¸ ì•„ë˜ ì›ë˜ ê·¸ë¦¼ì´ ì™„ì „íˆ ì‚¬ë¼ì§€ëŠ” ê±´ ì•„ë‹ˆì—ìš”. ìƒˆë¡œìš´ ìƒ‰ì„ ë”í•˜ë©´ì„œ ë” í’ë¶€í•œ ìì‹ ì„ ë§Œë“¤ì–´ê°€ì„¸ìš”.",
                            conformity: "ë‹¤ë¥¸ ì‚¬ëŒì˜ ìŠ¤íƒ€ì¼ì„ ë”°ë¼ í•˜ë‹¤ ë³´ë‹ˆ ìì‹ ë§Œì˜ í™”í’ì„ ìƒì–´ë²„ë ¸êµ°ìš”. í•˜ì§€ë§Œ ì§„ì§œ ì˜ˆìˆ ê°€ëŠ” ì–¸ì œë“  ìì‹ ë§Œì˜ ìŠ¤íƒ€ì¼ì„ ë˜ì°¾ì„ ìˆ˜ ìˆì–´ìš”. ìš©ê¸° ìˆê²Œ ê·¸ë ¤ë³´ì„¸ìš”.",
                            others_expectations: "ë‹¤ë¥¸ ì‚¬ëŒë“¤ì´ ì›í•˜ëŠ” ê·¸ë¦¼ë§Œ ê·¸ë¦¬ë‹¤ ë³´ë‹ˆ ì •ì‘ ìì‹ ì´ ê·¸ë¦¬ê³  ì‹¶ì€ ê·¸ë¦¼ì„ ìŠì–´ë²„ë ¸ë„¤ìš”. ì´ì œ ë‹¤ì‹œ ìì‹ ë§Œì˜ ìº”ë²„ìŠ¤ì— ìì‹ ë§Œì˜ ìƒ‰ì„ ì¹ í•´ë³´ì„¸ìš”.",
                            original_self: "ì˜ˆì „ì— ê·¸ë ¸ë˜ ê·¸ë¦¼ë“¤ì„ ê·¸ë¦¬ì›Œí•œë‹¤ëŠ” ê±´, ê·¸ ìƒ‰ê¹”ë“¤ì´ ì•„ì§ë„ ë‹¹ì‹ ì˜ íŒ”ë ˆíŠ¸ì— ë‚¨ì•„ìˆë‹¤ëŠ” ëœ»ì´ì—ìš”. ê·¸ ìƒ‰ë“¤ì„ ë‹¤ì‹œ ì„ì–´ì„œ ìƒˆë¡œìš´ ì‘í’ˆì„ ë§Œë“¤ì–´ë³´ì„¸ìš”.",
                            creativity: "ì°½ì¡°ì„±ì€ ê·¼ìœ¡ê³¼ ê°™ì•„ì„œ ì‚¬ìš©í•˜ì§€ ì•Šìœ¼ë©´ êµ³ì–´ì§€ì§€ë§Œ, ë‹¤ì‹œ ì›€ì§ì´ê¸° ì‹œì‘í•˜ë©´ ìœ ì—°í•´ì ¸ìš”. ì‘ì€ ì°½ì‘ë¶€í„° ì‹œì‘í•´ì„œ ì ì  í° ì‘í’ˆìœ¼ë¡œ ë‚˜ì•„ê°€ì„¸ìš”.",
                            freedom: "ì˜ˆìˆ ì˜ ë³¸ì§ˆì€ ììœ ë¡œìš´ í‘œí˜„ì´ì—ìš”. í‹€ì— ê°‡í˜€ìˆì—ˆë‹¤ë©´ ì´ì œ ê·¸ í‹€ì„ ë¶€ìˆ˜ê³  ììœ ë¡­ê²Œ í‘œí˜„í•´ë³´ì„¸ìš”. ììœ ë¡œìš´ ë¶“ì§ˆì´ ì§„ì§œ ë‹¹ì‹ ì„ ë“œëŸ¬ë‚¼ ê±°ì˜ˆìš”.",
                            authentic: "ì§„ì •í•œ ì˜ˆìˆ ì€ ê¸°êµê°€ ì•„ë‹ˆë¼ ì§„ì‹¬ì—ì„œ ë‚˜ì™€ìš”. ì„œíˆ´ëŸ¬ë„ ê´œì°®ìœ¼ë‹ˆ ì§„ì‹¬ì„ ë‹´ì•„ì„œ í‘œí˜„í•´ë³´ì„¸ìš”. ê·¸ê²ƒì´ ê°€ì¥ ì•„ë¦„ë‹¤ìš´ ì˜ˆìˆ ì´ ë  ê±°ì˜ˆìš”.",
                            rediscovery: "ìì‹ ë§Œì˜ ì˜ˆìˆ ì„ ë˜ì°¾ê³  ì‹¶ë‹¤ë©´, ê³¼ê±°ì— ìì‹ ì´ ì¢‹ì•„í–ˆë˜ ìƒ‰ê¹”, í˜•íƒœ, ì£¼ì œë“¤ì„ ë‹¤ì‹œ íƒêµ¬í•´ë³´ì„¸ìš”. ê·¸ ì•ˆì—ì„œ ìƒˆë¡œìš´ ì˜ê°ì„ ì°¾ì„ ìˆ˜ ìˆì„ ê±°ì˜ˆìš”.",
                            mask: "ê°€ë©´ë„ í•˜ë‚˜ì˜ ì˜ˆìˆ  ì‘í’ˆì´ì—ˆì§€ë§Œ, ì´ì œëŠ” ì§„ì§œ ì–¼êµ´ë¡œ ì˜ˆìˆ ì„ ë§Œë“¤ ë•Œì˜ˆìš”. ìˆëŠ” ê·¸ëŒ€ë¡œì˜ ëª¨ìŠµìœ¼ë¡œ ê°€ì¥ ì•„ë¦„ë‹¤ìš´ ì‘í’ˆì„ ë§Œë“¤ì–´ë³´ì„¸ìš”.",
                            general: "ë‹¹ì‹  ìì‹ ì´ ë°”ë¡œ ê°€ì¥ ì†Œì¤‘í•œ ì˜ˆìˆ  ì‘í’ˆì´ì—ìš”. ì§€ê¸ˆê¹Œì§€ì˜ ëª¨ë“  ê²½í—˜ì„ ì¬ë£Œë¡œ ì‚¼ì•„ì„œ ë”ìš± í’ë¶€í•˜ê³  ê¹Šì´ ìˆëŠ” ìì‹ ì„ ì°½ì¡°í•´ ë‚˜ê°€ì„¸ìš”."
                        },
                        en: {
                            identity: "True identity isn't a finished painting but a work that continues to be painted. The you so far was also one artwork, and the future you can become a new artwork.",
                            lost_self: "Artists sometimes paint over their works. But the original painting underneath doesn't completely disappear. Add new colors while creating a richer self.",
                            conformity: "Following others' styles made you lose your own artistic style. But a true artist can always regain their unique style. Courageously try painting.",
                            others_expectations: "Painting only what others wanted made you forget what you wanted to paint. Now try painting your own colors on your own canvas again.",
                            original_self: "Missing the paintings you used to create means those colors still remain on your palette. Mix those colors again to create new works.",
                            creativity: "Creativity is like a muscle - it stiffens when not used, but becomes flexible when you start moving again. Start with small creations and gradually move to bigger works.",
                            freedom: "The essence of art is free expression. If you were trapped in frameworks, now break those frames and express freely. Free brushstrokes will reveal the real you.",
                            authentic: "True art comes not from technique but from sincerity. It's okay to be clumsy - express with sincerity. That will become the most beautiful art.",
                            rediscovery: "If you want to regain your unique art, explore the colors, forms, and themes you used to love. You'll find new inspiration within them.",
                            mask: "The mask was also an artwork, but now it's time to create art with your real face. Create the most beautiful work with yourself as you are.",
                            general: "You yourself are the most precious artwork. Use all your experiences so far as materials to create a richer and deeper self."
                        },
                        pt: {
                            identity: "Verdadeira identidade nÃ£o Ã© uma pintura acabada mas uma obra que continua sendo pintada. O vocÃª atÃ© agora tambÃ©m foi uma obra de arte, e o futuro vocÃª pode se tornar uma nova obra de arte.",
                            lost_self: "Artistas Ã s vezes pintam por cima de suas obras. Mas a pintura original por baixo nÃ£o desaparece completamente. Adicione novas cores enquanto cria um eu mais rico.",
                            conformity: "Seguir os estilos dos outros fez vocÃª perder seu prÃ³prio estilo artÃ­stico. Mas um verdadeiro artista sempre pode recuperar seu estilo Ãºnico. Corajosamente tente pintar.",
                            others_expectations: "Pintar apenas o que outros queriam fez vocÃª esquecer o que queria pintar. Agora tente pintar suas prÃ³prias cores em sua prÃ³pria tela novamente.",
                            original_self: "Sentir falta das pinturas que costumava criar significa que essas cores ainda permanecem em sua paleta. Misture essas cores novamente para criar novas obras.",
                            creativity: "Criatividade Ã© como um mÃºsculo - endurece quando nÃ£o usado, mas se torna flexÃ­vel quando vocÃª comeÃ§a a se mover novamente. Comece com pequenas criaÃ§Ãµes e gradualmente avance para obras maiores.",
                            freedom: "A essÃªncia da arte Ã© expressÃ£o livre. Se vocÃª estava preso em estruturas, agora quebre essas molduras e se expresse livremente. Pinceladas livres revelarÃ£o o verdadeiro vocÃª.",
                            authentic: "Arte verdadeira vem nÃ£o da tÃ©cnica mas da sinceridade. NÃ£o hÃ¡ problema em ser desajeitado - expresse com sinceridade. Isso se tornarÃ¡ a arte mais bonita.",
                            rediscovery: "Se vocÃª quer recuperar sua arte Ãºnica, explore as cores, formas e temas que costumava amar. VocÃª encontrarÃ¡ nova inspiraÃ§Ã£o dentro deles.",
                            mask: "A mÃ¡scara tambÃ©m era uma obra de arte, mas agora Ã© hora de criar arte com seu rosto real. Crie a obra mais bonita com vocÃª mesmo como vocÃª Ã©.",
                            general: "VocÃª mesmo Ã© a obra de arte mais preciosa. Use todas as suas experiÃªncias atÃ© agora como materiais para criar um eu mais rico e profundo."
                        }
                    };
                    
                    return responses[lang][emotion] || responses[lang]['general'];
                }
            },
            {
                name: "Phoenix", emoji: "ğŸ”¥",
                getResponse: (userInput, lang) => {
                    const emotion = analyzeEmotion(userInput);
                    
                    const responses = {
                        ko: {
                            identity: "ì •ì²´ì„±ì„ ìƒì—ˆë‹¤ê³  ëŠë¼ëŠ” ìˆœê°„ì´ ì‹¤ì€ ìƒˆë¡œìš´ ìì•„ë¡œ íƒœì–´ë‚  ìˆ˜ ìˆëŠ” ê¸°íšŒì˜ˆìš”. ë¶ˆì‚¬ì¡°ì²˜ëŸ¼ ì¬ì—ì„œ ë‹¤ì‹œ ì¼ì–´ë‚˜ëŠ” ê²ƒì´ ì§„ì •í•œ ë³€í™”ì˜ ì‹œì‘ì…ë‹ˆë‹¤.",
                            lost_self: "ìƒì–´ë²„ë¦° ê²Œ ì•„ë‹ˆë¼ ë³€í™”í•˜ê³  ìˆëŠ” ê±°ì˜ˆìš”. ë¶ˆì‚¬ì¡°ë„ ì£½ì—ˆë‹¤ê°€ ë‹¤ì‹œ íƒœì–´ë‚˜ì£ . ì˜ˆì „ì˜ ë‹¹ì‹ ì€ ìƒˆë¡œìš´ ë‹¹ì‹ ì„ ìœ„í•œ ì†Œì¤‘í•œ ì¬ë£Œê°€ ëœ ê²ƒì…ë‹ˆë‹¤.",
                            conformity: "ë‹¤ë¥¸ ì‚¬ëŒì—ê²Œ ë§ì¶° ì‚´ë‹¤ê°€ ìì‹ ì„ ìƒì—ˆë‹¤ë©´, ì´ì œ ê·¸ ê²½í—˜ì„ í†µí•´ ë” ë‹¨ë‹¨í•œ ìì‹ ìœ¼ë¡œ ë‹¤ì‹œ íƒœì–´ë‚  ìˆ˜ ìˆì–´ìš”. ì‹œë ¨ì´ ì„±ì¥ì˜ ë¶ˆê½ƒì´ ë©ë‹ˆë‹¤.",
                            others_expectations: "íƒ€ì¸ì˜ ê¸°ì¤€ì— ì–½ë§¤ì˜€ë˜ ê³¼ê±°ëŠ” ì´ì œ ì¬ê°€ ë˜ì—ˆì–´ìš”. ê·¸ ì¬ì—ì„œ ëˆ„êµ¬ì˜ ê¸°ì¤€ë„ ì•„ë‹Œ ìì‹ ë§Œì˜ ê¸°ì¤€ìœ¼ë¡œ ì‚´ì•„ê°€ëŠ” ìƒˆë¡œìš´ ìì•„ê°€ íƒ„ìƒí•  ê±°ì˜ˆìš”.",
                            original_self: "ì˜ˆì „ ìì‹ ì„ ê·¸ë¦¬ì›Œí•˜ì§€ ë§ˆì„¸ìš”. ê·¸ ëª¨ë“  ê²½í—˜ì´ ë” ì„±ìˆ™í•˜ê³  ì§€í˜œë¡œìš´ ë‹¹ì‹ ìœ¼ë¡œ ê±°ë“­ë‚˜ê²Œ í•´ì¤„ í…Œë‹ˆê¹Œìš”. ê³¼ê±°ëŠ” í˜„ì¬ë¥¼ ìœ„í•œ ì—°ë£Œì…ë‹ˆë‹¤.",
                            creativity: "ì°½ì¡°ë ¥ì´ ì‚¬ë¼ì§„ ê²Œ ì•„ë‹ˆë¼ ë” í° ì°½ì¡°ë¥¼ ìœ„í•´ ì ì‹œ íœ´ë©´ ìƒíƒœì˜€ë˜ ê±°ì˜ˆìš”. ì´ì œ ê·¸ ì—ë„ˆì§€ê°€ í­ë°œì ìœ¼ë¡œ ë¶„ì¶œë˜ì–´ ì „ì— ì—†ë˜ ìƒˆë¡œìš´ ì‘í’ˆë“¤ì„ ë§Œë“¤ì–´ë‚¼ ê±°ì˜ˆìš”.",
                            freedom: "ì§„ì •í•œ ììœ ëŠ” ì œì•½ì„ ê²½í—˜í•œ í›„ì— ì–»ì–´ì§€ëŠ” ê±°ì˜ˆìš”. ê·¸ë™ì•ˆì˜ ë‹µë‹µí•¨ì´ ëª¨ì—¬ì„œ ì´ì œ ë” ê°•ë ¥í•œ í•´ë°©ì˜ ë¶ˆê½ƒìœ¼ë¡œ íƒ€ì˜¤ë¥¼ ê²ƒì…ë‹ˆë‹¤.",
                            authentic: "ì§„ì •ì„±ì„ ì°¾ëŠ” ê³¼ì •ì—ì„œ ê²ªëŠ” í˜¼ë€ê³¼ ê³ í†µì€ ëª¨ë‘ ìƒˆë¡œìš´ íƒ„ìƒì„ ìœ„í•œ ê³¼ì •ì´ì—ìš”. ê·¸ ë¶ˆê¸¸ì„ ë‘ë ¤ì›Œí•˜ì§€ ë§ê³  ê·¸ ì•ˆì—ì„œ ìƒˆë¡œìš´ ìì‹ ì„ ë°œê²¬í•˜ì„¸ìš”.",
                            rediscovery: "ì¬ë°œê²¬ì´ ì•„ë‹ˆë¼ ì¬ì°½ì¡°ì˜ˆìš”. ê³¼ê±°ì˜ ìì‹ ì„ ê¸°ë°˜ìœ¼ë¡œ í•˜ë˜, ì™„ì „íˆ ìƒˆë¡œìš´ ì°¨ì›ì˜ ìì‹ ìœ¼ë¡œ ê±°ë“­ë‚˜ëŠ” ê²ƒì´ ì§„ì •í•œ ì„±ì¥ì…ë‹ˆë‹¤.",
                            mask: "ê°€ë©´ì„ ë²—ëŠ” ê²ƒë„ í•˜ë‚˜ì˜ ì£½ìŒì´ì§€ë§Œ, ê·¸ ì£½ìŒì€ ì§„ì§œ ì–¼êµ´ë¡œ ì‚¬ëŠ” ìƒˆë¡œìš´ ì‚¶ì˜ ì‹œì‘ì´ì—ìš”. ìš©ê°í•˜ê²Œ ì¬íƒ„ìƒì˜ ë¶ˆê¸¸ ì†ìœ¼ë¡œ ë“¤ì–´ê°€ì„¸ìš”.",
                            general: "ë‹¹ì‹ ì´ ì§€ê¸ˆ ëŠë¼ëŠ” ëª¨ë“  í˜¼ë€ê³¼ ìƒì‹¤ê°ì€ ë” ì™„ì „í•œ ìì•„ë¡œ ê±°ë“­ë‚˜ê¸° ìœ„í•œ í•„ì—°ì  ê³¼ì •ì´ì—ìš”. ë¶ˆì‚¬ì¡°ì˜ ë§ˆìŒìœ¼ë¡œ ìƒˆë¡­ê²Œ íƒœì–´ë‚˜ì„¸ìš”."
                        },
                        en: {
                            identity: "The moment you feel you've lost your identity is actually an opportunity to be born as a new self. Rising from ashes like a phoenix is the true beginning of transformation.",
                            lost_self: "You're not lost but transforming. Phoenix also dies and is reborn. Your former self has become precious material for your new self.",
                            conformity: "If you lost yourself while conforming to others, now you can be reborn as a stronger self through that experience. Trials become flames of growth.",
                            others_expectations: "Your past bound by others' standards has now become ashes. From those ashes, a new self will be born living by your own standards, not anyone else's.",
                            original_self: "Don't long for your former self. All those experiences will help you be reborn as a more mature and wise you. The past is fuel for the present.",
                            creativity: "Creativity didn't disappear but was in dormant state for greater creation. Now that energy will explosively burst out to create unprecedented new works.",
                            freedom: "True freedom is gained after experiencing constraints. The frustration accumulated so far will now burn as a more powerful flame of liberation.",
                            authentic: "The confusion and pain in the process of finding authenticity are all part of the process for new birth. Don't fear that fire and discover your new self within it.",
                            rediscovery: "It's not rediscovery but recreation. Based on your past self but being reborn as a completely new dimension of yourself is true growth.",
                            mask: "Taking off the mask is also a kind of death, but that death is the beginning of new life living with your real face. Bravely enter the flames of rebirth.",
                            general: "All the confusion and sense of loss you're feeling now is a necessary process for being reborn as a more complete self. Be reborn with the heart of a phoenix."
                        },
                        pt: {
                            identity: "O momento que vocÃª sente que perdeu sua identidade Ã© na verdade uma oportunidade de nascer como um novo eu. Ressurgir das cinzas como uma fÃªnix Ã© o verdadeiro comeÃ§o da transformaÃ§Ã£o.",
                            lost_self: "VocÃª nÃ£o estÃ¡ perdido mas se transformando. FÃªnix tambÃ©m morre e renasce. Seu eu anterior se tornou material precioso para seu novo eu.",
                            conformity: "Se vocÃª se perdeu enquanto se conformava aos outros, agora pode renascer como um eu mais forte atravÃ©s dessa experiÃªncia. ProvaÃ§Ãµes se tornam chamas de crescimento.",
                            others_expectations: "Seu passado preso aos padrÃµes dos outros agora se tornou cinzas. Dessas cinzas, um novo eu nascerÃ¡ vivendo por seus prÃ³prios padrÃµes, nÃ£o de mais ninguÃ©m.",
                            original_self: "NÃ£o sinta saudade do seu eu anterior. Todas essas experiÃªncias ajudarÃ£o vocÃª a renascer como um vocÃª mais maduro e sÃ¡bio. O passado Ã© combustÃ­vel para o presente.",
                            creativity: "Criatividade nÃ£o desapareceu mas estava em estado dormente para criaÃ§Ã£o maior. Agora essa energia explodirÃ¡ para criar obras novas sem precedentes.",
                            freedom: "Verdadeira liberdade Ã© ganha apÃ³s experimentar limitaÃ§Ãµes. A frustraÃ§Ã£o acumulada atÃ© agora irÃ¡ agora queimar como uma chama mais poderosa de libertaÃ§Ã£o.",
                            authentic: "A confusÃ£o e dor no processo de encontrar autenticidade sÃ£o todas parte do processo para novo nascimento. NÃ£o tema esse fogo e descubra seu novo eu dentro dele.",
                            rediscovery: "NÃ£o Ã© redescoberta mas recriaÃ§Ã£o. Baseado em seu eu passado mas renascer como uma dimensÃ£o completamente nova de si mesmo Ã© verdadeiro crescimento.",
                            mask: "Tirar a mÃ¡scara tambÃ©m Ã© um tipo de morte, mas essa morte Ã© o comeÃ§o de nova vida vivendo com seu rosto real. Corajosamente entre nas chamas do renascimento.",
                            general: "Toda a confusÃ£o e sensaÃ§Ã£o de perda que vocÃª estÃ¡ sentindo agora Ã© um processo necessÃ¡rio para renascer como um eu mais completo. RenasÃ§a com o coraÃ§Ã£o de uma fÃªnix."
                        }
                    };
                    
                    return responses[lang][emotion] || responses[lang]['general'];
                }
            }
        ];
        
        let currentLanguage = 'en'; // ê¸°ë³¸ ì–¸ì–´ë¥¼ ì˜ì–´ë¡œ ì„¤ì •
        let currentUser = null;
        let userResponse = '';
        let journeyStarted = false;
        let currentTypingElement = null;
        let typingIntervals = [];
        
        // ============ ì—¬ì • ì´ˆê¸°í™” í•¨ìˆ˜ ============
        
        function resetJourney() {
            console.log('=== ì—¬ì • ì´ˆê¸°í™” ì‹œì‘ ===');
            
            // 1. ëª¨ë“  íƒ€ì´í•‘ íš¨ê³¼ ì™„ì „ ì •ë¦¬
            clearAllTypingEffects();
            
            // ì¶”ê°€ ì•ˆì „ì¥ì¹˜ - ëª¨ë“  timer ì •ë¦¬
            for (let i = 1; i < 99999; i++) window.clearInterval(i);
            for (let i = 1; i < 99999; i++) window.clearTimeout(i);
            
            // 2. ëª¨ë“  ì½˜í…ì¸  ì„¹ì…˜ ì™„ì „ ì´ˆê¸°í™”
            const sectionsToReset = [
                'portalIntroSection',
                'characterResponsesSection', 
                'lightMessageSection',
                'portalQuestionSection',
                'userInputSection',
                'userReactionsSection',
                'continueSection'
            ];
            
            sectionsToReset.forEach(sectionId => {
                const section = document.getElementById(sectionId);
                if (section) {
                    section.classList.remove('show');
                    section.style.opacity = '0';
                    
                    if (sectionId === 'characterResponsesSection' || 
                        sectionId === 'userInputSection' || 
                        sectionId === 'userReactionsSection') {
                        section.innerHTML = '';
                    } else {
                        const textElements = section.querySelectorAll('.portal-intro, .light-message, .portal-question, .continue-text');
                        textElements.forEach(el => {
                            el.innerHTML = '';
                            el.textContent = '';
                        });
                    }
                }
            });
            
            // 3. íŠ¹ì • ìš”ì†Œë“¤ ê°œë³„ ì´ˆê¸°í™”
            const portalIntro = document.getElementById('portalIntro');
            const lightMessage = document.getElementById('lightMessage');
            const portalQuestion = document.getElementById('portalQuestion');
            const continueText = document.getElementById('continueText');
            
            if (portalIntro) portalIntro.innerHTML = '';
            if (lightMessage) lightMessage.innerHTML = '';
            if (portalQuestion) portalQuestion.innerHTML = '';
            if (continueText) continueText.innerHTML = '';
            
            // 4. í…ìŠ¤íŠ¸ì˜ì—­ ì™„ì „ ì´ˆê¸°í™”
            const userTextarea = document.getElementById('userTextarea');
            if (userTextarea) {
                userTextarea.disabled = false;
                userTextarea.value = '';
                userTextarea.style.height = 'auto';
                userTextarea.placeholder = translations[currentLanguage].inputPlaceholder;
            }
            
            // 5. ìŠ¤í¬ë¡¤ ìœ„ì¹˜ ì´ˆê¸°í™”
            const mainContent = document.getElementById('mainContent');
            if (mainContent) {
                mainContent.scrollTop = 0;
            }
            
            // 6. ìƒíƒœ ë³€ìˆ˜ ì™„ì „ ì´ˆê¸°í™”
            userResponse = '';
            currentTypingElement = null;
            
            console.log('=== ì—¬ì • ì´ˆê¸°í™” ì™„ë£Œ ===');
        }
        
        // ============ ê°œì„ ëœ ì–¸ì–´ ë³€ê²½ í•¨ìˆ˜ ============
        
        function changeLanguage(lang) {
            if (!translations[lang]) {
                console.error('ì§€ì›í•˜ì§€ ì•ŠëŠ” ì–¸ì–´:', lang);
                return;
            }
            
            if (currentLanguage === lang) {
                return;
            }
            
            if (journeyStarted) {
                const confirmMessage = translations[currentLanguage].languageChangeConfirm;
                const shouldRestart = confirm(confirmMessage);
                
                if (!shouldRestart) {
                    return;
                }
            }
            
            const previousLanguage = currentLanguage;
            currentLanguage = lang;
            
            console.log(`ì–¸ì–´ ë³€ê²½: ${previousLanguage} â†’ ${currentLanguage}`);
            
            if (journeyStarted) {
                resetJourney();
            }
            
            updateLanguageButtons(lang);
            updateStaticTranslations(lang);
            
            if (journeyStarted) {
                setTimeout(() => {
                    console.log(`ìƒˆë¡œìš´ ì–¸ì–´(${currentLanguage})ë¡œ ì—¬ì • ì¬ì‹œì‘`);
                    startPortalSequence();
                }, 1000);
            }
        }
        
        // ============ UI ì—…ë°ì´íŠ¸ í•¨ìˆ˜ë“¤ ============
        
        function updateLanguageButtons(lang) {
            document.querySelectorAll('.lang-btn').forEach(btn => {
                btn.classList.remove('active');
                if (btn.dataset.lang === lang) {
                    btn.classList.add('active');
                }
            });
        }
        
        function updateStaticTranslations(lang) {
            // ê°œë³„ ìš”ì†Œ ì—…ë°ì´íŠ¸
            const elements = [
                'logoSubtitle',
                'portalMainTitle', 
                'portalSubtitle',
                'lightTitle',
                'continueYesBtn',
                'continueNoBtn'
            ];
            
            elements.forEach(elementId => {
                const element = document.getElementById(elementId);
                if (element && translations[lang]) {
                    const key = elementId.replace('Btn', 'Button').replace('Subtitle', 'Subtitle');
                    let translationKey = key;
                    
                    const keyMapping = {
                        'logoSubtitle': 'logoSubtitle',
                        'portalMainTitle': 'portalMainTitle',
                        'portalSubtitle': 'portalSubtitle',
                        'lightTitle': 'lightTitle',
                        'continueYesButton': 'continueYes',
                        'continueNoButton': 'continueNo'
                    };
                    
                    translationKey = keyMapping[key] || key;
                    
                    if (translations[lang][translationKey]) {
                        element.textContent = translations[lang][translationKey];
                    }
                }
            });
            
            // placeholder ì—…ë°ì´íŠ¸
            const textarea = document.getElementById('userTextarea');
            if (textarea) textarea.placeholder = translations[lang].inputPlaceholder;
        }
        
        // ============ ê°œì„ ëœ íƒ€ì´í•‘ íš¨ê³¼ + ìŠ¤í¬ë¡¤ ì¶”ì  ì‹œìŠ¤í…œ ============
        
        function typewriterEffect(element, text, speed = 80) {
            return new Promise((resolve) => {
                if (currentTypingElement) {
                    currentTypingElement.classList.remove('typing-cursor');
                }
                
                let i = 0;
                element.innerHTML = '';
                element.classList.add('typing-cursor');
                currentTypingElement = element;
                
                const typingInterval = setInterval(() => {
                    if (!document.contains(element)) {
                        clearInterval(typingInterval);
                        resolve();
                        return;
                    }
                    
                    element.innerHTML += text.charAt(i);
                    i++;
                    
                    if (i % 10 === 0) {
                        scrollToFollowTyping(element);
                    }
                    
                    if (i === text.length) {
                        clearInterval(typingInterval);
                        element.classList.remove('typing-cursor');
                        currentTypingElement = null;
                        
                        setTimeout(() => {
                            if (document.contains(element)) {
                                scrollToFollowTyping(element);
                            }
                        }, 200);
                        
                        resolve();
                    }
                }, speed);
                
                typingIntervals.push(typingInterval);
            });
        }
        
        function clearAllTypingEffects() {
            typingIntervals.forEach(interval => clearInterval(interval));
            typingIntervals = [];
            
            if (currentTypingElement) {
                currentTypingElement.classList.remove('typing-cursor');
                currentTypingElement = null;
            }
        }
        
        // ============ ìŠ¤ë§ˆíŠ¸ ìŠ¤í¬ë¡¤ ì‹œìŠ¤í…œ ============
        
        function scrollToFollowTyping(element) {
            const mainContent = document.getElementById('mainContent');
            const elementRect = element.getBoundingClientRect();
            const containerRect = mainContent.getBoundingClientRect();
            
            if (elementRect.bottom > containerRect.bottom - 150) {
                const scrollTop = mainContent.scrollTop;
                const elementOffsetTop = element.offsetTop;
                const targetScroll = elementOffsetTop - (containerRect.height / 2);
                
                mainContent.scrollTo({
                    top: Math.max(0, targetScroll),
                    behavior: 'smooth'
                });
            }
        }
        
        function scrollToElement(element) {
            const mainContent = document.getElementById('mainContent');
            const elementOffsetTop = element.offsetTop;
            const containerHeight = mainContent.clientHeight;
            const targetScroll = elementOffsetTop - (containerHeight / 3);
            
            mainContent.scrollTo({
                top: Math.max(0, targetScroll),
                behavior: 'smooth'
            });
        }
        
        // ============ ì–¸ì–´ ë²„íŠ¼ ì´ë²¤íŠ¸ ì„¤ì • ============
        
        function setupLanguageButtons() {
            const langButtons = document.querySelectorAll('.lang-btn');
            
            langButtons.forEach(btn => {
                btn.addEventListener('click', function(e) {
                    e.preventDefault();
                    const newLang = this.dataset.lang;
                    changeLanguage(newLang);
                });
            });
        }
        
        // ============ ë©”ì¸ ì—¬ì • ì‹œìŠ¤í…œ ============
        
        function initializeTemarix() {
            console.log('=== Temarix Portal 13 ì´ˆê¸°í™” ì‹œì‘ ===');
            
            setupLanguageButtons();
            setupTextareaAutoResize();
            setupInputEvents();
            
            journeyStarted = true;
            
            setTimeout(() => {
                startPortalSequence();
            }, 1000);
        }
        
        function startPortalSequence() {
            setTimeout(() => {
                showIntro();
            }, 1000);
        }
        
        // ============ ì—¬ì • ë‹¨ê³„ë“¤ ============
        
        async function showIntro() {
            const introSection = document.getElementById('portalIntroSection');
            const introElement = document.getElementById('portalIntro');
            
            introSection.classList.add('show');
            
            const introText = translations[currentLanguage].portalIntro;
            await typewriterEffect(introElement, introText, 60);
            
            setTimeout(() => {
                showCharacterResponses();
            }, 2000);
        }
        
        async function showCharacterResponses() {
            const responseSection = document.getElementById('characterResponsesSection');
            
            responseSection.classList.add('show');
            
            for (let i = 0; i < characters.length; i++) {
                const char = characters[i];
                const responseDiv = document.createElement('div');
                responseDiv.className = 'character-response';
                
                const nameDiv = document.createElement('div');
                nameDiv.className = 'character-name';
                nameDiv.textContent = `${char.emoji} ${char.name}`;
                
                const dialogueDiv = document.createElement('div');
                dialogueDiv.className = 'character-dialogue';
                
                responseDiv.appendChild(nameDiv);
                responseDiv.appendChild(dialogueDiv);
                responseSection.appendChild(responseDiv);
                
                responseDiv.style.opacity = '1';
                
                const dialogueText = translations[currentLanguage][char.key];
                await typewriterEffect(dialogueDiv, dialogueText, 70);
                
                if (i < characters.length - 1) {
                    await new Promise(resolve => setTimeout(resolve, 1500));
                }
            }
            
            setTimeout(() => {
                showLightMessage();
            }, 2000);
        }
        
        async function showLightMessage() {
            const lightSection = document.getElementById('lightMessageSection');
            const lightMessageEl = document.getElementById('lightMessage');
            
            lightSection.classList.add('show');
            
            const lightText = translations[currentLanguage].lightMessage;
            await typewriterEffect(lightMessageEl, lightText, 60);
            
            setTimeout(() => {
                showQuestion();
            }, 2000);
        }
        
        async function showQuestion() {
            const questionSection = document.getElementById('portalQuestionSection');
            const questionEl = document.getElementById('portalQuestion');
            
            questionSection.classList.add('show');
            
            const questionText = translations[currentLanguage].portalQuestion;
            await typewriterEffect(questionEl, questionText, 50);
            
            setTimeout(() => {
                enableUserInput();
            }, 1500);
        }
        
        // ============ ì‚¬ìš©ì ì…ë ¥ ì‹œìŠ¤í…œ ============
        
        function setupInputEvents() {
            const userTextarea = document.getElementById('userTextarea');
            
            userTextarea.addEventListener('keydown', handleTextareaKeydown);
            
            document.getElementById('continueYesBtn').addEventListener('click', function() {
                processContinue('Y');
            });
            
            document.getElementById('continueNoBtn').addEventListener('click', function() {
                processContinue('N');
            });
        }
        
        function handleTextareaKeydown(e) {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                const inputValue = this.value.trim();
                
                if (inputValue) {
                    processUserInput(inputValue);
                }
            }
        }
        
        function setupTextareaAutoResize() {
            const textarea = document.getElementById('userTextarea');
            
            textarea.addEventListener('input', function() {
                this.style.height = 'auto';
                this.style.height = Math.min(this.scrollHeight, 96) + 'px';
            });
        }
        
        async function processUserInput(inputText) {
            userResponse = inputText;
            disableUserInput();
            showUserResponse(inputText);
            
            setTimeout(() => {
                showUserReactions(inputText);
            }, 1000);
        }
        
        function disableUserInput() {
            const userTextarea = document.getElementById('userTextarea');
            userTextarea.disabled = true;
            userTextarea.value = '';
            userTextarea.style.height = 'auto';
            
            userTextarea.placeholder = translations[currentLanguage].waitingMessage;
        }
        
        function enableUserInput() {
            const userTextarea = document.getElementById('userTextarea');
            userTextarea.disabled = false;
            userTextarea.placeholder = translations[currentLanguage].inputPlaceholder;
            
            setTimeout(() => {
                userTextarea.focus();
            }, 100);
        }
        
        function showUserResponse(text) {
            const inputSection = document.getElementById('userInputSection');
            const userDiv = document.createElement('div');
            userDiv.className = 'user-response';
            const youLabel = translations[currentLanguage].youLabel;
            userDiv.innerHTML = `<strong>${youLabel}:</strong> "${text}"`;
            inputSection.appendChild(userDiv);
            inputSection.classList.add('show');
            
            setTimeout(() => {
                scrollToElement(inputSection);
            }, 100);
        }
        
        async function showUserReactions(userInput) {
            const reactionsSection = document.getElementById('userReactionsSection');
            
            reactionsSection.classList.add('show');
            
            for (let i = 0; i < responseCharacters.length; i++) {
                const char = responseCharacters[i];
                const responseDiv = document.createElement('div');
                responseDiv.className = 'character-response';
                
                const nameDiv = document.createElement('div');
                nameDiv.className = 'character-name';
                nameDiv.textContent = `${char.emoji} ${char.name}`;
                
                const dialogueDiv = document.createElement('div');
                dialogueDiv.className = 'character-dialogue';
                
                responseDiv.appendChild(nameDiv);
                responseDiv.appendChild(dialogueDiv);
                reactionsSection.appendChild(responseDiv);
                
                responseDiv.style.opacity = '1';
                
                const reactionText = char.getResponse(userInput, currentLanguage);
                await typewriterEffect(dialogueDiv, reactionText, 70);
                
                if (i < responseCharacters.length - 1) {
                    await new Promise(resolve => setTimeout(resolve, 1500));
                }
            }
            
            setTimeout(() => {
                showContinueOption();
            }, 2000);
        }
        
        async function showContinueOption() {
            const continueSection = document.getElementById('continueSection');
            const continueText = document.getElementById('continueText');
            
            continueSection.classList.add('show');
            
            const questionText = translations[currentLanguage].continueText;
            await typewriterEffect(continueText, questionText, 50);
            
            setTimeout(() => {
                scrollToElement(continueSection);
            }, 500);
        }
        
        function processContinue(input) {
            if (input === 'Y') {
                const message = currentLanguage === 'ko' ? 
                    'Portal 14ê°€ ê³§ ì¤€ë¹„ë©ë‹ˆë‹¤. ê³„ì†í•´ì„œ ë” ê¹Šì€ ê°ì •ì˜ ì—¬ì •ì´ ì´ì–´ì§‘ë‹ˆë‹¤.' :
                    currentLanguage === 'en' ? 
                    'Portal 14 will be ready soon. The journey into deeper emotions continues.' :
                    'Portal 14 estarÃ¡ pronto em breve. A jornada para emoÃ§Ãµes mais profundas continua.';
                alert(message);
            } else if (input === 'N') {
                const message = currentLanguage === 'ko' ? 
                    'ì—¬ì •ì´ ì¼ì‹œ ì¤‘ì§€ë˜ì—ˆìŠµë‹ˆë‹¤. ì–¸ì œë“  ë‹¤ì‹œ ëŒì•„ì™€ ê³„ì†í•˜ì„¸ìš”.' :
                    currentLanguage === 'en' ? 
                    'The journey has been paused. Come back and continue anytime.' :
                    'A jornada foi pausada. Volte e continue a qualquer momento.';
                alert(message);
            }
        }
        
        // ============ ì´ˆê¸°í™” ============
        
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Temarix V2 Portal 13 DOM ë¡œë“œ ì™„ë£Œ');
            
            // ìë™ ë¡œê·¸ì¸ ì²˜ë¦¬ (ë¡œê·¸ì¸ ëª¨ë‹¬ ì œê±°)
            currentUser = { 
                uid: 'user-auto-' + Date.now(),
                email: 'auto@temarix.com'
            };
            
            memoryStorage.mockUser = currentUser;
            
            updateStaticTranslations(currentLanguage);
            initializeTemarix();
        });
    </script>
</body>
</html>