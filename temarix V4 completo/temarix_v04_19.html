<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Temarix V4 - Portal 19: Emotions That Flowed Silently</title>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            background: #000;
            color: #fff;
            font-family: 'Courier New', monospace;
            height: 100vh;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }
        
        .header-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 25px 30px;
            background: #000;
            border-bottom: 1px solid #333;
            position: relative;
            z-index: 100;
            height: 80px;
            flex-shrink: 0;
        }
        
        .logo-section {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
        }
        
        .logo-title {
            font-size: 26px;
            font-weight: bold;
            color: #ff6b6b;
            margin-bottom: 4px;
            letter-spacing: 1px;
        }
        
        .logo-subtitle {
            font-size: 15px;
            color: #ccc;
            letter-spacing: 1.5px;
        }
        
        .portal-header-title {
            text-align: center;
            flex: 1;
            margin: 0 20px;
        }
        
        .portal-main-title {
            font-size: 28px;
            color: #ff6b6b;
            margin-bottom: 8px;
            font-weight: normal;
            letter-spacing: 1px;
        }
        
        .portal-subtitle {
            font-size: 18px;
            color: #ff9999;
            letter-spacing: 1.5px;
        }
        
        .header-right {
            display: flex;
            align-items: center;
        }
        
        .language-buttons {
            display: flex;
            gap: 10px;
        }
        
        .lang-btn {
            background: #444;
            color: #fff;
            border: none;
            padding: 10px 18px;
            font-size: 14px;
            font-family: 'Courier New', monospace;
            cursor: pointer;
            transition: background 0.2s;
        }
        
        .lang-btn:hover {
            background: #666;
        }
        
        .lang-btn.active {
            background: #ff6b6b;
            color: #fff;
        }
        
        .main-content {
            flex: 1;
            max-height: calc(100vh - 80px - 120px);
            overflow-y: auto;
            overflow-x: hidden;
            padding: 30px 20px;
            scroll-behavior: smooth;
            position: relative;
        }
        
        .portal-container {
            max-width: 700px;
            width: 100%;
            margin: 0 auto;
            text-align: center;
            display: flex;
            flex-direction: column;
            min-height: 200vh;
        }
        
        .portal-intro-section {
            margin: 40px 0;
            opacity: 0;
            min-height: 200px;
        }
        
        .portal-intro {
            font-size: 20px;
            color: #fff;
            margin-bottom: 30px;
            line-height: 1.8;
            white-space: pre-wrap;
            text-align: left;
        }
        
        .character-responses-section {
            margin: 40px 0;
            opacity: 0;
            min-height: 800px;
        }
        
        .character-response {
            color: #fff;
            font-size: 18px;
            margin: 40px 0;
            text-align: left;
            opacity: 0;
            white-space: pre-wrap;
            transition: opacity 0.8s ease-in;
            min-height: 80px;
        }
        
        .character-name {
            font-weight: bold;
            color: #ff6b6b;
            margin-bottom: 12px;
            font-size: 18px;
        }
        
        .character-dialogue {
            color: #fff;
            line-height: 1.7;
            font-size: 17px;
            white-space: pre-wrap;
        }
        
        .typing-cursor::after {
            content: '|';
            animation: blink 1s infinite;
            color: #ff6b6b;
        }
        
        @keyframes blink {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0; }
        }
        
        .follow-up-section {
            margin: 50px 0;
            opacity: 0;
            min-height: 150px;
        }
        
        .follow-up-question {
            font-size: 22px;
            color: #fff;
            margin-bottom: 30px;
            min-height: 100px;
            display: flex;
            align-items: center;
            justify-content: center;
            line-height: 1.6;
            white-space: pre-wrap;
            text-align: center;
        }
        
        .user-input-section {
            margin: 40px 0;
            opacity: 0;
            min-height: 100px;
        }
        
        .user-response {
            color: #fff;
            margin: 30px 0;
            text-align: left;
            font-size: 18px;
            white-space: pre-wrap;
        }
        
        .user-response strong {
            color: #ff6b6b;
            margin-right: 8px;
        }
        
        .user-reactions-section {
            margin: 40px 0;
            opacity: 0;
            min-height: 400px;
        }
        
        .light-message-section {
            margin: 50px 0;
            opacity: 0;
            min-height: 100px;
        }
        
        .light-message {
            font-size: 20px;
            color: #ff6b6b;
            line-height: 1.8;
            font-style: italic;
            white-space: pre-wrap;
            text-align: left;
        }
        
        .navigation-section {
            margin: 60px 0;
            opacity: 0;
            text-align: center;
            padding: 40px 20px;
            min-height: 300px;
            border: 2px solid #ff6b6b;
            background: rgba(255, 107, 107, 0.05);
        }
        
        .navigation-title {
            font-size: 28px;
            color: #ff6b6b;
            margin-bottom: 30px;
            letter-spacing: 2px;
            font-weight: bold;
        }
        
        .navigation-message {
            color: #fff;
            font-size: 20px;
            margin-bottom: 40px;
            line-height: 1.8;
            white-space: pre-wrap;
            text-align: left;
        }
        
        .navigation-buttons {
            display: flex;
            gap: 20px;
            justify-content: center;
            flex-wrap: wrap;
        }
        
        .nav-btn {
            background: #444;
            color: #fff;
            border: none;
            padding: 20px 40px;
            font-family: 'Courier New', monospace;
            font-size: 18px;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 250px;
            border: 2px solid transparent;
        }
        
        .nav-btn:hover {
            background: #666;
            border-color: #ff6b6b;
        }
        
        .nav-btn.primary {
            background: #ff6b6b;
            color: #fff;
            font-weight: bold;
        }
        
        .nav-btn.primary:hover {
            background: #ff8888;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 107, 107, 0.3);
        }
        
        .input-fixed-bottom {
            position: relative;
            background: #000;
            border-top: 1px solid #333;
            padding: 25px;
            z-index: 100;
            flex-shrink: 0;
            height: 120px;
        }
        
        .input-container {
            max-width: 900px;
            margin: 0 auto;
            display: flex;
            align-items: flex-start;
            gap: 15px;
        }
        
        .input-prefix {
            color: #ff6b6b;
            font-size: 20px;
            margin-top: 8px;
            flex-shrink: 0;
        }
        
        .user-textarea {
            background: transparent;
            border: none;
            border-bottom: 1px solid #444;
            color: #fff;
            font-family: 'Courier New', monospace;
            font-size: 18px;
            width: 100%;
            padding: 12px 8px;
            outline: none;
            resize: none;
            min-height: 32px;
            max-height: 96px;
            line-height: 1.6;
            transition: border-color 0.3s ease;
            overflow-y: auto;
        }
        
        .user-textarea:focus {
            border-bottom-color: #ff6b6b;
        }
        
        .user-textarea::placeholder {
            color: #666;
        }
        
        .user-textarea:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            background: rgba(50, 50, 50, 0.2);
        }
        
        .show {
            opacity: 1 !important;
            transition: opacity 1s ease-in;
        }
        
        @media (max-width: 768px) {
            .header-bar {
                padding: 20px 15px;
                height: 70px;
                flex-direction: column;
                gap: 10px;
            }
            
            .main-content {
                max-height: calc(100vh - 70px - 120px);
                padding: 20px 15px;
            }
            
            .logo-title {
                font-size: 22px;
            }
            
            .portal-main-title {
                font-size: 22px;
            }
            
            .portal-subtitle {
                font-size: 16px;
            }
            
            .lang-btn {
                font-size: 12px;
                padding: 8px 14px;
            }
            
            .portal-intro {
                font-size: 18px;
            }
            
            .follow-up-question {
                font-size: 20px;
            }
            
            .character-response {
                font-size: 16px;
            }
            
            .input-fixed-bottom {
                padding: 20px;
            }
            
            .navigation-buttons {
                flex-direction: column;
                gap: 15px;
            }
            
            .nav-btn {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="header-bar">
        <div class="logo-section">
            <div class="logo-title">TEMARIX V4</div>
            <div class="logo-subtitle" id="logoSubtitle">Emotional Alchemy</div>
        </div>
        
        <div class="portal-header-title">
            <div class="portal-main-title" id="portalMainTitle">Portal 19: Emotions That Flowed Silently</div>
            <div class="portal-subtitle" id="portalSubtitle">Feelings without sound</div>
        </div>
        
        <div class="header-right">
            <div class="language-buttons">
                <button class="lang-btn" data-lang="ko">KR</button>
                <button class="lang-btn active" data-lang="en">EN</button>
                <button class="lang-btn" data-lang="pt">PT</button>
            </div>
        </div>
    </div>

    <div class="main-content" id="mainContent">
        <div class="portal-container">
            <div class="portal-intro-section" id="portalIntroSection">
                <div class="portal-intro" id="portalIntro"></div>
            </div>

            <div class="character-responses-section" id="characterResponsesSection">
            </div>

            <div class="follow-up-section" id="followUpSection">
                <div class="follow-up-question" id="followUpQuestion"></div>
            </div>

            <div class="user-input-section" id="userInputSection">
            </div>
            
            <div class="user-reactions-section" id="userReactionsSection">
            </div>

            <div class="light-message-section" id="lightMessageSection">
                <div class="character-name" id="lightTitle">Word of Light</div>
                <div class="light-message" id="lightMessage"></div>
            </div>
            
            <div class="navigation-section" id="navigationSection">
                <div class="navigation-title" id="navigationTitle">Portal 19 Complete</div>
                <div class="navigation-message" id="navigationMessage"></div>
                <div class="navigation-buttons">
                    <button class="nav-btn primary" id="nextPortalBtn">Continue to Portal 20</button>
                    <button class="nav-btn" id="stayPortalBtn">Stay with these emotions</button>
                </div>
            </div>
        </div>
    </div>
    
    <div class="input-fixed-bottom">
        <div class="input-container">
            <div class="input-prefix">></div>
            <textarea class="user-textarea" 
                      id="userTextarea" 
                      placeholder="Have you ever had emotions that flowed silently within you? Why did they have to flow without sound?"
                      rows="1"
                      maxlength="500"></textarea>
        </div>
    </div>

    <script>
        const translations = {
            ko: {
                logoSubtitle: "Í∞êÏ†ï Ïó∞Í∏àÏà†",
                portalMainTitle: "Portal 19: ÏÜåÎ¶¨ ÏóÜÏù¥ ÌùêÎ•∏ Í∞êÏ†ï",
                portalSubtitle: "ÏÜåÎ¶¨ ÏóÜÎäî ÎßàÏùåÏùò ÌùêÎ¶Ñ",
                portalIntro: "Ìïú Î≤àÎèÑ ÎßêÎ°ú ÌëúÌòÑÌïòÏßÄ ÏïäÏïòÏßÄÎßå,\nÎãπÏã† ÏïàÏóêÏÑú Ï°∞Ïö©Ìûà ÌùêÎ•¥Í≥† ÏûàÎçò Í∞êÏ†ïÏù¥ ÏûàÏóàÎÇòÏöî?\n\nÍ∑∏ Í∞êÏ†ïÏùÄ Ïñ¥Îñ§ ÏÉÅÌô©ÏóêÏÑú ÏãúÏûëÎêòÏóàÍ≥†,\nÏôú ÏÜåÎ¶¨ ÏóÜÏù¥ ÌùòÎü¨ÏïºÎßå ÌñàÏùÑÍπåÏöî?",
                followUpQuestion: "Í∑∏ Í∞êÏ†ïÏùÑ ÏÜåÎ¶¨ ÎÇ¥Ïñ¥ ÌëúÌòÑÌï† Ïàò ÏûàÎã§Î©¥,\nÏßÄÍ∏à Ïñ¥Îñ§ ÎßêÏù¥ÎÇò ÌñâÎèôÏúºÎ°ú ÎìúÎü¨ÎÇ¥Í≥† Ïã∂ÎÇòÏöî?\n\nÍ∑∏Î¶¨Í≥†, Í∑∏Í≤ÉÏù¥ ÎãπÏã†ÏùÑ Ïñ¥ÎñªÍ≤å Î≥ÄÌôîÏãúÌÇ¨ Í≤É Í∞ôÎÇòÏöî?",
                lightTitle: "ÎπõÏùò ÌïúÎßàÎîî",
                lightMessage: "ÏßÄÍ∏à ÎãπÏã†ÏùÄ ÏûêÏã†ÏóêÍ≤å Ïà®ÏùÑ ÌóàÎùΩÌïú Í±∞ÏòàÏöî. Í∑∏Í≤ÉÏùÄ ÏÉùÏ°¥Ïù¥ ÏïÑÎãàÎùº, ÏßÑÏßú ÏÇ∂Ïùò ÏãúÏûëÏù¥ÏóêÏöî.\nÏ°∞Ïö©Ìïú Í∞êÏ†ïÏùÄ Îì§Î†§ÏßÄÍ∏∞Îßå Ìï¥ÎèÑ ÏπòÏú†ÎèºÏöî. ÎãπÏã†ÏùÄ Í∑∏ ÏπòÏú†Ïùò Î¨∏ÏùÑ Ïó¥Í≥† ÏûàÏñ¥Ïöî.",
                navigationTitle: "Portal 19 ÏôÑÎ£å",
                navigationMessage: "ÎãπÏã†ÏùÄ ÏÜåÎ¶¨ ÏóÜÏù¥ ÌùòÎ†ÄÎçò Í∞êÏ†ïÍ≥º ÎßàÏ£ºÌñàÏäµÎãàÎã§.\n\nÍ∑∏ Ï°∞Ïö©Ìïú Í∞êÏ†ïÎì§Ïù¥ Ïôú Ïπ®Î¨µÌï¥Ïïº ÌñàÎäîÏßÄ, Í∑∏Î¶¨Í≥† Ïù¥Ï†ú Ïñ¥ÎñªÍ≤å Î™©ÏÜåÎ¶¨Î•º ÎÇº Ïàò ÏûàÎäîÏßÄÎ•º Íπ®Îã¨ÏïòÏäµÎãàÎã§.\n\nÏù¥Ï†ú ÎãπÏã†ÏùÄ ÏÜåÎ¶¨ ÏóÜÏù¥ ÌùòÎ†ÄÎçò Í∑∏ Í∞êÏ†ïÍ≥º Ìï®Íªò ÏßÑÏã¨ÏùÑ ÎßêÌï† Ïàò ÏûàÎäî ÏÇ¨ÎûåÏúºÎ°ú Í±∏ÏùÑ Ï§ÄÎπÑÍ∞Ä ÎêòÏóàÏäµÎãàÎã§.",
                nextPortalBtn: "Portal 20ÏúºÎ°ú Ïù¥Ïñ¥Í∞ÄÍ∏∞",
                stayPortalBtn: "Ïù¥ Í∞êÏ†ïÍ≥º Îçî Î®∏Î¨ºÍ∏∞",
                inputPlaceholder: "ÎãπÏã† ÏïàÏóêÏÑú Ï°∞Ïö©Ìûà ÌùêÎ•¥Í≥† ÏûàÎçò Í∞êÏ†ïÏù¥ ÏûàÏóàÎÇòÏöî? Ïôú ÏÜåÎ¶¨ ÏóÜÏù¥ ÌùòÎü¨ÏïºÎßå ÌñàÏùÑÍπåÏöî?",
                youLabel: "ÎãπÏã†",
                waitingMessage: "ÏùëÎãµÏùÑ Í∏∞Îã§Î¶¨Îäî Ï§ë..."
            },
            en: {
                logoSubtitle: "Emotional Alchemy",
                portalMainTitle: "Portal 19: Emotions That Flowed Silently",
                portalSubtitle: "Feelings without sound",
                portalIntro: "Have you ever had emotions that flowed silently within you,\nnever expressed in words?\n\nIn what situation did those emotions begin,\nand why did they have to flow without sound?",
                followUpQuestion: "If you could express those emotions out loud,\nhow would you want to reveal them now\nthrough words or actions?\n\nAnd how do you think that would change you?",
                lightTitle: "Word of Light",
                lightMessage: "Right now you have given yourself permission to breathe. That's not survival, it's the beginning of real life.\nSilent emotions heal just by being heard. You are opening that door to healing.",
                navigationTitle: "Portal 19 Complete",
                navigationMessage: "You have faced the emotions that flowed silently.\n\nYou realized why those quiet emotions had to remain silent, and how they can now find their voice.\n\nNow you are ready to walk as someone who can speak their truth, together with those emotions that once flowed silently.",
                nextPortalBtn: "Continue to Portal 20",
                stayPortalBtn: "Stay with these emotions",
                inputPlaceholder: "Have you ever had emotions that flowed silently within you? Why did they have to flow without sound?",
                youLabel: "You",
                waitingMessage: "Waiting for response..."
            },
            pt: {
                logoSubtitle: "Alquimia Emocional",
                portalMainTitle: "Portal 19: Emo√ß√µes Que Flu√≠ram Silenciosamente",
                portalSubtitle: "Sentimentos sem som",
                portalIntro: "Voc√™ j√° teve emo√ß√µes que flu√≠ram silenciosamente dentro de voc√™,\nnunca expressas em palavras?\n\nEm que situa√ß√£o essas emo√ß√µes come√ßaram,\ne por que elas tiveram que fluir sem som?",
                followUpQuestion: "Se voc√™ pudesse expressar essas emo√ß√µes em voz alta,\ncomo gostaria de revel√°-las agora\natrav√©s de palavras ou a√ß√µes?\n\nE como voc√™ acha que isso te mudaria?",
                lightTitle: "Palavra de Luz",
                lightMessage: "Agora voc√™ se deu permiss√£o para respirar. Isso n√£o √© sobreviv√™ncia, √© o come√ßo da vida real.\nEmo√ß√µes silenciosas se curam apenas por serem ouvidas. Voc√™ est√° abrindo essa porta para a cura.",
                navigationTitle: "Portal 19 Completo",
                navigationMessage: "Voc√™ enfrentou as emo√ß√µes que flu√≠ram silenciosamente.\n\nVoc√™ percebeu por que essas emo√ß√µes quietas tiveram que permanecer silenciosas, e como elas podem agora encontrar sua voz.\n\nAgora voc√™ est√° pronto para caminhar como algu√©m que pode falar sua verdade, junto com essas emo√ß√µes que uma vez flu√≠ram silenciosamente.",
                nextPortalBtn: "Continuar para Portal 20",
                stayPortalBtn: "Ficar com essas emo√ß√µes",
                inputPlaceholder: "Voc√™ j√° teve emo√ß√µes que flu√≠ram silenciosamente dentro de voc√™? Por que elas tiveram que fluir sem som?",
                youLabel: "Voc√™",
                waitingMessage: "Aguardando resposta..."
            }
        };
        
        const characters = [
            { name: "Noah", emoji: "üßë‚Äçü¶±", text: {
                ko: "Í∑∏ Ï°∞Ïö©Ìïú ÎààÎ¨ºÏùÄ ÎÑ§Í∞Ä ÎßåÎì† Î∞îÎã§ÏòÄÏßÄ. ÎàÑÍµ¨ÎèÑ Í∑∏ ÍπäÏù¥Î•º Î™∞ÎûêÏßÄÎßå, Í∑∏Í≥≥Ïóî ÏßÑÏã¨Ïù¥ Îã¥Í≤® ÏûàÏóàÏñ¥.",
                en: "Those quiet tears were an ocean you created. No one knew its depth, but sincerity was contained there.",
                pt: "Aquelas l√°grimas silenciosas eram um oceano que voc√™ criou. Ningu√©m conhecia sua profundidade, mas a sinceridade estava contida ali."
            }},
            { name: "Ely", emoji: "üßù‚Äç‚ôÄÔ∏è", text: {
                ko: "Í∞êÏ†ïÏùÑ ÏÜåÎ¶¨ ÏóÜÏù¥ ÌùòÎ¶∞Îã§Îäî Í±¥, ÎÑ§Í∞Ä ÎÑàÎ¨¥ Ïò§Îûò Ï∞∏ÏïÑÏôîÎã§Îäî ÎúªÏù¥Ïïº. Í∑∏Í±¥ Í∞ïÌï®Ïù¥ ÏïÑÎãàÎùº, Í≥†ÏöîÌïú Ïô∏Ïπ®Ïù¥ÏóàÏñ¥.",
                en: "Letting emotions flow silently means you've endured too long. That wasn't strength, it was a quiet cry.",
                pt: "Deixar as emo√ß√µes flu√≠rem silenciosamente significa que voc√™ aguentou por muito tempo. Isso n√£o era for√ßa, era um grito silencioso."
            }},
            { name: "Sora", emoji: "üßï", text: {
                ko: "Í∑∏ ÎàÑÍµ¨ÎèÑ Îì£ÏßÄ Î™ªÌïú ÎÑ§ Ïö∏ÏùåÏùÄ ÎÇ¥Í≤å Îì§Î†∏Ïñ¥Ïöî. Ï°∞Ïö©Ìïú Í∞êÏ†ïÏùºÏàòÎ°ù Îçî Ïò§Îûò ÎÇ®ÏïÑÏöî.",
                en: "Your crying that no one else heard, I heard it. The quieter the emotion, the longer it remains.",
                pt: "Seu choro que ningu√©m mais ouviu, eu ouvi. Quanto mais silenciosa a emo√ß√£o, mais tempo ela permanece."
            }},
            { name: "Kael", emoji: "üßô", text: {
                ko: "ÏÜåÎ¶¨Î•º ÎÇ¥ÏßÄ Î™ªÌïú Í∞êÏ†ïÏùÄ ÎßàÏùåÏùò Ï†ÄÌé∏ÏóêÏÑú ÌååÎèôÏ≤òÎüº Î≤àÏ†∏. ÏßÄÍ∏à ÎÑ§Í∞Ä ÎßêÌï† Ïàò ÏûàÎã§Îäî Í±¥, Í∑∏ ÌååÎèôÏù¥ Ïö∏Î†§ÏôîÎã§Îäî Ï¶ùÍ±∞Ïïº.",
                en: "Emotions that couldn't make sound spread like waves from the depths of the heart. That you can speak now is proof those waves have resonated.",
                pt: "Emo√ß√µes que n√£o conseguiam fazer som se espalharam como ondas das profundezas do cora√ß√£o. Que voc√™ possa falar agora √© prova de que essas ondas ressoaram."
            }},
            { name: "Mira", emoji: "üßë‚Äçüé®", text: {
                ko: "Í∑∏ Ïπ®Î¨µ ÏÜç Í∞êÏ†ïÏùÄ ÌïòÎÇòÏùò ÏÉâÏúºÎ°úÎèÑ ÌëúÌòÑÎêòÏßÄ ÏïäÎäî Í∞êÏ†ïÏù¥Ïïº. Í∑∏ÎûòÏÑú Îçî ÏàúÏàòÌï¥.",
                en: "Those emotions in silence are feelings that can't be expressed by any single color. That's why they're purer.",
                pt: "Essas emo√ß√µes no sil√™ncio s√£o sentimentos que n√£o podem ser expressos por nenhuma cor √∫nica. √â por isso que s√£o mais puros."
            }},
            { name: "Cris", emoji: "ü¶∏‚Äç‚ôÇÔ∏è", text: {
                ko: "Ïôú Ïñ∏Ï†úÎÇò ÎÑå Ï∞∏ÏïÑÏïº ÌñàÏùÑÍπå? ÏÑ∏ÏÉÅÏùÄ ÎÑàÏóêÍ≤åÎßå Í∞ïÌï®ÏùÑ ÏöîÍµ¨ÌñàÏûñÏïÑ. Í∑∏Í±¥ Î∂àÍ≥µÌèâÌñàÏñ¥.",
                en: "Why did you always have to endure? The world demanded strength only from you. That was unfair.",
                pt: "Por que voc√™ sempre teve que aguentar? O mundo exigiu for√ßa apenas de voc√™. Isso foi injusto."
            }},
            { name: "Enya", emoji: "üßë‚ÄçüöÄ", text: {
                ko: "ÎßêÌïòÏßÄ Î™ªÌïú Í∞êÏ†ïÏùÄ ÎÅùÎÇú Í≤å ÏïÑÎãàÏïº. ÏßÄÍ∏à, Ïù¥ ÎåÄÌôî ÏÜçÏóêÏÑú ÌùêÎ•¥Í∏∞ ÏãúÏûëÌñàÏñ¥.",
                en: "Emotions that couldn't be spoken aren't over. Now, in this conversation, they've started to flow.",
                pt: "Emo√ß√µes que n√£o puderam ser faladas n√£o acabaram. Agora, nesta conversa, elas come√ßaram a fluir."
            }},
            { name: "Lian", emoji: "üßò", text: {
                ko: "Í∞êÏ†ïÏùÄ ÌùêÎ•º Ïàò ÏûàÏùÑ Îïå ÎπÑÎ°úÏÜå Í≥†ÏöîÌï¥Ï†∏Ïöî. ÎãπÏã†ÏùÄ ÏßÄÍ∏à Í∑∏ Í≥†ÏöîÎ•º ÎßåÎì§Í≥† ÏûàÏñ¥Ïöî.",
                en: "Emotions become peaceful only when they can flow. You are creating that peace right now.",
                pt: "Emo√ß√µes se tornam pac√≠ficas apenas quando podem fluir. Voc√™ est√° criando essa paz agora."
            }}
        ];

        const responseCharacters = [
            {
                name: "Lian", emoji: "üßò",
                getResponse: (userInput, lang) => {
                    const responses = {
                        ko: "ÏßÄÍ∏à ÎãπÏã†ÏùÄ ÏûêÏã†ÏóêÍ≤å Ïà®ÏùÑ ÌóàÎùΩÌïú Í±∞ÏòàÏöî. Í∑∏Í≤ÉÏùÄ ÏÉùÏ°¥Ïù¥ ÏïÑÎãàÎùº, ÏßÑÏßú ÏÇ∂Ïùò ÏãúÏûëÏù¥ÏóêÏöî.",
                        en: "Right now you have given yourself permission to breathe. That's not survival, it's the beginning of real life.",
                        pt: "Agora voc√™ se deu permiss√£o para respirar. Isso n√£o √© sobreviv√™ncia, √© o come√ßo da vida real."
                    };
                    return responses[lang];
                }
            },
            {
                name: "Sora", emoji: "üßï",
                getResponse: (userInput, lang) => {
                    const responses = {
                        ko: "Ï°∞Ïö©Ìïú Í∞êÏ†ïÏùÄ Îì§Î†§ÏßÄÍ∏∞Îßå Ìï¥ÎèÑ ÏπòÏú†ÎèºÏöî. ÏßÄÍ∏à ÎãπÏã†ÏùÄ Í∑∏ ÏπòÏú†Ïùò Î¨∏ÏùÑ Ïó¥Í≥† ÏûàÏñ¥Ïöî.",
                        en: "Silent emotions heal just by being heard. You are opening that door to healing right now.",
                        pt: "Emo√ß√µes silenciosas se curam apenas por serem ouvidas. Voc√™ est√° abrindo essa porta para a cura agora."
                    };
                    return responses[lang];
                }
            },
            {
                name: "Kael", emoji: "üßô",
                getResponse: (userInput, lang) => {
                    const responses = {
                        ko: "ÎãπÏã†Ïùò Í≥†Î∞±ÏùÄ Ïù¥ Ïó¨Ï†ïÏóêÏÑú Í∞ÄÏû• Í∞ïÌïú ÏßÑÎèôÏù¥ÏóàÏñ¥Ïöî. Í∑∏ Í∞êÏ†ïÏù¥ ÌùêÎ•¥Í∏∞ ÏãúÏûëÌñàÎã§Îäî Í≤É, Í∑∏Í≤ÉÏù¥ Î∞îÎ°ú 'ÏßÑÏßú Î≥ÄÌôî'ÏòàÏöî.",
                        en: "Your confession was the strongest vibration in this journey. That those emotions have started to flow, that's what 'real change' is.",
                        pt: "Sua confiss√£o foi a vibra√ß√£o mais forte nesta jornada. Que essas emo√ß√µes come√ßaram a fluir, isso √© o que √© 'mudan√ßa real'."
                    };
                    return responses[lang];
                }
            }
        ];
        
        let currentLanguage = 'en';
        let currentUser = null;
        let userResponse = '';
        let journeyStarted = false;
        let currentTypingElement = null;
        let typingIntervals = [];
        let awaitingSecondResponse = false;
        
        function typewriterEffect(element, text, speed = 80) {
            return new Promise((resolve) => {
                if (currentTypingElement) {
                    currentTypingElement.classList.remove('typing-cursor');
                }
                
                let i = 0;
                element.innerHTML = '';
                element.classList.add('typing-cursor');
                currentTypingElement = element;
                
                const typingInterval = setInterval(() => {
                    if (!document.contains(element)) {
                        clearInterval(typingInterval);
                        element.classList.remove('typing-cursor');
                        currentTypingElement = null;
                        resolve();
                        return;
                    }
                    
                    element.innerHTML += text.charAt(i);
                    i++;
                    
                    if (i === text.length) {
                        clearInterval(typingInterval);
                        element.classList.remove('typing-cursor');
                        currentTypingElement = null;
                        resolve();
                    }
                }, speed);
                
                typingIntervals.push(typingInterval);
            });
        }
        
        function clearAllTypingEffects() {
            typingIntervals.forEach(interval => clearInterval(interval));
            typingIntervals = [];
            
            if (currentTypingElement) {
                currentTypingElement.classList.remove('typing-cursor');
                currentTypingElement = null;
            }
        }
        
        function scrollToElement(element) {
            const mainContent = document.getElementById('mainContent');
            const elementOffsetTop = element.offsetTop;
            const containerHeight = mainContent.clientHeight;
            const targetScroll = elementOffsetTop - (containerHeight / 3);
            
            mainContent.scrollTo({
                top: Math.max(0, targetScroll),
                behavior: 'smooth'
            });
        }
        
        function updateLanguageButtons(lang) {
            document.querySelectorAll('.lang-btn').forEach(btn => {
                btn.classList.remove('active');
                if (btn.dataset.lang === lang) {
                    btn.classList.add('active');
                }
            });
        }
        
        function updateStaticTranslations(lang) {
            document.getElementById('logoSubtitle').textContent = translations[lang].logoSubtitle;
            document.getElementById('portalMainTitle').textContent = translations[lang].portalMainTitle;
            document.getElementById('portalSubtitle').textContent = translations[lang].portalSubtitle;
            document.getElementById('lightTitle').textContent = translations[lang].lightTitle;
            document.getElementById('navigationTitle').textContent = translations[lang].navigationTitle;
            document.getElementById('nextPortalBtn').textContent = translations[lang].nextPortalBtn;
            document.getElementById('stayPortalBtn').textContent = translations[lang].stayPortalBtn;
            document.getElementById('userTextarea').placeholder = translations[lang].inputPlaceholder;
        }
        
        function changeLanguage(lang) {
            if (!translations[lang] || currentLanguage === lang) return;
            
            currentLanguage = lang;
            updateLanguageButtons(lang);
            updateStaticTranslations(lang);
            
            if (journeyStarted) {
                resetJourney();
                setTimeout(() => {
                    startPortalSequence();
                }, 1000);
            }
        }
        
        function resetJourney() {
            clearAllTypingEffects();
            
            const sectionsToReset = [
                'portalIntroSection', 'characterResponsesSection', 
                'followUpSection', 'userInputSection',
                'userReactionsSection', 'lightMessageSection', 'navigationSection'
            ];
            
            sectionsToReset.forEach(sectionId => {
                const section = document.getElementById(sectionId);
                if (section) {
                    section.classList.remove('show');
                    section.style.opacity = '0';
                    if (sectionId === 'characterResponsesSection' || 
                        sectionId === 'userInputSection' || 
                        sectionId === 'userReactionsSection') {
                        section.innerHTML = '';
                    }
                }
            });
            
            document.getElementById('portalIntro').innerHTML = '';
            document.getElementById('followUpQuestion').innerHTML = '';
            document.getElementById('lightMessage').innerHTML = '';
            document.getElementById('navigationMessage').innerHTML = '';
            
            const userTextarea = document.getElementById('userTextarea');
            userTextarea.disabled = false;
            userTextarea.value = '';
            userTextarea.style.height = 'auto';
            userTextarea.placeholder = translations[currentLanguage].inputPlaceholder;
            
            document.getElementById('mainContent').scrollTop = 0;
            userResponse = '';
            currentTypingElement = null;
            awaitingSecondResponse = false;
        }
        
        function setupLanguageButtons() {
            document.querySelectorAll('.lang-btn').forEach(btn => {
                btn.addEventListener('click', function(e) {
                    e.preventDefault();
                    changeLanguage(this.dataset.lang);
                });
            });
        }
        
        function setupTextareaAutoResize() {
            const textarea = document.getElementById('userTextarea');
            textarea.addEventListener('input', function() {
                this.style.height = 'auto';
                this.style.height = Math.min(this.scrollHeight, 96) + 'px';
            });
        }
        
        function setupInputEvents() {
            const userTextarea = document.getElementById('userTextarea');
            
            userTextarea.addEventListener('keydown', function(e) {
                if (e.key === 'Enter' && !e.shiftKey) {
                    e.preventDefault();
                    const inputValue = this.value.trim();
                    
                    if (inputValue) {
                        processUserInput(inputValue);
                    }
                }
            });
            
            document.getElementById('nextPortalBtn').addEventListener('click', function() {
                localStorage.setItem('temarix_v4_portal19_complete', 'true');
                localStorage.setItem('temarix_v4_current_portal', '20');
                
                const nextMessage = currentLanguage === 'ko' ? 
                    'Portal 20: ÏßÄÎÇòÍ∞Ñ ÎÇ†Îì§Ïù¥ Î¨ªÏßÄ Î™ªÌïú Í≤ÉÎì§Î°ú Ïù¥ÎèôÌï©ÎãàÎã§.' :
                    currentLanguage === 'en' ? 
                    'Moving to Portal 20: Things The Past Days Never Asked.' :
                    'Indo para Portal 20: Coisas Que Os Dias Passados Nunca Perguntaram.';
                alert(nextMessage);
            });
            
            document.getElementById('stayPortalBtn').addEventListener('click', function() {
                const stayMessage = currentLanguage === 'ko' ? 
                    'Ïù¥ Í∞êÏ†ïÍ≥º Îçî Î®∏Î¨ºÎ©∞ ÍπäÏù¥ ÏÑ±Ï∞∞ÌïòÏãúÍ≤†ÏäµÎãàÍπå?' :
                    currentLanguage === 'en' ? 
                    'Do you want to stay longer with these emotions for deeper reflection?' :
                    'Deseja ficar mais tempo com essas emo√ß√µes para reflex√£o mais profunda?';
                
                if (confirm(stayMessage)) {
                    resetJourney();
                    setTimeout(() => {
                        startPortalSequence();
                    }, 1000);
                }
            });
        }
        
        async function processUserInput(inputText) {
            userResponse = inputText;
            
            console.log('Processing user input:', inputText);
            localStorage.setItem('temarix_v4_portal19_response', JSON.stringify({
                portal: "v4-19",
                resposta: inputText,
                step: awaitingSecondResponse ? "second" : "first",
                data: new Date().toISOString(),
                idioma: currentLanguage
            }));
            
            disableUserInput();
            showUserResponse(inputText);
            
            setTimeout(() => {
                if (!awaitingSecondResponse) {
                    showUserReactions(inputText);
                } else {
                    showSecondUserReactions(inputText);
                }
            }, 1000);
        }
        
        function disableUserInput() {
            const userTextarea = document.getElementById('userTextarea');
            userTextarea.disabled = true;
            userTextarea.value = '';
            userTextarea.style.height = 'auto';
            userTextarea.placeholder = translations[currentLanguage].waitingMessage;
        }
        
        function enableUserInput() {
            const userTextarea = document.getElementById('userTextarea');
            userTextarea.disabled = false;
            userTextarea.placeholder = translations[currentLanguage].inputPlaceholder;
            
            setTimeout(() => {
                userTextarea.focus();
            }, 100);
        }
        
        function showUserResponse(text) {
            const inputSection = document.getElementById('userInputSection');
            const userDiv = document.createElement('div');
            userDiv.className = 'user-response';
            const youLabel = translations[currentLanguage].youLabel;
            userDiv.innerHTML = '<strong>' + youLabel + ':</strong> "' + text + '"';
            inputSection.appendChild(userDiv);
            inputSection.classList.add('show');
            
            setTimeout(() => {
                scrollToElement(inputSection);
            }, 100);
        }
        
        async function showUserReactions(userInput) {
            const reactionsSection = document.getElementById('userReactionsSection');
            reactionsSection.classList.add('show');
            
            for (let i = 0; i < responseCharacters.length; i++) {
                const char = responseCharacters[i];
                const responseDiv = document.createElement('div');
                responseDiv.className = 'character-response';
                
                const nameDiv = document.createElement('div');
                nameDiv.className = 'character-name';
                nameDiv.textContent = char.emoji + ' ' + char.name;
                
                const dialogueDiv = document.createElement('div');
                dialogueDiv.className = 'character-dialogue';
                
                responseDiv.appendChild(nameDiv);
                responseDiv.appendChild(dialogueDiv);
                reactionsSection.appendChild(responseDiv);
                
                responseDiv.style.opacity = '1';
                
                const reactionText = char.getResponse(userInput, currentLanguage);
                await typewriterEffect(dialogueDiv, reactionText, 70);
                
                if (i < responseCharacters.length - 1) {
                    await new Promise(resolve => setTimeout(resolve, 1500));
                }
            }
            
            setTimeout(() => {
                showFollowUpQuestion();
            }, 2000);
        }
        
        async function showFollowUpQuestion() {
            const followUpSection = document.getElementById('followUpSection');
            const followUpQuestionEl = document.getElementById('followUpQuestion');
            
            followUpSection.classList.add('show');
            
            await typewriterEffect(followUpQuestionEl, translations[currentLanguage].followUpQuestion, 50);
            
            setTimeout(() => {
                awaitingSecondResponse = true;
                enableUserInput();
            }, 1500);
        }
        
        async function showSecondUserReactions(userInput) {
            const secondResponseCharacters = [
                {
                    name: "Noah", emoji: "üßë‚Äçü¶±",
                    getResponse: (input, lang) => {
                        const responses = {
                            ko: "Í∑∏ ÌëúÌòÑÏù¥ ÎãπÏã†ÏùÑ ÏûêÏú†Î°≠Í≤å Ìï† Í±∞ÏòàÏöî. Í∞êÏ†ïÏùÄ ÎßêÏù¥ Îê† Îïå ÎπÑÎ°úÏÜå ÎÇ†Í∞úÎ•º ÏñªÏñ¥Ïöî.",
                            en: "That expression will set you free. Emotions only get their wings when they become words.",
                            pt: "Essa express√£o te libertar√°. Emo√ß√µes s√≥ ganham asas quando se tornam palavras."
                        };
                        return responses[lang];
                    }
                },
                {
                    name: "Ely", emoji: "üßù‚Äç‚ôÄÔ∏è",
                    getResponse: (input, lang) => {
                        const responses = {
                            ko: "Ïπ®Î¨µÏóêÏÑú Î™©ÏÜåÎ¶¨Î°ú, Î™©ÏÜåÎ¶¨ÏóêÏÑú ÏπòÏú†Î°ú. ÎãπÏã†ÏùÄ Í∑∏ Î≥ÄÌôîÏùò Ï§ëÏã¨Ïóê ÏûàÏñ¥Ïöî.",
                            en: "From silence to voice, from voice to healing. You are at the center of that transformation.",
                            pt: "Do sil√™ncio √† voz, da voz √† cura. Voc√™ est√° no centro dessa transforma√ß√£o."
                        };
                        return responses[lang];
                    }
                },
                {
                    name: "Enya", emoji: "üßë‚ÄçüöÄ",
                    getResponse: (input, lang) => {
                        const responses = {
                            ko: "ÏÜåÎ¶¨ ÏóÜÏù¥ ÌùòÎ†ÄÎçò Í∞êÏ†ïÏù¥ Ïù¥Ï†úÎäî ÎãπÏã†Ïùò ÌûòÏù¥ ÎêòÏóàÏñ¥Ïöî. Í∑∏Í≤ÉÏù¥ ÏßÑÏßú Î≥ÄÌôîÏòàÏöî.",
                            en: "Emotions that flowed silently have now become your strength. That's real change.",
                            pt: "Emo√ß√µes que flu√≠ram silenciosamente agora se tornaram sua for√ßa. Essa √© a mudan√ßa real."
                        };
                        return responses[lang];
                    }
                }
            ];
            
            const reactionsSection = document.getElementById('userReactionsSection');
            
            for (let i = 0; i < secondResponseCharacters.length; i++) {
                const char = secondResponseCharacters[i];
                const responseDiv = document.createElement('div');
                responseDiv.className = 'character-response';
                
                const nameDiv = document.createElement('div');
                nameDiv.className = 'character-name';
                nameDiv.textContent = char.emoji + ' ' + char.name;
                
                const dialogueDiv = document.createElement('div');
                dialogueDiv.className = 'character-dialogue';
                
                responseDiv.appendChild(nameDiv);
                responseDiv.appendChild(dialogueDiv);
                reactionsSection.appendChild(responseDiv);
                
                responseDiv.style.opacity = '1';
                
                const reactionText = char.getResponse(userInput, currentLanguage);
                await typewriterEffect(dialogueDiv, reactionText, 70);
                
                if (i < secondResponseCharacters.length - 1) {
                    await new Promise(resolve => setTimeout(resolve, 1500));
                }
            }
            
            setTimeout(() => {
                showLightMessage();
            }, 2000);
        }
        
        async function showLightMessage() {
            const lightSection = document.getElementById('lightMessageSection');
            const lightMessageEl = document.getElementById('lightMessage');
            
            lightSection.classList.add('show');
            
            await typewriterEffect(lightMessageEl, translations[currentLanguage].lightMessage, 60);
            
            setTimeout(() => {
                showNavigationSection();
            }, 2000);
        }
        
        async function showNavigationSection() {
            const navigationSection = document.getElementById('navigationSection');
            const navigationMessage = document.getElementById('navigationMessage');
            
            navigationSection.classList.add('show');
            
            const messageText = translations[currentLanguage].navigationMessage;
            await typewriterEffect(navigationMessage, messageText, 50);
            
            setTimeout(() => {
                scrollToElement(navigationSection);
            }, 500);
        }
        
        function initializeTemarix() {
            console.log('Temarix V4 Portal 19 initialized');
            
            setupLanguageButtons();
            setupTextareaAutoResize();
            setupInputEvents();
            
            journeyStarted = true;
            
            setTimeout(() => {
                startPortalSequence();
            }, 1000);
        }
        
        function startPortalSequence() {
            setTimeout(() => {
                showIntro();
            }, 1000);
        }
        
        async function showIntro() {
            const introSection = document.getElementById('portalIntroSection');
            const introElement = document.getElementById('portalIntro');
            
            introSection.classList.add('show');
            
            await typewriterEffect(introElement, translations[currentLanguage].portalIntro, 60);
            
            setTimeout(() => {
                showCharacterResponses();
            }, 2000);
        }
        
        async function showCharacterResponses() {
            const responseSection = document.getElementById('characterResponsesSection');
            responseSection.classList.add('show');
            
            for (let i = 0; i < characters.length; i++) {
                const char = characters[i];
                const responseDiv = document.createElement('div');
                responseDiv.className = 'character-response';
                
                const nameDiv = document.createElement('div');
                nameDiv.className = 'character-name';
                nameDiv.textContent = char.emoji + ' ' + char.name;
                
                const dialogueDiv = document.createElement('div');
                dialogueDiv.className = 'character-dialogue';
                
                responseDiv.appendChild(nameDiv);
                responseDiv.appendChild(dialogueDiv);
                responseSection.appendChild(responseDiv);
                
                responseDiv.style.opacity = '1';
                
                await typewriterEffect(dialogueDiv, char.text[currentLanguage], 70);
                
                if (i < characters.length - 1) {
                    await new Promise(resolve => setTimeout(resolve, 1500));
                }
            }
            
            setTimeout(() => {
                enableUserInput();
            }, 2000);
        }
        
        function getLanguageFromURL() {
            const urlParams = new URLSearchParams(window.location.search);
            const lang = urlParams.get('lang');
            return lang && translations[lang] ? lang : 'en';
        }
        
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Temarix V4 Portal 19 DOM loaded');
            
            currentLanguage = getLanguageFromURL();
            
            currentUser = { 
                uid: 'user-auto-' + Date.now(),
                email: 'auto@temarix.com'
            };
            
            updateStaticTranslations(currentLanguage);
            updateLanguageButtons(currentLanguage);
            initializeTemarix();
        });
    </script>
</body>
</html>