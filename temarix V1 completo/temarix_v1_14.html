<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta http-equiv="Content-Language" content="ko,en,pt">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Temarix V1 - Portal 14</title>
</head>
<body>
<!-- Temarix V1 - Portal 14: ì§„ì •í•œ ë‚˜ì˜ ë¹› -->
<section class="portal portal-14" id="portal-14">
  <!-- Temarix Logo - Fixed Left Top -->
  <div class="temarix-logo">
    <h1 class="logo-text">ğŸŒŒ TEMARIX</h1>
    <p class="slogan" data-i18n="common.slogan">ë‹¹ì‹  ì•ˆì— ìˆ¨ì€ ì´ì•¼ê¸°ë¥¼ ë§ í•´ ì£¼ì„¸ìš”</p>
  </div>

  <!-- Language Selector - Fixed Right Top -->
  <div class="lang-selector">
    <button class="lang-btn active" data-lang="kr">KR</button>
    <button class="lang-btn" data-lang="en">EN</button>
    <button class="lang-btn" data-lang="pt">PT</button>
  </div>

  <!-- Portal Header - Center Top -->
  <div class="portal-header">
    <h1 data-i18n="portal14.title">ê°ì •ì˜ ë¬¸ì§€ë°© 14</h1>
    <h2 data-i18n="portal14.subtitle">ì§„ì •í•œ ë‚˜ì˜ ë¹›</h2>
  </div>

  <!-- Message Stream -->
  <div class="message-stream" id="messageStream14">
    <!-- Messages will be added here via JavaScript -->
  </div>

  <!-- User Input Area -->
  <div class="input-area" id="inputArea14" style="display: none;">
    <div class="input-container">
      <textarea 
        id="userInput14" 
        rows="3" 
        placeholder="ì´ì œ ë°œê²¬í•œ ì§„ì •í•œ ë‚˜ì˜ ëª¨ìŠµê³¼ ë¹›ì— ëŒ€í•´ ì¡°ìš©íˆ ì ì–´ë³´ì„¸ìš”..."
        data-i18n-placeholder="portal14.input.placeholder"
      ></textarea>
      <button class="submit-btn" onclick="submitResponse(14)">
        <span data-i18n="portal14.submit">âœ¨ ë‚˜ì˜ ë¹› ì¸ì •í•˜ê¸°</span>
      </button>
      <p class="input-hint" data-i18n="portal14.input.hint">Enter í‚¤ë¥¼ ëˆŒëŸ¬ë„ ì „ë‹¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤</p>
    </div>
  </div>

  <!-- Next Portal Navigation -->
  <div class="next-portal-nav" id="nextPortalNav14" style="display: none;">
    <div class="nav-buttons">
      <button class="nav-btn yes-btn" onclick="goToNextPortal(15)" data-i18n="common.yes">ì˜ˆ</button>
      <button class="nav-btn no-btn" onclick="stayInPortal()" data-i18n="common.no">ì•„ë‹ˆìš”</button>
    </div>
  </div>

  <!-- Back to Main -->
  <div class="back-to-main">
    <button onclick="window.location.href='portal4.html'" data-i18n="common.back_to_main">
      ğŸ  ë©”ì¸ í¬íƒˆë¡œ ëŒì•„ê°€ê¸°
    </button>
  </div>
</section>

<style>
/* Portal Base Styles */
.portal {
  min-height: 100vh;
  background: linear-gradient(135deg, #1a1b4b 0%, #2d1b69 100%);
  color: white;
  padding: 80px 20px 20px 20px;
  font-family: 'Apple SD Gothic Neo', -apple-system, BlinkMacSystemFont, sans-serif;
  max-width: 100%;
  margin: 0 auto;
  position: relative;
}

/* Logo Glow Animation */
@keyframes glowCycle {
  0%, 100% { text-shadow: 0 0 8px rgba(255,255,255,0.2); }
  50% { text-shadow: 0 0 25px rgba(255,255,255,0.7); }
}

/* Temarix Logo - Fixed Left Top */
.temarix-logo {
  position: fixed;
  top: 20px;
  left: 20px;
  z-index: 1000;
}

.logo-text {
  font-size: 1.8rem;
  font-weight: bold;
  color: #ffffff;
  margin: 0 0 5px 0;
  text-shadow: 0 0 20px rgba(255,255,255,0.3);
}

.slogan {
  color: #bbb;
  font-style: italic;
  font-size: 0.8rem;
  margin: 0;
}

/* Language Selector - Fixed Right Top */
.lang-selector {
  position: fixed;
  top: 20px;
  right: 20px;
  display: flex;
  gap: 5px;
  flex-wrap: wrap;
  max-width: 120px;
  z-index: 1000;
}

.lang-btn {
  background: rgba(255,255,255,0.1);
  border: 1px solid rgba(255,255,255,0.3);
  color: white;
  padding: 4px 8px;
  border-radius: 12px;
  font-size: 0.7rem;
  cursor: pointer;
  transition: all 0.3s ease;
}

.lang-btn:hover {
  background: rgba(255,255,255,0.2);
}

.lang-btn.active {
  background: #9c27b0;
  border-color: #9c27b0;
}

/* Portal Header - Center Top */
.portal-header {
  text-align: center;
  margin: 40px 0 30px 0;
  padding-top: 40px;
}

.portal-header h1 {
  font-size: 2.2rem;
  margin: 10px 0;
  color: #ffd700;
}

.portal-header h2 {
  font-size: 1.3rem;
  color: #e1bee7;
  font-weight: 300;
}

/* Message Stream */
.message-stream {
  max-height: 60vh;
  overflow-y: auto;
  padding: 20px 0;
  margin-bottom: 20px;
}

.message-card {
  background: rgba(255,255,255,0.1);
  border-radius: 15px;
  padding: 20px;
  margin: 15px 0;
  backdrop-filter: blur(10px);
  opacity: 0;
  transform: translateY(20px);
  animation: fadeInUp 0.6s ease forwards;
}

.message-card.prologue {
  border-left: 4px solid #e1bee7;
}

.message-card.ely {
  border-left: 4px solid #ffd700;
}

.message-card.sora {
  border-left: 4px solid #4dd0e1;
}

.message-card.noah {
  border-left: 4px solid #9c27b0;
}

.message-card.enya {
  border-left: 4px solid #ff9800;
}

.message-card.kaia {
  border-left: 4px solid #607d8b;
}

.message-card.cris {
  border-left: 4px solid #4caf50;
}

.message-card.kael {
  border-left: 4px solid #f44336;
}

.message-card.mira {
  border-left: 4px solid #9e9e9e;
}

.message-card.light {
  border-left: 4px solid #ffffff;
  background: rgba(255,255,255,0.15);
}

.message-card.question {
  border-left: 4px solid #f48fb1;
}

.message-card.user-input {
  border-left: 4px solid #81c784;
  background: rgba(129, 199, 132, 0.1);
}

.character-name {
  font-weight: bold;
  margin-bottom: 10px;
  font-size: 1.1rem;
}

.ely .character-name { color: #ffd700; }
.sora .character-name { color: #4dd0e1; }
.noah .character-name { color: #9c27b0; }
.enya .character-name { color: #ff9800; }
.kaia .character-name { color: #607d8b; }
.cris .character-name { color: #4caf50; }
.kael .character-name { color: #f44336; }
.mira .character-name { color: #9e9e9e; }

.message-text {
  line-height: 1.6;
  font-size: 1rem;
}

.typewriter {
  overflow: hidden;
  border-right: 2px solid rgba(255,255,255,0.7);
  white-space: nowrap;
  animation: blink-caret 1s step-end infinite;
}

@keyframes fadeInUp {
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes blink-caret {
  from, to { border-color: transparent; }
  50% { border-color: rgba(255,255,255,0.7); }
}

/* Input Area */
.input-area {
  background: rgba(0,0,0,0.3);
  padding: 20px;
  border-radius: 15px;
  margin: 20px 0;
  animation: fadeInUp 0.6s ease forwards;
}

.input-container textarea {
  width: 100%;
  background: rgba(255,255,255,0.1);
  border: 1px solid rgba(255,255,255,0.3);
  border-radius: 10px;
  padding: 15px;
  color: white;
  font-size: 1rem;
  resize: vertical;
  min-height: 80px;
  box-sizing: border-box;
}

.input-container textarea::placeholder {
  color: rgba(255,255,255,0.6);
}

.submit-btn {
  background: linear-gradient(135deg, #9c27b0, #e1bee7);
  border: none;
  color: white;
  padding: 12px 30px;
  border-radius: 25px;
  font-size: 1rem;
  cursor: pointer;
  margin-top: 10px;
  transition: all 0.3s ease;
  width: 100%;
}

.submit-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 5px 15px rgba(156, 39, 176, 0.4);
}

.input-hint {
  color: rgba(255,255,255,0.6);
  font-size: 0.8rem;
  text-align: center;
  margin: 8px 0 0 0;
}

/* Next Portal Navigation */
.next-portal-nav {
  text-align: center;
  margin: 30px 0;
  animation: fadeInUp 0.6s ease forwards;
}

.nav-buttons {
  display: flex;
  gap: 20px;
  justify-content: center;
}

.nav-btn {
  padding: 12px 30px;
  border-radius: 25px;
  font-size: 1rem;
  cursor: pointer;
  transition: all 0.3s ease;
  border: 2px solid transparent;
}

.yes-btn {
  background: linear-gradient(135deg, #4caf50, #81c784);
  color: white;
  border-color: #4caf50;
}

.yes-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 5px 15px rgba(76, 175, 80, 0.4);
}

.no-btn {
  background: rgba(255,255,255,0.1);
  color: white;
  border-color: rgba(255,255,255,0.3);
}

.no-btn:hover {
  background: rgba(255,255,255,0.2);
}

/* Back to Main */
.back-to-main {
  text-align: center;
  margin: 30px 0;
}

.back-to-main button {
  background: rgba(255,255,255,0.1);
  border: 1px solid rgba(255,255,255,0.3);
  color: white;
  padding: 10px 20px;
  border-radius: 20px;
  cursor: pointer;
  transition: all 0.3s ease;
}

.back-to-main button:hover {
  background: rgba(255,255,255,0.2);
}

/* Mobile Responsive */
@media (max-width: 768px) {
  .portal {
    padding: 100px 15px 20px 15px;
  }
  
  .temarix-logo {
    top: 15px;
    left: 15px;
  }
  
  .logo-text {
    font-size: 1.4rem;
  }
  
  .slogan {
    font-size: 0.7rem;
  }
  
  .lang-selector {
    top: 15px;
    right: 15px;
    max-width: 100px;
  }
  
  .lang-btn {
    padding: 3px 6px;
    font-size: 0.6rem;
  }
  
  .portal-header h1 {
    font-size: 1.8rem;
  }
  
  .portal-header h2 {
    font-size: 1.1rem;
  }
  
  .message-card {
    padding: 15px;
  }
  
  .nav-buttons {
    flex-direction: column;
    align-items: center;
  }
  
  .nav-btn {
    width: 200px;
  }
}
</style>

<script>
// Portal 14 Complete Data with Character Responses
const portal14Data = {
  kr: {
    title: "ê°ì •ì˜ ë¬¸ì§€ë°© 14",
    subtitle: "ì§„ì •í•œ ë‚˜ì˜ ë¹›",
    prologue: "ëª¨ë“  ìƒì²˜ì™€ ì–´ë‘ ì„ ì§€ë‚˜ì˜¨ í›„, ì´ì œ ì§„ì •í•œ ë‚˜ ìì‹ ì„ ë§ˆì£¼í•  ì‹œê°„ì…ë‹ˆë‹¤. ê·¸ë™ì•ˆ ìˆ¨ê²¨ì™”ë˜ ê²ƒ, ë¶€ë„ëŸ¬ì›Œí–ˆë˜ ê²ƒ, ë¯¸ì›Œí–ˆë˜ ë‚˜ì˜ ëª¨ë“  ë©´ë“¤ì´ ì‚¬ì‹¤ì€ í•˜ë‚˜ì˜ ì™„ì „í•œ ì¡´ì¬ë¥¼ ì´ë£¨ê³  ìˆì—ˆì–´ìš”. ìƒì²˜ë„, ì‹¤ìˆ˜ë„, ì•½í•¨ë„ ëª¨ë‘ ë‹¹ì‹ ì´ë¼ëŠ” ë¹›ì˜ ì¼ë¶€ì…ë‹ˆë‹¤. ì´ì œ ê·¸ ë¹›ì„ ì¸ì •í•˜ê³  ë°›ì•„ë“¤ì¼ ì¤€ë¹„ê°€ ë˜ì—ˆë‚˜ìš”? ì™„ë²½í•˜ì§€ ì•Šì€ ë‚˜ì—¬ë„, ê·¸ ìì²´ë¡œ ì¶©ë¶„íˆ ë¹›ë‚˜ëŠ” ì¡´ì¬ì„ì„ ê¹¨ë‹¬ì„ ë•Œì…ë‹ˆë‹¤.",
    ely: "ë‹¹ì‹ ì˜ ë¹›ì€ ì™„ë²½í•¨ì—ì„œ ë‚˜ì˜¤ëŠ” ê²Œ ì•„ë‹ˆë¼, ìˆëŠ” ê·¸ëŒ€ë¡œì˜ ì§„ì‹¤í•¨ì—ì„œ ë‚˜ì™€ìš”.",
    sora: "ëª¨ë“  ê°ì •ì„ ëŠë¼ê³  ë°›ì•„ë“¤ì¸ ë‹¹ì‹ ì´ì•¼ë§ë¡œ ì§„ì •ìœ¼ë¡œ ì•„ë¦„ë‹¤ìš´ ì¡´ì¬ì˜ˆìš”.",
    noah: "ê³¼ê±°ì˜ ëª¨ë“  ê²½í—˜ì´ ì§€ê¸ˆì˜ ë‹¹ì‹ ì´ë¼ëŠ” ë¹›ì„ ë§Œë“¤ì–´ëƒˆì–´ìš”. ê·¸ ë¹›ì„ ë¯¿ìœ¼ì„¸ìš”.",
    enya: "ë‹¹ì‹  ì•ˆì˜ ë”°ëœ»í•¨, ê·¸ ì˜¨ê¸°ê°€ ë°”ë¡œ ì„¸ìƒì„ ë°íˆëŠ” ë¹›ì´ì—ìš”.",
    kaia: "ë§í•˜ì§€ ì•Šì•„ë„ ì•Œ ìˆ˜ ìˆì–´ìš”. ë‹¹ì‹ ì€ ì´ë¯¸ ì¶©ë¶„íˆ ë¹›ë‚˜ê³  ìˆì–´ìš”.",
    cris: "ë¹›ì´ë¼ê³ ? ë‚˜ëŠ” í˜•ê´‘ë“±ì²˜ëŸ¼ ê¹œë¹¡ê±°ë¦¬ëŠ” ë¹›ì´ì•¼! ë¶ˆì•ˆì •í•˜ì§€ë§Œ ê·¸ë˜ë„ ë°ê±°ë“ ~ âœ¨ğŸ˜„",
    kael: "ë“œë””ì–´ ì•Œì•„ì°¨ë ¸êµ¬ë‚˜. ë„Œ ìƒê°ë³´ë‹¤ ê°•í•˜ê³ , ìƒê°ë³´ë‹¤ ê´œì°®ì€ ë†ˆì´ì•¼.",
    mira: "í˜¹ì‹œ... ì´ê²Œ ì •ë§ ì§„ì§œ ë‚˜ì¼ê¹Œìš”? ì•„ë‹ˆë©´ ê·¸ëƒ¥ ì°©ê°í•˜ëŠ” ê±´ ì•„ë‹ê¹Œìš”?",
    light: "ë‹¹ì‹ ì˜ ë¹›ì€ ì–´ë‘ ì„ ê²½í—˜í–ˆê¸°ì— ë”ìš± ê¹Šê³  ë”°ëœ»í•©ë‹ˆë‹¤. ê·¸ ë¹›ìœ¼ë¡œ ë‹¹ì‹  ìì‹ ì„ ë¹„ì¶°ì£¼ì„¸ìš”.",
    question: "ì´ì œ ë°œê²¬í•œ ì§„ì •í•œ ë‚˜ì˜ ëª¨ìŠµì€ ì–´ë–¤ê°€ìš”?",
    input: { 
      placeholder: "ì´ì œ ë°œê²¬í•œ ì§„ì •í•œ ë‚˜ì˜ ëª¨ìŠµê³¼ ë¹›ì— ëŒ€í•´ ì¡°ìš©íˆ ì ì–´ë³´ì„¸ìš”...",
      hint: "Enter í‚¤ë¥¼ ëˆŒëŸ¬ë„ ì „ë‹¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤"
    },
    submit: "âœ¨ ë‚˜ì˜ ë¹› ì¸ì •í•˜ê¸°",
    slogan: "ë‹¹ì‹  ì•ˆì— ìˆ¨ì€ ì´ì•¼ê¸°ë¥¼ ë§ í•´ ì£¼ì„¸ìš”",
    response_ely: "ê·¸ë˜ìš”, ê·¸ê²ƒì´ ë°”ë¡œ ë‹¹ì‹ ì˜ ì§„ì •í•œ ë¹›ì´ì—ìš”. ì´ì œ ê·¸ ë¹›ì„ ë‹¹ë‹¹íˆ ë°›ì•„ë“¤ì´ì„¸ìš”.",
    response_sora: "ë‹¹ì‹ ì´ ë°œê²¬í•œ ê·¸ ì•„ë¦„ë‹¤ìš´ ëª¨ìŠµ, ê·¸ê²ƒì´ ë°”ë¡œ ì§„ì§œ ë‹¹ì‹ ì´ì—ìš”.",
    response_noah: "ì™„ë²½í•˜ì§€ ì•Šì•„ë„ ì¶©ë¶„íˆ ë¹›ë‚˜ëŠ” ë‹¹ì‹ ì„ ë§Œë‚¬êµ°ìš”. ì´ì œ ìƒˆë¡œìš´ ì—¬ì •ì´ ì‹œì‘ë©ë‹ˆë‹¤.\n\nğŸ‘‰ ë‹¤ìŒ ë¬¸ì§€ë°©ìœ¼ë¡œ í•¨ê»˜ ê°€ë„ ê´œì°®ì„ê¹Œìš”?",
    user_input_prefix: "ë‹¹ì‹ ì´ ë°œê²¬í•œ ì§„ì •í•œ ë‚˜ì˜ ë¹›:",
    yes: "ì˜ˆ",
    no: "ì•„ë‹ˆìš”"
  },
  en: {
    title: "Emotional Threshold 14",
    subtitle: "The Light of My True Self",
    prologue: "After passing through all wounds and darkness, it's now time to face your true self. Everything you've hidden, been ashamed of, hated about yourself has actually formed one complete being. Wounds, mistakes, weaknessesâ€”all are part of the light that is you. Are you ready to acknowledge and accept that light? It's time to realize that even an imperfect me is a being that shines bright enough just as I am.",
    ely: "Your light doesn't come from perfection, but from the authenticity of being exactly as you are.",
    sora: "You, who have felt and accepted all emotions, are truly a beautiful being.",
    noah: "All past experiences have created the light that is you now. Believe in that light.",
    enya: "The warmth within you, that tenderness is the very light that brightens the world.",
    kaia: "I can tell without you saying it. You're already shining bright enough.",
    cris: "Light? I'm like a fluorescent bulb that flickers! Unstable but still bright~ âœ¨ğŸ˜„",
    kael: "Finally realized it. You're stronger than you think, better than you think.",
    mira: "Perhaps... is this really the real me? Or am I just deluding myself?",
    light: "Your light is deeper and warmer because you've experienced darkness. Shine that light on yourself.",
    question: "What is the true self you've now discovered like?",
    input: { 
      placeholder: "Quietly write about the true self and light you've now discovered...",
      hint: "You can also press Enter to submit"
    },
    submit: "âœ¨ Acknowledge My Light",
    slogan: "Please tell me the story hidden within you",
    response_ely: "Yes, that is exactly your true light. Now proudly accept that light.",
    response_sora: "That beautiful aspect you discovered, that is the real you.",
    response_noah: "You've met yourself who shines bright enough even without perfection. Now a new journey begins.\n\nğŸ‘‰ Shall we go to the next threshold together?",
    user_input_prefix: "The light of your true self that you discovered:",
    yes: "Yes",
    no: "No"
  },
  pt: {
    title: "Limiar Emocional 14",
    subtitle: "A Luz do Meu Verdadeiro Eu",
    prologue: "Depois de passar por todas as feridas e escuridÃ£o, agora Ã© hora de enfrentar seu verdadeiro eu. Tudo que vocÃª escondeu, se envergonhou, odiou sobre si mesmo na verdade formou um ser completo. Feridas, erros, fraquezasâ€”tudo sÃ£o parte da luz que Ã© vocÃª. EstÃ¡ pronto para reconhecer e aceitar essa luz? Ã‰ hora de perceber que mesmo um eu imperfeito Ã© um ser que brilha o suficiente exatamente como sou.",
    ely: "Sua luz nÃ£o vem da perfeiÃ§Ã£o, mas da autenticidade de ser exatamente como vocÃª Ã©.",
    sora: "VocÃª, que sentiu e aceitou todas as emoÃ§Ãµes, Ã© verdadeiramente um ser lindo.",
    noah: "Todas as experiÃªncias passadas criaram a luz que Ã© vocÃª agora. Acredite nessa luz.",
    enya: "A calor dentro de vocÃª, essa ternura Ã© a prÃ³pria luz que ilumina o mundo.",
    kaia: "Posso dizer sem vocÃª falar. VocÃª jÃ¡ estÃ¡ brilhando o suficiente.",
    cris: "Luz? Eu sou como uma lÃ¢mpada fluorescente que pisca! InstÃ¡vel mas ainda brilhante~ âœ¨ğŸ˜„",
    kael: "Finalmente percebeu. VocÃª Ã© mais forte do que pensa, melhor do que pensa.",
    mira: "Talvez... este Ã© realmente o verdadeiro eu? Ou estou apenas me iludindo?",
    light: "Sua luz Ã© mais profunda e mais quente porque vocÃª experimentou a escuridÃ£o. Ilumine-se com essa luz.",
    question: "Como Ã© o verdadeiro eu que vocÃª descobriu agora?",
    input: { 
      placeholder: "Escreva silenciosamente sobre o verdadeiro eu e a luz que vocÃª descobriu agora...",
      hint: "VocÃª tambÃ©m pode pressionar Enter para enviar"
    },
    submit: "âœ¨ Reconhecer Minha Luz",
    slogan: "Por favor, me conte a histÃ³ria escondida dentro de vocÃª",
    response_ely: "Sim, essa Ã© exatamente sua verdadeira luz. Agora aceite essa luz com orgulho.",
    response_sora: "Esse aspecto lindo que vocÃª descobriu, esse Ã© o verdadeiro vocÃª.",
    response_noah: "VocÃª encontrou-se a si mesmo que brilha o suficiente mesmo sem perfeiÃ§Ã£o. Agora uma nova jornada comeÃ§a.\n\nğŸ‘‰ Vamos para o prÃ³ximo limiar juntos?",
    user_input_prefix: "A luz do seu verdadeiro eu que vocÃª descobriu:",
    yes: "Sim",
    no: "NÃ£o"
  },
 
};

// Current language and state for Portal 14
let currentLang14 = 'kr';
let userInputText14 = '';

// Initialize Portal 14
function initPortal14() {
  displayInitialMessages14();
  setupLanguageSwitching14();
  setupEnterKeySubmission14();
}

// Display initial messages with typing effect
async function displayInitialMessages14() {
  const stream = document.getElementById('messageStream14');
  const messages = [
    { type: 'prologue', content: portal14Data[currentLang14].prologue },
    { type: 'ely', name: 'ğŸ‘‘ Ely', content: portal14Data[currentLang14].ely },
    { type: 'sora', name: 'ğŸ’§ Sora', content: portal14Data[currentLang14].sora },
    { type: 'noah', name: 'ğŸ§™â€â™‚ï¸ Noah', content: portal14Data[currentLang14].noah },
    { type: 'enya', name: 'ğŸ•¯ï¸ Enya', content: portal14Data[currentLang14].enya },
    { type: 'kaia', name: 'ğŸ˜¶ Kaia', content: portal14Data[currentLang14].kaia },
    { type: 'cris', name: 'ğŸƒ Cris', content: portal14Data[currentLang14].cris },
    { type: 'kael', name: 'ğŸ’¥ Kael', content: portal14Data[currentLang14].kael },
    { type: 'mira', name: 'ğŸŒ«ï¸ Mira', content: portal14Data[currentLang14].mira },
    { type: 'light', content: portal14Data[currentLang14].light },
    { type: 'question', content: portal14Data[currentLang14].question }
  ];

  for (let i = 0; i < messages.length; i++) {
    const messageCard = createMessageCard14(messages[i]);
    stream.appendChild(messageCard);
    stream.scrollTo({ top: stream.scrollHeight, behavior: 'smooth' });
    
    await typeText14(messageCard.querySelector('.message-text'), messages[i].content);
    await sleep14(1200);
  }
  
  // Show input area after all messages
  document.getElementById('inputArea14').style.display = 'block';
}

// Setup Enter key submission
function setupEnterKeySubmission14() {
  document.getElementById('userInput14').addEventListener('keydown', function(e) {
    if (e.key === 'Enter' && !e.shiftKey) {
      e.preventDefault();
      submitResponse(14);
    }
  });
}

// Display character responses after user input
async function displayCharacterResponses14(userInput) {
  const stream = document.getElementById('messageStream14');
  
  // Show user input first
  const userCard = createMessageCard14({
    type: 'user-input',
    content: `${portal14Data[currentLang14].user_input_prefix}\n"${userInput}"`
  });
  stream.appendChild(userCard);
  stream.scrollTo({ top: stream.scrollHeight, behavior: 'smooth' });
  await typeText14(userCard.querySelector('.message-text'), userCard.querySelector('.message-text').textContent);
  await sleep14(1500);
  
  // Character responses
  const responses = [
    { type: 'ely', name: 'ğŸ‘‘ Ely', content: `"${userInput}"... ${portal14Data[currentLang14].response_ely}` },
    { type: 'sora', name: 'ğŸ’§ Sora', content: `${portal14Data[currentLang14].response_sora}` },
    { type: 'noah', name: 'ğŸ§™â€â™‚ï¸ Noah', content: `"${userInput}" ${portal14Data[currentLang14].response_noah}` }
  ];

  for (let i = 0; i < responses.length; i++) {
    const responseCard = createMessageCard14(responses[i]);
    stream.appendChild(responseCard);
    stream.scrollTo({ top: stream.scrollHeight, behavior: 'smooth' });
    
    await typeText14(responseCard.querySelector('.message-text'), responses[i].content);
    await sleep14(1500);
  }
  
  // Show navigation buttons
  document.getElementById('nextPortalNav14').style.display = 'block';
}

function createMessageCard14(message) {
  const card = document.createElement('div');
  card.className = `message-card ${message.type}`;
  
  let cardHTML = '';
  if (message.name) {
    cardHTML += `<div class="character-name">${message.name}</div>`;
  }
  cardHTML += `<div class="message-text">${message.content || ''}</div>`;
  
  card.innerHTML = cardHTML;
  return card;
}

async function typeText14(element, text, speed = 80) {
  return new Promise((resolve) => {
    let i = 0;
    element.textContent = '';
    element.classList.add('typewriter');
    
    const timer = setInterval(() => {
      if (i < text.length) {
        element.textContent += text.charAt(i);
        i++;
      } else {
        clearInterval(timer);
        element.classList.remove('typewriter');
        resolve();
      }
    }, speed);
  });
}

function sleep14(ms) {
  return new Promise(resolve => setTimeout(resolve, ms));
}

function setupLanguageSwitching14() {
  document.querySelectorAll('.lang-btn').forEach(btn => {
    btn.addEventListener('click', () => {
      const newLang = btn.dataset.lang;
      if (portal14Data[newLang] && newLang !== currentLang14) {
        document.querySelectorAll('.lang-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        currentLang14 = newLang;
        document.getElementById('messageStream14').innerHTML = '';
        document.getElementById('inputArea14').style.display = 'none';
        document.getElementById('nextPortalNav14').style.display = 'none';
        displayInitialMessages14();
        updatePortalTexts14();
      }
    });
  });
}

function updatePortalTexts14() {
  // Update title and subtitle
  document.querySelector('[data-i18n="portal14.title"]').textContent = portal14Data[currentLang14].title;
  document.querySelector('[data-i18n="portal14.subtitle"]').textContent = portal14Data[currentLang14].subtitle;
  
  // Update slogan
  document.querySelector('[data-i18n="common.slogan"]').textContent = portal14Data[currentLang14].slogan;
  
  // Update placeholder and hint
  document.getElementById('userInput14').placeholder = portal14Data[currentLang14].input.placeholder;
  document.querySelector('[data-i18n="portal14.input.hint"]').textContent = portal14Data[currentLang14].input.hint;
  
  // Update submit button
  document.querySelector('[data-i18n="portal14.submit"]').textContent = portal14Data[currentLang14].submit;
  
  // Update navigation buttons
  const yesBtn = document.querySelector('[data-i18n="common.yes"]');
  const noBtn = document.querySelector('[data-i18n="common.no"]');
  if (yesBtn) yesBtn.textContent = portal14Data[currentLang14].yes;
  if (noBtn) noBtn.textContent = portal14Data[currentLang14].no;
  
  // Update back to main button
  document.querySelector('[data-i18n="common.back_to_main"]').textContent = 
    currentLang14 === 'kr' ? 'ğŸ  ë©”ì¸ í¬íƒˆë¡œ ëŒì•„ê°€ê¸°' :
    currentLang14 === 'en' ? 'ğŸ  Back to Main Portal' :
    currentLang14 === 'pt' ? 'ğŸ  Voltar ao Portal Principal' :
    'ğŸ  ë©”ì¸ í¬íƒˆë¡œ ëŒì•„ê°€ê¸°';
}

function submitResponse(portalNum) {
  if (portalNum !== 14) return;
  
  const input = document.getElementById(`userInput${portalNum}`);
  const response = input.value.trim();
  
  if (response) {
    userInputText14 = response;
    
    // Hide input area
    document.getElementById(`inputArea${portalNum}`).style.display = 'none';
    
    // Display character responses
    displayCharacterResponses14(response);
    
    // Clear input
    input.value = '';
  } else {
    // No alert, just focus on input
    input.focus();
    input.style.borderColor = '#f48fb1';
    setTimeout(() => {
      input.style.borderColor = 'rgba(255,255,255,0.3)';
    }, 2000);
  }
}

function stayInPortal() {
  document.getElementById('nextPortalNav14').style.display = 'none';
  document.getElementById('inputArea14').style.display = 'block';
  document.getElementById('userInput14').focus();
}

function goToNextPortal(nextNumber) {
  const nextUrl = `temarix_v1_${String(nextNumber).padStart(2, '0')}.html`;
  window.location.href = nextUrl;
}

// Initialize when DOM is loaded
document.addEventListener('DOMContentLoaded', () => {
  if (document.getElementById('portal-14')) {
    initPortal14();
  }
});
</script>
</body>
</html>