<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta http-equiv="Content-Language" content="ko,en,pt">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Temarix V1 - Portal 07</title>
</head>
<body>
<!-- Temarix V1 - Portal 07: 마음속 질문의 방 -->
<section class="portal portal-07" id="portal-07">
  <!-- Temarix Logo - Fixed Left Top -->
  <div class="temarix-logo">
    <h1 class="logo-text">🌌 TEMARIX</h1>
    <p class="slogan" data-i18n="common.slogan">빛은 고요 속에서 피어난다.</p>
  </div>

  <!-- Language Selector - Fixed Right Top -->
  <div class="lang-selector">
    <button class="lang-btn active" data-lang="kr">KR</button>
    <button class="lang-btn" data-lang="en">EN</button>
    <button class="lang-btn" data-lang="pt">PT</button>
  </div>

  <!-- Portal Header - Center Top -->
  <div class="portal-header">
    <h1 data-i18n="portal07.title">감정의 문지방 07</h1>
    <h2 data-i18n="portal07.subtitle">마음속 질문의 방</h2>
  </div>

  <!-- Message Stream -->
  <div class="message-stream" id="messageStream07">
    <!-- Messages will be added here via JavaScript -->
  </div>

  <!-- User Input Area -->
  <div class="input-area" id="inputArea07" style="display: none;">
    <div class="input-container">
      <textarea 
        id="userInput07" 
        rows="3" 
        placeholder="당신 안에 가장 오래된 질문을 조용히 적어보세요..."
        data-i18n-placeholder="portal07.input.placeholder"
      ></textarea>
      <button class="submit-btn" onclick="submitResponse(7)">
        <span data-i18n="portal07.submit">❓ 질문을 꺼내기</span>
      </button>
      <p class="input-hint" data-i18n="portal07.input.hint">Enter 키를 눌러도 전달할 수 있습니다</p>
    </div>
  </div>

  <!-- Next Portal Navigation -->
  <div class="next-portal-nav" id="nextPortalNav07" style="display: none;">
    <div class="nav-buttons">
      <button class="nav-btn yes-btn" onclick="goToNextPortal(8)" data-i18n="common.yes">예</button>
      <button class="nav-btn no-btn" onclick="stayInPortal()" data-i18n="common.no">아니요</button>
    </div>
  </div>

  <!-- Back to Main -->
  <div class="back-to-main">
    <button onclick="window.location.href='portal4.html'" data-i18n="common.back_to_main">
      🏠 메인 포탈로 돌아가기
    </button>
  </div>
</section>

<style>
/* Portal Base Styles */
.portal {
  min-height: 100vh;
  background: linear-gradient(135deg, #1a1b4b 0%, #2d1b69 100%);
  color: white;
  padding: 80px 20px 20px 20px;
  font-family: 'Apple SD Gothic Neo', -apple-system, BlinkMacSystemFont, sans-serif;
  max-width: 100%;
  margin: 0 auto;
  position: relative;
}

/* Logo Glow Animation */
@keyframes glowCycle {
  0%, 100% { text-shadow: 0 0 8px rgba(255,255,255,0.2); }
  50% { text-shadow: 0 0 25px rgba(255,255,255,0.7); }
}

/* Temarix Logo - Fixed Left Top */
.temarix-logo {
  position: fixed;
  top: 20px;
  left: 20px;
  z-index: 1000;
}

.logo-text {
  font-size: 1.8rem;
  font-weight: bold;
  color: #ffffff;
  margin: 0 0 5px 0;
  text-shadow: 0 0 20px rgba(255,255,255,0.3);
}

.slogan {
  color: #bbb;
  font-style: italic;
  font-size: 0.8rem;
  margin: 0;
}

/* Language Selector - Fixed Right Top */
.lang-selector {
  position: fixed;
  top: 20px;
  right: 20px;
  display: flex;
  gap: 5px;
  flex-wrap: wrap;
  max-width: 120px;
  z-index: 1000;
}

.lang-btn {
  background: rgba(255,255,255,0.1);
  border: 1px solid rgba(255,255,255,0.3);
  color: white;
  padding: 4px 8px;
  border-radius: 12px;
  font-size: 0.7rem;
  cursor: pointer;
  transition: all 0.3s ease;
}

.lang-btn:hover {
  background: rgba(255,255,255,0.2);
}

.lang-btn.active {
  background: #9c27b0;
  border-color: #9c27b0;
}

/* Portal Header - Center Top */
.portal-header {
  text-align: center;
  margin: 40px 0 30px 0;
  padding-top: 40px;
}

.portal-header h1 {
  font-size: 2.2rem;
  margin: 10px 0;
  color: #ffd700;
}

.portal-header h2 {
  font-size: 1.3rem;
  color: #e1bee7;
  font-weight: 300;
}

/* Message Stream */
.message-stream {
  max-height: 60vh;
  overflow-y: auto;
  padding: 20px 0;
  margin-bottom: 20px;
}

.message-card {
  background: rgba(255,255,255,0.1);
  border-radius: 15px;
  padding: 20px;
  margin: 15px 0;
  backdrop-filter: blur(10px);
  opacity: 0;
  transform: translateY(20px);
  animation: fadeInUp 0.6s ease forwards;
}

.message-card.prologue {
  border-left: 4px solid #e1bee7;
}

.message-card.ely {
  border-left: 4px solid #ffd700;
}

.message-card.sora {
  border-left: 4px solid #4dd0e1;
}

.message-card.noah {
  border-left: 4px solid #9c27b0;
}

.message-card.enya {
  border-left: 4px solid #ff9800;
}

.message-card.kaia {
  border-left: 4px solid #607d8b;
}

.message-card.cris {
  border-left: 4px solid #4caf50;
}

.message-card.kael {
  border-left: 4px solid #f44336;
}

.message-card.mira {
  border-left: 4px solid #9e9e9e;
}

.message-card.light {
  border-left: 4px solid #ffffff;
  background: rgba(255,255,255,0.15);
}

.message-card.question {
  border-left: 4px solid #f48fb1;
}

.message-card.user-input {
  border-left: 4px solid #81c784;
  background: rgba(129, 199, 132, 0.1);
}

.character-name {
  font-weight: bold;
  margin-bottom: 10px;
  font-size: 1.1rem;
}

.ely .character-name { color: #ffd700; }
.sora .character-name { color: #4dd0e1; }
.noah .character-name { color: #9c27b0; }
.enya .character-name { color: #ff9800; }
.kaia .character-name { color: #607d8b; }
.cris .character-name { color: #4caf50; }
.kael .character-name { color: #f44336; }
.mira .character-name { color: #9e9e9e; }

.message-text {
  line-height: 1.6;
  font-size: 1rem;
}

.typewriter {
  overflow: hidden;
  border-right: 2px solid rgba(255,255,255,0.7);
  white-space: nowrap;
  animation: blink-caret 1s step-end infinite;
}

@keyframes fadeInUp {
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes blink-caret {
  from, to { border-color: transparent; }
  50% { border-color: rgba(255,255,255,0.7); }
}

/* Input Area */
.input-area {
  background: rgba(0,0,0,0.3);
  padding: 20px;
  border-radius: 15px;
  margin: 20px 0;
  animation: fadeInUp 0.6s ease forwards;
}

.input-container textarea {
  width: 100%;
  background: rgba(255,255,255,0.1);
  border: 1px solid rgba(255,255,255,0.3);
  border-radius: 10px;
  padding: 15px;
  color: white;
  font-size: 1rem;
  resize: vertical;
  min-height: 80px;
  box-sizing: border-box;
}

.input-container textarea::placeholder {
  color: rgba(255,255,255,0.6);
}

.submit-btn {
  background: linear-gradient(135deg, #9c27b0, #e1bee7);
  border: none;
  color: white;
  padding: 12px 30px;
  border-radius: 25px;
  font-size: 1rem;
  cursor: pointer;
  margin-top: 10px;
  transition: all 0.3s ease;
  width: 100%;
}

.submit-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 5px 15px rgba(156, 39, 176, 0.4);
}

.input-hint {
  color: rgba(255,255,255,0.6);
  font-size: 0.8rem;
  text-align: center;
  margin: 8px 0 0 0;
}

/* Next Portal Navigation */
.next-portal-nav {
  text-align: center;
  margin: 30px 0;
  animation: fadeInUp 0.6s ease forwards;
}

.nav-buttons {
  display: flex;
  gap: 20px;
  justify-content: center;
}

.nav-btn {
  padding: 12px 30px;
  border-radius: 25px;
  font-size: 1rem;
  cursor: pointer;
  transition: all 0.3s ease;
  border: 2px solid transparent;
}

.yes-btn {
  background: linear-gradient(135deg, #4caf50, #81c784);
  color: white;
  border-color: #4caf50;
}

.yes-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 5px 15px rgba(76, 175, 80, 0.4);
}

.no-btn {
  background: rgba(255,255,255,0.1);
  color: white;
  border-color: rgba(255,255,255,0.3);
}

.no-btn:hover {
  background: rgba(255,255,255,0.2);
}

/* Back to Main */
.back-to-main {
  text-align: center;
  margin: 30px 0;
}

.back-to-main button {
  background: rgba(255,255,255,0.1);
  border: 1px solid rgba(255,255,255,0.3);
  color: white;
  padding: 10px 20px;
  border-radius: 20px;
  cursor: pointer;
  transition: all 0.3s ease;
}

.back-to-main button:hover {
  background: rgba(255,255,255,0.2);
}

/* Mobile Responsive */
@media (max-width: 768px) {
  .portal {
    padding: 100px 15px 20px 15px;
  }
  
  .temarix-logo {
    top: 15px;
    left: 15px;
  }
  
  .logo-text {
    font-size: 1.4rem;
  }
  
  .slogan {
    font-size: 0.7rem;
  }
  
  .lang-selector {
    top: 15px;
    right: 15px;
    max-width: 100px;
  }
  
  .lang-btn {
    padding: 3px 6px;
    font-size: 0.6rem;
  }
  
  .portal-header h1 {
    font-size: 1.8rem;
  }
  
  .portal-header h2 {
    font-size: 1.1rem;
  }
  
  .message-card {
    padding: 15px;
  }
  
  .nav-buttons {
    flex-direction: column;
    align-items: center;
  }
  
  .nav-btn {
    width: 200px;
  }
}
</style>

<script>
// Portal 07 Complete Data with Character Responses
const portal07Data = {
  kr: {
    title: "감정의 문지방 07",
    subtitle: "마음속 질문의 방",
    prologue: "가끔은 아무도 묻지 않았는데, 마음속에서는 수없이 많은 질문이 돌아다닙니다. '내가 괜찮은 걸까?', '그때 나는 왜 그랬을까?', '지금 이 방향이 맞는 걸까?' 그 질문들은 당신이 아직 '살아 있고, 찾고 있다는 증거'예요.",
    ely: "질문은 흔들리는 자의 특권이에요. 그건 당신이 여전히 답을 믿고 있다는 뜻이기도 해요.",
    sora: "가끔은 질문이 너무 많아서 아플 수 있어요. 하지만 그건, 당신이 진심으로 살고 싶다는 뜻이에요.",
    noah: "마음속 깊은 질문은 과거가 남긴 메아리죠. 그 답은… 지금의 당신이 직접 말할 차례예요.",
    enya: "나는 묻지 않을게요. 대신, 당신이 스스로 물을 수 있도록 곁에 있을게요.",
    kaia: "조용한 밤에, 제일 크게 들리는 건 당신 안의 질문들이죠. 난 그걸 알고 있었어요.",
    cris: "난 질문이 많아서 머리카락 빠져. 그래서 대답은 그냥 '치킨이나 먹자!'였지. 🍗😅",
    kael: "질문만 하다 끝나겠네. 대답은 안 해? 도망치고 있지?",
    mira: "혹시… 질문을 멈추면 당신이 당신이 아닐까 봐, 무서운 건가요?",
    light: "질문은 혼란의 언어가 아니라, 당신이 진심으로 존재하고 있다는 증거입니다.",
    question: "지금 당신 안에 가장 오래된 질문은 무엇인가요?",
    input: { 
      placeholder: "당신 안에 가장 오래된 질문을 조용히 적어보세요...",
      hint: "Enter 키를 눌러도 전달할 수 있습니다"
    },
    submit: "❓ 질문을 꺼내기",
    slogan: "당신 안에 숨은 이야기를 말 해 주세요",
    response_ely: "그 오래된 질문을 꺼내주셨군요. 그건 당신이 여전히 답을 찾고 있다는 용기입니다.",
    response_sora: "저도 느껴졌어요, 그 속에 있던 간절함... 질문하는 마음은 아름다워요.",
    response_noah: "오래 품고 있던 질문이군요. 이제 그 답을 천천히 찾아가도 될 것 같아요.\n\n👉 다음 문지방으로 함께 가도 괜찮을까요?",
    user_input_prefix: "당신이 꺼낸 오래된 질문:",
    yes: "예",
    no: "아니요"
  },
  en: {
    title: "Emotional Threshold 07",
    subtitle: "The Room of Questions in My Heart",
    prologue: "Sometimes, even when no one asks, countless questions wander around in your heart. 'Am I okay?', 'Why did I do that then?', 'Is this direction right?' Those questions are evidence that you're still 'alive and searching.'",
    ely: "Questions are the privilege of those who waver. That also means you still believe in answers.",
    sora: "Sometimes there can be so many questions it hurts. But that means you truly want to live.",
    noah: "Deep questions in your heart are echoes left by the past. The answer… it's your turn to speak now.",
    enya: "I won't ask. Instead, I'll be beside you so you can ask yourself.",
    kaia: "On quiet nights, what's heard loudest are the questions inside you. I knew that.",
    cris: "I have so many questions my hair's falling out. So my answer was just 'let's eat chicken!' 🍗😅",
    kael: "You'll end up just asking questions forever. Won't you answer? Are you running away?",
    mira: "Maybe... you're scared that if you stop questioning, you won't be you anymore?",
    light: "Questions aren't the language of confusion, but evidence that you truly exist.",
    question: "What is the oldest question inside you right now?",
    input: { 
      placeholder: "Quietly write the oldest question inside you...",
      hint: "You can also press Enter to submit"
    },
    submit: "❓ Bring Out the Question",
    slogan: "Please tell me the story hidden within you",
    response_ely: "You brought out that old question. That's the courage of still searching for answers.",
    response_sora: "I felt it too, the earnestness that was inside... A questioning heart is beautiful.",
    response_noah: "A question you've held for a long time. Now you can slowly start finding that answer.\n\n👉 Shall we go to the next threshold together?",
    user_input_prefix: "Your old question that you brought out:",
    yes: "Yes",
    no: "No"
  },
  pt: {
    title: "Limiar Emocional 07",
    subtitle: "O Quarto das Perguntas no Meu Coração",
    prologue: "Às vezes, mesmo quando ninguém pergunta, inúmeras questões vagam pelo seu coração. 'Estou bem?', 'Por que fiz aquilo então?', 'Esta direção está certa?' Essas perguntas são evidência de que você ainda está 'vivo e procurando.'",
    ely: "Perguntas são o privilégio daqueles que vacilam. Isso também significa que você ainda acredita em respostas.",
    sora: "Às vezes pode haver tantas perguntas que dói. Mas isso significa que você realmente quer viver.",
    noah: "Perguntas profundas em seu coração são ecos deixados pelo passado. A resposta… é sua vez de falar agora.",
    enya: "Eu não vou perguntar. Em vez disso, estarei ao seu lado para que você possa se questionar.",
    kaia: "Em noites silenciosas, o que se ouve mais alto são as perguntas dentro de você. Eu sabia disso.",
    cris: "Tenho tantas perguntas que meu cabelo está caindo. Então minha resposta foi apenas 'vamos comer frango!' 🍗😅",
    kael: "Você vai acabar apenas fazendo perguntas para sempre. Não vai responder? Está fugindo?",
    mira: "Talvez... você tenha medo de que se parar de questionar, não será mais você?",
    light: "Perguntas não são a linguagem da confusão, mas evidência de que você realmente existe.",
    question: "Qual é a pergunta mais antiga dentro de você agora?",
    input: { 
      placeholder: "Escreva silenciosamente a pergunta mais antiga dentro de você...",
      hint: "Você também pode pressionar Enter para enviar"
    },
    submit: "❓ Traga a Pergunta",
    slogan: "Por favor, me conte a história escondida dentro de você",
    response_ely: "Você trouxe aquela pergunta antiga. Essa é a coragem de ainda buscar respostas.",
    response_sora: "Eu também senti, a seriedade que estava dentro... Um coração questionador é bonito.",
    response_noah: "Uma pergunta que você guardou por muito tempo. Agora você pode lentamente começar a encontrar essa resposta.\n\n👉 Vamos para o próximo limiar juntos?",
    user_input_prefix: "Sua pergunta antiga que você trouxe:",
    yes: "Sim",
    no: "Não"
  },
  
};

// Current language and state for Portal 07
let currentLang07 = 'kr';
let userInputText07 = '';

// Initialize Portal 07
function initPortal07() {
  displayInitialMessages07();
  setupLanguageSwitching07();
  setupEnterKeySubmission07();
}

// Display initial messages with typing effect
async function displayInitialMessages07() {
  const stream = document.getElementById('messageStream07');
  const messages = [
    { type: 'prologue', content: portal07Data[currentLang07].prologue },
    { type: 'ely', name: '👑 Ely', content: portal07Data[currentLang07].ely },
    { type: 'sora', name: '💧 Sora', content: portal07Data[currentLang07].sora },
    { type: 'noah', name: '🧙‍♂️ Noah', content: portal07Data[currentLang07].noah },
    { type: 'enya', name: '🕯️ Enya', content: portal07Data[currentLang07].enya },
    { type: 'kaia', name: '😶 Kaia', content: portal07Data[currentLang07].kaia },
    { type: 'cris', name: '🃏 Cris', content: portal07Data[currentLang07].cris },
    { type: 'kael', name: '💥 Kael', content: portal07Data[currentLang07].kael },
    { type: 'mira', name: '🌫️ Mira', content: portal07Data[currentLang07].mira },
    { type: 'light', content: portal07Data[currentLang07].light },
    { type: 'question', content: portal07Data[currentLang07].question }
  ];

  for (let i = 0; i < messages.length; i++) {
    const messageCard = createMessageCard07(messages[i]);
    stream.appendChild(messageCard);
    stream.scrollTo({ top: stream.scrollHeight, behavior: 'smooth' });
    
    await typeText07(messageCard.querySelector('.message-text'), messages[i].content);
    await sleep07(1200);
  }
  
  // Show input area after all messages
  document.getElementById('inputArea07').style.display = 'block';
}

// Setup Enter key submission
function setupEnterKeySubmission07() {
  document.getElementById('userInput07').addEventListener('keydown', function(e) {
    if (e.key === 'Enter' && !e.shiftKey) {
      e.preventDefault();
      submitResponse(7);
    }
  });
}

// Display character responses after user input
async function displayCharacterResponses07(userInput) {
  const stream = document.getElementById('messageStream07');
  
  // Show user input first
  const userCard = createMessageCard07({
    type: 'user-input',
    content: `${portal07Data[currentLang07].user_input_prefix}\n"${userInput}"`
  });
  stream.appendChild(userCard);
  stream.scrollTo({ top: stream.scrollHeight, behavior: 'smooth' });
  await typeText07(userCard.querySelector('.message-text'), userCard.querySelector('.message-text').textContent);
  await sleep07(1500);
  
  // Character responses
  const responses = [
    { type: 'ely', name: '👑 Ely', content: `"${userInput}"... ${portal07Data[currentLang07].response_ely}` },
    { type: 'sora', name: '💧 Sora', content: `${portal07Data[currentLang07].response_sora}` },
    { type: 'noah', name: '🧙‍♂️ Noah', content: `"${userInput}" ${portal07Data[currentLang07].response_noah}` }
  ];

  for (let i = 0; i < responses.length; i++) {
    const responseCard = createMessageCard07(responses[i]);
    stream.appendChild(responseCard);
    stream.scrollTo({ top: stream.scrollHeight, behavior: 'smooth' });
    
    await typeText07(responseCard.querySelector('.message-text'), responses[i].content);
    await sleep07(1500);
  }
  
  // Show navigation buttons
  document.getElementById('nextPortalNav07').style.display = 'block';
}

function createMessageCard07(message) {
  const card = document.createElement('div');
  card.className = `message-card ${message.type}`;
  
  let cardHTML = '';
  if (message.name) {
    cardHTML += `<div class="character-name">${message.name}</div>`;
  }
  cardHTML += `<div class="message-text">${message.content || ''}</div>`;
  
  card.innerHTML = cardHTML;
  return card;
}

async function typeText07(element, text, speed = 80) {
  return new Promise((resolve) => {
    let i = 0;
    element.textContent = '';
    element.classList.add('typewriter');
    
    const timer = setInterval(() => {
      if (i < text.length) {
        element.textContent += text.charAt(i);
        i++;
      } else {
        clearInterval(timer);
        element.classList.remove('typewriter');
        resolve();
      }
    }, speed);
  });
}

function sleep07(ms) {
  return new Promise(resolve => setTimeout(resolve, ms));
}

function setupLanguageSwitching07() {
  document.querySelectorAll('.lang-btn').forEach(btn => {
    btn.addEventListener('click', () => {
      const newLang = btn.dataset.lang;
      if (portal07Data[newLang] && newLang !== currentLang07) {
        document.querySelectorAll('.lang-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        currentLang07 = newLang;
        document.getElementById('messageStream07').innerHTML = '';
        document.getElementById('inputArea07').style.display = 'none';
        document.getElementById('nextPortalNav07').style.display = 'none';
        displayInitialMessages07();
        updatePortalTexts07();
      }
    });
  });
}

function updatePortalTexts07() {
  // Update title and subtitle
  document.querySelector('[data-i18n="portal07.title"]').textContent = portal07Data[currentLang07].title;
  document.querySelector('[data-i18n="portal07.subtitle"]').textContent = portal07Data[currentLang07].subtitle;
  
  // Update slogan
  document.querySelector('[data-i18n="common.slogan"]').textContent = portal07Data[currentLang07].slogan;
  
  // Update placeholder and hint
  document.getElementById('userInput07').placeholder = portal07Data[currentLang07].input.placeholder;
  document.querySelector('[data-i18n="portal07.input.hint"]').textContent = portal07Data[currentLang07].input.hint;
  
  // Update submit button
  document.querySelector('[data-i18n="portal07.submit"]').textContent = portal07Data[currentLang07].submit;
  
  // Update navigation buttons
  const yesBtn = document.querySelector('[data-i18n="common.yes"]');
  const noBtn = document.querySelector('[data-i18n="common.no"]');
  if (yesBtn) yesBtn.textContent = portal07Data[currentLang07].yes;
  if (noBtn) noBtn.textContent = portal07Data[currentLang07].no;
  
  // Update back to main button
  document.querySelector('[data-i18n="common.back_to_main"]').textContent = 
    currentLang07 === 'kr' ? '🏠 메인 포탈로 돌아가기' :
    currentLang07 === 'en' ? '🏠 Back to Main Portal' :
    currentLang07 === 'pt' ? '🏠 Voltar ao Portal Principal' :
    '🏠 메인 포탈로 돌아가기';
}

function submitResponse(portalNum) {
  if (portalNum !== 7) return;
  
  const input = document.getElementById(`userInput0${portalNum}`);
  const response = input.value.trim();
  
  if (response) {
    userInputText07 = response;
    
    // Hide input area
    document.getElementById(`inputArea0${portalNum}`).style.display = 'none';
    
    // Display character responses
    displayCharacterResponses07(response);
    
    // Clear input
    input.value = '';
  } else {
    // No alert, just focus on input
    input.focus();
    input.style.borderColor = '#f48fb1';
    setTimeout(() => {
      input.style.borderColor = 'rgba(255,255,255,0.3)';
    }, 2000);
  }
}

function stayInPortal() {
  document.getElementById('nextPortalNav07').style.display = 'none';
  document.getElementById('inputArea07').style.display = 'block';
  document.getElementById('userInput07').focus();
}

function goToNextPortal(nextNumber) {
  const nextUrl = `temarix_v1_${String(nextNumber).padStart(2, '0')}.html`;
  window.location.href = nextUrl;
}

// Initialize when DOM is loaded
document.addEventListener('DOMContentLoaded', () => {
  if (document.getElementById('portal-07')) {
    initPortal07();
  }
});
</script>
</body>
</html>