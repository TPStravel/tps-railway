<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta http-equiv="Content-Language" content="ko,en,pt">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Temarix V1 - Portal 24</title>
</head>
<body>
<!-- Temarix V2 - Portal 24: ê¸°ì–µ ì† ë‚˜ì—ê²Œ -->
<section class="portal portal-24" id="portal-24">
  <!-- Temarix Logo - Fixed Left Top -->
  <div class="temarix-logo">
    <h1 class="logo-text">ğŸŒŒ TEMARIX</h1>
    <p class="slogan" data-i18n="common.slogan">ë‹¹ì‹  ì•ˆì— ìˆ¨ì€ ì´ì•¼ê¸°ë¥¼ ë§ í•´ ì£¼ì„¸ìš”</p>
  </div>

  <!-- Language Selector - Fixed Right Top -->
  <div class="lang-selector">
    <button class="lang-btn active" data-lang="kr">KR</button>
    <button class="lang-btn" data-lang="en">EN</button>
    <button class="lang-btn" data-lang="pt">PT</button>
  </div>

  <!-- Portal Header - Center Top -->
  <div class="portal-header">
    <h1 data-i18n="portal24.title">ê°ì •ì˜ ë¬¸ì§€ë°© 24</h1>
    <h2 data-i18n="portal24.subtitle">ê¸°ì–µ ì† ë‚˜ì—ê²Œ</h2>
  </div>

  <!-- Message Stream -->
  <div class="message-stream" id="messageStream24">
    <!-- Messages will be added here via JavaScript -->
  </div>

  <!-- User Input Area -->
  <div class="input-area" id="inputArea24" style="display: none;">
    <div class="input-container">
      <textarea 
        id="userInput24" 
        rows="3" 
        placeholder="ê¸°ì–µ ì† ê·¸ ì•„ì´ì—ê²Œ ê±´ë„¤ê³  ì‹¶ì€ ë§ì„ ì¡°ìš©íˆ ì ì–´ë³´ì„¸ìš”..."
        data-i18n-placeholder="portal24.input.placeholder"
      ></textarea>
      <button class="submit-btn" onclick="submitResponse(24)">
        <span data-i18n="portal24.submit">ğŸ¤— ë‚´ë©´ì˜ ì•„ì´ì—ê²Œ í¸ì§€ ë³´ë‚´ê¸°</span>
      </button>
      <p class="input-hint" data-i18n="portal24.input.hint">Enter í‚¤ë¥¼ ëˆŒëŸ¬ë„ ì „ë‹¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤</p>
    </div>
  </div>

  <!-- Next Portal Navigation -->
  <div class="next-portal-nav" id="nextPortalNav24" style="display: none;">
    <div class="nav-buttons">
      <button class="nav-btn yes-btn" onclick="goToNextPortal(25)" data-i18n="common.yes">ì˜ˆ</button>
      <button class="nav-btn no-btn" onclick="stayInPortal(24)" data-i18n="common.no">ì•„ë‹ˆìš”</button>
    </div>
  </div>

  <!-- Back to Main -->
  <div class="back-to-main">
    <button onclick="window.location.href='portal4.html'" data-i18n="common.back_to_main">
      ğŸ  ë©”ì¸ í¬íƒˆë¡œ ëŒì•„ê°€ê¸°
    </button>
  </div>
</section>

<style>
/* Portal Base Styles */
.portal {
  min-height: 100vh;
  background: linear-gradient(135deg, #1a1b4b 0%, #2d1b69 100%);
  color: white;
  padding: 80px 20px 20px 20px;
  font-family: 'Apple SD Gothic Neo', -apple-system, BlinkMacSystemFont, sans-serif;
  max-width: 100%;
  margin: 0 auto;
  position: relative;
}

/* Logo Glow Animation */
@keyframes glowCycle {
  0%, 100% { text-shadow: 0 0 8px rgba(255,255,255,0.2); }
  50% { text-shadow: 0 0 25px rgba(255,255,255,0.7); }
}

/* Temarix Logo - Fixed Left Top */
.temarix-logo {
  position: fixed;
  top: 20px;
  left: 20px;
  z-index: 1000;
}

.logo-text {
  font-size: 1.8rem;
  font-weight: bold;
  color: #ffffff;
  margin: 0 0 5px 0;
  text-shadow: 0 0 20px rgba(255,255,255,0.3);
}

.slogan {
  color: #bbb;
  font-style: italic;
  font-size: 0.8rem;
  margin: 0;
}

/* Language Selector - Fixed Right Top */
.lang-selector {
  position: fixed;
  top: 20px;
  right: 20px;
  display: flex;
  gap: 5px;
  flex-wrap: wrap;
  max-width: 120px;
  z-index: 1000;
}

.lang-btn {
  background: rgba(255,255,255,0.1);
  border: 1px solid rgba(255,255,255,0.3);
  color: white;
  padding: 4px 8px;
  border-radius: 12px;
  font-size: 0.7rem;
  cursor: pointer;
  transition: all 0.3s ease;
}

.lang-btn:hover {
  background: rgba(255,255,255,0.2);
}

.lang-btn.active {
  background: #9c27b0;
  border-color: #9c27b0;
}

/* Portal Header - Center Top */
.portal-header {
  text-align: center;
  margin: 40px 0 30px 0;
  padding-top: 40px;
}

.portal-header h1 {
  font-size: 2.2rem;
  margin: 10px 0;
  color: #ffd700;
}

.portal-header h2 {
  font-size: 1.3rem;
  color: #e1bee7;
  font-weight: 300;
}

/* Message Stream */
.message-stream {
  max-height: 60vh;
  overflow-y: auto;
  padding: 20px 0;
  margin-bottom: 20px;
}

.message-card {
  background: rgba(255,255,255,0.1);
  border-radius: 15px;
  padding: 20px;
  margin: 15px 0;
  backdrop-filter: blur(10px);
  opacity: 0;
  transform: translateY(20px);
  animation: fadeInUp 0.6s ease forwards;
}

.message-card.prologue {
  border-left: 4px solid #e1bee7;
}

.message-card.ely {
  border-left: 4px solid #ffd700;
}

.message-card.sora {
  border-left: 4px solid #4dd0e1;
}

.message-card.noah {
  border-left: 4px solid #9c27b0;
}

.message-card.enya {
  border-left: 4px solid #ff9800;
}

.message-card.kaia {
  border-left: 4px solid #607d8b;
}

.message-card.cris {
  border-left: 4px solid #4caf50;
}

.message-card.kael {
  border-left: 4px solid #f44336;
}

.message-card.mira {
  border-left: 4px solid #9e9e9e;
}

.message-card.light {
  border-left: 4px solid #ffffff;
  background: rgba(255,255,255,0.15);
}

.message-card.question {
  border-left: 4px solid #f48fb1;
}

.message-card.user-input {
  border-left: 4px solid #81c784;
  background: rgba(129, 199, 132, 0.1);
}

.character-name {
  font-weight: bold;
  margin-bottom: 10px;
  font-size: 1.1rem;
}

.ely .character-name { color: #ffd700; }
.sora .character-name { color: #4dd0e1; }
.noah .character-name { color: #9c27b0; }
.enya .character-name { color: #ff9800; }
.kaia .character-name { color: #607d8b; }
.cris .character-name { color: #4caf50; }
.kael .character-name { color: #f44336; }
.mira .character-name { color: #9e9e9e; }

.message-text {
  line-height: 1.6;
  font-size: 1rem;
}

.typewriter {
  overflow: hidden;
  border-right: 2px solid rgba(255,255,255,0.7);
  white-space: nowrap;
  animation: blink-caret 1s step-end infinite;
}

@keyframes fadeInUp {
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes blink-caret {
  from, to { border-color: transparent; }
  50% { border-color: rgba(255,255,255,0.7); }
}

/* Input Area */
.input-area {
  background: rgba(0,0,0,0.3);
  padding: 20px;
  border-radius: 15px;
  margin: 20px 0;
  animation: fadeInUp 0.6s ease forwards;
}

.input-container textarea {
  width: 100%;
  background: rgba(255,255,255,0.1);
  border: 1px solid rgba(255,255,255,0.3);
  border-radius: 10px;
  padding: 15px;
  color: white;
  font-size: 1rem;
  resize: vertical;
  min-height: 80px;
  box-sizing: border-box;
}

.input-container textarea::placeholder {
  color: rgba(255,255,255,0.6);
}

.submit-btn {
  background: linear-gradient(135deg, #9c27b0, #e1bee7);
  border: none;
  color: white;
  padding: 12px 30px;
  border-radius: 25px;
  font-size: 1rem;
  cursor: pointer;
  margin-top: 10px;
  transition: all 0.3s ease;
  width: 100%;
}

.submit-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 5px 15px rgba(156, 39, 176, 0.4);
}

.input-hint {
  color: rgba(255,255,255,0.6);
  font-size: 0.8rem;
  text-align: center;
  margin: 8px 0 0 0;
}

/* Next Portal Navigation */
.next-portal-nav {
  text-align: center;
  margin: 30px 0;
  animation: fadeInUp 0.6s ease forwards;
}

.nav-buttons {
  display: flex;
  gap: 20px;
  justify-content: center;
}

.nav-btn {
  padding: 12px 30px;
  border-radius: 25px;
  font-size: 1rem;
  cursor: pointer;
  transition: all 0.3s ease;
  border: 2px solid transparent;
}

.yes-btn {
  background: linear-gradient(135deg, #4caf50, #81c784);
  color: white;
  border-color: #4caf50;
}

.yes-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 5px 15px rgba(76, 175, 80, 0.4);
}

.no-btn {
  background: rgba(255,255,255,0.1);
  color: white;
  border-color: rgba(255,255,255,0.3);
}

.no-btn:hover {
  background: rgba(255,255,255,0.2);
}

/* Back to Main */
.back-to-main {
  text-align: center;
  margin: 30px 0;
}

.back-to-main button {
  background: rgba(255,255,255,0.1);
  border: 1px solid rgba(255,255,255,0.3);
  color: white;
  padding: 10px 20px;
  border-radius: 20px;
  cursor: pointer;
  transition: all 0.3s ease;
}

.back-to-main button:hover {
  background: rgba(255,255,255,0.2);
}

/* Mobile Responsive */
@media (max-width: 768px) {
  .portal {
    padding: 100px 15px 20px 15px;
  }
  
  .temarix-logo {
    top: 15px;
    left: 15px;
  }
  
  .logo-text {
    font-size: 1.4rem;
  }
  
  .slogan {
    font-size: 0.7rem;
  }
  
  .lang-selector {
    top: 15px;
    right: 15px;
    max-width: 100px;
  }
  
  .lang-btn {
    padding: 3px 6px;
    font-size: 0.6rem;
  }
  
  .portal-header h1 {
    font-size: 1.8rem;
  }
  
  .portal-header h2 {
    font-size: 1.1rem;
  }
  
  .message-card {
    padding: 15px;
  }
  
  .nav-buttons {
    flex-direction: column;
    align-items: center;
  }
  
  .nav-btn {
    width: 200px;
  }
}
</style>

<script>
// Portal 24 Complete Data with Character Responses
const portal24Data = {
  kr: {
    title: "ê°ì •ì˜ ë¬¸ì§€ë°© 24",
    subtitle: "ê¸°ì–µ ì† ë‚˜ì—ê²Œ",
    prologue: "ê·¸ ì•„ì´ë¥¼ ê¸°ì–µí•˜ë‚˜ìš”? ì–´ë””ì„œë“  ì¡°ìš©íˆ, ëˆˆì¹˜ ë³´ê³ , ê·¸ëŸ¬ë©´ì„œë„ ë‚´ë©´ì˜ ë¹›ì„ ê¼­ ì¥ê³  ìˆë˜ ê·¸ ì‹œì ˆì˜ ë‚˜. ìƒì²˜ë°›ê¸°ë„ í–ˆê³ , ì™¸ë¡œì›Œí•˜ê¸°ë„ í–ˆì§€ë§Œ, ê·¸ë˜ë„ í¬ê¸°í•˜ì§€ ì•Šì•˜ë˜ ê·¸ ì‘ì€ ì¡´ì¬. ê·¸ ì•„ì´ì—ê²Œ ì§€ê¸ˆ, ë‹¹ì‹ ì€ ì–´ë–¤ ë§ì„ ê±´ë„¤ê³  ì‹¶ë‚˜ìš”?",
    ely: "ê·¸ ì•„ì´ê°€ ìˆì—ˆê¸°ì— ë‹¹ì‹ ì´ ì§€ê¸ˆ ì—¬ê¸°ê¹Œì§€ ì™”ìŠµë‹ˆë‹¤.",
    sora: "ë‚˜ëŠ” ê·¸ ì•„ì´ë¥¼ ì‚¬ë‘í•´ìš”. ì§€ê¸ˆì˜ ë‹¹ì‹ ë§Œí¼, ì•„ë‹ˆâ€¦ ë”.",
    noah: "ê¸°ì–µ ì†ì˜ ê·¸ ì‘ì€ ì¡´ì¬ëŠ” ë‹¹ì‹  ì•ˆì—ì„œ ì•„ì§ë„ ìš¸ê³  ìˆìŠµë‹ˆë‹¤. ì´ì   ì•ˆì•„ì¤˜ì•¼ í•  ì‹œê°„ì…ë‹ˆë‹¤.",
    enya: "ê·¸ ì•„ì´ì—ê²Œ ë§í•´ì£¼ì„¸ìš”. 'ë„Œ í˜¼ìê°€ ì•„ë‹ˆì•¼'ë¼ê³ .",
    kaia: "ê·¸ ì•„ì´ëŠ” ëŠ˜ ì´í•´ë°›ê³  ì‹¶ì—ˆì£ . ì§€ê¸ˆ ë‹¹ì‹ ì´ ê·¸ ì²« ì¹œêµ¬ê°€ ë˜ì–´ì£¼ì„¸ìš”.",
    cris: "ë‚œ ë‚´ ì–´ë¦° ì‹œì ˆ ë‚˜í•œí…Œ ì´ë ‡ê²Œ ë§í–ˆì–´: 'ì•¼, ëœ ìš¸ê³  ë” ìë¼ë¼~' ê·¼ë° ì•„ì§ë„ ê·¸ ì• ê°€ ë‚˜ë³´ë‹¤ ìš©ê°í•´~ ğŸ˜‚",
    kael: "ê·¸ ì•„ì´ ë²„ë ¸ì§€? ì´ì œ ë‹¤ì‹œ ì°¾ì•„. ê·¸ ì•„ì´ê°€ ë„¤ ì•ˆì— ì‚´ì•„ ìˆë‹¤ê³ .",
    mira: "í˜¹ì‹œâ€¦ ê·¸ ì•„ì´ì—ê²Œ ì‚¬ê³¼í•´ì•¼ í•  ê²Œ ìˆë‹¤ë©´ ì§€ê¸ˆ ë§í•´ì¤„ ìˆ˜ ìˆì„ê¹Œìš”?",
    light: "ê¸°ì–µ ì† ë‹¹ì‹ ì—ê²Œ ë§í•´ì£¼ì„¸ìš”. 'ì§€ê¸ˆê¹Œì§€ ì˜ ë²„í…¨ì¤˜ì„œ ê³ ë§ˆì›Œ.'",
    question: "ë‹¹ì‹ ì€ ì§€ê¸ˆ ê·¸ ì•„ì´ì—ê²Œ ì–´ë–¤ ë§ì„ ê±´ë„¤ê³  ì‹¶ë‚˜ìš”?",
    input: { 
      placeholder: "ê¸°ì–µ ì† ê·¸ ì•„ì´ì—ê²Œ ê±´ë„¤ê³  ì‹¶ì€ ë§ì„ ì¡°ìš©íˆ ì ì–´ë³´ì„¸ìš”...",
      hint: "Enter í‚¤ë¥¼ ëˆŒëŸ¬ë„ ì „ë‹¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤"
    },
    submit: "ğŸ¤— ë‚´ë©´ì˜ ì•„ì´ì—ê²Œ í¸ì§€ ë³´ë‚´ê¸°",
    slogan: "ë‹¹ì‹  ì•ˆì— ìˆ¨ì€ ì´ì•¼ê¸°ë¥¼ ë§ í•´ ì£¼ì„¸ìš”",
    response_ely: "ê·¸ ë”°ëœ»í•œ ë§, ê·¸ ì•„ì´ê°€ ì˜¤ë«ë™ì•ˆ ê¸°ë‹¤ë ¸ë˜ ë°”ë¡œ ê·¸ ë§ì´ì—ìš”. ë‹¹ì‹ ì€ ì´ì œ ê·¸ ì•„ì´ì˜ ê°€ì¥ ë“ ë“ í•œ ì–´ë¥¸ì´ ë˜ì—ˆì–´ìš”.",
    response_sora: "ê·¸ ì•„ì´ê°€ ë°›ê³  ì‹¶ì—ˆë˜ ë§ˆìŒì´ ë“œë””ì–´ ì „í•´ì¡Œë„¤ìš”. ê³¼ê±°ì™€ í˜„ì¬ê°€ í•˜ë‚˜ë¡œ ì—°ê²°ë˜ëŠ” ìˆœê°„ì´ì—ìš”.",
    response_noah: "ê³¼ê±°ì˜ ë‹¹ì‹ ê³¼ í˜„ì¬ì˜ ë‹¹ì‹ ì´ ì´ì œ í™”í•´í–ˆìŠµë‹ˆë‹¤. ì´ ì—°ê²°ì´ ì•ìœ¼ë¡œ ë‹¹ì‹ ì—ê²Œ í° í˜ì´ ë  ê±°ì˜ˆìš”.\n\nğŸ‘‰ ë§ˆì§€ë§‰ ë¬¸ì§€ë°©ìœ¼ë¡œ í•¨ê»˜ ë‚˜ì•„ê°ˆ ì¤€ë¹„ê°€ ë˜ì…¨ë‚˜ìš”?",
    user_input_prefix: "ê¸°ì–µ ì† ê·¸ ì•„ì´ì—ê²Œ:",
    yes: "ì˜ˆ",
    no: "ì•„ë‹ˆìš”"
  },
  en: {
    title: "Emotional Threshold 24",
    subtitle: "To the Me in My Memory",
    prologue: "Do you remember that child? The one who was always quiet, always watching, always careful, yet still holding tight to the inner light. That little being who got hurt, who felt lonely, but never gave up. What words would you like to say to that child now?",
    ely: "Because that child existed, you've made it here today.",
    sora: "I love that child. As much as you now, noâ€¦ even more.",
    noah: "That small being in your memory is still crying within you. Now is the time to embrace them.",
    enya: "Tell that child: 'You're not alone.'",
    kaia: "That child always wanted to be understood. Now you can be their first friend.",
    cris: "I told my childhood self: 'Hey, cry less and grow more~' But that kid is still braver than me! ğŸ˜‚",
    kael: "You abandoned that child, didn't you? Now go find them again. That child is still alive within you.",
    mira: "Maybe... if there's something you need to apologize to that child for, could you say it now?",
    light: "Tell that you in your memory: 'Thank you for holding on so well until now.'",
    question: "What words would you like to say to that child now?",
    input: { 
      placeholder: "Quietly write the words you want to say to that child in your memory...",
      hint: "You can also press Enter to submit"
    },
    submit: "ğŸ¤— Send a Letter to Your Inner Child",
    slogan: "Please tell me the story hidden within you",
    response_ely: "Those warm wordsâ€”that's exactly what the child has been waiting for so long. You've now become that child's most reliable adult.",
    response_sora: "The heart that child wanted to receive has finally been delivered. It's a moment when past and present connect as one.",
    response_noah: "The you of the past and the you of the present have now reconciled. This connection will be a great strength for you going forward.\n\nğŸ‘‰ Are you ready to move forward to the final threshold together?",
    user_input_prefix: "To that child in my memory:",
    yes: "Yes",
    no: "No"
  },
  pt: {
    title: "Limiar Emocional 24",
    subtitle: "Para o Eu na Minha MemÃ³ria",
    prologue: "VocÃª se lembra daquela crianÃ§a? Aquela que estava sempre quieta, sempre observando, sempre cuidadosa, mas ainda assim segurando firmemente a luz interior. Aquele pequeno ser que se machucou, que se sentiu sozinho, mas nunca desistiu. Que palavras vocÃª gostaria de dizer para aquela crianÃ§a agora?",
    ely: "Porque aquela crianÃ§a existiu, vocÃª chegou aqui hoje.",
    sora: "Eu amo aquela crianÃ§a. Tanto quanto vocÃª agora, nÃ£o... ainda mais.",
    noah: "Aquele pequeno ser em sua memÃ³ria ainda estÃ¡ chorando dentro de vocÃª. Agora Ã© hora de abraÃ§Ã¡-lo.",
    enya: "Diga para aquela crianÃ§a: 'VocÃª nÃ£o estÃ¡ sozinha.'",
    kaia: "Aquela crianÃ§a sempre quis ser compreendida. Agora vocÃª pode ser seu primeiro amigo.",
    cris: "Eu disse para meu eu da infÃ¢ncia: 'Ei, chore menos e cresÃ§a mais~' Mas aquele garoto ainda Ã© mais corajoso que eu! ğŸ˜‚",
    kael: "VocÃª abandonou aquela crianÃ§a, nÃ£o foi? Agora vÃ¡ encontrÃ¡-la novamente. Aquela crianÃ§a ainda estÃ¡ viva dentro de vocÃª.",
    mira: "Talvez... se hÃ¡ algo que vocÃª precisa se desculpar com aquela crianÃ§a, poderia dizer agora?",
    light: "Diga para aquele vocÃª em sua memÃ³ria: 'Obrigado por aguentar tÃ£o bem atÃ© agora.'",
    question: "Que palavras vocÃª gostaria de dizer para aquela crianÃ§a agora?",
    input: { 
      placeholder: "Escreva silenciosamente as palavras que quer dizer para aquela crianÃ§a em sua memÃ³ria...",
      hint: "VocÃª tambÃ©m pode pressionar Enter para enviar"
    },
    submit: "ğŸ¤— Enviar uma Carta para Sua CrianÃ§a Interior",
    slogan: "Por favor, me conte a histÃ³ria escondida dentro de vocÃª",
    response_ely: "Essas palavras calorosasâ€”Ã© exatamente isso que a crianÃ§a tem esperado por tanto tempo. VocÃª agora se tornou o adulto mais confiÃ¡vel daquela crianÃ§a.",
    response_sora: "O coraÃ§Ã£o que aquela crianÃ§a queria receber finalmente foi entregue. Ã‰ um momento quando passado e presente se conectam como um.",
    response_noah: "O vocÃª do passado e o vocÃª do presente agora se reconciliaram. Esta conexÃ£o serÃ¡ uma grande forÃ§a para vocÃª daqui para frente.\n\nğŸ‘‰ EstÃ¡ pronto para avanÃ§ar para o limiar final juntos?",
    user_input_prefix: "Para aquela crianÃ§a na minha memÃ³ria:",
    yes: "Sim",
    no: "NÃ£o"
  },
  
};

// Current language and state for Portal 24
let currentLang24 = 'kr';
let userInputText24 = '';

// Initialize Portal 24
function initPortal24() {
  displayInitialMessages24();
  setupLanguageSwitching24();
  setupEnterKeySubmission24();
}

// Display initial messages with typing effect
async function displayInitialMessages24() {
  const stream = document.getElementById('messageStream24');
  const messages = [
    { type: 'prologue', content: portal24Data[currentLang24].prologue },
    { type: 'ely', name: 'ğŸ‘‘ Ely', content: portal24Data[currentLang24].ely },
    { type: 'sora', name: 'ğŸ’§ Sora', content: portal24Data[currentLang24].sora },
    { type: 'noah', name: 'ğŸ§™â€â™‚ï¸ Noah', content: portal24Data[currentLang24].noah },
    { type: 'enya', name: 'ğŸ•¯ï¸ Enya', content: portal24Data[currentLang24].enya },
    { type: 'kaia', name: 'ğŸ˜¶ Kaia', content: portal24Data[currentLang24].kaia },
    { type: 'cris', name: 'ğŸƒ Cris', content: portal24Data[currentLang24].cris },
    { type: 'kael', name: 'ğŸ’¥ Kael', content: portal24Data[currentLang24].kael },
    { type: 'mira', name: 'ğŸŒ«ï¸ Mira', content: portal24Data[currentLang24].mira },
    { type: 'light', content: portal24Data[currentLang24].light },
    { type: 'question', content: portal24Data[currentLang24].question }
  ];

  for (let i = 0; i < messages.length; i++) {
    const messageCard = createMessageCard24(messages[i]);
    stream.appendChild(messageCard);
    stream.scrollTo({ top: stream.scrollHeight, behavior: 'smooth' });
    
    await typeText24(messageCard.querySelector('.message-text'), messages[i].content);
    await sleep24(1200);
  }
  
  // Show input area after all messages
  document.getElementById('inputArea24').style.display = 'block';
}

// Setup Enter key submission
function setupEnterKeySubmission24() {
  document.getElementById('userInput24').addEventListener('keydown', function(e) {
    if (e.key === 'Enter' && !e.shiftKey) {
      e.preventDefault();
      submitResponse(24);
    }
  });
}

// Display character responses after user input
async function displayCharacterResponses24(userInput) {
  const stream = document.getElementById('messageStream24');
  
  // Show user input first
  const userCard = createMessageCard24({
    type: 'user-input',
    content: `${portal24Data[currentLang24].user_input_prefix}\n"${userInput}"`
  });
  stream.appendChild(userCard);
  stream.scrollTo({ top: stream.scrollHeight, behavior: 'smooth' });
  await typeText24(userCard.querySelector('.message-text'), userCard.querySelector('.message-text').textContent);
  await sleep24(1500);
  
  // Character responses
  const responses = [
    { type: 'ely', name: 'ğŸ‘‘ Ely', content: `"${userInput}"... ${portal24Data[currentLang24].response_ely}` },
    { type: 'sora', name: 'ğŸ’§ Sora', content: `${portal24Data[currentLang24].response_sora}` },
    { type: 'noah', name: 'ğŸ§™â€â™‚ï¸ Noah', content: `"${userInput}" ${portal24Data[currentLang24].response_noah}` }
  ];

  for (let i = 0; i < responses.length; i++) {
    const responseCard = createMessageCard24(responses[i]);
    stream.appendChild(responseCard);
    stream.scrollTo({ top: stream.scrollHeight, behavior: 'smooth' });
    
    await typeText24(responseCard.querySelector('.message-text'), responses[i].content);
    await sleep24(1500);
  }
  
  // Show navigation buttons
  document.getElementById('nextPortalNav24').style.display = 'block';
}

function createMessageCard24(message) {
  const card = document.createElement('div');
  card.className = `message-card ${message.type}`;
  
  let cardHTML = '';
  if (message.name) {
    cardHTML += `<div class="character-name">${message.name}</div>`;
  }
  cardHTML += `<div class="message-text">${message.content || ''}</div>`;
  
  card.innerHTML = cardHTML;
  return card;
}

async function typeText24(element, text, speed = 80) {
  return new Promise((resolve) => {
    let i = 0;
    element.textContent = '';
    element.classList.add('typewriter');
    
    const timer = setInterval(() => {
      if (i < text.length) {
        element.textContent += text.charAt(i);
        i++;
      } else {
        clearInterval(timer);
        element.classList.remove('typewriter');
        resolve();
      }
    }, speed);
  });
}

function sleep24(ms) {
  return new Promise(resolve => setTimeout(resolve, ms));
}

function setupLanguageSwitching24() {
  document.querySelectorAll('.lang-btn').forEach(btn => {
    btn.addEventListener('click', () => {
      const newLang = btn.dataset.lang;
      if (portal24Data[newLang] && newLang !== currentLang24) {
        document.querySelectorAll('.lang-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        currentLang24 = newLang;
        document.getElementById('messageStream24').innerHTML = '';
        document.getElementById('inputArea24').style.display = 'none';
        document.getElementById('nextPortalNav24').style.display = 'none';
        displayInitialMessages24();
        updatePortalTexts24();
      }
    });
  });
}

function updatePortalTexts24() {
  // Update title and subtitle
  document.querySelector('[data-i18n="portal24.title"]').textContent = portal24Data[currentLang24].title;
  document.querySelector('[data-i18n="portal24.subtitle"]').textContent = portal24Data[currentLang24].subtitle;
  
  // Update slogan
  document.querySelector('[data-i18n="common.slogan"]').textContent = portal24Data[currentLang24].slogan;
  
  // Update placeholder and hint
  document.getElementById('userInput24').placeholder = portal24Data[currentLang24].input.placeholder;
  document.querySelector('[data-i18n="portal24.input.hint"]').textContent = portal24Data[currentLang24].input.hint;
  
  // Update submit button
  document.querySelector('[data-i18n="portal24.submit"]').textContent = portal24Data[currentLang24].submit;
  
  // Update navigation buttons
  const yesBtn = document.querySelector('[data-i18n="common.yes"]');
  const noBtn = document.querySelector('[data-i18n="common.no"]');
  if (yesBtn) yesBtn.textContent = portal24Data[currentLang24].yes;
  if (noBtn) noBtn.textContent = portal24Data[currentLang24].no;
  
  // Update back to main button
  document.querySelector('[data-i18n="common.back_to_main"]').textContent = 
    currentLang24 === 'kr' ? 'ğŸ  ë©”ì¸ í¬íƒˆë¡œ ëŒì•„ê°€ê¸°' :
    currentLang24 === 'en' ? 'ğŸ  Back to Main Portal' :
    currentLang24 === 'pt' ? 'ğŸ  Voltar ao Portal Principal' :
    currentLang24 === 'es' ? 'ğŸ  Volver al Portal Principal' :
    currentLang24 === 'fr' ? 'ğŸ  Retour au Portail Principal' :
    currentLang24 === 'de' ? 'ğŸ  ZurÃ¼ck zum Hauptportal' :
    currentLang24 === 'it' ? 'ğŸ  Torna al Portale Principale' :
    currentLang24 === 'ru' ? 'ğŸ  Ğ’ĞµÑ€Ğ½ÑƒÑ‚ÑŒÑÑ Ğº Ğ“Ğ»Ğ°Ğ²Ğ½Ğ¾Ğ¼Ñƒ ĞŸĞ¾Ñ€Ñ‚Ğ°Ğ»Ñƒ' :
    currentLang24 === 'ja' ? 'ğŸ  ãƒ¡ã‚¤ãƒ³ãƒãƒ¼ã‚¿ãƒ«ã«æˆ»ã‚‹' :
    currentLang24 === 'zh' ? 'ğŸ  è¿”å›ä¸»é—¨æˆ·' :
    currentLang24 === 'ar' ? 'ğŸ  Ø§Ù„Ø¹ÙˆØ¯Ø© Ø¥Ù„Ù‰ Ø§Ù„Ø¨ÙˆØ§Ø¨Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©' :
    currentLang24 === 'hi' ? 'ğŸ  à¤®à¥à¤–à¥à¤¯ à¤ªà¥‹à¤°à¥à¤Ÿà¤² à¤ªà¤° à¤µà¤¾à¤ªà¤¸ à¤œà¤¾à¤à¤‚' :
    'ğŸ  ë©”ì¸ í¬íƒˆë¡œ ëŒì•„ê°€ê¸°';
}

function submitResponse(portalNum) {
  if (portalNum !== 24) return;
  
  const input = document.getElementById(`userInput${portalNum}`);
  const response = input.value.trim();
  
  if (response) {
    userInputText24 = response;
    
    // Hide input area
    document.getElementById(`inputArea${portalNum}`).style.display = 'none';
    
    // Display character responses
    displayCharacterResponses24(response);
    
    // Clear input
    input.value = '';
  } else {
    // No alert, just focus on input
    input.focus();
    input.style.borderColor = '#f48fb1';
    setTimeout(() => {
      input.style.borderColor = 'rgba(255,255,255,0.3)';
    }, 2000);
  }
}

function stayInPortal(portalNum) {
  document.getElementById(`nextPortalNav${portalNum}`).style.display = 'none';
  document.getElementById(`inputArea${portalNum}`).style.display = 'block';
  document.getElementById(`userInput${portalNum}`).focus();
}

function goToNextPortal(nextNumber) {
  const nextUrl = `temarix_v1_${String(nextNumber).padStart(2, '0')}.html`;
  window.location.href = nextUrl;
}

// Initialize when DOM is loaded
document.addEventListener('DOMContentLoaded', () => {
  if (document.getElementById('portal-24')) {
    initPortal24();
  }
});
</script>
</body>
</html>