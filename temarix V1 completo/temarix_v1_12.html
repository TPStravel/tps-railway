<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta http-equiv="Content-Language" content="ko,en,pt">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Temarix V1 - Portal 12</title>
</head>
<body>
<!-- Temarix V1 - Portal 12: ìƒˆë¡œìš´ ì—°ê²°ì˜ ë‹¤ë¦¬ -->
<section class="portal portal-12" id="portal-12">
  <!-- Temarix Logo - Fixed Left Top -->
  <div class="temarix-logo">
    <h1 class="logo-text">ğŸŒŒ TEMARIX</h1>
    <p class="slogan" data-i18n="common.slogan">ë‹¹ì‹  ì•ˆì— ìˆ¨ì€ ì´ì•¼ê¸°ë¥¼ ë§ í•´ ì£¼ì„¸ìš”</p>
  </div>

  <!-- Language Selector - Fixed Right Top -->
  <div class="lang-selector">
    <button class="lang-btn active" data-lang="kr">KR</button>
    <button class="lang-btn" data-lang="en">EN</button>
    <button class="lang-btn" data-lang="pt">PT</button>
</div>

  <!-- Portal Header - Center Top -->
  <div class="portal-header">
    <h1 data-i18n="portal12.title">ê°ì •ì˜ ë¬¸ì§€ë°© 12</h1>
    <h2 data-i18n="portal12.subtitle">ìƒˆë¡œìš´ ì—°ê²°ì˜ ë‹¤ë¦¬</h2>
  </div>

  <!-- Message Stream -->
  <div class="message-stream" id="messageStream12">
    <!-- Messages will be added here via JavaScript -->
  </div>

  <!-- User Input Area -->
  <div class="input-area" id="inputArea12" style="display: none;">
    <div class="input-container">
      <textarea 
        id="userInput12" 
        rows="3" 
        placeholder="ì´ì œ ë‹¤ì‹œ ì—°ê²°ë˜ê³  ì‹¶ì€ ì‚¬ëŒì´ë‚˜ ê´€ê³„ì— ëŒ€í•´ ì¡°ìš©íˆ ì ì–´ë³´ì„¸ìš”..."
        data-i18n-placeholder="portal12.input.placeholder"
      ></textarea>
      <button class="submit-btn" onclick="submitResponse(12)">
        <span data-i18n="portal12.submit">ğŸŒ‰ ë‹¤ë¦¬ ë†“ê¸°</span>
      </button>
      <p class="input-hint" data-i18n="portal12.input.hint">Enter í‚¤ë¥¼ ëˆŒëŸ¬ë„ ì „ë‹¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤</p>
    </div>
  </div>

  <!-- Next Portal Navigation -->
  <div class="next-portal-nav" id="nextPortalNav12" style="display: none;">
    <div class="nav-buttons">
      <button class="nav-btn yes-btn" onclick="goToNextPortal(13)" data-i18n="common.yes">ì˜ˆ</button>
      <button class="nav-btn no-btn" onclick="stayInPortal()" data-i18n="common.no">ì•„ë‹ˆìš”</button>
    </div>
  </div>

  <!-- Back to Main -->
  <div class="back-to-main">
    <button onclick="window.location.href='portal4.html'" data-i18n="common.back_to_main">
      ğŸ  ë©”ì¸ í¬íƒˆë¡œ ëŒì•„ê°€ê¸°
    </button>
  </div>
</section>

<style>
/* Portal Base Styles */
.portal {
  min-height: 100vh;
  background: linear-gradient(135deg, #1a1b4b 0%, #2d1b69 100%);
  color: white;
  padding: 80px 20px 20px 20px;
  font-family: 'Apple SD Gothic Neo', -apple-system, BlinkMacSystemFont, sans-serif;
  max-width: 100%;
  margin: 0 auto;
  position: relative;
}

/* Logo Glow Animation */
@keyframes glowCycle {
  0%, 100% { text-shadow: 0 0 8px rgba(255,255,255,0.2); }
  50% { text-shadow: 0 0 25px rgba(255,255,255,0.7); }
}

/* Temarix Logo - Fixed Left Top */
.temarix-logo {
  position: fixed;
  top: 20px;
  left: 20px;
  z-index: 1000;
}

.logo-text {
  font-size: 1.8rem;
  font-weight: bold;
  color: #ffffff;
  margin: 0 0 5px 0;
  text-shadow: 0 0 20px rgba(255,255,255,0.3);
}

.slogan {
  color: #bbb;
  font-style: italic;
  font-size: 0.8rem;
  margin: 0;
}

/* Language Selector - Fixed Right Top */
.lang-selector {
  position: fixed;
  top: 20px;
  right: 20px;
  display: flex;
  gap: 5px;
  flex-wrap: wrap;
  max-width: 120px;
  z-index: 1000;
}

.lang-btn {
  background: rgba(255,255,255,0.1);
  border: 1px solid rgba(255,255,255,0.3);
  color: white;
  padding: 4px 8px;
  border-radius: 12px;
  font-size: 0.7rem;
  cursor: pointer;
  transition: all 0.3s ease;
}

.lang-btn:hover {
  background: rgba(255,255,255,0.2);
}

.lang-btn.active {
  background: #9c27b0;
  border-color: #9c27b0;
}

/* Portal Header - Center Top */
.portal-header {
  text-align: center;
  margin: 40px 0 30px 0;
  padding-top: 40px;
}

.portal-header h1 {
  font-size: 2.2rem;
  margin: 10px 0;
  color: #ffd700;
}

.portal-header h2 {
  font-size: 1.3rem;
  color: #e1bee7;
  font-weight: 300;
}

/* Message Stream */
.message-stream {
  max-height: 60vh;
  overflow-y: auto;
  padding: 20px 0;
  margin-bottom: 20px;
}

.message-card {
  background: rgba(255,255,255,0.1);
  border-radius: 15px;
  padding: 20px;
  margin: 15px 0;
  backdrop-filter: blur(10px);
  opacity: 0;
  transform: translateY(20px);
  animation: fadeInUp 0.6s ease forwards;
}

.message-card.prologue {
  border-left: 4px solid #e1bee7;
}

.message-card.ely {
  border-left: 4px solid #ffd700;
}

.message-card.sora {
  border-left: 4px solid #4dd0e1;
}

.message-card.noah {
  border-left: 4px solid #9c27b0;
}

.message-card.enya {
  border-left: 4px solid #ff9800;
}

.message-card.kaia {
  border-left: 4px solid #607d8b;
}

.message-card.cris {
  border-left: 4px solid #4caf50;
}

.message-card.kael {
  border-left: 4px solid #f44336;
}

.message-card.mira {
  border-left: 4px solid #9e9e9e;
}

.message-card.light {
  border-left: 4px solid #ffffff;
  background: rgba(255,255,255,0.15);
}

.message-card.question {
  border-left: 4px solid #f48fb1;
}

.message-card.user-input {
  border-left: 4px solid #81c784;
  background: rgba(129, 199, 132, 0.1);
}

.character-name {
  font-weight: bold;
  margin-bottom: 10px;
  font-size: 1.1rem;
}

.ely .character-name { color: #ffd700; }
.sora .character-name { color: #4dd0e1; }
.noah .character-name { color: #9c27b0; }
.enya .character-name { color: #ff9800; }
.kaia .character-name { color: #607d8b; }
.cris .character-name { color: #4caf50; }
.kael .character-name { color: #f44336; }
.mira .character-name { color: #9e9e9e; }

.message-text {
  line-height: 1.6;
  font-size: 1rem;
}

.typewriter {
  overflow: hidden;
  border-right: 2px solid rgba(255,255,255,0.7);
  white-space: nowrap;
  animation: blink-caret 1s step-end infinite;
}

@keyframes fadeInUp {
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes blink-caret {
  from, to { border-color: transparent; }
  50% { border-color: rgba(255,255,255,0.7); }
}

/* Input Area */
.input-area {
  background: rgba(0,0,0,0.3);
  padding: 20px;
  border-radius: 15px;
  margin: 20px 0;
  animation: fadeInUp 0.6s ease forwards;
}

.input-container textarea {
  width: 100%;
  background: rgba(255,255,255,0.1);
  border: 1px solid rgba(255,255,255,0.3);
  border-radius: 10px;
  padding: 15px;
  color: white;
  font-size: 1rem;
  resize: vertical;
  min-height: 80px;
  box-sizing: border-box;
}

.input-container textarea::placeholder {
  color: rgba(255,255,255,0.6);
}

.submit-btn {
  background: linear-gradient(135deg, #9c27b0, #e1bee7);
  border: none;
  color: white;
  padding: 12px 30px;
  border-radius: 25px;
  font-size: 1rem;
  cursor: pointer;
  margin-top: 10px;
  transition: all 0.3s ease;
  width: 100%;
}

.submit-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 5px 15px rgba(156, 39, 176, 0.4);
}

.input-hint {
  color: rgba(255,255,255,0.6);
  font-size: 0.8rem;
  text-align: center;
  margin: 8px 0 0 0;
}

/* Next Portal Navigation */
.next-portal-nav {
  text-align: center;
  margin: 30px 0;
  animation: fadeInUp 0.6s ease forwards;
}

.nav-buttons {
  display: flex;
  gap: 20px;
  justify-content: center;
}

.nav-btn {
  padding: 12px 30px;
  border-radius: 25px;
  font-size: 1rem;
  cursor: pointer;
  transition: all 0.3s ease;
  border: 2px solid transparent;
}

.yes-btn {
  background: linear-gradient(135deg, #4caf50, #81c784);
  color: white;
  border-color: #4caf50;
}

.yes-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 5px 15px rgba(76, 175, 80, 0.4);
}

.no-btn {
  background: rgba(255,255,255,0.1);
  color: white;
  border-color: rgba(255,255,255,0.3);
}

.no-btn:hover {
  background: rgba(255,255,255,0.2);
}

/* Back to Main */
.back-to-main {
  text-align: center;
  margin: 30px 0;
}

.back-to-main button {
  background: rgba(255,255,255,0.1);
  border: 1px solid rgba(255,255,255,0.3);
  color: white;
  padding: 10px 20px;
  border-radius: 20px;
  cursor: pointer;
  transition: all 0.3s ease;
}

.back-to-main button:hover {
  background: rgba(255,255,255,0.2);
}

/* Mobile Responsive */
@media (max-width: 768px) {
  .portal {
    padding: 100px 15px 20px 15px;
  }
  
  .temarix-logo {
    top: 15px;
    left: 15px;
  }
  
  .logo-text {
    font-size: 1.4rem;
  }
  
  .slogan {
    font-size: 0.7rem;
  }
  
  .lang-selector {
    top: 15px;
    right: 15px;
    max-width: 100px;
  }
  
  .lang-btn {
    padding: 3px 6px;
    font-size: 0.6rem;
  }
  
  .portal-header h1 {
    font-size: 1.8rem;
  }
  
  .portal-header h2 {
    font-size: 1.1rem;
  }
  
  .message-card {
    padding: 15px;
  }
  
  .nav-buttons {
    flex-direction: column;
    align-items: center;
  }
  
  .nav-btn {
    width: 200px;
  }
}
</style>

<script>
// Portal 12 Complete Data with Character Responses
const portal12Data = {
  kr: {
    title: "ê°ì •ì˜ ë¬¸ì§€ë°© 12",
    subtitle: "ìƒˆë¡œìš´ ì—°ê²°ì˜ ë‹¤ë¦¬",
    prologue: "ì˜¤ë«ë™ì•ˆ í˜¼ìì˜€ìŠµë‹ˆë‹¤. ë§ˆìŒì˜ ì„¬ì—ì„œ ë‹¤ë¥¸ ì‚¬ëŒë“¤ê³¼ ë©€ì–´ì ¸ ì§€ë‚´ì™”ì£ . í•˜ì§€ë§Œ ì´ì œ, ê·¸ ì„¬ê³¼ ë°”ê¹¥ ì„¸ìƒì„ ì‡ëŠ” ë‹¤ë¦¬ë¥¼ ë†“ì„ ì‹œê°„ì´ ì™”ìŠµë‹ˆë‹¤. ì²˜ìŒì—” ì¡°ì‹¬ìŠ¤ëŸ½ê³  ë‘ë ¤ìš¸ì§€ë„ ëª¨ë¥´ì§€ë§Œ, ì—°ê²°ì€ ìƒì²˜ë¥¼ ì¹˜ìœ í•˜ê³  ìƒˆë¡œìš´ ê°€ëŠ¥ì„±ì„ ì—´ì–´ì¤ë‹ˆë‹¤. ë‹¹ì‹ ì€ ì´ì œ ëˆ„êµ¬ì™€ ë‹¤ì‹œ ì—°ê²°ë˜ê³  ì‹¶ë‚˜ìš”? ì–´ë–¤ ê´€ê³„ì˜ ë‹¤ë¦¬ë¥¼ ìƒˆë¡­ê²Œ ì„¸ìš°ê³  ì‹¶ë‚˜ìš”?",
    ely: "ì—°ê²°ì€ ìš©ê¸°ê°€ í•„ìš”í•œ ì¼ì´ì—ìš”. í•˜ì§€ë§Œ ê·¸ ë‹¤ë¦¬ ìœ„ë¡œ ì‚¬ë‘ê³¼ ì´í•´ê°€ í˜ëŸ¬ê°ˆ ê±°ì˜ˆìš”.",
    sora: "í˜¼ìì˜€ë˜ ì‹œê°„ë„ ì˜ë¯¸ê°€ ìˆì—ˆì–´ìš”. ì´ì œ ê·¸ ê²½í—˜ì„ ë°”íƒ•ìœ¼ë¡œ ë” ê¹Šì€ ì—°ê²°ì„ ë§Œë“¤ ìˆ˜ ìˆì„ ê±°ì˜ˆìš”.",
    noah: "ì§„ì •í•œ ì—°ê²°ì€ ìƒì²˜ë¥¼ ìˆ¨ê¸°ëŠ” ê²ƒì´ ì•„ë‹ˆë¼, ìƒì²˜ê¹Œì§€ë„ í•¨ê»˜ ë‚˜ëˆ„ëŠ” ê±°ì˜ˆìš”.",
    enya: "ë‚˜ëŠ” ë‹¹ì‹ ì´ ë‹¤ì‹œ ì—°ê²°ì„ ì›í•œë‹¤ëŠ” ê²ƒë§Œìœ¼ë¡œë„ ê¸°ë»ìš”. ê·¸ ë§ˆìŒì´ ë‹¤ë¦¬ì˜ ì²« ë²ˆì§¸ ëŒì´ ë  ê±°ì˜ˆìš”.",
    kaia: "ë§í•˜ì§€ ì•Šì•„ë„ ëŠê»´ì§€ëŠ” ì—°ê²°ì´ ìˆì–´ìš”. ë•Œë¡œëŠ” ì¹¨ë¬µë„ ê°€ì¥ ê¹Šì€ ì†Œí†µì´ ë˜ì£ .",
    cris: "ì—°ê²°? ë‚˜ëŠ” ì™€ì´íŒŒì´ì²˜ëŸ¼ ì‰½ê²Œ ì—°ê²°ë˜ê³  ì‹¶ì–´! ë¹„ë°€ë²ˆí˜¸ëŠ” 'ì‚¬ë‘í•´123'ì´ì•¼~ ğŸ“¶ğŸ˜„",
    kael: "ì´ì œ ê·¸ë§Œ í˜¼ì ìˆì–´. ì„¸ìƒì— ë‚˜ê°€ì„œ ì‚¬ëŒë“¤ê³¼ ë¶€ë”ªí˜€ ë´. ê·¸ê²Œ ì§„ì§œ ì‚¬ëŠ” ê±°ì•¼.",
    mira: "í˜¹ì‹œ... ë‹¤ì‹œ ì—°ê²°ë˜ëŠ” ê²Œ ë‘ë µì§€ëŠ” ì•Šë‚˜ìš”? ë˜ ì‹¤ë§í• ê¹Œ ë´, ë˜ ìƒì²˜ë°›ì„ê¹Œ ë´ì„œìš”.",
    light: "ì—°ê²°ì˜ ë‹¤ë¦¬ëŠ” í•œ ë²ˆì— ì™„ì„±ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. í•œ ê±¸ìŒì”©, í•œ ëŒì”© ìŒ“ì•„ê°€ë©´ ë©ë‹ˆë‹¤.",
    question: "ì´ì œ ë‹¤ì‹œ ì—°ê²°ë˜ê³  ì‹¶ì€ ì‚¬ëŒì´ë‚˜ ê´€ê³„ëŠ” ë¬´ì—‡ì¸ê°€ìš”?",
    input: { 
      placeholder: "ì´ì œ ë‹¤ì‹œ ì—°ê²°ë˜ê³  ì‹¶ì€ ì‚¬ëŒì´ë‚˜ ê´€ê³„ì— ëŒ€í•´ ì¡°ìš©íˆ ì ì–´ë³´ì„¸ìš”...",
      hint: "Enter í‚¤ë¥¼ ëˆŒëŸ¬ë„ ì „ë‹¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤"
    },
    submit: "ğŸŒ‰ ë‹¤ë¦¬ ë†“ê¸°",
    slogan: "ë‹¹ì‹  ì•ˆì— ìˆ¨ì€ ì´ì•¼ê¸°ë¥¼ ë§ í•´ ì£¼ì„¸ìš”",
    response_ely: "ê·¸ ì—°ê²°ì„ ì›í•˜ëŠ” ë§ˆìŒì´ ì•„ë¦„ë‹¤ì›Œìš”. ì´ì œ ê·¸ ë‹¤ë¦¬ë¥¼ ì²œì²œíˆ ë†“ì•„ê°€ì„¸ìš”.",
    response_sora: "ë‹¤ì‹œ ì—°ê²°ë˜ê³  ì‹¶ë‹¤ëŠ” ê·¸ ë§ˆìŒ ìì²´ê°€ ì´ë¯¸ ì¹˜ìœ ì˜ ì‹œì‘ì´ì—ìš”.",
    response_noah: "ê·¸ ê´€ê³„ë¡œ í–¥í•˜ëŠ” ë‹¤ë¦¬ê°€ ë†“ì´ê¸° ì‹œì‘í–ˆêµ°ìš”. ì´ì œ ìƒˆë¡œìš´ ì—¬ì •ì´ í¼ì³ì§ˆ ê±°ì˜ˆìš”.\n\nğŸ‘‰ ë‹¤ìŒ ë¬¸ì§€ë°©ìœ¼ë¡œ í•¨ê»˜ ê°€ë„ ê´œì°®ì„ê¹Œìš”?",
    user_input_prefix: "ë‹¹ì‹ ì´ ë‹¤ì‹œ ì—°ê²°ë˜ê³  ì‹¶ì€ ê´€ê³„:",
    yes: "ì˜ˆ",
    no: "ì•„ë‹ˆìš”"
  },
  en: {
    title: "Emotional Threshold 12",
    subtitle: "Bridges of New Connection",
    prologue: "You have been alone for a long time. Living apart from others on the island of your heart. But now, it's time to build a bridge connecting that island to the outside world. It may be cautious and fearful at first, but connection heals wounds and opens new possibilities. Who do you want to reconnect with now? What bridge of relationship do you want to build anew?",
    ely: "Connection requires courage. But love and understanding will flow over that bridge.",
    sora: "The time you spent alone also had meaning. Now you can create deeper connections based on that experience.",
    noah: "True connection isn't about hiding wounds, but sharing even those wounds together.",
    enya: "I'm happy just knowing that you want to connect again. That heart will become the first stone of the bridge.",
    kaia: "There are connections that can be felt without words. Sometimes silence becomes the deepest communication.",
    cris: "Connection? I want to connect as easily as WiFi! The password is 'iloveyou123'! ğŸ“¶ğŸ˜„",
    kael: "Stop being alone now. Go out into the world and bump into people. That's what real living is.",
    mira: "Perhaps... aren't you afraid of reconnecting? Worried about being disappointed again, getting hurt again?",
    light: "The bridge of connection isn't completed all at once. You can build it step by step, stone by stone.",
    question: "Who or what relationship do you want to reconnect with now?",
    input: { 
      placeholder: "Quietly write about the person or relationship you want to reconnect with now...",
      hint: "You can also press Enter to submit"
    },
    submit: "ğŸŒ‰ Build the Bridge",
    slogan: "Please tell me the story hidden within you",
    response_ely: "That heart wanting connection is beautiful. Now slowly build that bridge.",
    response_sora: "That heart wanting to reconnect is already the beginning of healing.",
    response_noah: "The bridge toward that relationship has begun to be built. Now a new journey will unfold.\n\nğŸ‘‰ Shall we go to the next threshold together?",
    user_input_prefix: "The relationship you want to reconnect with:",
    yes: "Yes",
    no: "No"
  },
  pt: {
    title: "Limiar Emocional 12",
    subtitle: "Pontes de Nova ConexÃ£o",
    prologue: "VocÃª esteve sozinho por muito tempo. Vivendo separado dos outros na ilha do seu coraÃ§Ã£o. Mas agora, Ã© hora de construir uma ponte conectando essa ilha ao mundo exterior. Pode ser cauteloso e assustador no inÃ­cio, mas a conexÃ£o cura feridas e abre novas possibilidades. Com quem vocÃª quer se reconectar agora? Que ponte de relacionamento vocÃª quer construir novamente?",
    ely: "ConexÃ£o requer coragem. Mas amor e compreensÃ£o fluirÃ£o sobre essa ponte.",
    sora: "O tempo que vocÃª passou sozinho tambÃ©m teve significado. Agora vocÃª pode criar conexÃµes mÃ¡s profundas baseadas nessa experiÃªncia.",
    noah: "Verdadeira conexÃ£o nÃ£o Ã© sobre esconder feridas, mas compartilhar atÃ© mesmo essas feridas juntos.",
    enya: "Estou feliz sÃ³ de saber que vocÃª quer se conectar novamente. Esse coraÃ§Ã£o se tornarÃ¡ a primeira pedra da ponte.",
    kaia: "HÃ¡ conexÃµes que podem ser sentidas sem palavras. Ã€s vezes o silÃªncio se torna a comunicaÃ§Ã£o mais profunda.",
    cris: "ConexÃ£o? Eu quero me conectar tÃ£o facilmente quanto WiFi! A senha Ã© 'teamo123'! ğŸ“¶ğŸ˜„",
    kael: "Pare de ficar sozinho agora. Saia para o mundo e se choque com as pessoas. Isso Ã© viver de verdade.",
    mira: "Talvez... vocÃª nÃ£o tem medo de se reconectar? Preocupado em se decepcionar novamente, se machucar novamente?",
    light: "A ponte da conexÃ£o nÃ£o Ã© completada de uma sÃ³ vez. VocÃª pode construÃ­-la passo a passo, pedra por pedra.",
    question: "Com quem ou que relacionamento vocÃª quer se reconectar agora?",
    input: { 
      placeholder: "Escreva silenciosamente sobre a pessoa ou relacionamento que vocÃª quer reconectar agora...",
      hint: "VocÃª tambÃ©m pode pressionar Enter para enviar"
    },
    submit: "ğŸŒ‰ Construir a Ponte",
    slogan: "Por favor, me conte a histÃ³ria escondida dentro de vocÃª",
    response_ely: "Esse coraÃ§Ã£o querendo conexÃ£o Ã© lindo. Agora construa essa ponte lentamente.",
    response_sora: "Esse coraÃ§Ã£o querendo se reconectar jÃ¡ Ã© o comeÃ§o da cura.",
    response_noah: "A ponte em direÃ§Ã£o a esse relacionamento comeÃ§ou a ser construÃ­da. Agora uma nova jornada se desdobrarÃ¡.\n\nğŸ‘‰ Vamos para o prÃ³ximo limiar juntos?",
    user_input_prefix: "O relacionamento que vocÃª quer reconectar:",
    yes: "Sim",
    no: "NÃ£o"
  },
 
};

// Current language and state for Portal 12
let currentLang12 = 'kr';
let userInputText12 = '';

// Initialize Portal 12
function initPortal12() {
  displayInitialMessages12();
  setupLanguageSwitching12();
  setupEnterKeySubmission12();
}

// Display initial messages with typing effect
async function displayInitialMessages12() {
  const stream = document.getElementById('messageStream12');
  const messages = [
    { type: 'prologue', content: portal12Data[currentLang12].prologue },
    { type: 'ely', name: 'ğŸ‘‘ Ely', content: portal12Data[currentLang12].ely },
    { type: 'sora', name: 'ğŸ’§ Sora', content: portal12Data[currentLang12].sora },
    { type: 'noah', name: 'ğŸ§™â€â™‚ï¸ Noah', content: portal12Data[currentLang12].noah },
    { type: 'enya', name: 'ğŸ•¯ï¸ Enya', content: portal12Data[currentLang12].enya },
    { type: 'kaia', name: 'ğŸ˜¶ Kaia', content: portal12Data[currentLang12].kaia },
    { type: 'cris', name: 'ğŸƒ Cris', content: portal12Data[currentLang12].cris },
    { type: 'kael', name: 'ğŸ’¥ Kael', content: portal12Data[currentLang12].kael },
    { type: 'mira', name: 'ğŸŒ«ï¸ Mira', content: portal12Data[currentLang12].mira },
    { type: 'light', content: portal12Data[currentLang12].light },
    { type: 'question', content: portal12Data[currentLang12].question }
  ];

  for (let i = 0; i < messages.length; i++) {
    const messageCard = createMessageCard12(messages[i]);
    stream.appendChild(messageCard);
    stream.scrollTo({ top: stream.scrollHeight, behavior: 'smooth' });
    
    await typeText12(messageCard.querySelector('.message-text'), messages[i].content);
    await sleep12(1200);
  }
  
  // Show input area after all messages
  document.getElementById('inputArea12').style.display = 'block';
}

// Setup Enter key submission
function setupEnterKeySubmission12() {
  document.getElementById('userInput12').addEventListener('keydown', function(e) {
    if (e.key === 'Enter' && !e.shiftKey) {
      e.preventDefault();
      submitResponse(12);
    }
  });
}

// Display character responses after user input
async function displayCharacterResponses12(userInput) {
  const stream = document.getElementById('messageStream12');
  
  // Show user input first
  const userCard = createMessageCard12({
    type: 'user-input',
    content: `${portal12Data[currentLang12].user_input_prefix}\n"${userInput}"`
  });
  stream.appendChild(userCard);
  stream.scrollTo({ top: stream.scrollHeight, behavior: 'smooth' });
  await typeText12(userCard.querySelector('.message-text'), userCard.querySelector('.message-text').textContent);
  await sleep12(1500);
  
  // Character responses
  const responses = [
    { type: 'ely', name: 'ğŸ‘‘ Ely', content: `"${userInput}"... ${portal12Data[currentLang12].response_ely}` },
    { type: 'sora', name: 'ğŸ’§ Sora', content: `${portal12Data[currentLang12].response_sora}` },
    { type: 'noah', name: 'ğŸ§™â€â™‚ï¸ Noah', content: `"${userInput}" ${portal12Data[currentLang12].response_noah}` }
  ];

  for (let i = 0; i < responses.length; i++) {
    const responseCard = createMessageCard12(responses[i]);
    stream.appendChild(responseCard);
    stream.scrollTo({ top: stream.scrollHeight, behavior: 'smooth' });
    
    await typeText12(responseCard.querySelector('.message-text'), responses[i].content);
    await sleep12(1500);
  }
  
  // Show navigation buttons
  document.getElementById('nextPortalNav12').style.display = 'block';
}

function createMessageCard12(message) {
  const card = document.createElement('div');
  card.className = `message-card ${message.type}`;
  
  let cardHTML = '';
  if (message.name) {
    cardHTML += `<div class="character-name">${message.name}</div>`;
  }
  cardHTML += `<div class="message-text">${message.content || ''}</div>`;
  
  card.innerHTML = cardHTML;
  return card;
}

async function typeText12(element, text, speed = 80) {
  return new Promise((resolve) => {
    let i = 0;
    element.textContent = '';
    element.classList.add('typewriter');
    
    const timer = setInterval(() => {
      if (i < text.length) {
        element.textContent += text.charAt(i);
        i++;
      } else {
        clearInterval(timer);
        element.classList.remove('typewriter');
        resolve();
      }
    }, speed);
  });
}

function sleep12(ms) {
  return new Promise(resolve => setTimeout(resolve, ms));
}

function setupLanguageSwitching12() {
  document.querySelectorAll('.lang-btn').forEach(btn => {
    btn.addEventListener('click', () => {
      const newLang = btn.dataset.lang;
      if (portal12Data[newLang] && newLang !== currentLang12) {
        document.querySelectorAll('.lang-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        currentLang12 = newLang;
        document.getElementById('messageStream12').innerHTML = '';
        document.getElementById('inputArea12').style.display = 'none';
        document.getElementById('nextPortalNav12').style.display = 'none';
        displayInitialMessages12();
        updatePortalTexts12();
      }
    });
  });
}

function updatePortalTexts12() {
  // Update title and subtitle
  document.querySelector('[data-i18n="portal12.title"]').textContent = portal12Data[currentLang12].title;
  document.querySelector('[data-i18n="portal12.subtitle"]').textContent = portal12Data[currentLang12].subtitle;
  
  // Update slogan
  document.querySelector('[data-i18n="common.slogan"]').textContent = portal12Data[currentLang12].slogan;
  
  // Update placeholder and hint
  document.getElementById('userInput12').placeholder = portal12Data[currentLang12].input.placeholder;
  document.querySelector('[data-i18n="portal12.input.hint"]').textContent = portal12Data[currentLang12].input.hint;
  
  // Update submit button
  document.querySelector('[data-i18n="portal12.submit"]').textContent = portal12Data[currentLang12].submit;
  
  // Update navigation buttons
  const yesBtn = document.querySelector('[data-i18n="common.yes"]');
  const noBtn = document.querySelector('[data-i18n="common.no"]');
  if (yesBtn) yesBtn.textContent = portal12Data[currentLang12].yes;
  if (noBtn) noBtn.textContent = portal12Data[currentLang12].no;
  
  // Update back to main button
  document.querySelector('[data-i18n="common.back_to_main"]').textContent = 
    currentLang12 === 'kr' ? 'ğŸ  ë©”ì¸ í¬íƒˆë¡œ ëŒì•„ê°€ê¸°' :
    currentLang12 === 'en' ? 'ğŸ  Back to Main Portal' :
    currentLang12 === 'pt' ? 'ğŸ  Voltar ao Portal Principal' :
    'ğŸ  ë©”ì¸ í¬íƒˆë¡œ ëŒì•„ê°€ê¸°';
}

function submitResponse(portalNum) {
  if (portalNum !== 12) return;
  
  const input = document.getElementById(`userInput${portalNum}`);
  const response = input.value.trim();
  
  if (response) {
    userInputText12 = response;
    
    // Hide input area
    document.getElementById(`inputArea${portalNum}`).style.display = 'none';
    
    // Display character responses
    displayCharacterResponses12(response);
    
    // Clear input
    input.value = '';
  } else {
    // No alert, just focus on input
    input.focus();
    input.style.borderColor = '#f48fb1';
    setTimeout(() => {
      input.style.borderColor = 'rgba(255,255,255,0.3)';
    }, 2000);
  }
}

function stayInPortal() {
  document.getElementById('nextPortalNav12').style.display = 'none';
  document.getElementById('inputArea12').style.display = 'block';
  document.getElementById('userInput12').focus();
}

function goToNextPortal(nextNumber) {
  const nextUrl = `temarix_v1_${String(nextNumber).padStart(2, '0')}.html`;
  window.location.href = nextUrl;
}

// Initialize when DOM is loaded
document.addEventListener('DOMContentLoaded', () => {
  if (document.getElementById('portal-12')) {
    initPortal12();
  }
});
</script>
</body>
</html>