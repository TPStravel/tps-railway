<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>Temarix V1 02</title>
</head>
<body>
<!-- Temarix V1 - Portal 02: 잊혀진 진심 -->
<section class="portal portal-02" id="portal-02">
  <!-- Temarix Logo - Fixed Left Top -->
  <div class="temarix-logo">
    <h1 class="logo-text">🌌 TEMARIX</h1>
    <p class="slogan" data-i18n="common.slogan">빛은 고요 속에서 피어난다.</p>
  </div>

  <!-- Language Selector - Fixed Right Top -->
  <div class="lang-selector">
    <button class="lang-btn active" data-lang="kr">KR</button>
    <button class="lang-btn" data-lang="en">EN</button>
    <button class="lang-btn" data-lang="pt">PT</button>
  </div>

  <!-- Portal Header - Center Top -->
  <div class="portal-header">
    <h1 data-i18n="portal02.title">감정의 문지방 02</h1>
    <h2 data-i18n="portal02.subtitle">잊혀진 진심</h2>
  </div>

  <!-- Message Stream -->
  <div class="message-stream" id="messageStream02">
    <!-- Messages will be added here via JavaScript -->
  </div>

  <!-- User Input Area -->
  <div class="input-area" id="inputArea02" style="display: none;">
    <div class="input-container">
      <textarea 
        id="userInput02" 
        rows="3" 
        placeholder="그때 하지 못한 말을 조용히 적어보세요..."
        data-i18n-placeholder="portal02.input.placeholder"
      ></textarea>
      <button class="submit-btn" onclick="submitResponse(2)">
        <span data-i18n="portal02.submit">💫 진심을 전하기</span>
      </button>
      <p class="input-hint" data-i18n="portal02.input.hint">Enter 키를 눌러도 전달할 수 있습니다</p>
    </div>
  </div>

  <!-- Next Portal Navigation -->
  <div class="next-portal-nav" id="nextPortalNav02" style="display: none;">
    <div class="nav-buttons">
      <button class="nav-btn yes-btn" onclick="goToNextPortal(3)" data-i18n="common.yes">예</button>
      <button class="nav-btn no-btn" onclick="stayInPortal()" data-i18n="common.no">아니요</button>
    </div>
  </div>

  <!-- Back to Main -->
  <div class="back-to-main">
    <button onclick="window.location.href='portal4.html'" data-i18n="common.back_to_main">
      🏠 메인 포탈로 돌아가기
    </button>
  </div>
</section>

<style>
/* Portal Base Styles */
.portal {
  min-height: 100vh;
  background: linear-gradient(135deg, #1a1b4b 0%, #2d1b69 100%);
  color: white;
  padding: 80px 20px 20px 20px;
  font-family: 'Apple SD Gothic Neo', -apple-system, BlinkMacSystemFont, sans-serif;
  max-width: 100%;
  margin: 0 auto;
  position: relative;
}

/* Logo Glow Animation */
@keyframes glowCycle {
  0%, 100% { text-shadow: 0 0 8px rgba(255,255,255,0.2); }
  50% { text-shadow: 0 0 25px rgba(255,255,255,0.7); }
}

/* Temarix Logo - Fixed Left Top */
.temarix-logo {
  position: fixed;
  top: 20px;
  left: 20px;
  z-index: 1000;
}

.logo-text {
  font-size: 1.8rem;
  font-weight: bold;
  color: #ffffff;
  margin: 0 0 5px 0;
  text-shadow: 0 0 20px rgba(255,255,255,0.3);
}

.slogan {
  color: #bbb;
  font-style: italic;
  font-size: 0.8rem;
  margin: 0;
}

/* Language Selector - Fixed Right Top */
.lang-selector {
  position: fixed;
  top: 20px;
  right: 20px;
  display: flex;
  gap: 5px;
  flex-wrap: wrap;
  max-width: 120px;
  z-index: 1000;
}

.lang-btn {
  background: rgba(255,255,255,0.1);
  border: 1px solid rgba(255,255,255,0.3);
  color: white;
  padding: 4px 8px;
  border-radius: 12px;
  font-size: 0.7rem;
  cursor: pointer;
  transition: all 0.3s ease;
}

.lang-btn:hover {
  background: rgba(255,255,255,0.2);
}

.lang-btn.active {
  background: #9c27b0;
  border-color: #9c27b0;
}

/* Portal Header - Center Top */
.portal-header {
  text-align: center;
  margin: 40px 0 30px 0;
  padding-top: 40px;
}

.portal-header h1 {
  font-size: 2.2rem;
  margin: 10px 0;
  color: #ffd700;
}

.portal-header h2 {
  font-size: 1.3rem;
  color: #e1bee7;
  font-weight: 300;
}

/* Message Stream */
.message-stream {
  max-height: 60vh;
  overflow-y: auto;
  padding: 20px 0;
  margin-bottom: 20px;
}

.message-card {
  background: rgba(255,255,255,0.1);
  border-radius: 15px;
  padding: 20px;
  margin: 15px 0;
  backdrop-filter: blur(10px);
  opacity: 0;
  transform: translateY(20px);
  animation: fadeInUp 0.6s ease forwards;
}

.message-card.prologue {
  border-left: 4px solid #e1bee7;
}

.message-card.ely {
  border-left: 4px solid #ffd700;
}

.message-card.sora {
  border-left: 4px solid #4dd0e1;
}

.message-card.noah {
  border-left: 4px solid #9c27b0;
}

.message-card.enya {
  border-left: 4px solid #ff9800;
}

.message-card.kaia {
  border-left: 4px solid #607d8b;
}

.message-card.cris {
  border-left: 4px solid #4caf50;
}

.message-card.kael {
  border-left: 4px solid #f44336;
}

.message-card.mira {
  border-left: 4px solid #9e9e9e;
}

.message-card.light {
  border-left: 4px solid #ffffff;
  background: rgba(255,255,255,0.15);
}

.message-card.question {
  border-left: 4px solid #f48fb1;
}

.message-card.user-input {
  border-left: 4px solid #81c784;
  background: rgba(129, 199, 132, 0.1);
}

.character-name {
  font-weight: bold;
  margin-bottom: 10px;
  font-size: 1.1rem;
}

.ely .character-name { color: #ffd700; }
.sora .character-name { color: #4dd0e1; }
.noah .character-name { color: #9c27b0; }
.enya .character-name { color: #ff9800; }
.kaia .character-name { color: #607d8b; }
.cris .character-name { color: #4caf50; }
.kael .character-name { color: #f44336; }
.mira .character-name { color: #9e9e9e; }

.message-text {
  line-height: 1.6;
  font-size: 1rem;
}

.typewriter {
  overflow: hidden;
  border-right: 2px solid rgba(255,255,255,0.7);
  white-space: nowrap;
  animation: blink-caret 1s step-end infinite;
}

@keyframes fadeInUp {
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes blink-caret {
  from, to { border-color: transparent; }
  50% { border-color: rgba(255,255,255,0.7); }
}

/* Input Area */
.input-area {
  background: rgba(0,0,0,0.3);
  padding: 20px;
  border-radius: 15px;
  margin: 20px 0;
  animation: fadeInUp 0.6s ease forwards;
}

.input-container textarea {
  width: 100%;
  background: rgba(255,255,255,0.1);
  border: 1px solid rgba(255,255,255,0.3);
  border-radius: 10px;
  padding: 15px;
  color: white;
  font-size: 1rem;
  resize: vertical;
  min-height: 80px;
  box-sizing: border-box;
}

.input-container textarea::placeholder {
  color: rgba(255,255,255,0.6);
}

.submit-btn {
  background: linear-gradient(135deg, #9c27b0, #e1bee7);
  border: none;
  color: white;
  padding: 12px 30px;
  border-radius: 25px;
  font-size: 1rem;
  cursor: pointer;
  margin-top: 10px;
  transition: all 0.3s ease;
  width: 100%;
}

.submit-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 5px 15px rgba(156, 39, 176, 0.4);
}

.input-hint {
  color: rgba(255,255,255,0.6);
  font-size: 0.8rem;
  text-align: center;
  margin: 8px 0 0 0;
}

/* Next Portal Navigation */
.next-portal-nav {
  text-align: center;
  margin: 30px 0;
  animation: fadeInUp 0.6s ease forwards;
}

.nav-buttons {
  display: flex;
  gap: 20px;
  justify-content: center;
}

.nav-btn {
  padding: 12px 30px;
  border-radius: 25px;
  font-size: 1rem;
  cursor: pointer;
  transition: all 0.3s ease;
  border: 2px solid transparent;
}

.yes-btn {
  background: linear-gradient(135deg, #4caf50, #81c784);
  color: white;
  border-color: #4caf50;
}

.yes-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 5px 15px rgba(76, 175, 80, 0.4);
}

.no-btn {
  background: rgba(255,255,255,0.1);
  color: white;
  border-color: rgba(255,255,255,0.3);
}

.no-btn:hover {
  background: rgba(255,255,255,0.2);
}

/* Back to Main */
.back-to-main {
  text-align: center;
  margin: 30px 0;
}

.back-to-main button {
  background: rgba(255,255,255,0.1);
  border: 1px solid rgba(255,255,255,0.3);
  color: white;
  padding: 10px 20px;
  border-radius: 20px;
  cursor: pointer;
  transition: all 0.3s ease;
}

.back-to-main button:hover {
  background: rgba(255,255,255,0.2);
}

/* Mobile Responsive */
@media (max-width: 768px) {
  .portal {
    padding: 100px 15px 20px 15px;
  }
  
  .temarix-logo {
    top: 15px;
    left: 15px;
  }
  
  .logo-text {
    font-size: 1.4rem;
  }
  
  .slogan {
    font-size: 0.7rem;
  }
  
  .lang-selector {
    top: 15px;
    right: 15px;
    max-width: 100px;
  }
  
  .lang-btn {
    padding: 3px 6px;
    font-size: 0.6rem;
  }
  
  .portal-header h1 {
    font-size: 1.8rem;
  }
  
  .portal-header h2 {
    font-size: 1.1rem;
  }
  
  .message-card {
    padding: 15px;
  }
  
  .nav-buttons {
    flex-direction: column;
    align-items: center;
  }
  
  .nav-btn {
    width: 200px;
  }
}
</style>

<script>
// Portal 02 Complete Data with Character Responses
const portal02Data = {
  kr: {
    title: "감정의 문지방 02",
    subtitle: "잊혀진 진심",
    prologue: "말은 웃고 있었지만, 마음은 아무 말도 하지 않았죠. 그때 그 상황에서, 아무도 내 진심을 물어주지 않았으니까요. 그래서 그냥 웃었습니다. 괜찮은 척, 아무 일도 없던 것처럼. 그 미소 뒤에 숨어 있던 말… 지금도 가끔 울고 있지 않나요?",
    ely: "당신의 진심은 사라지지 않았어요. 그저 그 순간, 받아줄 사람이 없었던 것뿐이죠.",
    sora: "괜찮다고 말한 당신의 눈이, 그날 밤엔 조용히 떨리고 있었어요.",
    noah: "그 상황에서 말하지 않은 건, 오히려 진심을 더 소중히 여긴 선택이었을지도 몰라요.",
    enya: "그때의 당신, 너무 애썼어요. 내가 지금 그 말을 대신 들어줄게요.",
    kaia: "당신은 아무 말도 하지 않았지만, 그 침묵이 제일 아팠던 거… 난 알아요.",
    cris: "난 그럴 때 그냥 코 풀고 햄버거 먹어. 눈물보다 케첩이 낫거든요. 🍔😜",
    kael: "왜 맨날 참고 넘겨? 진심은 들키는 게 아니라 보여주는 거야.",
    mira: "혹시 그때… 말 안 한 게 아니라 사실은 당신도 스스로를 믿지 못한 건 아니었을까요?",
    light: "진심은 사라지지 않습니다. 다만, 조용히 숨 쉬며 누군가의 기다림 속에 살아갑니다.",
    question: "그때 하지 못한 말, 지금도 당신 안에서 울고 있지 않나요?",
    input: { 
      placeholder: "그때 하지 못한 말을 조용히 적어보세요...",
      hint: "Enter 키를 눌러도 전달할 수 있습니다"
    },
    submit: "💫 진심을 전하기",
    slogan: "당신 안에 숨은 이야기를 말 해 주세요",
    response_ely: "그 말을 이제서야 꺼내주셨군요. 그 진심, 소중합니다.",
    response_sora: "저도 느껴졌어요, 그 속에 있던 떨림... 이제는 말해도 괜찮아요.",
    response_noah: "오래 참았던 말이군요. 이제 그 무게를 내려놓으셔도 됩니다.\n\n👉 다음 문지방으로 함께 가도 괜찮을까요?",
    user_input_prefix: "당신이 전한 진심:",
    yes: "예",
    no: "아니요"
  },
  en: {
    title: "Emotional Threshold 02",
    subtitle: "Forgotten Sincerity",
    prologue: "Your words were smiling, but your heart said nothing. In that situation, no one asked about your true feelings. So you just smiled. Pretending everything was okay, as if nothing had happened. The words hidden behind that smile... aren't they still crying sometimes?",
    ely: "Your sincerity hasn't disappeared. It's just that there was no one to receive it at that moment.",
    sora: "Your eyes that said 'I'm okay' were quietly trembling that night.",
    noah: "Not speaking in that situation might have been a choice to cherish your sincerity even more.",
    enya: "You tried so hard back then. I'll listen to those words for you now.",
    kaia: "You didn't say anything, but that silence was what hurt the most... I know.",
    cris: "When that happens, I just blow my nose and eat a hamburger. Ketchup is better than tears. 🍔😜",
    kael: "Why do you always hold back? Sincerity isn't about being caught, it's about showing.",
    mira: "Maybe... you didn't speak not because you couldn't, but because you didn't trust yourself?",
    light: "Sincerity doesn't disappear. It just breathes quietly, living in someone's waiting.",
    question: "The words you couldn't say then, aren't they still crying inside you?",
    input: { 
      placeholder: "Quietly write the words you couldn't say then...",
      hint: "You can also press Enter to submit"
    },
    submit: "💫 Share Your Truth",
    slogan: "Please tell me the story hidden within you",
    response_ely: "You finally brought out those words. That sincerity is precious.",
    response_sora: "I felt it too, the tremor that was inside... It's okay to speak now.",
    response_noah: "Those were words you held back for a long time. You can put down that weight now.\n\n👉 Shall we go to the next threshold together?",
    user_input_prefix: "Your shared truth:",
    yes: "Yes",
    no: "No"
  },
  pt: {
    title: "Limiar Emocional 02",
    subtitle: "Sinceridade Esquecida",
    prologue: "Suas palavras estavam sorrindo, mas seu coração não disse nada. Naquela situação, ninguém perguntou sobre seus verdadeiros sentimentos. Então você apenas sorriu. Fingindo que estava tudo bem, como se nada tivesse acontecido. As palavras escondidas atrás daquele sorriso... elas não estão ainda chorando às vezes?",
    ely: "Sua sinceridade não desapareceu. É só que não havia ninguém para recebê-la naquele momento.",
    sora: "Seus olhos que disseram 'estou bem' estavam tremendo silenciosamente naquela noite.",
    noah: "Não falar naquela situação pode ter sido uma escolha para valorizar ainda mais sua sinceridade.",
    enya: "Você se esforçou tanto naquela época. Vou ouvir essas palavras por você agora.",
    kaia: "Você não disse nada, mas esse silêncio foi o que mais doeu... Eu sei.",
    cris: "Quando isso acontece, eu só assoou o nariz e como um hambúrguer. Ketchup é melhor que lágrimas. 🍔😜",
    kael: "Por que você sempre se segura? Sinceridade não é sobre ser pego, é sobre mostrar.",
    mira: "Talvez... você não falou não porque não podia, mas porque não confiava em si mesmo?",
    light: "A sinceridade não desaparece. Ela apenas respira silenciosamente, vivendo na espera de alguém.",
    question: "As palavras que você não conseguiu dizer então, elas não estão ainda chorando dentro de você?",
    input: { 
      placeholder: "Escreva silenciosamente as palavras que você não conseguiu dizer então...",
      hint: "Você também pode pressionar Enter para enviar"
    },
    submit: "💫 Compartilhe Sua Verdade",
    slogan: "Por favor, me conte a história escondida dentro de você",
    response_ely: "Você finalmente trouxe essas palavras. Essa sinceridade é preciosa.",
    response_sora: "Eu também senti, o tremor que estava dentro... Está bem falar agora.",
    response_noah: "Essas eram palavras que você guardou por muito tempo. Você pode deixar esse peso agora.\n\n👉 Vamos para o próximo limiar juntos?",
    user_input_prefix: "Sua verdade compartilhada:",
    yes: "Sim",
    no: "Não"
  },
};

// Current language and state for Portal 02
let currentLang02 = 'kr';
let userInputText02 = '';

// Initialize Portal 02
function initPortal02() {
  displayInitialMessages02();
  setupLanguageSwitching02();
  setupEnterKeySubmission02();
}

// Display initial messages with typing effect
async function displayInitialMessages02() {
  const stream = document.getElementById('messageStream02');
  const messages = [
    { type: 'prologue', content: portal02Data[currentLang02].prologue },
    { type: 'ely', name: '👑 Ely', content: portal02Data[currentLang02].ely },
    { type: 'sora', name: '💧 Sora', content: portal02Data[currentLang02].sora },
    { type: 'noah', name: '🧙‍♂️ Noah', content: portal02Data[currentLang02].noah },
    { type: 'enya', name: '🕯️ Enya', content: portal02Data[currentLang02].enya },
    { type: 'kaia', name: '😶 Kaia', content: portal02Data[currentLang02].kaia },
    { type: 'cris', name: '🃏 Cris', content: portal02Data[currentLang02].cris },
    { type: 'kael', name: '💥 Kael', content: portal02Data[currentLang02].kael },
    { type: 'mira', name: '🌫️ Mira', content: portal02Data[currentLang02].mira },
    { type: 'light', content: portal02Data[currentLang02].light },
    { type: 'question', content: portal02Data[currentLang02].question }
  ];

  for (let i = 0; i < messages.length; i++) {
    const messageCard = createMessageCard02(messages[i]);
    stream.appendChild(messageCard);
    stream.scrollTo({ top: stream.scrollHeight, behavior: 'smooth' });
    
    await typeText02(messageCard.querySelector('.message-text'), messages[i].content);
    await sleep02(1200);
  }
  
  // Show input area after all messages
  document.getElementById('inputArea02').style.display = 'block';
}

// Setup Enter key submission
function setupEnterKeySubmission02() {
  document.getElementById('userInput02').addEventListener('keydown', function(e) {
    if (e.key === 'Enter' && !e.shiftKey) {
      e.preventDefault();
      submitResponse(2);
    }
  });
}

// Display character responses after user input
async function displayCharacterResponses02(userInput) {
  const stream = document.getElementById('messageStream02');
  
  // Show user input first
  const userCard = createMessageCard02({
    type: 'user-input',
    content: `${portal02Data[currentLang02].user_input_prefix}\n"${userInput}"`
  });
  stream.appendChild(userCard);
  stream.scrollTo({ top: stream.scrollHeight, behavior: 'smooth' });
  await typeText02(userCard.querySelector('.message-text'), userCard.querySelector('.message-text').textContent);
  await sleep02(1500);
  
  // Character responses
  const responses = [
    { type: 'ely', name: '👑 Ely', content: `"${userInput}"... ${portal02Data[currentLang02].response_ely}` },
    { type: 'sora', name: '💧 Sora', content: `${portal02Data[currentLang02].response_sora}` },
    { type: 'noah', name: '🧙‍♂️ Noah', content: `"${userInput}" ${portal02Data[currentLang02].response_noah}` }
  ];

  for (let i = 0; i < responses.length; i++) {
    const responseCard = createMessageCard02(responses[i]);
    stream.appendChild(responseCard);
    stream.scrollTo({ top: stream.scrollHeight, behavior: 'smooth' });
    
    await typeText02(responseCard.querySelector('.message-text'), responses[i].content);
    await sleep02(1500);
  }
  
  // Show navigation buttons
  document.getElementById('nextPortalNav02').style.display = 'block';
}

function createMessageCard02(message) {
  const card = document.createElement('div');
  card.className = `message-card ${message.type}`;
  
  let cardHTML = '';
  if (message.name) {
    cardHTML += `<div class="character-name">${message.name}</div>`;
  }
  cardHTML += `<div class="message-text">${message.content || ''}</div>`;
  
  card.innerHTML = cardHTML;
  return card;
}

async function typeText02(element, text, speed = 80) {
  return new Promise((resolve) => {
    let i = 0;
    element.textContent = '';
    element.classList.add('typewriter');
    
    const timer = setInterval(() => {
      if (i < text.length) {
        element.textContent += text.charAt(i);
        i++;
      } else {
        clearInterval(timer);
        element.classList.remove('typewriter');
        resolve();
      }
    }, speed);
  });
}

function sleep02(ms) {
  return new Promise(resolve => setTimeout(resolve, ms));
}

function setupLanguageSwitching02() {
  document.querySelectorAll('.lang-btn').forEach(btn => {
    btn.addEventListener('click', () => {
      const newLang = btn.dataset.lang;
      if (portal02Data[newLang] && newLang !== currentLang02) {
        // 버튼 상태 업데이트
        document.querySelectorAll('.lang-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        
        currentLang02 = newLang;

        // 메시지 스트림과 입력 영역 초기화
        document.getElementById('messageStream02').innerHTML = '';
        document.getElementById('inputArea02').style.display = 'none';
        document.getElementById('nextPortalNav02').style.display = 'none';

        // 다시 메시지 표시 및 텍스트 업데이트
        displayInitialMessages02();
        updatePortalTexts02();
      }
    });
  });
}

function updatePortalTexts02() {
  // Update title and subtitle
  document.querySelector('[data-i18n="portal02.title"]').textContent = portal02Data[currentLang02].title;
  document.querySelector('[data-i18n="portal02.subtitle"]').textContent = portal02Data[currentLang02].subtitle;
  
  // Update slogan
  document.querySelector('[data-i18n="common.slogan"]').textContent = portal02Data[currentLang02].slogan;
  
  // Update placeholder and hint
  document.getElementById('userInput02').placeholder = portal02Data[currentLang02].input.placeholder;
  document.querySelector('[data-i18n="portal02.input.hint"]').textContent = portal02Data[currentLang02].input.hint;
  
  // Update submit button
  document.querySelector('[data-i18n="portal02.submit"]').textContent = portal02Data[currentLang02].submit;
  
  // Update navigation buttons
  const yesBtn = document.querySelector('[data-i18n="common.yes"]');
  const noBtn = document.querySelector('[data-i18n="common.no"]');
  if (yesBtn) yesBtn.textContent = portal02Data[currentLang02].yes;
  if (noBtn) noBtn.textContent = portal02Data[currentLang02].no;
  
  // Update back to main button
  document.querySelector('[data-i18n="common.back_to_main"]').textContent = 
    currentLang02 === 'kr' ? '🏠 메인 포탈로 돌아가기' :
    currentLang02 === 'en' ? '🏠 Back to Main Portal' :
    currentLang02 === 'pt' ? '🏠 Voltar ao Portal Principal' :
    '🏠 메인 포탈로 돌아가기';
}

function submitResponse(portalNum) {
  if (portalNum !== 2) return;
  
  const input = document.getElementById(`userInput0${portalNum}`);
  const response = input.value.trim();
  
  if (response) {
    userInputText02 = response;
    
    // Hide input area
    document.getElementById(`inputArea0${portalNum}`).style.display = 'none';
    
    // Display character responses
    displayCharacterResponses02(response);
    
    // Clear input
    input.value = '';
  } else {
    // No alert, just focus on input
    input.focus();
    input.style.borderColor = '#f48fb1';
    setTimeout(() => {
      input.style.borderColor = 'rgba(255,255,255,0.3)';
    }, 2000);
  }
}

function goToNextPortal(nextNumber) {
  const nextUrl = `temarix_v1_${String(nextNumber).padStart(2, '0')}.html`;
  window.location.href = nextUrl;
}

function stayInPortal() {
  // Hide navigation and show input again
  document.getElementById('nextPortalNav02').style.display = 'none';
  document.getElementById('inputArea02').style.display = 'block';
  document.getElementById('userInput02').focus();
}

// Initialize when DOM is loaded
document.addEventListener('DOMContentLoaded', () => {
  if (document.getElementById('portal-02')) {
    initPortal02();
  }
});
</script>
</body>
</html>