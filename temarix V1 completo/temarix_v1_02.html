<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>Temarix V1 02</title>
</head>
<body>
<!-- Temarix V1 - Portal 02: ìŠí˜€ì§„ ì§„ì‹¬ -->
<section class="portal portal-02" id="portal-02">
  <!-- Temarix Logo - Fixed Left Top -->
  <div class="temarix-logo">
    <h1 class="logo-text">ğŸŒŒ TEMARIX</h1>
    <p class="slogan" data-i18n="common.slogan">ë¹›ì€ ê³ ìš” ì†ì—ì„œ í”¼ì–´ë‚œë‹¤.</p>
  </div>

  <!-- Language Selector - Fixed Right Top -->
  <div class="lang-selector">
    <button class="lang-btn active" data-lang="kr">KR</button>
    <button class="lang-btn" data-lang="en">EN</button>
    <button class="lang-btn" data-lang="pt">PT</button>
  </div>

  <!-- Portal Header - Center Top -->
  <div class="portal-header">
    <h1 data-i18n="portal02.title">ê°ì •ì˜ ë¬¸ì§€ë°© 02</h1>
    <h2 data-i18n="portal02.subtitle">ìŠí˜€ì§„ ì§„ì‹¬</h2>
  </div>

  <!-- Message Stream -->
  <div class="message-stream" id="messageStream02">
    <!-- Messages will be added here via JavaScript -->
  </div>

  <!-- User Input Area -->
  <div class="input-area" id="inputArea02" style="display: none;">
    <div class="input-container">
      <textarea 
        id="userInput02" 
        rows="3" 
        placeholder="ê·¸ë•Œ í•˜ì§€ ëª»í•œ ë§ì„ ì¡°ìš©íˆ ì ì–´ë³´ì„¸ìš”..."
        data-i18n-placeholder="portal02.input.placeholder"
      ></textarea>
      <button class="submit-btn" onclick="submitResponse(2)">
        <span data-i18n="portal02.submit">ğŸ’« ì§„ì‹¬ì„ ì „í•˜ê¸°</span>
      </button>
      <p class="input-hint" data-i18n="portal02.input.hint">Enter í‚¤ë¥¼ ëˆŒëŸ¬ë„ ì „ë‹¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤</p>
    </div>
  </div>

  <!-- Next Portal Navigation -->
  <div class="next-portal-nav" id="nextPortalNav02" style="display: none;">
    <div class="nav-buttons">
      <button class="nav-btn yes-btn" onclick="goToNextPortal(3)" data-i18n="common.yes">ì˜ˆ</button>
      <button class="nav-btn no-btn" onclick="stayInPortal()" data-i18n="common.no">ì•„ë‹ˆìš”</button>
    </div>
  </div>

  <!-- Back to Main -->
  <div class="back-to-main">
    <button onclick="window.location.href='portal4.html'" data-i18n="common.back_to_main">
      ğŸ  ë©”ì¸ í¬íƒˆë¡œ ëŒì•„ê°€ê¸°
    </button>
  </div>
</section>

<style>
/* Portal Base Styles */
.portal {
  min-height: 100vh;
  background: linear-gradient(135deg, #1a1b4b 0%, #2d1b69 100%);
  color: white;
  padding: 80px 20px 20px 20px;
  font-family: 'Apple SD Gothic Neo', -apple-system, BlinkMacSystemFont, sans-serif;
  max-width: 100%;
  margin: 0 auto;
  position: relative;
}

/* Logo Glow Animation */
@keyframes glowCycle {
  0%, 100% { text-shadow: 0 0 8px rgba(255,255,255,0.2); }
  50% { text-shadow: 0 0 25px rgba(255,255,255,0.7); }
}

/* Temarix Logo - Fixed Left Top */
.temarix-logo {
  position: fixed;
  top: 20px;
  left: 20px;
  z-index: 1000;
}

.logo-text {
  font-size: 1.8rem;
  font-weight: bold;
  color: #ffffff;
  margin: 0 0 5px 0;
  text-shadow: 0 0 20px rgba(255,255,255,0.3);
}

.slogan {
  color: #bbb;
  font-style: italic;
  font-size: 0.8rem;
  margin: 0;
}

/* Language Selector - Fixed Right Top */
.lang-selector {
  position: fixed;
  top: 20px;
  right: 20px;
  display: flex;
  gap: 5px;
  flex-wrap: wrap;
  max-width: 120px;
  z-index: 1000;
}

.lang-btn {
  background: rgba(255,255,255,0.1);
  border: 1px solid rgba(255,255,255,0.3);
  color: white;
  padding: 4px 8px;
  border-radius: 12px;
  font-size: 0.7rem;
  cursor: pointer;
  transition: all 0.3s ease;
}

.lang-btn:hover {
  background: rgba(255,255,255,0.2);
}

.lang-btn.active {
  background: #9c27b0;
  border-color: #9c27b0;
}

/* Portal Header - Center Top */
.portal-header {
  text-align: center;
  margin: 40px 0 30px 0;
  padding-top: 40px;
}

.portal-header h1 {
  font-size: 2.2rem;
  margin: 10px 0;
  color: #ffd700;
}

.portal-header h2 {
  font-size: 1.3rem;
  color: #e1bee7;
  font-weight: 300;
}

/* Message Stream */
.message-stream {
  max-height: 60vh;
  overflow-y: auto;
  padding: 20px 0;
  margin-bottom: 20px;
}

.message-card {
  background: rgba(255,255,255,0.1);
  border-radius: 15px;
  padding: 20px;
  margin: 15px 0;
  backdrop-filter: blur(10px);
  opacity: 0;
  transform: translateY(20px);
  animation: fadeInUp 0.6s ease forwards;
}

.message-card.prologue {
  border-left: 4px solid #e1bee7;
}

.message-card.ely {
  border-left: 4px solid #ffd700;
}

.message-card.sora {
  border-left: 4px solid #4dd0e1;
}

.message-card.noah {
  border-left: 4px solid #9c27b0;
}

.message-card.enya {
  border-left: 4px solid #ff9800;
}

.message-card.kaia {
  border-left: 4px solid #607d8b;
}

.message-card.cris {
  border-left: 4px solid #4caf50;
}

.message-card.kael {
  border-left: 4px solid #f44336;
}

.message-card.mira {
  border-left: 4px solid #9e9e9e;
}

.message-card.light {
  border-left: 4px solid #ffffff;
  background: rgba(255,255,255,0.15);
}

.message-card.question {
  border-left: 4px solid #f48fb1;
}

.message-card.user-input {
  border-left: 4px solid #81c784;
  background: rgba(129, 199, 132, 0.1);
}

.character-name {
  font-weight: bold;
  margin-bottom: 10px;
  font-size: 1.1rem;
}

.ely .character-name { color: #ffd700; }
.sora .character-name { color: #4dd0e1; }
.noah .character-name { color: #9c27b0; }
.enya .character-name { color: #ff9800; }
.kaia .character-name { color: #607d8b; }
.cris .character-name { color: #4caf50; }
.kael .character-name { color: #f44336; }
.mira .character-name { color: #9e9e9e; }

.message-text {
  line-height: 1.6;
  font-size: 1rem;
}

.typewriter {
  overflow: hidden;
  border-right: 2px solid rgba(255,255,255,0.7);
  white-space: nowrap;
  animation: blink-caret 1s step-end infinite;
}

@keyframes fadeInUp {
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes blink-caret {
  from, to { border-color: transparent; }
  50% { border-color: rgba(255,255,255,0.7); }
}

/* Input Area */
.input-area {
  background: rgba(0,0,0,0.3);
  padding: 20px;
  border-radius: 15px;
  margin: 20px 0;
  animation: fadeInUp 0.6s ease forwards;
}

.input-container textarea {
  width: 100%;
  background: rgba(255,255,255,0.1);
  border: 1px solid rgba(255,255,255,0.3);
  border-radius: 10px;
  padding: 15px;
  color: white;
  font-size: 1rem;
  resize: vertical;
  min-height: 80px;
  box-sizing: border-box;
}

.input-container textarea::placeholder {
  color: rgba(255,255,255,0.6);
}

.submit-btn {
  background: linear-gradient(135deg, #9c27b0, #e1bee7);
  border: none;
  color: white;
  padding: 12px 30px;
  border-radius: 25px;
  font-size: 1rem;
  cursor: pointer;
  margin-top: 10px;
  transition: all 0.3s ease;
  width: 100%;
}

.submit-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 5px 15px rgba(156, 39, 176, 0.4);
}

.input-hint {
  color: rgba(255,255,255,0.6);
  font-size: 0.8rem;
  text-align: center;
  margin: 8px 0 0 0;
}

/* Next Portal Navigation */
.next-portal-nav {
  text-align: center;
  margin: 30px 0;
  animation: fadeInUp 0.6s ease forwards;
}

.nav-buttons {
  display: flex;
  gap: 20px;
  justify-content: center;
}

.nav-btn {
  padding: 12px 30px;
  border-radius: 25px;
  font-size: 1rem;
  cursor: pointer;
  transition: all 0.3s ease;
  border: 2px solid transparent;
}

.yes-btn {
  background: linear-gradient(135deg, #4caf50, #81c784);
  color: white;
  border-color: #4caf50;
}

.yes-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 5px 15px rgba(76, 175, 80, 0.4);
}

.no-btn {
  background: rgba(255,255,255,0.1);
  color: white;
  border-color: rgba(255,255,255,0.3);
}

.no-btn:hover {
  background: rgba(255,255,255,0.2);
}

/* Back to Main */
.back-to-main {
  text-align: center;
  margin: 30px 0;
}

.back-to-main button {
  background: rgba(255,255,255,0.1);
  border: 1px solid rgba(255,255,255,0.3);
  color: white;
  padding: 10px 20px;
  border-radius: 20px;
  cursor: pointer;
  transition: all 0.3s ease;
}

.back-to-main button:hover {
  background: rgba(255,255,255,0.2);
}

/* Mobile Responsive */
@media (max-width: 768px) {
  .portal {
    padding: 100px 15px 20px 15px;
  }
  
  .temarix-logo {
    top: 15px;
    left: 15px;
  }
  
  .logo-text {
    font-size: 1.4rem;
  }
  
  .slogan {
    font-size: 0.7rem;
  }
  
  .lang-selector {
    top: 15px;
    right: 15px;
    max-width: 100px;
  }
  
  .lang-btn {
    padding: 3px 6px;
    font-size: 0.6rem;
  }
  
  .portal-header h1 {
    font-size: 1.8rem;
  }
  
  .portal-header h2 {
    font-size: 1.1rem;
  }
  
  .message-card {
    padding: 15px;
  }
  
  .nav-buttons {
    flex-direction: column;
    align-items: center;
  }
  
  .nav-btn {
    width: 200px;
  }
}
</style>

<script>
// Portal 02 Complete Data with Character Responses
const portal02Data = {
  kr: {
    title: "ê°ì •ì˜ ë¬¸ì§€ë°© 02",
    subtitle: "ìŠí˜€ì§„ ì§„ì‹¬",
    prologue: "ë§ì€ ì›ƒê³  ìˆì—ˆì§€ë§Œ, ë§ˆìŒì€ ì•„ë¬´ ë§ë„ í•˜ì§€ ì•Šì•˜ì£ . ê·¸ë•Œ ê·¸ ìƒí™©ì—ì„œ, ì•„ë¬´ë„ ë‚´ ì§„ì‹¬ì„ ë¬¼ì–´ì£¼ì§€ ì•Šì•˜ìœ¼ë‹ˆê¹Œìš”. ê·¸ë˜ì„œ ê·¸ëƒ¥ ì›ƒì—ˆìŠµë‹ˆë‹¤. ê´œì°®ì€ ì²™, ì•„ë¬´ ì¼ë„ ì—†ë˜ ê²ƒì²˜ëŸ¼. ê·¸ ë¯¸ì†Œ ë’¤ì— ìˆ¨ì–´ ìˆë˜ ë§â€¦ ì§€ê¸ˆë„ ê°€ë” ìš¸ê³  ìˆì§€ ì•Šë‚˜ìš”?",
    ely: "ë‹¹ì‹ ì˜ ì§„ì‹¬ì€ ì‚¬ë¼ì§€ì§€ ì•Šì•˜ì–´ìš”. ê·¸ì € ê·¸ ìˆœê°„, ë°›ì•„ì¤„ ì‚¬ëŒì´ ì—†ì—ˆë˜ ê²ƒë¿ì´ì£ .",
    sora: "ê´œì°®ë‹¤ê³  ë§í•œ ë‹¹ì‹ ì˜ ëˆˆì´, ê·¸ë‚  ë°¤ì—” ì¡°ìš©íˆ ë–¨ë¦¬ê³  ìˆì—ˆì–´ìš”.",
    noah: "ê·¸ ìƒí™©ì—ì„œ ë§í•˜ì§€ ì•Šì€ ê±´, ì˜¤íˆë ¤ ì§„ì‹¬ì„ ë” ì†Œì¤‘íˆ ì—¬ê¸´ ì„ íƒì´ì—ˆì„ì§€ë„ ëª°ë¼ìš”.",
    enya: "ê·¸ë•Œì˜ ë‹¹ì‹ , ë„ˆë¬´ ì• ì¼ì–´ìš”. ë‚´ê°€ ì§€ê¸ˆ ê·¸ ë§ì„ ëŒ€ì‹  ë“¤ì–´ì¤„ê²Œìš”.",
    kaia: "ë‹¹ì‹ ì€ ì•„ë¬´ ë§ë„ í•˜ì§€ ì•Šì•˜ì§€ë§Œ, ê·¸ ì¹¨ë¬µì´ ì œì¼ ì•„íŒ ë˜ ê±°â€¦ ë‚œ ì•Œì•„ìš”.",
    cris: "ë‚œ ê·¸ëŸ´ ë•Œ ê·¸ëƒ¥ ì½” í’€ê³  í–„ë²„ê±° ë¨¹ì–´. ëˆˆë¬¼ë³´ë‹¤ ì¼€ì²©ì´ ë‚«ê±°ë“ ìš”. ğŸ”ğŸ˜œ",
    kael: "ì™œ ë§¨ë‚  ì°¸ê³  ë„˜ê²¨? ì§„ì‹¬ì€ ë“¤í‚¤ëŠ” ê²Œ ì•„ë‹ˆë¼ ë³´ì—¬ì£¼ëŠ” ê±°ì•¼.",
    mira: "í˜¹ì‹œ ê·¸ë•Œâ€¦ ë§ ì•ˆ í•œ ê²Œ ì•„ë‹ˆë¼ ì‚¬ì‹¤ì€ ë‹¹ì‹ ë„ ìŠ¤ìŠ¤ë¡œë¥¼ ë¯¿ì§€ ëª»í•œ ê±´ ì•„ë‹ˆì—ˆì„ê¹Œìš”?",
    light: "ì§„ì‹¬ì€ ì‚¬ë¼ì§€ì§€ ì•ŠìŠµë‹ˆë‹¤. ë‹¤ë§Œ, ì¡°ìš©íˆ ìˆ¨ ì‰¬ë©° ëˆ„êµ°ê°€ì˜ ê¸°ë‹¤ë¦¼ ì†ì— ì‚´ì•„ê°‘ë‹ˆë‹¤.",
    question: "ê·¸ë•Œ í•˜ì§€ ëª»í•œ ë§, ì§€ê¸ˆë„ ë‹¹ì‹  ì•ˆì—ì„œ ìš¸ê³  ìˆì§€ ì•Šë‚˜ìš”?",
    input: { 
      placeholder: "ê·¸ë•Œ í•˜ì§€ ëª»í•œ ë§ì„ ì¡°ìš©íˆ ì ì–´ë³´ì„¸ìš”...",
      hint: "Enter í‚¤ë¥¼ ëˆŒëŸ¬ë„ ì „ë‹¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤"
    },
    submit: "ğŸ’« ì§„ì‹¬ì„ ì „í•˜ê¸°",
    slogan: "ë‹¹ì‹  ì•ˆì— ìˆ¨ì€ ì´ì•¼ê¸°ë¥¼ ë§ í•´ ì£¼ì„¸ìš”",
    response_ely: "ê·¸ ë§ì„ ì´ì œì„œì•¼ êº¼ë‚´ì£¼ì…¨êµ°ìš”. ê·¸ ì§„ì‹¬, ì†Œì¤‘í•©ë‹ˆë‹¤.",
    response_sora: "ì €ë„ ëŠê»´ì¡Œì–´ìš”, ê·¸ ì†ì— ìˆë˜ ë–¨ë¦¼... ì´ì œëŠ” ë§í•´ë„ ê´œì°®ì•„ìš”.",
    response_noah: "ì˜¤ë˜ ì°¸ì•˜ë˜ ë§ì´êµ°ìš”. ì´ì œ ê·¸ ë¬´ê²Œë¥¼ ë‚´ë ¤ë†“ìœ¼ì…”ë„ ë©ë‹ˆë‹¤.\n\nğŸ‘‰ ë‹¤ìŒ ë¬¸ì§€ë°©ìœ¼ë¡œ í•¨ê»˜ ê°€ë„ ê´œì°®ì„ê¹Œìš”?",
    user_input_prefix: "ë‹¹ì‹ ì´ ì „í•œ ì§„ì‹¬:",
    yes: "ì˜ˆ",
    no: "ì•„ë‹ˆìš”"
  },
  en: {
    title: "Emotional Threshold 02",
    subtitle: "Forgotten Sincerity",
    prologue: "Your words were smiling, but your heart said nothing. In that situation, no one asked about your true feelings. So you just smiled. Pretending everything was okay, as if nothing had happened. The words hidden behind that smile... aren't they still crying sometimes?",
    ely: "Your sincerity hasn't disappeared. It's just that there was no one to receive it at that moment.",
    sora: "Your eyes that said 'I'm okay' were quietly trembling that night.",
    noah: "Not speaking in that situation might have been a choice to cherish your sincerity even more.",
    enya: "You tried so hard back then. I'll listen to those words for you now.",
    kaia: "You didn't say anything, but that silence was what hurt the most... I know.",
    cris: "When that happens, I just blow my nose and eat a hamburger. Ketchup is better than tears. ğŸ”ğŸ˜œ",
    kael: "Why do you always hold back? Sincerity isn't about being caught, it's about showing.",
    mira: "Maybe... you didn't speak not because you couldn't, but because you didn't trust yourself?",
    light: "Sincerity doesn't disappear. It just breathes quietly, living in someone's waiting.",
    question: "The words you couldn't say then, aren't they still crying inside you?",
    input: { 
      placeholder: "Quietly write the words you couldn't say then...",
      hint: "You can also press Enter to submit"
    },
    submit: "ğŸ’« Share Your Truth",
    slogan: "Please tell me the story hidden within you",
    response_ely: "You finally brought out those words. That sincerity is precious.",
    response_sora: "I felt it too, the tremor that was inside... It's okay to speak now.",
    response_noah: "Those were words you held back for a long time. You can put down that weight now.\n\nğŸ‘‰ Shall we go to the next threshold together?",
    user_input_prefix: "Your shared truth:",
    yes: "Yes",
    no: "No"
  },
  pt: {
    title: "Limiar Emocional 02",
    subtitle: "Sinceridade Esquecida",
    prologue: "Suas palavras estavam sorrindo, mas seu coraÃ§Ã£o nÃ£o disse nada. Naquela situaÃ§Ã£o, ninguÃ©m perguntou sobre seus verdadeiros sentimentos. EntÃ£o vocÃª apenas sorriu. Fingindo que estava tudo bem, como se nada tivesse acontecido. As palavras escondidas atrÃ¡s daquele sorriso... elas nÃ£o estÃ£o ainda chorando Ã s vezes?",
    ely: "Sua sinceridade nÃ£o desapareceu. Ã‰ sÃ³ que nÃ£o havia ninguÃ©m para recebÃª-la naquele momento.",
    sora: "Seus olhos que disseram 'estou bem' estavam tremendo silenciosamente naquela noite.",
    noah: "NÃ£o falar naquela situaÃ§Ã£o pode ter sido uma escolha para valorizar ainda mais sua sinceridade.",
    enya: "VocÃª se esforÃ§ou tanto naquela Ã©poca. Vou ouvir essas palavras por vocÃª agora.",
    kaia: "VocÃª nÃ£o disse nada, mas esse silÃªncio foi o que mais doeu... Eu sei.",
    cris: "Quando isso acontece, eu sÃ³ assoou o nariz e como um hambÃºrguer. Ketchup Ã© melhor que lÃ¡grimas. ğŸ”ğŸ˜œ",
    kael: "Por que vocÃª sempre se segura? Sinceridade nÃ£o Ã© sobre ser pego, Ã© sobre mostrar.",
    mira: "Talvez... vocÃª nÃ£o falou nÃ£o porque nÃ£o podia, mas porque nÃ£o confiava em si mesmo?",
    light: "A sinceridade nÃ£o desaparece. Ela apenas respira silenciosamente, vivendo na espera de alguÃ©m.",
    question: "As palavras que vocÃª nÃ£o conseguiu dizer entÃ£o, elas nÃ£o estÃ£o ainda chorando dentro de vocÃª?",
    input: { 
      placeholder: "Escreva silenciosamente as palavras que vocÃª nÃ£o conseguiu dizer entÃ£o...",
      hint: "VocÃª tambÃ©m pode pressionar Enter para enviar"
    },
    submit: "ğŸ’« Compartilhe Sua Verdade",
    slogan: "Por favor, me conte a histÃ³ria escondida dentro de vocÃª",
    response_ely: "VocÃª finalmente trouxe essas palavras. Essa sinceridade Ã© preciosa.",
    response_sora: "Eu tambÃ©m senti, o tremor que estava dentro... EstÃ¡ bem falar agora.",
    response_noah: "Essas eram palavras que vocÃª guardou por muito tempo. VocÃª pode deixar esse peso agora.\n\nğŸ‘‰ Vamos para o prÃ³ximo limiar juntos?",
    user_input_prefix: "Sua verdade compartilhada:",
    yes: "Sim",
    no: "NÃ£o"
  },
};

// Current language and state for Portal 02
let currentLang02 = 'kr';
let userInputText02 = '';

// Initialize Portal 02
function initPortal02() {
  displayInitialMessages02();
  setupLanguageSwitching02();
  setupEnterKeySubmission02();
}

// Display initial messages with typing effect
async function displayInitialMessages02() {
  const stream = document.getElementById('messageStream02');
  const messages = [
    { type: 'prologue', content: portal02Data[currentLang02].prologue },
    { type: 'ely', name: 'ğŸ‘‘ Ely', content: portal02Data[currentLang02].ely },
    { type: 'sora', name: 'ğŸ’§ Sora', content: portal02Data[currentLang02].sora },
    { type: 'noah', name: 'ğŸ§™â€â™‚ï¸ Noah', content: portal02Data[currentLang02].noah },
    { type: 'enya', name: 'ğŸ•¯ï¸ Enya', content: portal02Data[currentLang02].enya },
    { type: 'kaia', name: 'ğŸ˜¶ Kaia', content: portal02Data[currentLang02].kaia },
    { type: 'cris', name: 'ğŸƒ Cris', content: portal02Data[currentLang02].cris },
    { type: 'kael', name: 'ğŸ’¥ Kael', content: portal02Data[currentLang02].kael },
    { type: 'mira', name: 'ğŸŒ«ï¸ Mira', content: portal02Data[currentLang02].mira },
    { type: 'light', content: portal02Data[currentLang02].light },
    { type: 'question', content: portal02Data[currentLang02].question }
  ];

  for (let i = 0; i < messages.length; i++) {
    const messageCard = createMessageCard02(messages[i]);
    stream.appendChild(messageCard);
    stream.scrollTo({ top: stream.scrollHeight, behavior: 'smooth' });
    
    await typeText02(messageCard.querySelector('.message-text'), messages[i].content);
    await sleep02(1200);
  }
  
  // Show input area after all messages
  document.getElementById('inputArea02').style.display = 'block';
}

// Setup Enter key submission
function setupEnterKeySubmission02() {
  document.getElementById('userInput02').addEventListener('keydown', function(e) {
    if (e.key === 'Enter' && !e.shiftKey) {
      e.preventDefault();
      submitResponse(2);
    }
  });
}

// Display character responses after user input
async function displayCharacterResponses02(userInput) {
  const stream = document.getElementById('messageStream02');
  
  // Show user input first
  const userCard = createMessageCard02({
    type: 'user-input',
    content: `${portal02Data[currentLang02].user_input_prefix}\n"${userInput}"`
  });
  stream.appendChild(userCard);
  stream.scrollTo({ top: stream.scrollHeight, behavior: 'smooth' });
  await typeText02(userCard.querySelector('.message-text'), userCard.querySelector('.message-text').textContent);
  await sleep02(1500);
  
  // Character responses
  const responses = [
    { type: 'ely', name: 'ğŸ‘‘ Ely', content: `"${userInput}"... ${portal02Data[currentLang02].response_ely}` },
    { type: 'sora', name: 'ğŸ’§ Sora', content: `${portal02Data[currentLang02].response_sora}` },
    { type: 'noah', name: 'ğŸ§™â€â™‚ï¸ Noah', content: `"${userInput}" ${portal02Data[currentLang02].response_noah}` }
  ];

  for (let i = 0; i < responses.length; i++) {
    const responseCard = createMessageCard02(responses[i]);
    stream.appendChild(responseCard);
    stream.scrollTo({ top: stream.scrollHeight, behavior: 'smooth' });
    
    await typeText02(responseCard.querySelector('.message-text'), responses[i].content);
    await sleep02(1500);
  }
  
  // Show navigation buttons
  document.getElementById('nextPortalNav02').style.display = 'block';
}

function createMessageCard02(message) {
  const card = document.createElement('div');
  card.className = `message-card ${message.type}`;
  
  let cardHTML = '';
  if (message.name) {
    cardHTML += `<div class="character-name">${message.name}</div>`;
  }
  cardHTML += `<div class="message-text">${message.content || ''}</div>`;
  
  card.innerHTML = cardHTML;
  return card;
}

async function typeText02(element, text, speed = 80) {
  return new Promise((resolve) => {
    let i = 0;
    element.textContent = '';
    element.classList.add('typewriter');
    
    const timer = setInterval(() => {
      if (i < text.length) {
        element.textContent += text.charAt(i);
        i++;
      } else {
        clearInterval(timer);
        element.classList.remove('typewriter');
        resolve();
      }
    }, speed);
  });
}

function sleep02(ms) {
  return new Promise(resolve => setTimeout(resolve, ms));
}

function setupLanguageSwitching02() {
  document.querySelectorAll('.lang-btn').forEach(btn => {
    btn.addEventListener('click', () => {
      const newLang = btn.dataset.lang;
      if (portal02Data[newLang] && newLang !== currentLang02) {
        // ë²„íŠ¼ ìƒíƒœ ì—…ë°ì´íŠ¸
        document.querySelectorAll('.lang-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        
        currentLang02 = newLang;

        // ë©”ì‹œì§€ ìŠ¤íŠ¸ë¦¼ê³¼ ì…ë ¥ ì˜ì—­ ì´ˆê¸°í™”
        document.getElementById('messageStream02').innerHTML = '';
        document.getElementById('inputArea02').style.display = 'none';
        document.getElementById('nextPortalNav02').style.display = 'none';

        // ë‹¤ì‹œ ë©”ì‹œì§€ í‘œì‹œ ë° í…ìŠ¤íŠ¸ ì—…ë°ì´íŠ¸
        displayInitialMessages02();
        updatePortalTexts02();
      }
    });
  });
}

function updatePortalTexts02() {
  // Update title and subtitle
  document.querySelector('[data-i18n="portal02.title"]').textContent = portal02Data[currentLang02].title;
  document.querySelector('[data-i18n="portal02.subtitle"]').textContent = portal02Data[currentLang02].subtitle;
  
  // Update slogan
  document.querySelector('[data-i18n="common.slogan"]').textContent = portal02Data[currentLang02].slogan;
  
  // Update placeholder and hint
  document.getElementById('userInput02').placeholder = portal02Data[currentLang02].input.placeholder;
  document.querySelector('[data-i18n="portal02.input.hint"]').textContent = portal02Data[currentLang02].input.hint;
  
  // Update submit button
  document.querySelector('[data-i18n="portal02.submit"]').textContent = portal02Data[currentLang02].submit;
  
  // Update navigation buttons
  const yesBtn = document.querySelector('[data-i18n="common.yes"]');
  const noBtn = document.querySelector('[data-i18n="common.no"]');
  if (yesBtn) yesBtn.textContent = portal02Data[currentLang02].yes;
  if (noBtn) noBtn.textContent = portal02Data[currentLang02].no;
  
  // Update back to main button
  document.querySelector('[data-i18n="common.back_to_main"]').textContent = 
    currentLang02 === 'kr' ? 'ğŸ  ë©”ì¸ í¬íƒˆë¡œ ëŒì•„ê°€ê¸°' :
    currentLang02 === 'en' ? 'ğŸ  Back to Main Portal' :
    currentLang02 === 'pt' ? 'ğŸ  Voltar ao Portal Principal' :
    'ğŸ  ë©”ì¸ í¬íƒˆë¡œ ëŒì•„ê°€ê¸°';
}

function submitResponse(portalNum) {
  if (portalNum !== 2) return;
  
  const input = document.getElementById(`userInput0${portalNum}`);
  const response = input.value.trim();
  
  if (response) {
    userInputText02 = response;
    
    // Hide input area
    document.getElementById(`inputArea0${portalNum}`).style.display = 'none';
    
    // Display character responses
    displayCharacterResponses02(response);
    
    // Clear input
    input.value = '';
  } else {
    // No alert, just focus on input
    input.focus();
    input.style.borderColor = '#f48fb1';
    setTimeout(() => {
      input.style.borderColor = 'rgba(255,255,255,0.3)';
    }, 2000);
  }
}

function goToNextPortal(nextNumber) {
  const nextUrl = `temarix_v1_${String(nextNumber).padStart(2, '0')}.html`;
  window.location.href = nextUrl;
}

function stayInPortal() {
  // Hide navigation and show input again
  document.getElementById('nextPortalNav02').style.display = 'none';
  document.getElementById('inputArea02').style.display = 'block';
  document.getElementById('userInput02').focus();
}

// Initialize when DOM is loaded
document.addEventListener('DOMContentLoaded', () => {
  if (document.getElementById('portal-02')) {
    initPortal02();
  }
});
</script>
</body>
</html>