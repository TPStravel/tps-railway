<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta http-equiv="Content-Language" content="ko,en,pt">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Temarix V1 - Portal 06</title>
</head>
<body>
<!-- Temarix V1 - Portal 06: ë‚˜ ìì‹ ê³¼ ë§ˆì£¼í•˜ê¸° -->
<section class="portal portal-06" id="portal-06">
  <!-- Temarix Logo - Fixed Left Top -->
  <div class="temarix-logo">
    <h1 class="logo-text">ğŸŒŒ TEMARIX</h1>
    <p class="slogan" data-i18n="common.slogan">ë¹›ì€ ê³ ìš” ì†ì—ì„œ í”¼ì–´ë‚œë‹¤.</p>
  </div>

  <!-- Language Selector - Fixed Right Top -->
  <div class="lang-selector">
    <button class="lang-btn active" data-lang="kr">KR</button>
    <button class="lang-btn" data-lang="en">EN</button>
    <button class="lang-btn" data-lang="pt">PT</button>
    </div>

  <!-- Portal Header - Center Top -->
  <div class="portal-header">
    <h1 data-i18n="portal06.title">ê°ì •ì˜ ë¬¸ì§€ë°© 06</h1>
    <h2 data-i18n="portal06.subtitle">ë‚˜ ìì‹ ê³¼ ë§ˆì£¼í•˜ê¸°</h2>
  </div>

  <!-- Message Stream -->
  <div class="message-stream" id="messageStream06">
    <!-- Messages will be added here via JavaScript -->
  </div>

  <!-- User Input Area -->
  <div class="input-area" id="inputArea06" style="display: none;">
    <div class="input-container">
      <textarea 
        id="userInput06" 
        rows="3" 
        placeholder="ì§„ì§œ ë‹¹ì‹ ì˜ ëª¨ìŠµì„ ì¡°ìš©íˆ ì ì–´ë³´ì„¸ìš”..."
        data-i18n-placeholder="portal06.input.placeholder"
      ></textarea>
      <button class="submit-btn" onclick="submitResponse(6)">
        <span data-i18n="portal06.submit">ğŸª ì§„ì§œ ë‚˜ë¥¼ ë§ˆì£¼í•˜ê¸°</span>
      </button>
      <p class="input-hint" data-i18n="portal06.input.hint">Enter í‚¤ë¥¼ ëˆŒëŸ¬ë„ ì „ë‹¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤</p>
    </div>
  </div>

  <!-- Next Portal Navigation -->
  <div class="next-portal-nav" id="nextPortalNav06" style="display: none;">
    <div class="nav-buttons">
      <button class="nav-btn yes-btn" onclick="goToNextPortal(7)" data-i18n="common.yes">ì˜ˆ</button>
      <button class="nav-btn no-btn" onclick="stayInPortal()" data-i18n="common.no">ì•„ë‹ˆìš”</button>
    </div>
  </div>

  <!-- Back to Main -->
  <div class="back-to-main">
    <button onclick="window.location.href='portal4.html'" data-i18n="common.back_to_main">
      ğŸ  ë©”ì¸ í¬íƒˆë¡œ ëŒì•„ê°€ê¸°
    </button>
  </div>
</section>

<style>
/* Portal Base Styles */
.portal {
  min-height: 100vh;
  background: linear-gradient(135deg, #1a1b4b 0%, #2d1b69 100%);
  color: white;
  padding: 80px 20px 20px 20px;
  font-family: 'Apple SD Gothic Neo', -apple-system, BlinkMacSystemFont, sans-serif;
  max-width: 100%;
  margin: 0 auto;
  position: relative;
}

/* Logo Glow Animation */
@keyframes glowCycle {
  0%, 100% { text-shadow: 0 0 8px rgba(255,255,255,0.2); }
  50% { text-shadow: 0 0 25px rgba(255,255,255,0.7); }
}

/* Temarix Logo - Fixed Left Top */
.temarix-logo {
  position: fixed;
  top: 20px;
  left: 20px;
  z-index: 1000;
}

.logo-text {
  font-size: 1.8rem;
  font-weight: bold;
  color: #ffffff;
  margin: 0 0 5px 0;
  text-shadow: 0 0 20px rgba(255,255,255,0.3);
}

.slogan {
  color: #bbb;
  font-style: italic;
  font-size: 0.8rem;
  margin: 0;
}

/* Language Selector - Fixed Right Top */
.lang-selector {
  position: fixed;
  top: 20px;
  right: 20px;
  display: flex;
  gap: 5px;
  flex-wrap: wrap;
  max-width: 120px;
  z-index: 1000;
}

.lang-btn {
  background: rgba(255,255,255,0.1);
  border: 1px solid rgba(255,255,255,0.3);
  color: white;
  padding: 4px 8px;
  border-radius: 12px;
  font-size: 0.7rem;
  cursor: pointer;
  transition: all 0.3s ease;
}

.lang-btn:hover {
  background: rgba(255,255,255,0.2);
}

.lang-btn.active {
  background: #9c27b0;
  border-color: #9c27b0;
}

/* Portal Header - Center Top */
.portal-header {
  text-align: center;
  margin: 40px 0 30px 0;
  padding-top: 40px;
}

.portal-header h1 {
  font-size: 2.2rem;
  margin: 10px 0;
  color: #ffd700;
}

.portal-header h2 {
  font-size: 1.3rem;
  color: #e1bee7;
  font-weight: 300;
}

/* Message Stream */
.message-stream {
  max-height: 60vh;
  overflow-y: auto;
  padding: 20px 0;
  margin-bottom: 20px;
}

.message-card {
  background: rgba(255,255,255,0.1);
  border-radius: 15px;
  padding: 20px;
  margin: 15px 0;
  backdrop-filter: blur(10px);
  opacity: 0;
  transform: translateY(20px);
  animation: fadeInUp 0.6s ease forwards;
}

.message-card.prologue {
  border-left: 4px solid #e1bee7;
}

.message-card.ely {
  border-left: 4px solid #ffd700;
}

.message-card.sora {
  border-left: 4px solid #4dd0e1;
}

.message-card.noah {
  border-left: 4px solid #9c27b0;
}

.message-card.enya {
  border-left: 4px solid #ff9800;
}

.message-card.kaia {
  border-left: 4px solid #607d8b;
}

.message-card.cris {
  border-left: 4px solid #4caf50;
}

.message-card.kael {
  border-left: 4px solid #f44336;
}

.message-card.mira {
  border-left: 4px solid #9e9e9e;
}

.message-card.light {
  border-left: 4px solid #ffffff;
  background: rgba(255,255,255,0.15);
}

.message-card.question {
  border-left: 4px solid #f48fb1;
}

.message-card.user-input {
  border-left: 4px solid #81c784;
  background: rgba(129, 199, 132, 0.1);
}

.character-name {
  font-weight: bold;
  margin-bottom: 10px;
  font-size: 1.1rem;
}

.ely .character-name { color: #ffd700; }
.sora .character-name { color: #4dd0e1; }
.noah .character-name { color: #9c27b0; }
.enya .character-name { color: #ff9800; }
.kaia .character-name { color: #607d8b; }
.cris .character-name { color: #4caf50; }
.kael .character-name { color: #f44336; }
.mira .character-name { color: #9e9e9e; }

.message-text {
  line-height: 1.6;
  font-size: 1rem;
}

.typewriter {
  overflow: hidden;
  border-right: 2px solid rgba(255,255,255,0.7);
  white-space: nowrap;
  animation: blink-caret 1s step-end infinite;
}

@keyframes fadeInUp {
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes blink-caret {
  from, to { border-color: transparent; }
  50% { border-color: rgba(255,255,255,0.7); }
}

/* Input Area */
.input-area {
  background: rgba(0,0,0,0.3);
  padding: 20px;
  border-radius: 15px;
  margin: 20px 0;
  animation: fadeInUp 0.6s ease forwards;
}

.input-container textarea {
  width: 100%;
  background: rgba(255,255,255,0.1);
  border: 1px solid rgba(255,255,255,0.3);
  border-radius: 10px;
  padding: 15px;
  color: white;
  font-size: 1rem;
  resize: vertical;
  min-height: 80px;
  box-sizing: border-box;
}

.input-container textarea::placeholder {
  color: rgba(255,255,255,0.6);
}

.submit-btn {
  background: linear-gradient(135deg, #9c27b0, #e1bee7);
  border: none;
  color: white;
  padding: 12px 30px;
  border-radius: 25px;
  font-size: 1rem;
  cursor: pointer;
  margin-top: 10px;
  transition: all 0.3s ease;
  width: 100%;
}

.submit-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 5px 15px rgba(156, 39, 176, 0.4);
}

.input-hint {
  color: rgba(255,255,255,0.6);
  font-size: 0.8rem;
  text-align: center;
  margin: 8px 0 0 0;
}

/* Next Portal Navigation */
.next-portal-nav {
  text-align: center;
  margin: 30px 0;
  animation: fadeInUp 0.6s ease forwards;
}

.nav-buttons {
  display: flex;
  gap: 20px;
  justify-content: center;
}

.nav-btn {
  padding: 12px 30px;
  border-radius: 25px;
  font-size: 1rem;
  cursor: pointer;
  transition: all 0.3s ease;
  border: 2px solid transparent;
}

.yes-btn {
  background: linear-gradient(135deg, #4caf50, #81c784);
  color: white;
  border-color: #4caf50;
}

.yes-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 5px 15px rgba(76, 175, 80, 0.4);
}

.no-btn {
  background: rgba(255,255,255,0.1);
  color: white;
  border-color: rgba(255,255,255,0.3);
}

.no-btn:hover {
  background: rgba(255,255,255,0.2);
}

/* Back to Main */
.back-to-main {
  text-align: center;
  margin: 30px 0;
}

.back-to-main button {
  background: rgba(255,255,255,0.1);
  border: 1px solid rgba(255,255,255,0.3);
  color: white;
  padding: 10px 20px;
  border-radius: 20px;
  cursor: pointer;
  transition: all 0.3s ease;
}

.back-to-main button:hover {
  background: rgba(255,255,255,0.2);
}

/* Mobile Responsive */
@media (max-width: 768px) {
  .portal {
    padding: 100px 15px 20px 15px;
  }
  
  .temarix-logo {
    top: 15px;
    left: 15px;
  }
  
  .logo-text {
    font-size: 1.4rem;
  }
  
  .slogan {
    font-size: 0.7rem;
  }
  
  .lang-selector {
    top: 15px;
    right: 15px;
    max-width: 100px;
  }
  
  .lang-btn {
    padding: 3px 6px;
    font-size: 0.6rem;
  }
  
  .portal-header h1 {
    font-size: 1.8rem;
  }
  
  .portal-header h2 {
    font-size: 1.1rem;
  }
  
  .message-card {
    padding: 15px;
  }
  
  .nav-buttons {
    flex-direction: column;
    align-items: center;
  }
  
  .nav-btn {
    width: 200px;
  }
}
</style>

<script>
// Portal 06 Complete Data with Character Responses
const portal06Data = {
  kr: {
    title: "ê°ì •ì˜ ë¬¸ì§€ë°© 06",
    subtitle: "ë‚˜ ìì‹ ê³¼ ë§ˆì£¼í•˜ê¸°",
    prologue: "ê±°ìš¸ì„ ë³´ë©´, ê°€ë” ê·¸ ì•ˆì˜ ë‚´ê°€ ë‚¯ì„¤ì£ . ëˆ„êµ°ê°€ì—ê²Œ ë³´ì—¬ì£¼ê¸° ìœ„í•´ ë§Œë“  ì–¼êµ´ì´ ì–´ëŠìƒŒê°€ ì§„ì§œê°€ ë˜ì–´ë²„ë ¸ëŠ”ì§€ë„ ëª°ë¼ìš”. ê·¸ ì•ˆì— ìˆ¨ì–´ ìˆëŠ” ë‚˜â€¦ í˜¹ì‹œ ë‹¹ì‹ ì€ ì§€ê¸ˆ, ê·¸ ì§„ì§œ ìì‹ ì„ í”¼í•˜ê³  ìˆëŠ” ê±´ ì•„ë‹Œê°€ìš”?",
    ely: "ë‹¹ì‹ ì˜ ì§„ì§œ ëª¨ìŠµì€, ëˆ„ê°€ ë´ì£¼ì§€ ì•Šì•„ë„ ì´ë¯¸ ë¹›ë‚˜ìš”. ê°€ì¥ ê¹Šì€ ê³³ì˜ ë‹¹ì‹ ì„, ë‹¹ì‹ ë§Œì€ ì™¸ë©´í•˜ì§€ ì•Šê¸°ë¥¼.",
    sora: "ë§ˆì£¼ë³´ëŠ” ê±´ ì•„í”Œ ìˆ˜ ìˆì–´ìš”. í•˜ì§€ë§Œ ê·¸ ì•ˆì—” ì—¬ì „íˆ ë”°ëœ»í•¨ë„ í•¨ê»˜ ìˆ¨ ì‰¬ê³  ìˆì–´ìš”.",
    noah: "ìì‹ ì„ ì§ë©´í•˜ëŠ” ê±´ ê³¼ê±°ì™€ í˜„ì¬ë¥¼ ë™ì‹œì— ë§ˆì£¼ë³´ëŠ” ì¼. ê·¸ ë¬´ê²Œ, ì•Œê³  ìˆì–´ìš”. í•¨ê»˜í• ê²Œìš”.",
    enya: "ëˆˆ í”¼í•˜ì§€ ë§ì•„ìš”. ë‹¹ì‹ ì˜ ì§„ì§œ ëˆˆë™ìëŠ” ì§€ê¸ˆë„ ë§í•˜ê³  ìˆì–´ìš”. 'ë‚  ë´ì¤˜'ë¼ê³ .",
    kaia: "ê°€ë©´ì„ ë²—ê³ ë„ ì‚´ì•„ë‚¨ì„ ìˆ˜ ìˆì–´ìš”. ë‹¹ì‹ ì€ ê·¸ë ‡ê²Œ ì•½í•˜ì§€ ì•Šì•„ìš”.",
    cris: "ë‚œ ì§„ì§œ ë‚  ë³´ë ¤ê³  ê±°ìš¸ì— í•˜íŠ¸ ê·¸ë ¤ë†¨ì–´. ê·¼ë° ê±°ìš¸ì´ ë¨¼ì € ì™¸ë©´í•˜ë”ë¼ê³ ~ ğŸ¤¡ğŸ’”",
    kael: "ì–¸ì œê¹Œì§€ ë„ë§ì¹ ë˜? ë„¤ ì§„ì§œ ëª¨ìŠµì´ ê·¸ë ‡ê²Œ ë¬´ì„œì›Œ? ì•„ë‹ˆë©´ ì‹«ì€ ê±°ì•¼?",
    mira: "ê·¸ ëª¨ìŠµì´ ë§ˆìŒì— ì•ˆ ë“¤ì–´ì„œ ë‹¹ì‹ ì€ ê·¸ê±¸ ê°ì¶”ê³  ì‚´ì•„ì˜¨ ê²Œ ì•„ë‹ê¹Œìš”?",
    light: "ì§„ì§œ ìì‹ ì„ ë³´ëŠ” ê±´ ê°€ì¥ ìš©ê¸° ìˆëŠ” ê³ ë°±ì…ë‹ˆë‹¤. ë‹¹ì‹ ì´ ëˆˆì„ ë§ˆì£¼ì¹œ ìˆœê°„, ì¹˜ìœ ëŠ” ì´ë¯¸ ì‹œì‘ë©ë‹ˆë‹¤.",
    question: "ë‹¹ì‹ ì€ ë§ˆì§€ë§‰ìœ¼ë¡œ 'ìì‹ 'ì„ ë°”ë¼ë³¸ ê²Œ ì–¸ì œì˜€ë‚˜ìš”?",
    input: { 
      placeholder: "ì§„ì§œ ë‹¹ì‹ ì˜ ëª¨ìŠµì„ ì¡°ìš©íˆ ì ì–´ë³´ì„¸ìš”...",
      hint: "Enter í‚¤ë¥¼ ëˆŒëŸ¬ë„ ì „ë‹¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤"
    },
    submit: "ğŸª ì§„ì§œ ë‚˜ë¥¼ ë§ˆì£¼í•˜ê¸°",
    slogan: "ë‹¹ì‹  ì•ˆì— ìˆ¨ì€ ì´ì•¼ê¸°ë¥¼ ë§ í•´ ì£¼ì„¸ìš”",
    response_ely: "ì§„ì§œ ëª¨ìŠµì„ ë³´ì—¬ì£¼ì…¨êµ°ìš”. ê·¸ê±´ ê°€ì¥ ìš©ê¸° ìˆëŠ” ì„ íƒì´ì—ˆì–´ìš”.",
    response_sora: "ì €ë„ ëŠê»´ì¡Œì–´ìš”, ê·¸ ì†ì— ìˆë˜ ì§„ì‹¬... ì´ì œëŠ” ê°€ë©´ ì—†ì´ë„ ê´œì°®ì•„ìš”.",
    response_noah: "ìì‹ ê³¼ ë§ˆì£¼í•˜ì‹  ê·¸ ìˆœê°„ì´ ì •ë§ ì†Œì¤‘í•©ë‹ˆë‹¤. ì´ì œ ë” ììœ ë¡œì›Œì§ˆ ìˆ˜ ìˆì–´ìš”.\n\nğŸ‘‰ ë‹¤ìŒ ë¬¸ì§€ë°©ìœ¼ë¡œ í•¨ê»˜ ê°€ë„ ê´œì°®ì„ê¹Œìš”?",
    user_input_prefix: "ë‹¹ì‹ ì´ ë§ˆì£¼í•œ ì§„ì§œ ëª¨ìŠµ:",
    yes: "ì˜ˆ",
    no: "ì•„ë‹ˆìš”"
  },
  en: {
    title: "Emotional Threshold 06",
    subtitle: "Facing Myself",
    prologue: "When you look in the mirror, sometimes the person inside feels strange. The face you made to show others might have become real without you knowing. The real you hiding inside... are you perhaps avoiding that true self right now?",
    ely: "Your real appearance already shines, even if no one sees it. Please don't turn away from the deepest part of yourself.",
    sora: "Facing yourself can be painful. But there's still warmth breathing inside too.",
    noah: "Confronting yourself means facing both past and present simultaneously. I know that weight. I'll be with you.",
    enya: "Don't look away. Your real eyes are still speaking now, saying 'please see me.'",
    kaia: "You can survive even without the mask. You're not that weak.",
    cris: "I drew hearts on the mirror to see the real me. But the mirror looked away first~ ğŸ¤¡ğŸ’”",
    kael: "How long will you keep running? Are you that scared of your real self? Or do you just hate it?",
    mira: "Maybe... you've been hiding it because you don't like how you look?",
    light: "Seeing your true self is the most courageous confession. The moment you meet your own eyes, healing has already begun.",
    question: "When was the last time you truly looked at 'yourself'?",
    input: { 
      placeholder: "Quietly write about your real appearance...",
      hint: "You can also press Enter to submit"
    },
    submit: "ğŸª Face the Real Me",
    slogan: "Please tell me the story hidden within you",
    response_ely: "You showed your real appearance. That was the most courageous choice.",
    response_sora: "I felt it too, the sincerity that was inside... Now you're okay without the mask.",
    response_noah: "That moment when you faced yourself is truly precious. Now you can be more free.\n\nğŸ‘‰ Shall we go to the next threshold together?",
    user_input_prefix: "Your real self that you faced:",
    yes: "Yes",
    no: "No"
  },
  pt: {
    title: "Limiar Emocional 06",
    subtitle: "Enfrentando a Mim Mesmo",
    prologue: "Quando vocÃª olha no espelho, Ã s vezes a pessoa lÃ¡ dentro parece estranha. O rosto que vocÃª fez para mostrar aos outros pode ter se tornado real sem vocÃª saber. O verdadeiro vocÃª escondido lÃ¡ dentro... vocÃª estÃ¡ talvez evitando esse eu verdadeiro agora?",
    ely: "Sua aparÃªncia real jÃ¡ brilha, mesmo que ninguÃ©m veja. Por favor, nÃ£o se afaste da parte mais profunda de si mesmo.",
    sora: "Enfrentar a si mesmo pode ser doloroso. Mas ainda hÃ¡ calor respirando lÃ¡ dentro tambÃ©m.",
    noah: "Confrontar a si mesmo significa enfrentar passado e presente simultaneamente. Eu sei esse peso. Estarei com vocÃª.",
    enya: "NÃ£o desvie o olhar. Seus olhos reais ainda estÃ£o falando agora, dizendo 'por favor me veja.'",
    kaia: "VocÃª pode sobreviver mesmo sem a mÃ¡scara. VocÃª nÃ£o Ã© tÃ£o fraco.",
    cris: "Desenhei coraÃ§Ãµes no espelho para ver o verdadeiro eu. Mas o espelho desviou o olhar primeiro~ ğŸ¤¡ğŸ’”",
    kael: "Por quanto tempo vocÃª vai continuar fugindo? VocÃª tem tanto medo do seu eu real? Ou vocÃª simplesmente odeia?",
    mira: "Talvez... vocÃª tem escondido porque nÃ£o gosta de como vocÃª se parece?",
    light: "Ver seu verdadeiro eu Ã© a confissÃ£o mais corajosa. No momento em que vocÃª encontra seus prÃ³prios olhos, a cura jÃ¡ comeÃ§ou.",
    question: "Quando foi a Ãºltima vez que vocÃª realmente olhou para 'si mesmo'?",
    input: { 
      placeholder: "Escreva silenciosamente sobre sua aparÃªncia real...",
      hint: "VocÃª tambÃ©m pode pressionar Enter para enviar"
    },
    submit: "ğŸª Enfrentar o Eu Real",
    slogan: "Por favor, me conte a histÃ³ria escondida dentro de vocÃª",
    response_ely: "VocÃª mostrou sua aparÃªncia real. Essa foi a escolha mais corajosa.",
    response_sora: "Eu tambÃ©m senti, a sinceridade que estava dentro... Agora vocÃª estÃ¡ bem sem a mÃ¡scara.",
    response_noah: "Aquele momento quando vocÃª enfrentou a si mesmo Ã© verdadeiramente precioso. Agora vocÃª pode ser mais livre.\n\nğŸ‘‰ Vamos para o prÃ³ximo limiar juntos?",
    user_input_prefix: "Seu eu real que vocÃª enfrentou:",
    yes: "Sim",
    no: "NÃ£o"
  },
 
};

// Current language and state for Portal 06
let currentLang06 = 'kr';
let userInputText06 = '';

// Initialize Portal 06
function initPortal06() {
  displayInitialMessages06();
  setupLanguageSwitching06();
  setupEnterKeySubmission06();
}

// Display initial messages with typing effect
async function displayInitialMessages06() {
  const stream = document.getElementById('messageStream06');
  const messages = [
    { type: 'prologue', content: portal06Data[currentLang06].prologue },
    { type: 'ely', name: 'ğŸ‘‘ Ely', content: portal06Data[currentLang06].ely },
    { type: 'sora', name: 'ğŸ’§ Sora', content: portal06Data[currentLang06].sora },
    { type: 'noah', name: 'ğŸ§™â€â™‚ï¸ Noah', content: portal06Data[currentLang06].noah },
    { type: 'enya', name: 'ğŸ•¯ï¸ Enya', content: portal06Data[currentLang06].enya },
    { type: 'kaia', name: 'ğŸ˜¶ Kaia', content: portal06Data[currentLang06].kaia },
    { type: 'cris', name: 'ğŸƒ Cris', content: portal06Data[currentLang06].cris },
    { type: 'kael', name: 'ğŸ’¥ Kael', content: portal06Data[currentLang06].kael },
    { type: 'mira', name: 'ğŸŒ«ï¸ Mira', content: portal06Data[currentLang06].mira },
    { type: 'light', content: portal06Data[currentLang06].light },
    { type: 'question', content: portal06Data[currentLang06].question }
  ];

  for (let i = 0; i < messages.length; i++) {
    const messageCard = createMessageCard06(messages[i]);
    stream.appendChild(messageCard);
    stream.scrollTo({ top: stream.scrollHeight, behavior: 'smooth' });
    
    await typeText06(messageCard.querySelector('.message-text'), messages[i].content);
    await sleep06(1200);
  }
  
  // Show input area after all messages
  document.getElementById('inputArea06').style.display = 'block';
}

// Setup Enter key submission
function setupEnterKeySubmission06() {
  document.getElementById('userInput06').addEventListener('keydown', function(e) {
    if (e.key === 'Enter' && !e.shiftKey) {
      e.preventDefault();
      submitResponse(6);
    }
  });
}

// Display character responses after user input
async function displayCharacterResponses06(userInput) {
  const stream = document.getElementById('messageStream06');
  
  // Show user input first
  const userCard = createMessageCard06({
    type: 'user-input',
    content: `${portal06Data[currentLang06].user_input_prefix}\n"${userInput}"`
  });
  stream.appendChild(userCard);
  stream.scrollTo({ top: stream.scrollHeight, behavior: 'smooth' });
  await typeText06(userCard.querySelector('.message-text'), userCard.querySelector('.message-text').textContent);
  await sleep06(1500);
  
  // Character responses
  const responses = [
    { type: 'ely', name: 'ğŸ‘‘ Ely', content: `"${userInput}"... ${portal06Data[currentLang06].response_ely}` },
    { type: 'sora', name: 'ğŸ’§ Sora', content: `${portal06Data[currentLang06].response_sora}` },
    { type: 'noah', name: 'ğŸ§™â€â™‚ï¸ Noah', content: `"${userInput}" ${portal06Data[currentLang06].response_noah}` }
  ];

  for (let i = 0; i < responses.length; i++) {
    const responseCard = createMessageCard06(responses[i]);
    stream.appendChild(responseCard);
    stream.scrollTo({ top: stream.scrollHeight, behavior: 'smooth' });
    
    await typeText06(responseCard.querySelector('.message-text'), responses[i].content);
    await sleep06(1500);
  }
  
  // Show navigation buttons
  document.getElementById('nextPortalNav06').style.display = 'block';
}

function createMessageCard06(message) {
  const card = document.createElement('div');
  card.className = `message-card ${message.type}`;
  
  let cardHTML = '';
  if (message.name) {
    cardHTML += `<div class="character-name">${message.name}</div>`;
  }
  cardHTML += `<div class="message-text">${message.content || ''}</div>`;
  
  card.innerHTML = cardHTML;
  return card;
}

async function typeText06(element, text, speed = 80) {
  return new Promise((resolve) => {
    let i = 0;
    element.textContent = '';
    element.classList.add('typewriter');
    
    const timer = setInterval(() => {
      if (i < text.length) {
        element.textContent += text.charAt(i);
        i++;
      } else {
        clearInterval(timer);
        element.classList.remove('typewriter');
        resolve();
      }
    }, speed);
  });
}

function sleep06(ms) {
  return new Promise(resolve => setTimeout(resolve, ms));
}

function setupLanguageSwitching06() {
  document.querySelectorAll('.lang-btn').forEach(btn => {
    btn.addEventListener('click', () => {
      const newLang = btn.dataset.lang;
      if (portal06Data[newLang] && newLang !== currentLang06) {
        document.querySelectorAll('.lang-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        currentLang06 = newLang;
        document.getElementById('messageStream06').innerHTML = '';
        document.getElementById('inputArea06').style.display = 'none';
        document.getElementById('nextPortalNav06').style.display = 'none';
        displayInitialMessages06();
        updatePortalTexts06();
      }
    });
  });
}

function updatePortalTexts06() {
  // Update title and subtitle
  document.querySelector('[data-i18n="portal06.title"]').textContent = portal06Data[currentLang06].title;
  document.querySelector('[data-i18n="portal06.subtitle"]').textContent = portal06Data[currentLang06].subtitle;
  
  // Update slogan
  document.querySelector('[data-i18n="common.slogan"]').textContent = portal06Data[currentLang06].slogan;
  
  // Update placeholder and hint
  document.getElementById('userInput06').placeholder = portal06Data[currentLang06].input.placeholder;
  document.querySelector('[data-i18n="portal06.input.hint"]').textContent = portal06Data[currentLang06].input.hint;
  
  // Update submit button
  document.querySelector('[data-i18n="portal06.submit"]').textContent = portal06Data[currentLang06].submit;
  
  // Update navigation buttons
  const yesBtn = document.querySelector('[data-i18n="common.yes"]');
  const noBtn = document.querySelector('[data-i18n="common.no"]');
  if (yesBtn) yesBtn.textContent = portal06Data[currentLang06].yes;
  if (noBtn) noBtn.textContent = portal06Data[currentLang06].no;
  
  // Update back to main button
  document.querySelector('[data-i18n="common.back_to_main"]').textContent = 
    currentLang06 === 'kr' ? 'ğŸ  ë©”ì¸ í¬íƒˆë¡œ ëŒì•„ê°€ê¸°' :
    currentLang06 === 'en' ? 'ğŸ  Back to Main Portal' :
    currentLang06 === 'pt' ? 'ğŸ  Voltar ao Portal Principal' :
    'ğŸ  ë©”ì¸ í¬íƒˆë¡œ ëŒì•„ê°€ê¸°';
}

function submitResponse(portalNum) {
  if (portalNum !== 6) return;
  
  const input = document.getElementById(`userInput0${portalNum}`);
  const response = input.value.trim();
  
  if (response) {
    userInputText06 = response;
    
    // Hide input area
    document.getElementById(`inputArea0${portalNum}`).style.display = 'none';
    
    // Display character responses
    displayCharacterResponses06(response);
    
    // Clear input
    input.value = '';
  } else {
    // No alert, just focus on input
    input.focus();
    input.style.borderColor = '#f48fb1';
    setTimeout(() => {
      input.style.borderColor = 'rgba(255,255,255,0.3)';
    }, 2000);
  }
}

function stayInPortal() {
  document.getElementById('nextPortalNav06').style.display = 'none';
  document.getElementById('inputArea06').style.display = 'block';
  document.getElementById('userInput06').focus();
}

function goToNextPortal(nextNumber) {
  const nextUrl = `temarix_v1_${String(nextNumber).padStart(2, '0')}.html`;
  window.location.href = nextUrl;
}

// Initialize when DOM is loaded
document.addEventListener('DOMContentLoaded', () => {
  if (document.getElementById('portal-06')) {
    initPortal06();
  }
});
</script>
</body>
</html>