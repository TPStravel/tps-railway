<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta http-equiv="Content-Language" content="ko,en,pt">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Temarix V1 - Portal 21</title>
</head>
<body>
<!-- Temarix V1 - Portal 21: 타인의 시선 속에 갇혔던 나 -->
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Temarix Portal 21 - 타인의 시선 속에 갇혔던 나</title>
</head>
<body>

<section class="portal portal-21" id="portal-21">
  <!-- Temarix Logo - Fixed Left Top -->
  <div class="temarix-logo">
    <h1 class="logo-text">🌌 TEMARIX</h1>
    <p class="slogan" data-i18n="common.slogan">당신 안에 숨은 이야기를 말 해 주세요</p>
  </div>

  <!-- Language Selector - Fixed Right Top -->
  <div class="lang-selector">
    <button class="lang-btn active" data-lang="kr">KR</button>
    <button class="lang-btn" data-lang="en">EN</button>
    <button class="lang-btn" data-lang="pt">PT</button>
  </div>

  <!-- Portal Header - Center Top -->
  <div class="portal-header">
    <h1 data-i18n="portal21.title">감정의 문지방 21</h1>
    <h2 data-i18n="portal21.subtitle">타인의 시선 속에 갇혔던 나</h2>
  </div>

  <!-- Message Stream -->
  <div class="message-stream" id="messageStream21">
    <!-- Messages will be added here via JavaScript -->
  </div>

  <!-- User Input Area -->
  <div class="input-area" id="inputArea21" style="display: none;">
    <div class="input-container">
      <textarea 
        id="userInput21" 
        rows="3" 
        placeholder="지금 당신은 누구의 시선에 묶여 있는지 조용히 적어보세요..."
        data-i18n-placeholder="portal21.input.placeholder"
      ></textarea>
      <button class="submit-btn" onclick="submitResponse21()">
        <span data-i18n="portal21.submit">🔓 해방 나누기</span>
      </button>
      <p class="input-hint" data-i18n="portal21.input.hint">Enter 키를 눌러도 전달할 수 있습니다</p>
    </div>
  </div>

  <!-- Next Portal Navigation -->
  <div class="next-portal-nav" id="nextPortalNav21" style="display: none;">
    <div class="nav-buttons">
      <button class="nav-btn yes-btn" onclick="goToNextPortal(22)" data-i18n="common.yes">예</button>
      <button class="nav-btn no-btn" onclick="stayInPortal(21)" data-i18n="common.no">아니요</button>
    </div>
  </div>

  <!-- Back to Main -->
  <div class="back-to-main">
    <button onclick="window.location.href='portal4.html'" data-i18n="common.back_to_main">
      🏠 메인 포탈로 돌아가기
    </button>
  </div>
</section>

<style>
/* Portal Base Styles */
.portal {
  min-height: 100vh;
  background: linear-gradient(135deg, #1a1b4b 0%, #2d1b69 100%);
  color: white;
  padding: 80px 20px 20px 20px;
  font-family: 'Apple SD Gothic Neo', -apple-system, BlinkMacSystemFont, sans-serif;
  max-width: 100%;
  margin: 0 auto;
  position: relative;
}

/* Logo Glow Animation */
@keyframes glowCycle {
  0%, 100% { text-shadow: 0 0 8px rgba(255,255,255,0.2); }
  50% { text-shadow: 0 0 25px rgba(255,255,255,0.7); }
}

/* Temarix Logo - Fixed Left Top */
.temarix-logo {
  position: fixed;
  top: 20px;
  left: 20px;
  z-index: 1000;
}

.logo-text {
  font-size: 1.8rem;
  font-weight: bold;
  color: #ffffff;
  margin: 0 0 5px 0;
  text-shadow: 0 0 20px rgba(255,255,255,0.3);
}

.slogan {
  color: #bbb;
  font-style: italic;
  font-size: 0.8rem;
  margin: 0;
}

/* Language Selector - Fixed Right Top */
.lang-selector {
  position: fixed;
  top: 20px;
  right: 20px;
  display: flex;
  gap: 5px;
  flex-wrap: wrap;
  max-width: 120px;
  z-index: 1000;
}

.lang-btn {
  background: rgba(255,255,255,0.1);
  border: 1px solid rgba(255,255,255,0.3);
  color: white;
  padding: 4px 8px;
  border-radius: 12px;
  font-size: 0.7rem;
  cursor: pointer;
  transition: all 0.3s ease;
}

.lang-btn:hover {
  background: rgba(255,255,255,0.2);
}

.lang-btn.active {
  background: #9c27b0;
  border-color: #9c27b0;
}

/* Portal Header - Center Top */
.portal-header {
  text-align: center;
  margin: 40px 0 30px 0;
  padding-top: 40px;
}

.portal-header h1 {
  font-size: 2.2rem;
  margin: 10px 0;
  color: #ffd700;
}

.portal-header h2 {
  font-size: 1.3rem;
  color: #e1bee7;
  font-weight: 300;
}

/* Message Stream */
.message-stream {
  max-height: 60vh;
  overflow-y: auto;
  padding: 20px 0;
  margin-bottom: 20px;
}

.message-card {
  background: rgba(255,255,255,0.1);
  border-radius: 15px;
  padding: 20px;
  margin: 15px 0;
  backdrop-filter: blur(10px);
  opacity: 0;
  transform: translateY(20px);
  animation: fadeInUp 0.6s ease forwards;
}

.message-card.prologue {
  border-left: 4px solid #e1bee7;
}

.message-card.ely {
  border-left: 4px solid #ffd700;
}

.message-card.sora {
  border-left: 4px solid #4dd0e1;
}

.message-card.noah {
  border-left: 4px solid #9c27b0;
}

.message-card.enya {
  border-left: 4px solid #ff9800;
}

.message-card.kaia {
  border-left: 4px solid #607d8b;
}

.message-card.cris {
  border-left: 4px solid #4caf50;
}

.message-card.kael {
  border-left: 4px solid #f44336;
}

.message-card.mira {
  border-left: 4px solid #9e9e9e;
}

.message-card.light {
  border-left: 4px solid #ffffff;
  background: rgba(255,255,255,0.15);
}

.message-card.question {
  border-left: 4px solid #f48fb1;
}

.message-card.user-input {
  border-left: 4px solid #81c784;
  background: rgba(129, 199, 132, 0.1);
}

.character-name {
  font-weight: bold;
  margin-bottom: 10px;
  font-size: 1.1rem;
}

.ely .character-name { color: #ffd700; }
.sora .character-name { color: #4dd0e1; }
.noah .character-name { color: #9c27b0; }
.enya .character-name { color: #ff9800; }
.kaia .character-name { color: #607d8b; }
.cris .character-name { color: #4caf50; }
.kael .character-name { color: #f44336; }
.mira .character-name { color: #9e9e9e; }

.message-text {
  line-height: 1.6;
  font-size: 1rem;
}

.typewriter {
  overflow: hidden;
  border-right: 2px solid rgba(255,255,255,0.7);
  white-space: nowrap;
  animation: blink-caret 1s step-end infinite;
}

@keyframes fadeInUp {
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes blink-caret {
  from, to { border-color: transparent; }
  50% { border-color: rgba(255,255,255,0.7); }
}

/* Input Area */
.input-area {
  background: rgba(0,0,0,0.3);
  padding: 20px;
  border-radius: 15px;
  margin: 20px 0;
  animation: fadeInUp 0.6s ease forwards;
}

.input-container textarea {
  width: 100%;
  background: rgba(255,255,255,0.1);
  border: 1px solid rgba(255,255,255,0.3);
  border-radius: 10px;
  padding: 15px;
  color: white;
  font-size: 1rem;
  resize: vertical;
  min-height: 80px;
  box-sizing: border-box;
}

.input-container textarea::placeholder {
  color: rgba(255,255,255,0.6);
}

.submit-btn {
  background: linear-gradient(135deg, #9c27b0, #e1bee7);
  border: none;
  color: white;
  padding: 12px 30px;
  border-radius: 25px;
  font-size: 1rem;
  cursor: pointer;
  margin-top: 10px;
  transition: all 0.3s ease;
  width: 100%;
}

.submit-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 5px 15px rgba(156, 39, 176, 0.4);
}

.input-hint {
  color: rgba(255,255,255,0.6);
  font-size: 0.8rem;
  text-align: center;
  margin: 8px 0 0 0;
}

/* Next Portal Navigation */
.next-portal-nav {
  text-align: center;
  margin: 30px 0;
  animation: fadeInUp 0.6s ease forwards;
}

.nav-buttons {
  display: flex;
  gap: 20px;
  justify-content: center;
}

.nav-btn {
  padding: 12px 30px;
  border-radius: 25px;
  font-size: 1rem;
  cursor: pointer;
  transition: all 0.3s ease;
  border: 2px solid transparent;
}

.yes-btn {
  background: linear-gradient(135deg, #4caf50, #81c784);
  color: white;
  border-color: #4caf50;
}

.yes-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 5px 15px rgba(76, 175, 80, 0.4);
}

.no-btn {
  background: rgba(255,255,255,0.1);
  color: white;
  border-color: rgba(255,255,255,0.3);
}

.no-btn:hover {
  background: rgba(255,255,255,0.2);
}

/* Back to Main */
.back-to-main {
  text-align: center;
  margin: 30px 0;
}

.back-to-main button {
  background: rgba(255,255,255,0.1);
  border: 1px solid rgba(255,255,255,0.3);
  color: white;
  padding: 10px 20px;
  border-radius: 20px;
  cursor: pointer;
  transition: all 0.3s ease;
}

.back-to-main button:hover {
  background: rgba(255,255,255,0.2);
}

/* Mobile Responsive */
@media (max-width: 768px) {
  .portal {
    padding: 100px 15px 20px 15px;
  }
  
  .temarix-logo {
    top: 15px;
    left: 15px;
  }
  
  .logo-text {
    font-size: 1.4rem;
  }
  
  .slogan {
    font-size: 0.7rem;
  }
  
  .lang-selector {
    top: 15px;
    right: 15px;
    max-width: 100px;
  }
  
  .lang-btn {
    padding: 3px 6px;
    font-size: 0.6rem;
  }
  
  .portal-header h1 {
    font-size: 1.8rem;
  }
  
  .portal-header h2 {
    font-size: 1.1rem;
  }
  
  .message-card {
    padding: 15px;
  }
  
  .nav-buttons {
    flex-direction: column;
    align-items: center;
  }
  
  .nav-btn {
    width: 200px;
  }
}
</style>

<script>
// Portal 21 Complete Data with Character Responses
const portal21Data = {
  kr: {
    title: "감정의 문지방 21",
    subtitle: "타인의 시선 속에 갇혔던 나",
    prologue: "사람들의 말과 눈빛에 나는 점점 작아졌습니다. 잘 보이려고, 웃기 위해 살다 보니 어느샌가 내 모습이 사라졌어요. 다른 사람의 기준에 맞추려 애쓰는 동안, 정작 내가 누구인지 잊어버렸습니다. 그들의 시선이 거울이 되어 나를 비춰주길 바랐지만, 그 거울 속에는 왜곡된 내 모습만 남아 있었어요.",
    ely: "당신은 남의 시선을 위해 태어난 존재가 아니에요. 당신의 시선이 먼저입니다.",
    sora: "그 눈빛 속에서 얼마나 많은 날들이 상처났는지… 이젠 놓아도 돼요.",
    noah: "기억하세요. 당신의 삶은 당신만이 책임질 수 있어요. 남의 판단은 그림자일 뿐입니다.",
    enya: "그 가면 벗어도 돼요. 나는 있는 그대로의 당신을 보고 싶어요.",
    kaia: "다른 사람이 널 좋아하든 말든 넌 이미 충분히 괜찮은 사람이에요.",
    cris: "나? 난 시선 따윈 신경 안 써! 근데 거울은 좀 보긴 해~ 🤪🪞",
    kael: "네 삶인데 왜 남들이 리모컨 쥐고 있어? 지금 뺏어! 되찾아!",
    mira: "혹시… 그 시선을 잃으면 자신도 사라질까 봐 두려웠던 건 아니에요?",
    light: "당신은 '보이기 위해'가 아니라 '존재하기 위해' 여기에 있습니다.",
    question: "지금 당신은 누구의 시선에 묶여 있나요?",
    input: { 
      placeholder: "지금 당신은 누구의 시선에 묶여 있는지 조용히 적어보세요...",
      hint: "Enter 키를 눌러도 전달할 수 있습니다"
    },
    submit: "🔓 해방 나누기",
    slogan: "당신 안에 숨은 이야기를 말 해 주세요",
    response_ely: "그 시선의 사슬을 끊는 첫 걸음은 이미 시작됐어요. 당신의 용기를 믿어요.",
    response_sora: "이제 다른 사람의 눈이 아닌, 당신 자신의 마음으로 당신을 바라봐 주세요.",
    response_noah: "그 시선에서 벗어날 준비가 되었군요. 이제 진짜 자유로운 여정을 시작할 수 있어요.\n\n👉 다음 문지방으로 함께 가도 괜찮을까요?",
    user_input_prefix: "당신을 묶고 있는 그 시선:",
    yes: "예",
    no: "아니요"
  },
  en: {
    title: "Emotional Threshold 21",
    subtitle: "The Me Trapped in Others' Gaze",
    prologue: "In people's words and gazes, I gradually became smaller. Living to look good and to make others smile, somehow my true self disappeared. While trying to meet others' standards, I forgot who I really was. I hoped their gaze would become a mirror reflecting me, but only a distorted image of myself remained in that mirror.",
    ely: "You weren't born to live for others' gaze. Your own perspective comes first.",
    sora: "How many days were wounded in those gazes... You can let go now.",
    noah: "Remember. Only you can take responsibility for your life. Others' judgments are just shadows.",
    enya: "You can take off that mask. I want to see you as you truly are.",
    kaia: "Whether others like you or not, you're already a good enough person.",
    cris: "Me? I don't care about gazes! But I do look in mirrors sometimes~ 🤪🪞",
    kael: "It's your life, so why are others holding the remote control? Take it back! Reclaim it!",
    mira: "Perhaps... you were afraid that losing that gaze meant losing yourself too?",
    light: "You are here to 'exist,' not to 'be seen.'",
    question: "Whose gaze are you bound by right now?",
    input: { 
      placeholder: "Quietly write about whose gaze you are bound by right now...",
      hint: "You can also press Enter to submit"
    },
    submit: "🔓 Share Liberation",
    slogan: "Please tell me the story hidden within you",
    response_ely: "The first step to breaking those chains of gaze has already begun. I believe in your courage.",
    response_sora: "Now please look at yourself through your own heart, not through others' eyes.",
    response_noah: "You're ready to break free from that gaze. Now you can begin a truly free journey.\n\n👉 Shall we go to the next threshold together?",
    user_input_prefix: "The gaze that binds you:",
    yes: "Yes",
    no: "No"
  },
pt: {
  title: "Limiar Emocional 21",
  subtitle: "O Eu Preso no Olhar dos Outros",
  prologue: "Nas palavras e olhares das pessoas, fui me tornando cada vez menor. Vivendo para parecer bem, para fazer os outros sorrirem, de alguma forma perdi quem eu realmente era. Tentando atender aos padrões dos outros, esqueci de mim. Esperava que seus olhares fossem espelhos que me refletissem, mas só restou uma imagem distorcida.",
  ely: "Você não nasceu para viver sob o olhar dos outros. A sua visão vem primeiro.",
  sora: "Quantos dias foram feridos por aqueles olhares... Agora você pode soltá-los.",
  noah: "Lembre-se: só você pode assumir a responsabilidade pela sua vida. Os julgamentos alheios são apenas sombras.",
  enya: "Você pode tirar essa máscara. Quero ver quem você realmente é.",
  kaia: "Gostem ou não de você, você já é uma boa pessoa.",
  cris: "Eu? Não ligo pra olhares! Mas às vezes dou uma espiada no espelho~ 🤪🪞",
  kael: "A vida é sua. Por que os outros estão com o controle remoto? Pegue de volta! Reivindique-a!",
  mira: "Talvez... você tenha temido que, ao perder aquele olhar, também perdesse a si mesmo?",
  light: "Você está aqui para 'existir', não para 'ser visto'.",
  question: "De qual olhar você está preso neste momento?",
  input: { 
    placeholder: "Escreva em silêncio de qual olhar você está preso neste momento...",
    hint: "Você também pode pressionar Enter para enviar"
  },
  submit: "🔓 Compartilhar Libertação",
  slogan: "Conte-me a história que está escondida dentro de você",
  response_ely: "O primeiro passo para romper essas correntes de olhares já começou. Eu acredito na sua coragem.",
  response_sora: "Agora, olhe para si mesmo com o seu próprio coração, não pelos olhos dos outros.",
  response_noah: "Você está pronto para se libertar daquele olhar. Agora pode começar uma jornada verdadeiramente livre.\n\n👉 Vamos juntos para o próximo limiar?",
  user_input_prefix: "O olhar que te prende:",
  yes: "Sim",
  no: "Não"
}
};

// Current language and state for Portal 21
let currentLang21 = 'kr';
let userInputText21 = '';

// Initialize Portal 21
function initPortal21() {
  displayInitialMessages21();
  setupLanguageSwitching21();
  setupEnterKeySubmission21();
}

// Display initial messages with typing effect
async function displayInitialMessages21() {
  const stream = document.getElementById('messageStream21');
  const messages = [
    { type: 'prologue', content: portal21Data[currentLang21].prologue },
    { type: 'ely', name: '👑 Ely', content: portal21Data[currentLang21].ely },
    { type: 'sora', name: '💧 Sora', content: portal21Data[currentLang21].sora },
    { type: 'noah', name: '🧙‍♂️ Noah', content: portal21Data[currentLang21].noah },
    { type: 'enya', name: '🕯️ Enya', content: portal21Data[currentLang21].enya },
    { type: 'kaia', name: '😶 Kaia', content: portal21Data[currentLang21].kaia },
    { type: 'cris', name: '🃏 Cris', content: portal21Data[currentLang21].cris },
    { type: 'kael', name: '💥 Kael', content: portal21Data[currentLang21].kael },
    { type: 'mira', name: '🌫️ Mira', content: portal21Data[currentLang21].mira },
    { type: 'light', content: portal21Data[currentLang21].light },
    { type: 'question', content: portal21Data[currentLang21].question }
  ];

  for (let i = 0; i < messages.length; i++) {
    const messageCard = createMessageCard21(messages[i]);
    stream.appendChild(messageCard);
    stream.scrollTo({ top: stream.scrollHeight, behavior: 'smooth' });
    
    await typeText21(messageCard.querySelector('.message-text'), messages[i].content);
    await sleep21(1200);
  }
  
  // Show input area after all messages
  document.getElementById('inputArea21').style.display = 'block';
}

// Setup Enter key submission
function setupEnterKeySubmission21() {
  document.getElementById('userInput21').addEventListener('keydown', function(e) {
    if (e.key === 'Enter' && !e.shiftKey) {
      e.preventDefault();
      submitResponse21();
    }
  });
}

// Display character responses after user input
async function displayCharacterResponses21(userInput) {
  const stream = document.getElementById('messageStream21');
  
  // Show user input first
  const userCard = createMessageCard21({
    type: 'user-input',
    content: `${portal21Data[currentLang21].user_input_prefix}\n"${userInput}"`
  });
  stream.appendChild(userCard);
  stream.scrollTo({ top: stream.scrollHeight, behavior: 'smooth' });
  await typeText21(userCard.querySelector('.message-text'), userCard.querySelector('.message-text').textContent);
  await sleep21(1500);
  
  // Character responses
  const responses = [
    { type: 'ely', name: '👑 Ely', content: portal21Data[currentLang21].response_ely },
    { type: 'sora', name: '💧 Sora', content: portal21Data[currentLang21].response_sora },
    { type: 'noah', name: '🧙‍♂️ Noah', content: portal21Data[currentLang21].response_noah }
  ];

  for (let i = 0; i < responses.length; i++) {
    const responseCard = createMessageCard21(responses[i]);
    stream.appendChild(responseCard);
    stream.scrollTo({ top: stream.scrollHeight, behavior: 'smooth' });
    
    await typeText21(responseCard.querySelector('.message-text'), responses[i].content);
    await sleep21(1500);
  }
  
  // Show navigation buttons
  document.getElementById('nextPortalNav21').style.display = 'block';
}

function createMessageCard21(message) {
  const card = document.createElement('div');
  card.className = `message-card ${message.type}`;
  
  let cardHTML = '';
  if (message.name) {
    cardHTML += `<div class="character-name">${message.name}</div>`;
  }
  cardHTML += `<div class="message-text">${message.content || ''}</div>`;
  
  card.innerHTML = cardHTML;
  return card;
}

async function typeText21(element, text, speed = 80) {
  return new Promise((resolve) => {
    let i = 0;
    element.textContent = '';
    element.classList.add('typewriter');
    
    const timer = setInterval(() => {
      if (i < text.length) {
        element.textContent += text.charAt(i);
        i++;
      } else {
        clearInterval(timer);
        element.classList.remove('typewriter');
        resolve();
      }
    }, speed);
  });
}

function sleep21(ms) {
  return new Promise(resolve => setTimeout(resolve, ms));
}

function setupLanguageSwitching21() {
  document.querySelectorAll('.lang-btn').forEach(btn => {
    btn.addEventListener('click', () => {
      document.querySelectorAll('.lang-btn').forEach(b => b.classList.remove('active'));
      btn.classList.add('active');
      
      const newLang = btn.dataset.lang;
      if (portal21Data[newLang]) {
        currentLang21 = newLang;
        updatePortalTexts21();
      }
    });
  });
}

function updatePortalTexts21() {
  // Update title and subtitle
  document.querySelector('[data-i18n="portal21.title"]').textContent = portal21Data[currentLang21].title;
  document.querySelector('[data-i18n="portal21.subtitle"]').textContent = portal21Data[currentLang21].subtitle;
  
  // Update slogan
  document.querySelector('[data-i18n="common.slogan"]').textContent = portal21Data[currentLang21].slogan;
  
  // Update placeholder and hint
  document.getElementById('userInput21').placeholder = portal21Data[currentLang21].input.placeholder;
  document.querySelector('[data-i18n="portal21.input.hint"]').textContent = portal21Data[currentLang21].input.hint;
  
  // Update submit button
  document.querySelector('[data-i18n="portal21.submit"]').textContent = portal21Data[currentLang21].submit;
  
  // Update navigation buttons
  const yesBtn = document.querySelector('[data-i18n="common.yes"]');
  const noBtn = document.querySelector('[data-i18n="common.no"]');
  if (yesBtn) yesBtn.textContent = portal21Data[currentLang21].yes;
  if (noBtn) noBtn.textContent = portal21Data[currentLang21].no;
  
  // Update back to main button
  document.querySelector('[data-i18n="common.back_to_main"]').textContent = 
    currentLang21 === 'kr' ? '🏠 메인 포탈로 돌아가기' :
    currentLang21 === 'en' ? '🏠 Back to Main Portal' :
    '🏠 메인 포탈로 돌아가기';
}

function submitResponse21() {
  const input = document.getElementById('userInput21');
  const response = input.value.trim();
  
  if (response) {
    userInputText21 = response;
    
    // Hide input area
    document.getElementById('inputArea21').style.display = 'none';
    
    // Display character responses
    displayCharacterResponses21(response);
    
    // Clear input
    input.value = '';
  } else {
    // No alert, just focus on input
    input.focus();
    input.style.borderColor = '#f48fb1';
    setTimeout(() => {
      input.style.borderColor = 'rgba(255,255,255,0.3)';
    }, 2000);
  }
}

function stayInPortal(portalNum) {
  document.getElementById(`nextPortalNav${portalNum}`).style.display = 'none';
  document.getElementById(`inputArea${portalNum}`).style.display = 'block';
  document.getElementById(`userInput${portalNum}`).focus();
}

function goToNextPortal(nextNumber) {
  const nextUrl = `temarix_v1_${String(nextNumber).padStart(2, '0')}.html`;
  window.location.href = nextUrl;
}

// Initialize when DOM is loaded
document.addEventListener('DOMContentLoaded', () => {
  if (document.getElementById('portal-21')) {
    initPortal21();
  }
});
</script>

</body>
</html>
</body>
</html>