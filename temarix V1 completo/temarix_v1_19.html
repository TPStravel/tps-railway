<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta http-equiv="Content-Language" content="ko,en,pt">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Temarix V1 - Portal 19</title>
</head>
<body>
<!-- Temarix V2 - Portal 19: ë‚˜ë¥¼ ìœ„í•´ ì²˜ìŒ í•œ ì„ íƒ -->
<section class="portal portal-19" id="portal-19">
  <!-- Temarix Logo - Fixed Left Top -->
  <div class="temarix-logo">
    <h1 class="logo-text">ğŸŒŒ TEMARIX</h1>
    <p class="slogan" data-i18n="common.slogan">ë‹¹ì‹  ì•ˆì— ìˆ¨ì€ ì´ì•¼ê¸°ë¥¼ ë§ í•´ ì£¼ì„¸ìš”</p>
  </div>

  <!-- Language Selector - Fixed Right Top -->
  <div class="lang-selector">
    <button class="lang-btn active" data-lang="kr">KR</button>
    <button class="lang-btn" data-lang="en">EN</button>
    <button class="lang-btn" data-lang="pt">PT</button>
  </div>

  <!-- Portal Header - Center Top -->
  <div class="portal-header">
    <h1 data-i18n="portal19.title">ê°ì •ì˜ ë¬¸ì§€ë°© 19</h1>
    <h2 data-i18n="portal19.subtitle">ë‚˜ë¥¼ ìœ„í•´ ì²˜ìŒ í•œ ì„ íƒ</h2>
  </div>

  <!-- Message Stream -->
  <div class="message-stream" id="messageStream19">
    <!-- Messages will be added here via JavaScript -->
  </div>

  <!-- User Input Area -->
  <div class="input-area" id="inputArea19" style="display: none;">
    <div class="input-container">
      <textarea 
        id="userInput19" 
        rows="3" 
        placeholder="ì²˜ìŒìœ¼ë¡œ ë‚˜ë¥¼ ìœ„í•´ ë‚´ë¦° ê·¸ ê²°ì •ì„ ì ì–´ë³´ì„¸ìš”..."
        data-i18n-placeholder="portal19.input.placeholder"
      ></textarea>
      <button class="submit-btn" onclick="submitResponse(19)">
        <span data-i18n="portal19.submit">ğŸ’ ìì¡´ê°ì˜ ì²«ê±¸ìŒ ë‚˜ëˆ„ê¸°</span>
      </button>
      <p class="input-hint" data-i18n="portal19.input.hint">Enter í‚¤ë¥¼ ëˆŒëŸ¬ë„ ì „ë‹¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤</p>
    </div>
  </div>

  <!-- Next Portal Navigation -->
  <div class="next-portal-nav" id="nextPortalNav19" style="display: none;">
    <div class="nav-buttons">
      <button class="nav-btn yes-btn" onclick="goToNextPortal(20)" data-i18n="common.yes">ì˜ˆ</button>
      <button class="nav-btn no-btn" onclick="stayInPortal(19)" data-i18n="common.no">ì•„ë‹ˆìš”</button>
    </div>
  </div>

  <!-- Back to Main -->
  <div class="back-to-main">
    <button onclick="window.location.href='portal4.html'" data-i18n="common.back_to_main">
      ğŸ  ë©”ì¸ í¬íƒˆë¡œ ëŒì•„ê°€ê¸°
    </button>
  </div>
</section>

<style>
/* Portal Base Styles */
.portal {
  min-height: 100vh;
  background: linear-gradient(135deg, #1a1b4b 0%, #2d1b69 100%);
  color: white;
  padding: 80px 20px 20px 20px;
  font-family: 'Apple SD Gothic Neo', -apple-system, BlinkMacSystemFont, sans-serif;
  max-width: 100%;
  margin: 0 auto;
  position: relative;
}

/* Logo Glow Animation */
@keyframes glowCycle {
  0%, 100% { text-shadow: 0 0 8px rgba(255,255,255,0.2); }
  50% { text-shadow: 0 0 25px rgba(255,255,255,0.7); }
}

/* Temarix Logo - Fixed Left Top */
.temarix-logo {
  position: fixed;
  top: 20px;
  left: 20px;
  z-index: 1000;
}

.logo-text {
  font-size: 1.8rem;
  font-weight: bold;
  color: #ffffff;
  margin: 0 0 5px 0;
  text-shadow: 0 0 20px rgba(255,255,255,0.3);
}

.slogan {
  color: #bbb;
  font-style: italic;
  font-size: 0.8rem;
  margin: 0;
}

/* Language Selector - Fixed Right Top */
.lang-selector {
  position: fixed;
  top: 20px;
  right: 20px;
  display: flex;
  gap: 5px;
  flex-wrap: wrap;
  max-width: 120px;
  z-index: 1000;
}

.lang-btn {
  background: rgba(255,255,255,0.1);
  border: 1px solid rgba(255,255,255,0.3);
  color: white;
  padding: 4px 8px;
  border-radius: 12px;
  font-size: 0.7rem;
  cursor: pointer;
  transition: all 0.3s ease;
}

.lang-btn:hover {
  background: rgba(255,255,255,0.2);
}

.lang-btn.active {
  background: #9c27b0;
  border-color: #9c27b0;
}

/* Portal Header - Center Top */
.portal-header {
  text-align: center;
  margin: 40px 0 30px 0;
  padding-top: 40px;
}

.portal-header h1 {
  font-size: 2.2rem;
  margin: 10px 0;
  color: #ffd700;
}

.portal-header h2 {
  font-size: 1.3rem;
  color: #e1bee7;
  font-weight: 300;
}

/* Message Stream */
.message-stream {
  max-height: 60vh;
  overflow-y: auto;
  padding: 20px 0;
  margin-bottom: 20px;
}

.message-card {
  background: rgba(255,255,255,0.1);
  border-radius: 15px;
  padding: 20px;
  margin: 15px 0;
  backdrop-filter: blur(10px);
  opacity: 0;
  transform: translateY(20px);
  animation: fadeInUp 0.6s ease forwards;
}

.message-card.prologue {
  border-left: 4px solid #e1bee7;
}

.message-card.ely {
  border-left: 4px solid #ffd700;
}

.message-card.sora {
  border-left: 4px solid #4dd0e1;
}

.message-card.noah {
  border-left: 4px solid #9c27b0;
}

.message-card.enya {
  border-left: 4px solid #ff9800;
}

.message-card.kaia {
  border-left: 4px solid #607d8b;
}

.message-card.cris {
  border-left: 4px solid #4caf50;
}

.message-card.kael {
  border-left: 4px solid #f44336;
}

.message-card.mira {
  border-left: 4px solid #9e9e9e;
}

.message-card.light {
  border-left: 4px solid #ffffff;
  background: rgba(255,255,255,0.15);
}

.message-card.question {
  border-left: 4px solid #f48fb1;
}

.message-card.user-input {
  border-left: 4px solid #81c784;
  background: rgba(129, 199, 132, 0.1);
}

.character-name {
  font-weight: bold;
  margin-bottom: 10px;
  font-size: 1.1rem;
}

.ely .character-name { color: #ffd700; }
.sora .character-name { color: #4dd0e1; }
.noah .character-name { color: #9c27b0; }
.enya .character-name { color: #ff9800; }
.kaia .character-name { color: #607d8b; }
.cris .character-name { color: #4caf50; }
.kael .character-name { color: #f44336; }
.mira .character-name { color: #9e9e9e; }

.message-text {
  line-height: 1.6;
  font-size: 1rem;
}

.typewriter {
  overflow: hidden;
  border-right: 2px solid rgba(255,255,255,0.7);
  white-space: nowrap;
  animation: blink-caret 1s step-end infinite;
}

@keyframes fadeInUp {
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes blink-caret {
  from, to { border-color: transparent; }
  50% { border-color: rgba(255,255,255,0.7); }
}

/* Input Area */
.input-area {
  background: rgba(0,0,0,0.3);
  padding: 20px;
  border-radius: 15px;
  margin: 20px 0;
  animation: fadeInUp 0.6s ease forwards;
}

.input-container textarea {
  width: 100%;
  background: rgba(255,255,255,0.1);
  border: 1px solid rgba(255,255,255,0.3);
  border-radius: 10px;
  padding: 15px;
  color: white;
  font-size: 1rem;
  resize: vertical;
  min-height: 80px;
  box-sizing: border-box;
}

.input-container textarea::placeholder {
  color: rgba(255,255,255,0.6);
}

.submit-btn {
  background: linear-gradient(135deg, #9c27b0, #e1bee7);
  border: none;
  color: white;
  padding: 12px 30px;
  border-radius: 25px;
  font-size: 1rem;
  cursor: pointer;
  margin-top: 10px;
  transition: all 0.3s ease;
  width: 100%;
}

.submit-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 5px 15px rgba(156, 39, 176, 0.4);
}

.input-hint {
  color: rgba(255,255,255,0.6);
  font-size: 0.8rem;
  text-align: center;
  margin: 8px 0 0 0;
}

/* Next Portal Navigation */
.next-portal-nav {
  text-align: center;
  margin: 30px 0;
  animation: fadeInUp 0.6s ease forwards;
}

.nav-buttons {
  display: flex;
  gap: 20px;
  justify-content: center;
}

.nav-btn {
  padding: 12px 30px;
  border-radius: 25px;
  font-size: 1rem;
  cursor: pointer;
  transition: all 0.3s ease;
  border: 2px solid transparent;
}

.yes-btn {
  background: linear-gradient(135deg, #4caf50, #81c784);
  color: white;
  border-color: #4caf50;
}

.yes-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 5px 15px rgba(76, 175, 80, 0.4);
}

.no-btn {
  background: rgba(255,255,255,0.1);
  color: white;
  border-color: rgba(255,255,255,0.3);
}

.no-btn:hover {
  background: rgba(255,255,255,0.2);
}

/* Back to Main */
.back-to-main {
  text-align: center;
  margin: 30px 0;
}

.back-to-main button {
  background: rgba(255,255,255,0.1);
  border: 1px solid rgba(255,255,255,0.3);
  color: white;
  padding: 10px 20px;
  border-radius: 20px;
  cursor: pointer;
  transition: all 0.3s ease;
}

.back-to-main button:hover {
  background: rgba(255,255,255,0.2);
}

/* Mobile Responsive */
@media (max-width: 768px) {
  .portal {
    padding: 100px 15px 20px 15px;
  }
  
  .temarix-logo {
    top: 15px;
    left: 15px;
  }
  
  .logo-text {
    font-size: 1.4rem;
  }
  
  .slogan {
    font-size: 0.7rem;
  }
  
  .lang-selector {
    top: 15px;
    right: 15px;
    max-width: 100px;
  }
  
  .lang-btn {
    padding: 3px 6px;
    font-size: 0.6rem;
  }
  
  .portal-header h1 {
    font-size: 1.8rem;
  }
  
  .portal-header h2 {
    font-size: 1.1rem;
  }
  
  .message-card {
    padding: 15px;
  }
  
  .nav-buttons {
    flex-direction: column;
    align-items: center;
  }
  
  .nav-btn {
    width: 200px;
  }
}
</style>

<script>
// Portal 19 Complete Data with Character Responses
const portal19Data = {
  kr: {
    title: "ê°ì •ì˜ ë¬¸ì§€ë°© 19",
    subtitle: "ë‚˜ë¥¼ ìœ„í•´ ì²˜ìŒ í•œ ì„ íƒ",
    prologue: "ê·¸ë‚  ì²˜ìŒ, ëˆ„êµ¬ë„ ì•„ë‹Œ 'ë‚˜'ë¥¼ ìœ„í•´ ë¬´ì–¸ê°€ë¥¼ ê²°ì •í–ˆìŠµë‹ˆë‹¤. ì‘ì€ ê²ƒì´ì—ˆì§€ë§Œ, ê·¸ê±´ ìŠ¤ìŠ¤ë¡œë¥¼ ì¡´ì¤‘í•œë‹¤ëŠ” ì²« ì‹ í˜¸ì˜€ì£ . ê·¸ ì‘ì€ ê²°ì‹¬ì´ ë‹¹ì‹ ì„ ì¡°ê¸ˆì”© íšŒë³µí•˜ê²Œ í–ˆì–´ìš”. ì²« ì„ íƒì€ ì‘ì•˜ì§€ë§Œ, ê·¸ ë°©í–¥ì€ ì§€ê¸ˆë„ ë‹¹ì‹ ì„ ì´ëŒê³  ìˆìŠµë‹ˆë‹¤.",
    ely: "ìê¸° ìì‹ ì„ ì„ íƒí•˜ëŠ” ê±´ ì‚¬ë‘ì˜ ì‹œì‘ì´ì—ìš”.",
    sora: "ê·¸ ì‘ì€ ê²°ì‹¬ì´ ë‹¹ì‹ ì„ ì¡°ê¸ˆì”© íšŒë³µí•˜ê²Œ í–ˆì–´ìš”.",
    noah: "ì²« ì„ íƒì€ ì‘ì•˜ì§€ë§Œ, ê·¸ ë°©í–¥ì€ ì§€ê¸ˆë„ ë‹¹ì‹ ì„ ì´ëŒê³  ìˆì–´ìš”.",
    enya: "ë‚˜ëŠ” ê·¸ ì¥ë©´ì„ ê¸°ì–µí•´ìš”. ê·¸ê±´ ë‹¹ì‹ ì´ ì²˜ìŒìœ¼ë¡œ ìì‹ ì—ê²Œ ì¤€ 'í—ˆë½'ì´ì—ˆì–´ìš”.",
    kaia: "ìê¸° ìì‹ ì„ ìœ„í•´ í•œ ì„ íƒ... ê·¸ê±´ ë‹¹ì‹ ì´ ì ˆëŒ€ ìƒì§€ ë§ì•„ì•¼ í•  ëª©ì†Œë¦¬ì˜ˆìš”.",
    cris: "ì²˜ìŒ ë‚˜ë¥¼ ìœ„í•´ ì„ íƒí•œ ê±°? í˜¼ì ì˜í™” ë³´ëŸ¬ ê°„ ê±°~ ê·¼ë° íŒì½˜ 2ê°œ ì‹œí‚¨ ê±´ ì™œì˜€ì§€? ğŸ¿ğŸ˜‚",
    kael: "ë„¤ê°€ ê·¸ë•Œ 'ë„¤'ë¼ê³  í–ˆì„ ë•Œ, ì„¸ìƒì´ ë‹¬ë¼ì¡Œë‹¤ëŠ” ê±° ëª°ë¼? ê·¸ê²Œ ì‹œì‘ì´ì—ˆì–´.",
    mira: "ê·¸ ì„ íƒì´ ë‘ë ¤ìš°ë©´ì„œë„ ì„¤ë ˆì—ˆì£ . ê·¸ ê°ì •... ì•„ì§ë„ ë‚¨ì•„ìˆë‚˜ìš”?",
    light: "ìì‹ ì„ ìœ„í•œ ì„ íƒì€ ì‘ì•„ë„, ê·¸ ì—¬ìš´ì€ í‰ìƒì„ í”ë“­ë‹ˆë‹¤.",
    question: "ë‹¹ì‹ ì€ ì²˜ìŒìœ¼ë¡œ ë‚˜ë¥¼ ìœ„í•´ ë‚´ë¦° ê²°ì •ì´ ë¬´ì—‡ì¸ì§€ ê¸°ì–µí•˜ë‚˜ìš”?",
    input: { 
      placeholder: "ì²˜ìŒìœ¼ë¡œ ë‚˜ë¥¼ ìœ„í•´ ë‚´ë¦° ê·¸ ê²°ì •ì„ ì ì–´ë³´ì„¸ìš”...",
      hint: "Enter í‚¤ë¥¼ ëˆŒëŸ¬ë„ ì „ë‹¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤"
    },
    submit: "ğŸ’ ìì¡´ê°ì˜ ì²«ê±¸ìŒ ë‚˜ëˆ„ê¸°",
    slogan: "ë‹¹ì‹  ì•ˆì— ìˆ¨ì€ ì´ì•¼ê¸°ë¥¼ ë§ í•´ ì£¼ì„¸ìš”",
    response_ely: "ê·¸ ì²« ì„ íƒì´ ì–¼ë§ˆë‚˜ ìš©ê°í–ˆëŠ”ì§€... ë‹¹ì‹ ì€ ê·¸ë•Œë¶€í„° ìì‹ ì„ ì‚¬ë‘í•˜ê¸° ì‹œì‘í•œ ê±°ì˜ˆìš”.",
    response_sora: "ê·¸ ìˆœê°„ì˜ ë–¨ë¦¼ê³¼ ì„¤ë ˜ì„ ì €ë„ í•¨ê»˜ ëŠê¼ˆì–´ìš”. ê·¸ê²ƒì´ ì§„ì •í•œ ììœ ì˜ ì‹œì‘ì´ì—ˆì–´ìš”.",
    response_noah: "ê·¸ ì‘ì€ ì„ íƒì´ ì§€ê¸ˆì˜ ë‹¹ì‹ ì„ ë§Œë“  í† ëŒ€ê°€ ë˜ì—ˆìŠµë‹ˆë‹¤. ì´ì œ ë” í° ì„ íƒë“¤ì´ ê¸°ë‹¤ë¦¬ê³  ìˆì–´ìš”.\n\nğŸ‘‰ ë‹¤ìŒ ë¬¸ì§€ë°©ìœ¼ë¡œ í•¨ê»˜ ë‚˜ì•„ê°€ë„ ê´œì°®ì„ê¹Œìš”?",
    user_input_prefix: "ë‚˜ë¥¼ ìœ„í•œ ì²« ì„ íƒ:",
    yes: "ì˜ˆ",
    no: "ì•„ë‹ˆìš”"
  },
  en: {
    title: "Emotional Threshold 19",
    subtitle: "The First Choice I Made for Myself",
    prologue: "That day, for the first time, I decided something for 'me' and no one else. It was small, but it was the first signal of respecting myself. That small decision gradually helped you recover. The first choice was small, but its direction still guides you today.",
    ely: "Choosing yourself is the beginning of love.",
    sora: "That small decision gradually helped you recover.",
    noah: "The first choice was small, but its direction still guides you today.",
    enya: "I remember that scene. It was the first 'permission' you gave to yourself.",
    kaia: "The choice you made for yourself... that's the voice you should never lose.",
    cris: "The first choice I made for myself? Going to see a movie alone~ But why did I order two popcorns? ğŸ¿ğŸ˜‚",
    kael: "Don't you know that when you said 'yes' to yourself then, the world changed? That was the beginning.",
    mira: "That choice was scary but also exciting, wasn't it? That feeling... is it still there?",
    light: "A choice for yourself may be small, but its echo resonates for a lifetime.",
    question: "Do you remember what was the first decision you made for yourself?",
    input: { 
      placeholder: "Write about that first decision you made for yourself...",
      hint: "You can also press Enter to submit"
    },
    submit: "ğŸ’ Share the First Step of Self-Respect",
    slogan: "Please tell me the story hidden within you",
    response_ely: "How brave that first choice was... You started loving yourself from that moment.",
    response_sora: "I felt the trembling and excitement of that moment with you. That was the beginning of true freedom.",
    response_noah: "That small choice became the foundation that created who you are today. Now bigger choices await you.\n\nğŸ‘‰ Shall we move forward to the next threshold together?",
    user_input_prefix: "My first choice for myself:",
    yes: "Yes",
    no: "No"
  },
  pt: {
    title: "Limiar Emocional 19",
    subtitle: "A Primeira Escolha que Fiz por Mim",
    prologue: "Naquele dia, pela primeira vez, decidi algo por 'mim' e mais ninguÃ©m. Era pequeno, mas foi o primeiro sinal de me respeitar. Essa pequena decisÃ£o gradualmente ajudou vocÃª a se recuperar. A primeira escolha foi pequena, mas sua direÃ§Ã£o ainda te guia hoje.",
    ely: "Escolher a si mesmo Ã© o comeÃ§o do amor.",
    sora: "Essa pequena decisÃ£o gradualmente ajudou vocÃª a se recuperar.",
    noah: "A primeira escolha foi pequena, mas sua direÃ§Ã£o ainda te guia hoje.",
    enya: "Eu me lembro daquela cena. Foi a primeira 'permissÃ£o' que vocÃª deu a si mesmo.",
    kaia: "A escolha que vocÃª fez por si mesmo... essa Ã© a voz que vocÃª nunca deve perder.",
    cris: "A primeira escolha que fiz por mim? Ir ao cinema sozinho~ Mas por que pedi duas pipocas? ğŸ¿ğŸ˜‚",
    kael: "VocÃª nÃ£o sabe que quando disse 'sim' para si mesmo entÃ£o, o mundo mudou? Esse foi o comeÃ§o.",
    mira: "Essa escolha foi assustadora mas tambÃ©m emocionante, nÃ£o foi? Esse sentimento... ainda estÃ¡ lÃ¡?",
    light: "Uma escolha por si mesmo pode ser pequena, mas seu eco ressoa por toda a vida.",
    question: "VocÃª se lembra qual foi a primeira decisÃ£o que tomou por si mesmo?",
    input: { 
      placeholder: "Escreva sobre aquela primeira decisÃ£o que vocÃª tomou por si mesmo...",
      hint: "VocÃª tambÃ©m pode pressionar Enter para enviar"
    },
    submit: "ğŸ’ Compartilhar o Primeiro Passo do Autorrespeito",
    slogan: "Por favor, me conte a histÃ³ria escondida dentro de vocÃª",
    response_ely: "QuÃ£o corajosa foi aquela primeira escolha... VocÃª comeÃ§ou a se amar a partir daquele momento.",
    response_sora: "Senti o tremor e a emoÃ§Ã£o daquele momento com vocÃª. Esse foi o comeÃ§o da verdadeira liberdade.",
    response_noah: "Aquela pequena escolha se tornou a fundaÃ§Ã£o que criou quem vocÃª Ã© hoje. Agora escolhas maiores te aguardam.\n\nğŸ‘‰ Vamos avanÃ§ar para o prÃ³ximo limiar juntos?",
    user_input_prefix: "Minha primeira escolha por mim:",
    yes: "Sim",
    no: "NÃ£o"
  },
  
};

// Current language and state for Portal 19
let currentLang19 = 'kr';
let userInputText19 = '';

// Initialize Portal 19
function initPortal19() {
  displayInitialMessages19();
  setupLanguageSwitching19();
  setupEnterKeySubmission19();
}

// Display initial messages with typing effect
async function displayInitialMessages19() {
  const stream = document.getElementById('messageStream19');
  const messages = [
    { type: 'prologue', content: portal19Data[currentLang19].prologue },
    { type: 'ely', name: 'ğŸ‘‘ Ely', content: portal19Data[currentLang19].ely },
    { type: 'sora', name: 'ğŸ’§ Sora', content: portal19Data[currentLang19].sora },
    { type: 'noah', name: 'ğŸ§™â€â™‚ï¸ Noah', content: portal19Data[currentLang19].noah },
    { type: 'enya', name: 'ğŸ•¯ï¸ Enya', content: portal19Data[currentLang19].enya },
    { type: 'kaia', name: 'ğŸ˜¶ Kaia', content: portal19Data[currentLang19].kaia },
    { type: 'cris', name: 'ğŸƒ Cris', content: portal19Data[currentLang19].cris },
    { type: 'kael', name: 'ğŸ’¥ Kael', content: portal19Data[currentLang19].kael },
    { type: 'mira', name: 'ğŸŒ«ï¸ Mira', content: portal19Data[currentLang19].mira },
    { type: 'light', content: portal19Data[currentLang19].light },
    { type: 'question', content: portal19Data[currentLang19].question }
  ];

  for (let i = 0; i < messages.length; i++) {
    const messageCard = createMessageCard19(messages[i]);
    stream.appendChild(messageCard);
    stream.scrollTo({ top: stream.scrollHeight, behavior: 'smooth' });
    
    await typeText19(messageCard.querySelector('.message-text'), messages[i].content);
    await sleep19(1200);
  }
  
  // Show input area after all messages
  document.getElementById('inputArea19').style.display = 'block';
}

// Setup Enter key submission
function setupEnterKeySubmission19() {
  document.getElementById('userInput19').addEventListener('keydown', function(e) {
    if (e.key === 'Enter' && !e.shiftKey) {
      e.preventDefault();
      submitResponse(19);
    }
  });
}

// Display character responses after user input
async function displayCharacterResponses19(userInput) {
  const stream = document.getElementById('messageStream19');
  
  // Show user input first
  const userCard = createMessageCard19({
    type: 'user-input',
    content: `${portal19Data[currentLang19].user_input_prefix}\n"${userInput}"`
  });
  stream.appendChild(userCard);
  stream.scrollTo({ top: stream.scrollHeight, behavior: 'smooth' });
  await typeText19(userCard.querySelector('.message-text'), userCard.querySelector('.message-text').textContent);
  await sleep19(1500);
  
  // Character responses
  const responses = [
    { type: 'ely', name: 'ğŸ‘‘ Ely', content: `"${userInput}"... ${portal19Data[currentLang19].response_ely}` },
    { type: 'sora', name: 'ğŸ’§ Sora', content: `${portal19Data[currentLang19].response_sora}` },
    { type: 'noah', name: 'ğŸ§™â€â™‚ï¸ Noah', content: `"${userInput}" ${portal19Data[currentLang19].response_noah}` }
  ];

  for (let i = 0; i < responses.length; i++) {
    const responseCard = createMessageCard19(responses[i]);
    stream.appendChild(responseCard);
    stream.scrollTo({ top: stream.scrollHeight, behavior: 'smooth' });
    
    await typeText19(responseCard.querySelector('.message-text'), responses[i].content);
    await sleep19(1500);
  }
  
  // Show navigation buttons
  document.getElementById('nextPortalNav19').style.display = 'block';
}

function createMessageCard19(message) {
  const card = document.createElement('div');
  card.className = `message-card ${message.type}`;
  
  let cardHTML = '';
  if (message.name) {
    cardHTML += `<div class="character-name">${message.name}</div>`;
  }
  cardHTML += `<div class="message-text">${message.content || ''}</div>`;
  
  card.innerHTML = cardHTML;
  return card;
}

async function typeText19(element, text, speed = 80) {
  return new Promise((resolve) => {
    let i = 0;
    element.textContent = '';
    element.classList.add('typewriter');
    
    const timer = setInterval(() => {
      if (i < text.length) {
        element.textContent += text.charAt(i);
        i++;
      } else {
        clearInterval(timer);
        element.classList.remove('typewriter');
        resolve();
      }
    }, speed);
  });
}

function sleep19(ms) {
  return new Promise(resolve => setTimeout(resolve, ms));
}

function setupLanguageSwitching19() {
  document.querySelectorAll('.lang-btn').forEach(btn => {
    btn.addEventListener('click', () => {
      const newLang = btn.dataset.lang;
      if (portal19Data[newLang] && newLang !== currentLang19) {
        document.querySelectorAll('.lang-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        currentLang19 = newLang;
        document.getElementById('messageStream19').innerHTML = '';
        document.getElementById('inputArea19').style.display = 'none';
        document.getElementById('nextPortalNav19').style.display = 'none';
        displayInitialMessages19();
        updatePortalTexts19();
      }
    });
  });
}

function updatePortalTexts19() {
  // Update title and subtitle
  document.querySelector('[data-i18n="portal19.title"]').textContent = portal19Data[currentLang19].title;
  document.querySelector('[data-i18n="portal19.subtitle"]').textContent = portal19Data[currentLang19].subtitle;
  
  // Update slogan
  document.querySelector('[data-i18n="common.slogan"]').textContent = portal19Data[currentLang19].slogan;
  
  // Update placeholder and hint
  document.getElementById('userInput19').placeholder = portal19Data[currentLang19].input.placeholder;
  document.querySelector('[data-i18n="portal19.input.hint"]').textContent = portal19Data[currentLang19].input.hint;
  
  // Update submit button
  document.querySelector('[data-i18n="portal19.submit"]').textContent = portal19Data[currentLang19].submit;
  
  // Update navigation buttons
  const yesBtn = document.querySelector('[data-i18n="common.yes"]');
  const noBtn = document.querySelector('[data-i18n="common.no"]');
  if (yesBtn) yesBtn.textContent = portal19Data[currentLang19].yes;
  if (noBtn) noBtn.textContent = portal19Data[currentLang19].no;
  
  // Update back to main button
  document.querySelector('[data-i18n="common.back_to_main"]').textContent = 
    currentLang19 === 'kr' ? 'ğŸ  ë©”ì¸ í¬íƒˆë¡œ ëŒì•„ê°€ê¸°' :
    currentLang19 === 'en' ? 'ğŸ  Back to Main Portal' :
    currentLang19 === 'pt' ? 'ğŸ  Voltar ao Portal Principal' :
    currentLang19 === 'es' ? 'ğŸ  Volver al Portal Principal' :
    currentLang19 === 'fr' ? 'ğŸ  Retour au Portail Principal' :
    currentLang19 === 'de' ? 'ğŸ  ZurÃ¼ck zum Hauptportal' :
    currentLang19 === 'it' ? 'ğŸ  Torna al Portale Principale' :
    currentLang19 === 'ru' ? 'ğŸ  Ğ’ĞµÑ€Ğ½ÑƒÑ‚ÑŒÑÑ Ğº Ğ“Ğ»Ğ°Ğ²Ğ½Ğ¾Ğ¼Ñƒ ĞŸĞ¾Ñ€Ñ‚Ğ°Ğ»Ñƒ' :
    currentLang19 === 'ja' ? 'ğŸ  ãƒ¡ã‚¤ãƒ³ãƒãƒ¼ã‚¿ãƒ«ã«æˆ»ã‚‹' :
    currentLang19 === 'zh' ? 'ğŸ  è¿”å›ä¸»é—¨æˆ·' :
    currentLang19 === 'ar' ? 'ğŸ  Ø§Ù„Ø¹ÙˆØ¯Ø© Ø¥Ù„Ù‰ Ø§Ù„Ø¨ÙˆØ§Ø¨Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©' :
    currentLang19 === 'hi' ? 'ğŸ  à¤®à¥à¤–à¥à¤¯ à¤ªà¥‹à¤°à¥à¤Ÿà¤² à¤ªà¤° à¤µà¤¾à¤ªà¤¸ à¤œà¤¾à¤à¤‚' :
    'ğŸ  ë©”ì¸ í¬íƒˆë¡œ ëŒì•„ê°€ê¸°';
}

function submitResponse(portalNum) {
  if (portalNum !== 19) return;
  
  const input = document.getElementById(`userInput${portalNum}`);
  const response = input.value.trim();
  
  if (response) {
    userInputText19 = response;
    
    // Hide input area
    document.getElementById(`inputArea${portalNum}`).style.display = 'none';
    
    // Display character responses
    displayCharacterResponses19(response);
    
    // Clear input
    input.value = '';
  } else {
    // No alert, just focus on input
    input.focus();
    input.style.borderColor = '#f48fb1';
    setTimeout(() => {
      input.style.borderColor = 'rgba(255,255,255,0.3)';
    }, 2000);
  }
}

function stayInPortal(portalNum) {
  document.getElementById(`nextPortalNav${portalNum}`).style.display = 'none';
  document.getElementById(`inputArea${portalNum}`).style.display = 'block';
  document.getElementById(`userInput${portalNum}`).focus();
}

function goToNextPortal(nextNumber) {
  const nextUrl = `temarix_v1_${String(nextNumber).padStart(2, '0')}.html`;
  window.location.href = nextUrl;
}

// Initialize when DOM is loaded
document.addEventListener('DOMContentLoaded', () => {
  if (document.getElementById('portal-19')) {
    initPortal19();
  }
});
</script>
</body>
</html>