<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta http-equiv="Content-Language" content="ko,en,pt">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Temarix V1 - Portal 05</title>
</head>
<body>
<!-- Temarix V1 - Portal 05: 멈춰버린 시간 -->
<section class="portal portal-05" id="portal-05">
  <!-- Temarix Logo - Fixed Left Top -->
  <div class="temarix-logo">
    <h1 class="logo-text">🌌 TEMARIX</h1>
    <p class="slogan" data-i18n="common.slogan">빛은 고요 속에서 피어난다.</p>
  </div>

  <!-- Language Selector - Fixed Right Top -->
  <div class="lang-selector">
    <button class="lang-btn active" data-lang="kr">KR</button>
    <button class="lang-btn" data-lang="en">EN</button>
    <button class="lang-btn" data-lang="pt">PT</button>
  </div>

  <!-- Portal Header - Center Top -->
  <div class="portal-header">
    <h1 data-i18n="portal05.title">감정의 문지방 05</h1>
    <h2 data-i18n="portal05.subtitle">멈춰버린 시간</h2>
  </div>

  <!-- Message Stream -->
  <div class="message-stream" id="messageStream05">
    <!-- Messages will be added here via JavaScript -->
  </div>

  <!-- User Input Area -->
  <div class="input-area" id="inputArea05" style="display: none;">
    <div class="input-container">
      <textarea 
        id="userInput05" 
        rows="3" 
        placeholder="당신 안에 아직도 멈춰 있는 시간을 조용히 적어보세요..."
        data-i18n-placeholder="portal05.input.placeholder"
      ></textarea>
      <button class="submit-btn" onclick="submitResponse(5)">
        <span data-i18n="portal05.submit">⏰ 시간을 다시 흘리기</span>
      </button>
      <p class="input-hint" data-i18n="portal05.input.hint">Enter 키를 눌러도 전달할 수 있습니다</p>
    </div>
  </div>

  <!-- Next Portal Navigation -->
  <div class="next-portal-nav" id="nextPortalNav05" style="display: none;">
    <div class="nav-buttons">
      <button class="nav-btn yes-btn" onclick="goToNextPortal(6)" data-i18n="common.yes">예</button>
      <button class="nav-btn no-btn" onclick="stayInPortal()" data-i18n="common.no">아니요</button>
    </div>
  </div>

  <!-- Back to Main -->
  <div class="back-to-main">
    <button onclick="window.location.href='portal4.html'" data-i18n="common.back_to_main">
      🏠 메인 포탈로 돌아가기
    </button>
  </div>
</section>

<style>
/* Portal Base Styles */
.portal {
  min-height: 100vh;
  background: linear-gradient(135deg, #1a1b4b 0%, #2d1b69 100%);
  color: white;
  padding: 80px 20px 20px 20px;
  font-family: 'Apple SD Gothic Neo', -apple-system, BlinkMacSystemFont, sans-serif;
  max-width: 100%;
  margin: 0 auto;
  position: relative;
}

/* Logo Glow Animation */
@keyframes glowCycle {
  0%, 100% { text-shadow: 0 0 8px rgba(255,255,255,0.2); }
  50% { text-shadow: 0 0 25px rgba(255,255,255,0.7); }
}

/* Temarix Logo - Fixed Left Top */
.temarix-logo {
  position: fixed;
  top: 20px;
  left: 20px;
  z-index: 1000;
}

.logo-text {
  font-size: 1.8rem;
  font-weight: bold;
  color: #ffffff;
  margin: 0 0 5px 0;
  text-shadow: 0 0 20px rgba(255,255,255,0.3);
}

.slogan {
  color: #bbb;
  font-style: italic;
  font-size: 0.8rem;
  margin: 0;
}

/* Language Selector - Fixed Right Top */
.lang-selector {
  position: fixed;
  top: 20px;
  right: 20px;
  display: flex;
  gap: 5px;
  flex-wrap: wrap;
  max-width: 120px;
  z-index: 1000;
}

.lang-btn {
  background: rgba(255,255,255,0.1);
  border: 1px solid rgba(255,255,255,0.3);
  color: white;
  padding: 4px 8px;
  border-radius: 12px;
  font-size: 0.7rem;
  cursor: pointer;
  transition: all 0.3s ease;
}

.lang-btn:hover {
  background: rgba(255,255,255,0.2);
}

.lang-btn.active {
  background: #9c27b0;
  border-color: #9c27b0;
}

/* Portal Header - Center Top */
.portal-header {
  text-align: center;
  margin: 40px 0 30px 0;
  padding-top: 40px;
}

.portal-header h1 {
  font-size: 2.2rem;
  margin: 10px 0;
  color: #ffd700;
}

.portal-header h2 {
  font-size: 1.3rem;
  color: #e1bee7;
  font-weight: 300;
}

/* Message Stream */
.message-stream {
  max-height: 60vh;
  overflow-y: auto;
  padding: 20px 0;
  margin-bottom: 20px;
}

.message-card {
  background: rgba(255,255,255,0.1);
  border-radius: 15px;
  padding: 20px;
  margin: 15px 0;
  backdrop-filter: blur(10px);
  opacity: 0;
  transform: translateY(20px);
  animation: fadeInUp 0.6s ease forwards;
}

.message-card.prologue {
  border-left: 4px solid #e1bee7;
}

.message-card.ely {
  border-left: 4px solid #ffd700;
}

.message-card.sora {
  border-left: 4px solid #4dd0e1;
}

.message-card.noah {
  border-left: 4px solid #9c27b0;
}

.message-card.enya {
  border-left: 4px solid #ff9800;
}

.message-card.kaia {
  border-left: 4px solid #607d8b;
}

.message-card.cris {
  border-left: 4px solid #4caf50;
}

.message-card.kael {
  border-left: 4px solid #f44336;
}

.message-card.mira {
  border-left: 4px solid #9e9e9e;
}

.message-card.light {
  border-left: 4px solid #ffffff;
  background: rgba(255,255,255,0.15);
}

.message-card.question {
  border-left: 4px solid #f48fb1;
}

.message-card.user-input {
  border-left: 4px solid #81c784;
  background: rgba(129, 199, 132, 0.1);
}

.character-name {
  font-weight: bold;
  margin-bottom: 10px;
  font-size: 1.1rem;
}

.ely .character-name { color: #ffd700; }
.sora .character-name { color: #4dd0e1; }
.noah .character-name { color: #9c27b0; }
.enya .character-name { color: #ff9800; }
.kaia .character-name { color: #607d8b; }
.cris .character-name { color: #4caf50; }
.kael .character-name { color: #f44336; }
.mira .character-name { color: #9e9e9e; }

.message-text {
  line-height: 1.6;
  font-size: 1rem;
}

.typewriter {
  overflow: hidden;
  border-right: 2px solid rgba(255,255,255,0.7);
  white-space: nowrap;
  animation: blink-caret 1s step-end infinite;
}

@keyframes fadeInUp {
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes blink-caret {
  from, to { border-color: transparent; }
  50% { border-color: rgba(255,255,255,0.7); }
}

/* Input Area */
.input-area {
  background: rgba(0,0,0,0.3);
  padding: 20px;
  border-radius: 15px;
  margin: 20px 0;
  animation: fadeInUp 0.6s ease forwards;
}

.input-container textarea {
  width: 100%;
  background: rgba(255,255,255,0.1);
  border: 1px solid rgba(255,255,255,0.3);
  border-radius: 10px;
  padding: 15px;
  color: white;
  font-size: 1rem;
  resize: vertical;
  min-height: 80px;
  box-sizing: border-box;
}

.input-container textarea::placeholder {
  color: rgba(255,255,255,0.6);
}

.submit-btn {
  background: linear-gradient(135deg, #9c27b0, #e1bee7);
  border: none;
  color: white;
  padding: 12px 30px;
  border-radius: 25px;
  font-size: 1rem;
  cursor: pointer;
  margin-top: 10px;
  transition: all 0.3s ease;
  width: 100%;
}

.submit-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 5px 15px rgba(156, 39, 176, 0.4);
}

.input-hint {
  color: rgba(255,255,255,0.6);
  font-size: 0.8rem;
  text-align: center;
  margin: 8px 0 0 0;
}

/* Next Portal Navigation */
.next-portal-nav {
  text-align: center;
  margin: 30px 0;
  animation: fadeInUp 0.6s ease forwards;
}

.nav-buttons {
  display: flex;
  gap: 20px;
  justify-content: center;
}

.nav-btn {
  padding: 12px 30px;
  border-radius: 25px;
  font-size: 1rem;
  cursor: pointer;
  transition: all 0.3s ease;
  border: 2px solid transparent;
}

.yes-btn {
  background: linear-gradient(135deg, #4caf50, #81c784);
  color: white;
  border-color: #4caf50;
}

.yes-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 5px 15px rgba(76, 175, 80, 0.4);
}

.no-btn {
  background: rgba(255,255,255,0.1);
  color: white;
  border-color: rgba(255,255,255,0.3);
}

.no-btn:hover {
  background: rgba(255,255,255,0.2);
}

/* Back to Main */
.back-to-main {
  text-align: center;
  margin: 30px 0;
}

.back-to-main button {
  background: rgba(255,255,255,0.1);
  border: 1px solid rgba(255,255,255,0.3);
  color: white;
  padding: 10px 20px;
  border-radius: 20px;
  cursor: pointer;
  transition: all 0.3s ease;
}

.back-to-main button:hover {
  background: rgba(255,255,255,0.2);
}

/* Mobile Responsive */
@media (max-width: 768px) {
  .portal {
    padding: 100px 15px 20px 15px;
  }
  
  .temarix-logo {
    top: 15px;
    left: 15px;
  }
  
  .logo-text {
    font-size: 1.4rem;
  }
  
  .slogan {
    font-size: 0.7rem;
  }
  
  .lang-selector {
    top: 15px;
    right: 15px;
    max-width: 100px;
  }
  
  .lang-btn {
    padding: 3px 6px;
    font-size: 0.6rem;
  }
  
  .portal-header h1 {
    font-size: 1.8rem;
  }
  
  .portal-header h2 {
    font-size: 1.1rem;
  }
  
  .message-card {
    padding: 15px;
  }
  
  .nav-buttons {
    flex-direction: column;
    align-items: center;
  }
  
  .nav-btn {
    width: 200px;
  }
}
</style>

<script>
// Portal 05 Complete Data with Character Responses
const portal05Data = {
  kr: {
    title: "감정의 문지방 05",
    subtitle: "멈춰버린 시간",
    prologue: "그 순간 이후, 마음속 어딘가의 시계가 멈춰버렸습니다. 몸은 앞으로 갔지만, 감정은 그날에 멈춰 있죠. 그 시간이 다시 흐르기 위해선… 아마 먼저 그 날을 꺼내야 할 거예요.",
    ely: "시간은 앞으로만 흐르지만, 마음은 멈춘 자리에서 당신을 기다리고 있어요.",
    sora: "그날 이후, 아무리 웃어도 눈동자는 멈춰 있었어요. 나는 그걸 봤어요.",
    noah: "멈춘 시간엔 이유가 있어요. 잊으려 한 만큼, 사실은 간절했던 거죠.",
    enya: "그 시간 속에 당신이 남긴 말 없는 편지, 지금 나에게 건네줘도 괜찮아요.",
    kaia: "당신의 감정은 아직도 그날 아침 창밖의 햇살을 기억하죠.",
    cris: "난 시간을 멈추는 대신 알람을 꺼버렸지~ 근데 그래서 지금 늦었나 봐! ⏰😂",
    kael: "또 도망치지 마. 그 시간, 네가 멈춘 거잖아. 이제 네가 다시 움직여야 해.",
    mira: "혹시 그 시간이 멈춘 게 아니라, 당신이 그 안에 숨은 건 아닐까요?",
    light: "마음이 멈춘 순간은, 몸이 아무리 달려도 따라오지 않습니다. 그 시계를 다시 감아야 할 시간입니다.",
    question: "당신 안에 아직도 멈춰 있는 시간은 언제인가요?",
    input: { 
      placeholder: "당신 안에 아직도 멈춰 있는 시간을 조용히 적어보세요...",
      hint: "Enter 키를 눌러도 전달할 수 있습니다"
    },
    submit: "⏰ 시간을 다시 흘리기",
    slogan: "당신 안에 숨은 이야기를 말 해 주세요",
    response_ely: "그 멈춰있던 시간을 꺼내주셨군요. 이제 그 시계가 다시 움직일 수 있어요.",
    response_sora: "저도 느껴졌어요, 그 속에 갇혀있던 시간의 무게... 이제 천천히 흘려보내도 돼요.",
    response_noah: "오래 멈춰있던 순간이군요. 이제 그 시간과 천천히 작별할 준비가 되셨나요?\n\n👉 다음 문지방으로 함께 가도 괜찮을까요?",
    user_input_prefix: "당신이 꺼낸 멈춰버린 시간:",
    yes: "예",
    no: "아니요"
  },
  en: {
    title: "Emotional Threshold 05",
    subtitle: "Stopped Time",
    prologue: "After that moment, a clock somewhere in your heart stopped. Your body moved forward, but your emotions remained frozen in that day. For time to flow again… perhaps you need to bring out that day first.",
    ely: "Time only flows forward, but your heart is waiting for you at the place where it stopped.",
    sora: "After that day, no matter how much you smiled, your eyes remained frozen. I saw that.",
    noah: "There's a reason time stopped. As much as you tried to forget, you were actually desperate.",
    enya: "The wordless letter you left in that time, you can hand it to me now if you want.",
    kaia: "Your emotions still remember the sunlight outside the window that morning.",
    cris: "I turned off my alarm instead of stopping time~ But that's why I'm late now! ⏰😂",
    kael: "Don't run away again. You stopped that time. Now you have to move again.",
    mira: "Maybe... time didn't stop, but you hid inside it?",
    light: "When the heart stops, no matter how much the body runs, it won't follow. It's time to wind that clock again.",
    question: "What time is still stopped inside you?",
    input: { 
      placeholder: "Quietly write about the time that's still stopped inside you...",
      hint: "You can also press Enter to submit"
    },
    submit: "⏰ Let Time Flow Again",
    slogan: "Please tell me the story hidden within you",
    response_ely: "You brought out that stopped time. Now that clock can move again.",
    response_sora: "I felt it too, the weight of time trapped inside... You can let it flow slowly now.",
    response_noah: "A moment that was stopped for so long. Are you ready to slowly bid farewell to that time?\n\n👉 Shall we go to the next threshold together?",
    user_input_prefix: "Your revealed stopped time:",
    yes: "Yes",
    no: "No"
  },
  pt: {
    title: "Limiar Emocional 05",
    subtitle: "Tempo Parado",
    prologue: "Após aquele momento, um relógio em algum lugar do seu coração parou. Seu corpo seguiu em frente, mas suas emoções permaneceram congeladas naquele dia. Para o tempo fluir novamente... talvez você precise trazer aquele dia primeiro.",
    ely: "O tempo só flui para frente, mas seu coração está esperando por você no lugar onde parou.",
    sora: "Depois daquele dia, não importa quanto você sorria, seus olhos permaneceram congelados. Eu vi isso.",
    noah: "Há uma razão para o tempo ter parado. Tanto quanto você tentou esquecer, você estava realmente desesperado.",
    enya: "A carta sem palavras que você deixou naquele tempo, você pode me entregar agora se quiser.",
    kaia: "Suas emoções ainda se lembram da luz do sol fora da janela naquela manhã.",
    cris: "Eu desliguei meu alarme em vez de parar o tempo~ Mas é por isso que estou atrasado agora! ⏰😂",
    kael: "Não fuja de novo. Você parou aquele tempo. Agora você tem que se mover novamente.",
    mira: "Talvez... o tempo não parou, mas você se escondeu dentro dele?",
    light: "Quando o coração para, não importa quanto o corpo corra, ele não seguirá. É hora de dar corda naquele relógio novamente.",
    question: "Que tempo ainda está parado dentro de você?",
    input: { 
      placeholder: "Escreva silenciosamente sobre o tempo que ainda está parado dentro de você...",
      hint: "Você também pode pressionar Enter para enviar"
    },
    submit: "⏰ Deixe o Tempo Fluir Novamente",
    slogan: "Por favor, me conte a história escondida dentro de você",
    response_ely: "Você trouxe aquele tempo parado. Agora aquele relógio pode se mover novamente.",
    response_sora: "Eu também senti, o peso do tempo preso dentro... Você pode deixá-lo fluir lentamente agora.",
    response_noah: "Um momento que estava parado por tanto tempo. Você está pronto para se despedir lentamente daquele tempo?\n\n👉 Vamos para o próximo limiar juntos?",
    user_input_prefix: "Seu tempo parado revelado:",
    yes: "Sim",
    no: "Não"
  },
  
};

// Current language and state for Portal 05
let currentLang05 = 'kr';
let userInputText05 = '';

// Initialize Portal 05
function initPortal05() {
  displayInitialMessages05();
  setupLanguageSwitching05();
  setupEnterKeySubmission05();
}

// Display initial messages with typing effect
async function displayInitialMessages05() {
  const stream = document.getElementById('messageStream05');
  const messages = [
    { type: 'prologue', content: portal05Data[currentLang05].prologue },
    { type: 'ely', name: '👑 Ely', content: portal05Data[currentLang05].ely },
    { type: 'sora', name: '💧 Sora', content: portal05Data[currentLang05].sora },
    { type: 'noah', name: '🧙‍♂️ Noah', content: portal05Data[currentLang05].noah },
    { type: 'enya', name: '🕯️ Enya', content: portal05Data[currentLang05].enya },
    { type: 'kaia', name: '😶 Kaia', content: portal05Data[currentLang05].kaia },
    { type: 'cris', name: '🃏 Cris', content: portal05Data[currentLang05].cris },
    { type: 'kael', name: '💥 Kael', content: portal05Data[currentLang05].kael },
    { type: 'mira', name: '🌫️ Mira', content: portal05Data[currentLang05].mira },
    { type: 'light', content: portal05Data[currentLang05].light },
    { type: 'question', content: portal05Data[currentLang05].question }
  ];

  for (let i = 0; i < messages.length; i++) {
    const messageCard = createMessageCard05(messages[i]);
    stream.appendChild(messageCard);
    stream.scrollTo({ top: stream.scrollHeight, behavior: 'smooth' });
    
    await typeText05(messageCard.querySelector('.message-text'), messages[i].content);
    await sleep05(1200);
  }
  
  // Show input area after all messages
  document.getElementById('inputArea05').style.display = 'block';
}

// Setup Enter key submission
function setupEnterKeySubmission05() {
  document.getElementById('userInput05').addEventListener('keydown', function(e) {
    if (e.key === 'Enter' && !e.shiftKey) {
      e.preventDefault();
      submitResponse(5);
    }
  });
}

// Display character responses after user input
async function displayCharacterResponses05(userInput) {
  const stream = document.getElementById('messageStream05');
  
  // Show user input first
  const userCard = createMessageCard05({
    type: 'user-input',
    content: `${portal05Data[currentLang05].user_input_prefix}\n"${userInput}"`
  });
  stream.appendChild(userCard);
  stream.scrollTo({ top: stream.scrollHeight, behavior: 'smooth' });
  await typeText05(userCard.querySelector('.message-text'), userCard.querySelector('.message-text').textContent);
  await sleep05(1500);
  
  // Character responses
  const responses = [
    { type: 'ely', name: '👑 Ely', content: `"${userInput}"... ${portal05Data[currentLang05].response_ely}` },
    { type: 'sora', name: '💧 Sora', content: `${portal05Data[currentLang05].response_sora}` },
    { type: 'noah', name: '🧙‍♂️ Noah', content: `"${userInput}" ${portal05Data[currentLang05].response_noah}` }
  ];

  for (let i = 0; i < responses.length; i++) {
    const responseCard = createMessageCard05(responses[i]);
    stream.appendChild(responseCard);
    stream.scrollTo({ top: stream.scrollHeight, behavior: 'smooth' });
    
    await typeText05(responseCard.querySelector('.message-text'), responses[i].content);
    await sleep05(1500);
  }
  
  // Show navigation buttons
  document.getElementById('nextPortalNav05').style.display = 'block';
}

function createMessageCard05(message) {
  const card = document.createElement('div');
  card.className = `message-card ${message.type}`;
  
  let cardHTML = '';
  if (message.name) {
    cardHTML += `<div class="character-name">${message.name}</div>`;
  }
  cardHTML += `<div class="message-text">${message.content || ''}</div>`;
  
  card.innerHTML = cardHTML;
  return card;
}

async function typeText05(element, text, speed = 80) {
  return new Promise((resolve) => {
    let i = 0;
    element.textContent = '';
    element.classList.add('typewriter');
    
    const timer = setInterval(() => {
      if (i < text.length) {
        element.textContent += text.charAt(i);
        i++;
      } else {
        clearInterval(timer);
        element.classList.remove('typewriter');
        resolve();
      }
    }, speed);
  });
}

function sleep05(ms) {
  return new Promise(resolve => setTimeout(resolve, ms));
}

function setupLanguageSwitching05() {
  document.querySelectorAll('.lang-btn').forEach(btn => {
    btn.addEventListener('click', () => {
      const newLang = btn.dataset.lang;
      if (portal05Data[newLang] && newLang !== currentLang05) {
        document.querySelectorAll('.lang-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        currentLang05 = newLang;
        document.getElementById('messageStream05').innerHTML = '';
        document.getElementById('inputArea05').style.display = 'none';
        document.getElementById('nextPortalNav05').style.display = 'none';
        displayInitialMessages05();
        updatePortalTexts05();
      }
    });
  });
}

function updatePortalTexts05() {
  // Update title and subtitle
  document.querySelector('[data-i18n="portal05.title"]').textContent = portal05Data[currentLang05].title;
  document.querySelector('[data-i18n="portal05.subtitle"]').textContent = portal05Data[currentLang05].subtitle;
  
  // Update slogan
  document.querySelector('[data-i18n="common.slogan"]').textContent = portal05Data[currentLang05].slogan;
  
  // Update placeholder and hint
  document.getElementById('userInput05').placeholder = portal05Data[currentLang05].input.placeholder;
  document.querySelector('[data-i18n="portal05.input.hint"]').textContent = portal05Data[currentLang05].input.hint;
  
  // Update submit button
  document.querySelector('[data-i18n="portal05.submit"]').textContent = portal05Data[currentLang05].submit;
  
  // Update navigation buttons
  const yesBtn = document.querySelector('[data-i18n="common.yes"]');
  const noBtn = document.querySelector('[data-i18n="common.no"]');
  if (yesBtn) yesBtn.textContent = portal05Data[currentLang05].yes;
  if (noBtn) noBtn.textContent = portal05Data[currentLang05].no;
  
  // Update back to main button
  document.querySelector('[data-i18n="common.back_to_main"]').textContent = 
    currentLang05 === 'kr' ? '🏠 메인 포탈로 돌아가기' :
    currentLang05 === 'en' ? '🏠 Back to Main Portal' :
    currentLang05 === 'pt' ? '🏠 Voltar ao Portal Principal' :
    '🏠 메인 포탈로 돌아가기';
}

function submitResponse(portalNum) {
  if (portalNum !== 5) return;
  
  const input = document.getElementById(`userInput0${portalNum}`);
  const response = input.value.trim();
  
  if (response) {
    userInputText05 = response;
    
    // Hide input area
    document.getElementById(`inputArea0${portalNum}`).style.display = 'none';
    
    // Display character responses
    displayCharacterResponses05(response);
    
    // Clear input
    input.value = '';
  } else {
    // No alert, just focus on input
    input.focus();
    input.style.borderColor = '#f48fb1';
    setTimeout(() => {
      input.style.borderColor = 'rgba(255,255,255,0.3)';
    }, 2000);
  }
}

function stayInPortal() {
  document.getElementById('nextPortalNav05').style.display = 'none';
  document.getElementById('inputArea05').style.display = 'block';
  document.getElementById('userInput05').focus();
}

function goToNextPortal(nextNumber) {
  const nextUrl = `temarix_v1_${String(nextNumber).padStart(2, '0')}.html`;
  window.location.href = nextUrl;
}

// Initialize when DOM is loaded
document.addEventListener('DOMContentLoaded', () => {
  if (document.getElementById('portal-05')) {
    initPortal05();
  }
});
</script>
</body>
</html>