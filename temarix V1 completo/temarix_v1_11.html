<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta http-equiv="Content-Language" content="ko,en,pt">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Temarix V1 - Portal 11</title>
</head>
<body>
<!-- Temarix V1 - Portal 11: ë‹¤ì‹œ í”¼ì–´ë‚˜ëŠ” ê°ì •ì˜ ê½ƒ -->
<section class="portal portal-11" id="portal-11">
  <!-- Temarix Logo - Fixed Left Top -->
  <div class="temarix-logo">
    <h1 class="logo-text">ğŸŒŒ TEMARIX</h1>
    <p class="slogan" data-i18n="common.slogan">ë‹¹ì‹  ì•ˆì— ìˆ¨ì€ ì´ì•¼ê¸°ë¥¼ ë§ í•´ ì£¼ì„¸ìš”</p>
  </div>

  <!-- Language Selector - Fixed Right Top -->
  <div class="lang-selector">
    <button class="lang-btn active" data-lang="kr">KR</button>
    <button class="lang-btn" data-lang="en">EN</button>
    <button class="lang-btn" data-lang="pt">PT</button>
  </div>

  <!-- Portal Header - Center Top -->
  <div class="portal-header">
    <h1 data-i18n="portal11.title">ê°ì •ì˜ ë¬¸ì§€ë°© 11</h1>
    <h2 data-i18n="portal11.subtitle">ë‹¤ì‹œ í”¼ì–´ë‚˜ëŠ” ê°ì •ì˜ ê½ƒ</h2>
  </div>

  <!-- Message Stream -->
  <div class="message-stream" id="messageStream11">
    <!-- Messages will be added here via JavaScript -->
  </div>

  <!-- User Input Area -->
  <div class="input-area" id="inputArea11" style="display: none;">
    <div class="input-container">
      <textarea 
        id="userInput11" 
        rows="3" 
        placeholder="ì˜¤ë«ë™ì•ˆ ì ë“¤ì–´ ìˆë˜ ë§ˆìŒì—ì„œ ë‹¤ì‹œ í”¼ì–´ë‚˜ê¸° ì‹œì‘í•œ ê°ì •ì„ ì¡°ìš©íˆ ì ì–´ë³´ì„¸ìš”..."
        data-i18n-placeholder="portal11.input.placeholder"
      ></textarea>
      <button class="submit-btn" onclick="submitResponse(11)">
        <span data-i18n="portal11.submit">ğŸŒ¸ ê°ì •ì˜ ê½ƒ í”¼ìš°ê¸°</span>
      </button>
      <p class="input-hint" data-i18n="portal11.input.hint">Enter í‚¤ë¥¼ ëˆŒëŸ¬ë„ ì „ë‹¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤</p>
    </div>
  </div>

  <!-- Next Portal Navigation -->
  <div class="next-portal-nav" id="nextPortalNav11" style="display: none;">
    <div class="nav-buttons">
      <button class="nav-btn yes-btn" onclick="goToNextPortal(12)" data-i18n="common.yes">ì˜ˆ</button>
      <button class="nav-btn no-btn" onclick="stayInPortal()" data-i18n="common.no">ì•„ë‹ˆìš”</button>
    </div>
  </div>

  <!-- Back to Main -->
  <div class="back-to-main">
    <button onclick="window.location.href='portal4.html'" data-i18n="common.back_to_main">
      ğŸ  ë©”ì¸ í¬íƒˆë¡œ ëŒì•„ê°€ê¸°
    </button>
  </div>
</section>

<style>
/* Portal Base Styles */
.portal {
  min-height: 100vh;
  background: linear-gradient(135deg, #1a1b4b 0%, #2d1b69 100%);
  color: white;
  padding: 80px 20px 20px 20px;
  font-family: 'Apple SD Gothic Neo', -apple-system, BlinkMacSystemFont, sans-serif;
  max-width: 100%;
  margin: 0 auto;
  position: relative;
}

/* Logo Glow Animation */
@keyframes glowCycle {
  0%, 100% { text-shadow: 0 0 8px rgba(255,255,255,0.2); }
  50% { text-shadow: 0 0 25px rgba(255,255,255,0.7); }
}

/* Temarix Logo - Fixed Left Top */
.temarix-logo {
  position: fixed;
  top: 20px;
  left: 20px;
  z-index: 1000;
}

.logo-text {
  font-size: 1.8rem;
  font-weight: bold;
  color: #ffffff;
  margin: 0 0 5px 0;
  text-shadow: 0 0 20px rgba(255,255,255,0.3);
}

.slogan {
  color: #bbb;
  font-style: italic;
  font-size: 0.8rem;
  margin: 0;
}

/* Language Selector - Fixed Right Top */
.lang-selector {
  position: fixed;
  top: 20px;
  right: 20px;
  display: flex;
  gap: 5px;
  flex-wrap: wrap;
  max-width: 120px;
  z-index: 1000;
}

.lang-btn {
  background: rgba(255,255,255,0.1);
  border: 1px solid rgba(255,255,255,0.3);
  color: white;
  padding: 4px 8px;
  border-radius: 12px;
  font-size: 0.7rem;
  cursor: pointer;
  transition: all 0.3s ease;
}

.lang-btn:hover {
  background: rgba(255,255,255,0.2);
}

.lang-btn.active {
  background: #9c27b0;
  border-color: #9c27b0;
}

/* Portal Header - Center Top */
.portal-header {
  text-align: center;
  margin: 40px 0 30px 0;
  padding-top: 40px;
}

.portal-header h1 {
  font-size: 2.2rem;
  margin: 10px 0;
  color: #ffd700;
}

.portal-header h2 {
  font-size: 1.3rem;
  color: #e1bee7;
  font-weight: 300;
}

/* Message Stream */
.message-stream {
  max-height: 60vh;
  overflow-y: auto;
  padding: 20px 0;
  margin-bottom: 20px;
}

.message-card {
  background: rgba(255,255,255,0.1);
  border-radius: 15px;
  padding: 20px;
  margin: 15px 0;
  backdrop-filter: blur(10px);
  opacity: 0;
  transform: translateY(20px);
  animation: fadeInUp 0.6s ease forwards;
}

.message-card.prologue {
  border-left: 4px solid #e1bee7;
}

.message-card.ely {
  border-left: 4px solid #ffd700;
}

.message-card.sora {
  border-left: 4px solid #4dd0e1;
}

.message-card.noah {
  border-left: 4px solid #9c27b0;
}

.message-card.enya {
  border-left: 4px solid #ff9800;
}

.message-card.kaia {
  border-left: 4px solid #607d8b;
}

.message-card.cris {
  border-left: 4px solid #4caf50;
}

.message-card.kael {
  border-left: 4px solid #f44336;
}

.message-card.mira {
  border-left: 4px solid #9e9e9e;
}

.message-card.light {
  border-left: 4px solid #ffffff;
  background: rgba(255,255,255,0.15);
}

.message-card.question {
  border-left: 4px solid #f48fb1;
}

.message-card.user-input {
  border-left: 4px solid #81c784;
  background: rgba(129, 199, 132, 0.1);
}

.character-name {
  font-weight: bold;
  margin-bottom: 10px;
  font-size: 1.1rem;
}

.ely .character-name { color: #ffd700; }
.sora .character-name { color: #4dd0e1; }
.noah .character-name { color: #9c27b0; }
.enya .character-name { color: #ff9800; }
.kaia .character-name { color: #607d8b; }
.cris .character-name { color: #4caf50; }
.kael .character-name { color: #f44336; }
.mira .character-name { color: #9e9e9e; }

.message-text {
  line-height: 1.6;
  font-size: 1rem;
}

.typewriter {
  overflow: hidden;
  border-right: 2px solid rgba(255,255,255,0.7);
  white-space: nowrap;
  animation: blink-caret 1s step-end infinite;
}

@keyframes fadeInUp {
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes blink-caret {
  from, to { border-color: transparent; }
  50% { border-color: rgba(255,255,255,0.7); }
}

/* Input Area */
.input-area {
  background: rgba(0,0,0,0.3);
  padding: 20px;
  border-radius: 15px;
  margin: 20px 0;
  animation: fadeInUp 0.6s ease forwards;
}

.input-container textarea {
  width: 100%;
  background: rgba(255,255,255,0.1);
  border: 1px solid rgba(255,255,255,0.3);
  border-radius: 10px;
  padding: 15px;
  color: white;
  font-size: 1rem;
  resize: vertical;
  min-height: 80px;
  box-sizing: border-box;
}

.input-container textarea::placeholder {
  color: rgba(255,255,255,0.6);
}

.submit-btn {
  background: linear-gradient(135deg, #9c27b0, #e1bee7);
  border: none;
  color: white;
  padding: 12px 30px;
  border-radius: 25px;
  font-size: 1rem;
  cursor: pointer;
  margin-top: 10px;
  transition: all 0.3s ease;
  width: 100%;
}

.submit-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 5px 15px rgba(156, 39, 176, 0.4);
}

.input-hint {
  color: rgba(255,255,255,0.6);
  font-size: 0.8rem;
  text-align: center;
  margin: 8px 0 0 0;
}

/* Next Portal Navigation */
.next-portal-nav {
  text-align: center;
  margin: 30px 0;
  animation: fadeInUp 0.6s ease forwards;
}

.nav-buttons {
  display: flex;
  gap: 20px;
  justify-content: center;
}

.nav-btn {
  padding: 12px 30px;
  border-radius: 25px;
  font-size: 1rem;
  cursor: pointer;
  transition: all 0.3s ease;
  border: 2px solid transparent;
}

.yes-btn {
  background: linear-gradient(135deg, #4caf50, #81c784);
  color: white;
  border-color: #4caf50;
}

.yes-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 5px 15px rgba(76, 175, 80, 0.4);
}

.no-btn {
  background: rgba(255,255,255,0.1);
  color: white;
  border-color: rgba(255,255,255,0.3);
}

.no-btn:hover {
  background: rgba(255,255,255,0.2);
}

/* Back to Main */
.back-to-main {
  text-align: center;
  margin: 30px 0;
}

.back-to-main button {
  background: rgba(255,255,255,0.1);
  border: 1px solid rgba(255,255,255,0.3);
  color: white;
  padding: 10px 20px;
  border-radius: 20px;
  cursor: pointer;
  transition: all 0.3s ease;
}

.back-to-main button:hover {
  background: rgba(255,255,255,0.2);
}

/* Mobile Responsive */
@media (max-width: 768px) {
  .portal {
    padding: 100px 15px 20px 15px;
  }
  
  .temarix-logo {
    top: 15px;
    left: 15px;
  }
  
  .logo-text {
    font-size: 1.4rem;
  }
  
  .slogan {
    font-size: 0.7rem;
  }
  
  .lang-selector {
    top: 15px;
    right: 15px;
    max-width: 100px;
  }
  
  .lang-btn {
    padding: 3px 6px;
    font-size: 0.6rem;
  }
  
  .portal-header h1 {
    font-size: 1.8rem;
  }
  
  .portal-header h2 {
    font-size: 1.1rem;
  }
  
  .message-card {
    padding: 15px;
  }
  
  .nav-buttons {
    flex-direction: column;
    align-items: center;
  }
  
  .nav-btn {
    width: 200px;
  }
}
</style>

<script>
// Portal 11 Complete Data with Character Responses
const portal11Data = {
  kr: {
    title: "ê°ì •ì˜ ë¬¸ì§€ë°© 11",
    subtitle: "ë‹¤ì‹œ í”¼ì–´ë‚˜ëŠ” ê°ì •ì˜ ê½ƒ",
    prologue: "ì˜¤ë«ë™ì•ˆ ì–¼ì–´ë¶™ì–´ ìˆë˜ ë§ˆìŒì˜ ë•…ì—ì„œ ì‘ì€ ìƒˆì‹¹ì´ ë‹ì•„ë‚˜ê¸° ì‹œì‘í•©ë‹ˆë‹¤. ë¬´ëŒì¡Œë‹¤ê³  ìƒê°í–ˆë˜ ê°ì •ë“¤ì´ ì¡°ì‹¬ìŠ¤ëŸ½ê²Œ ê³ ê°œë¥¼ ë“¤ê³ , ìŠì—ˆë‹¤ê³  ì—¬ê²¼ë˜ ë”°ëœ»í•¨ì´ ë‹¤ì‹œ ìŠ¤ë©°ë“¤ì–´ ì˜µë‹ˆë‹¤. ì´ê²ƒì€ ìƒˆë¡œìš´ ì‹œì‘ì˜ ì‹ í˜¸ì¼ê¹Œìš”? ë©”ë§ˆë¥¸ ë§ˆìŒì—ì„œ í”¼ì–´ë‚˜ëŠ” ì²« ë²ˆì§¸ ê½ƒì²˜ëŸ¼, ë‹¹ì‹  ì•ˆì—ì„œë„ ë¬´ì–¸ê°€ê°€ ë‹¤ì‹œ ì›€íŠ¸ê³  ìˆëŠ” ê²ƒì€ ì•„ë‹Œê°€ìš”?",
    ely: "ê°ì •ì´ ë‹¤ì‹œ í”¼ì–´ë‚˜ëŠ” ê²ƒì€ ìš©ê¸° ìˆëŠ” ì¼ì´ì—ìš”. ê·¸ ì‘ì€ ê½ƒ í•œ ì†¡ì´ê°€ ë‹¹ì‹ ì˜ ë´„ì„ ë¶ˆëŸ¬ì˜¬ ê±°ì˜ˆìš”.",
    sora: "ì¡°ì‹¬ìŠ¤ëŸ½ê²Œ ë‹¤ê°€ì˜¤ëŠ” ê°ì •ë“¤ì„ ëŠê»´ìš”. ì´ì œëŠ” ì•ˆì „í•˜ê²Œ ê½ƒí”¼ìš¸ ìˆ˜ ìˆëŠ” ë§ˆìŒì˜ ë•…ì´ ì¤€ë¹„ëœ ê²ƒ ê°™ì•„ìš”.",
    noah: "ì˜¤ëœ ê²¨ìš¸ì„ ê²¬ëŒë‚¸ ë§ˆìŒì—ì„œ í”¼ì–´ë‚˜ëŠ” ê½ƒì€ ë”ìš± ì†Œì¤‘í•´ìš”. ê·¸ ì„±ì¥ì„ ì§€ì¼œë´ ì£¼ì„¸ìš”.",
    enya: "ë‚˜ëŠ” ë‹¹ì‹ ì˜ ë§ˆìŒì´ ë‹¤ì‹œ ë”°ëœ»í•´ì§€ëŠ” ê²ƒì„ ëŠê»´ìš”. ê·¸ ì˜¨ê¸°ë¥¼ í•¨ê»˜ ë‚˜ëˆ„ê³  ì‹¶ì–´ìš”.",
    kaia: "ë§ì—†ì´ ê¸°ë‹¤ë ¸ë˜ ì‹œê°„ë“¤ì´ í—›ë˜ì§€ ì•Šì•˜ì–´ìš”. ì´ì œ í”¼ì–´ë‚˜ëŠ” ê°ì •ë“¤ì´ ê·¸ ì¦ê±°ì˜ˆìš”.",
    cris: "ê½ƒì´ í”¼ë„¤! ë‚´ ë§ˆìŒë„ ë²šê½ƒì²˜ëŸ¼ í™• í”¼ì–´ë²„ë ¸ì–´~ ê·¼ë° ì´ì œ ê½ƒê°€ë£¨ ì•Œë ˆë¥´ê¸°ê°€ ë¬¸ì œì•¼! ğŸŒ¸ğŸ˜‚",
    kael: "ë“œë””ì–´ ì¢€ ì‚´ì•„ë‚˜ëŠ”êµ¬ë‚˜. ê·¸ ê°ì •ë“¤, ì´ë²ˆì—” ì œëŒ€ë¡œ ë°›ì•„ë“¤ì—¬. ë‹¤ì‹œ ìˆ¨ê¸°ì§€ ë§ê³ .",
    mira: "í˜¹ì‹œ... ì´ë ‡ê²Œ ë‹¤ì‹œ ê°ì •ì´ í”¼ì–´ë‚˜ëŠ” ê²Œ ë‘ë µì§€ëŠ” ì•Šë‚˜ìš”? ë˜ ë‹¤ì‹œ ìƒì²˜ë°›ì„ê¹Œ ë´ì„œìš”.",
    light: "ë§ˆìŒì˜ ê½ƒì€ ëª¨ë“  ê³„ì ˆì„ ê²¬ë””ê³  í”¼ì–´ë‚©ë‹ˆë‹¤. ë‹¹ì‹ ì˜ ê°ì •ë„ ê·¸ëŸ° ê°•ì¸í•œ ì•„ë¦„ë‹¤ì›€ì„ ê°€ì§€ê³  ìˆì–´ìš”.",
    question: "ì§€ê¸ˆ ë‹¹ì‹ ì˜ ë§ˆìŒì—ì„œ ë‹¤ì‹œ í”¼ì–´ë‚˜ê³  ìˆëŠ” ê°ì •ì€ ë¬´ì—‡ì¸ê°€ìš”?",
    input: { 
      placeholder: "ì˜¤ë«ë™ì•ˆ ì ë“¤ì–´ ìˆë˜ ë§ˆìŒì—ì„œ ë‹¤ì‹œ í”¼ì–´ë‚˜ê¸° ì‹œì‘í•œ ê°ì •ì„ ì¡°ìš©íˆ ì ì–´ë³´ì„¸ìš”...",
      hint: "Enter í‚¤ë¥¼ ëˆŒëŸ¬ë„ ì „ë‹¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤"
    },
    submit: "ğŸŒ¸ ê°ì •ì˜ ê½ƒ í”¼ìš°ê¸°",
    slogan: "ë‹¹ì‹  ì•ˆì— ìˆ¨ì€ ì´ì•¼ê¸°ë¥¼ ë§ í•´ ì£¼ì„¸ìš”",
    response_ely: "ê·¸ ì•„ë¦„ë‹¤ìš´ ê°ì •ì´ ë‹¤ì‹œ í”¼ì–´ë‚˜ê³  ìˆêµ°ìš”. ì´ì œ ê·¸ ê½ƒì„ ì†Œì¤‘íˆ í‚¤ì›Œê°€ì„¸ìš”.",
    response_sora: "ë‹¤ì‹œ ì‚´ì•„ë‚˜ëŠ” ê·¸ ê°ì •ì˜ ë”°ëœ»í•¨ì´ ëŠê»´ì ¸ìš”. ì´ì œëŠ” ì•ˆì „í•˜ê²Œ ì„±ì¥í•  ìˆ˜ ìˆì„ ê±°ì˜ˆìš”.",
    response_noah: "ì˜¤ëœ ê¸°ë‹¤ë¦¼ ëì— í”¼ì–´ë‚œ ê°ì •ì˜ ê½ƒì´êµ°ìš”. ì´ì œ ìƒˆë¡œìš´ ì •ì›ì´ í¼ì³ì§ˆ ì‹œê°„ì…ë‹ˆë‹¤.\n\nğŸ‘‰ ë‹¤ìŒ ë¬¸ì§€ë°©ìœ¼ë¡œ í•¨ê»˜ ê°€ë„ ê´œì°®ì„ê¹Œìš”?",
    user_input_prefix: "ë‹¹ì‹ ì˜ ë§ˆìŒì—ì„œ ë‹¤ì‹œ í”¼ì–´ë‚˜ëŠ” ê°ì •:",
    yes: "ì˜ˆ",
    no: "ì•„ë‹ˆìš”"
  },
  en: {
    title: "Emotional Threshold 11",
    subtitle: "The Blooming Flower of Emotions",
    prologue: "Small sprouts begin to emerge from the frozen ground of your heart that has been cold for so long. Emotions you thought had become numb cautiously raise their heads, and warmth you thought was forgotten seeps back in. Is this a sign of a new beginning? Like the first flower blooming in a barren heart, isn't something sprouting again within you?",
    ely: "Emotions blooming again is a courageous thing. That one small flower will bring your spring.",
    sora: "I feel the emotions approaching cautiously. It seems like the soil of your heart is now ready for safe blooming.",
    noah: "Flowers that bloom from a heart that endured a long winter are more precious. Please watch over that growth.",
    enya: "I feel your heart becoming warm again. I want to share that warmth with you.",
    kaia: "The time spent waiting silently wasn't in vain. The emotions now blooming are proof of that.",
    cris: "Flowers are blooming! My heart bloomed like cherry blossoms too~ But now pollen allergy is the problem! ğŸŒ¸ğŸ˜‚",
    kael: "Finally coming back to life. Accept those emotions properly this time. Don't hide them again.",
    mira: "Perhaps... aren't you afraid of emotions blooming again like this? Worried about getting hurt again?",
    light: "The flowers of the heart bloom after enduring all seasons. Your emotions have that same resilient beauty.",
    question: "What emotion is blooming again in your heart right now?",
    input: { 
      placeholder: "Quietly write about the emotions beginning to bloom again in your long-sleeping heart...",
      hint: "You can also press Enter to submit"
    },
    submit: "ğŸŒ¸ Bloom the Flower of Emotions",
    slogan: "Please tell me the story hidden within you",
    response_ely: "That beautiful emotion is blooming again. Now cherish and nurture that flower.",
    response_sora: "I feel the warmth of that emotion coming back to life. Now it can grow safely.",
    response_noah: "It's a flower of emotion that bloomed after a long wait. Now it's time for a new garden to unfold.\n\nğŸ‘‰ Shall we go to the next threshold together?",
    user_input_prefix: "The emotion blooming again in your heart:",
    yes: "Yes",
    no: "No"
  },
  pt: {
    title: "Limiar Emocional 11",
    subtitle: "A Flor Florescente das EmoÃ§Ãµes",
    prologue: "Pequenos brotos comeÃ§am a emergir do solo congelado do seu coraÃ§Ã£o que esteve frio por tanto tempo. EmoÃ§Ãµes que vocÃª pensou que se tornaram entorpecidas levantam cautelosamente suas cabeÃ§as, e o calor que vocÃª pensou ter esquecido se infiltra novamente. Isso Ã© um sinal de um novo comeÃ§o? Como a primeira flor florescendo em um coraÃ§Ã£o Ã¡rido, nÃ£o estÃ¡ algo brotando novamente dentro de vocÃª?",
    ely: "EmoÃ§Ãµes florescendo novamente Ã© algo corajoso. Essa pequena flor trarÃ¡ sua primavera.",
    sora: "Sinto as emoÃ§Ãµes se aproximando cautelosamente. Parece que o solo do seu coraÃ§Ã£o agora estÃ¡ pronto para um florescimento seguro.",
    noah: "Flores que florescem de um coraÃ§Ã£o que suportou um longo inverno sÃ£o mais preciosas. Por favor, cuide desse crescimento.",
    enya: "Sinto seu coraÃ§Ã£o se aquecendo novamente. Quero compartilhar esse calor com vocÃª.",
    kaia: "O tempo gasto esperando silenciosamente nÃ£o foi em vÃ£o. As emoÃ§Ãµes agora florescendo sÃ£o prova disso.",
    cris: "Flores estÃ£o florescendo! Meu coraÃ§Ã£o floresceu como cerejeiras tambÃ©m~ Mas agora alergia ao pÃ³len Ã© o problema! ğŸŒ¸ğŸ˜‚",
    kael: "Finalmente voltando Ã  vida. Aceite essas emoÃ§Ãµes adequadamente desta vez. NÃ£o as esconda novamente.",
    mira: "Talvez... vocÃª nÃ£o tem medo das emoÃ§Ãµes florescendo novamente assim? Preocupado em se machucar novamente?",
    light: "As flores do coraÃ§Ã£o florescem apÃ³s suportar todas as estaÃ§Ãµes. Suas emoÃ§Ãµes tÃªm essa mesma beleza resiliente.",
    question: "Que emoÃ§Ã£o estÃ¡ florescendo novamente em seu coraÃ§Ã£o agora?",
    input: { 
      placeholder: "Escreva silenciosamente sobre as emoÃ§Ãµes comeÃ§ando a florescer novamente em seu coraÃ§Ã£o adormecido...",
      hint: "VocÃª tambÃ©m pode pressionar Enter para enviar"
    },
    submit: "ğŸŒ¸ Florescer a Flor das EmoÃ§Ãµes",
    slogan: "Por favor, me conte a histÃ³ria escondida dentro de vocÃª",
    response_ely: "Essa bela emoÃ§Ã£o estÃ¡ florescendo novamente. Agora valorize e nutra essa flor.",
    response_sora: "Sinto o calor dessa emoÃ§Ã£o voltando Ã  vida. Agora pode crescer com seguranÃ§a.",
    response_noah: "Ã‰ uma flor de emoÃ§Ã£o que floresceu apÃ³s uma longa espera. Agora Ã© hora de um novo jardim se desdobrar.\n\nğŸ‘‰ Vamos para o prÃ³ximo limiar juntos?",
    user_input_prefix: "A emoÃ§Ã£o florescendo novamente em seu coraÃ§Ã£o:",
    yes: "Sim",
    no: "NÃ£o"
  },
  
};

// Current language and state for Portal 11
let currentLang11 = 'kr';
let userInputText11 = '';

// Initialize Portal 11
function initPortal11() {
  displayInitialMessages11();
  setupLanguageSwitching11();
  setupEnterKeySubmission11();
}

// Display initial messages with typing effect
async function displayInitialMessages11() {
  const stream = document.getElementById('messageStream11');
  const messages = [
    { type: 'prologue', content: portal11Data[currentLang11].prologue },
    { type: 'ely', name: 'ğŸ‘‘ Ely', content: portal11Data[currentLang11].ely },
    { type: 'sora', name: 'ğŸ’§ Sora', content: portal11Data[currentLang11].sora },
    { type: 'noah', name: 'ğŸ§™â€â™‚ï¸ Noah', content: portal11Data[currentLang11].noah },
    { type: 'enya', name: 'ğŸ•¯ï¸ Enya', content: portal11Data[currentLang11].enya },
    { type: 'kaia', name: 'ğŸ˜¶ Kaia', content: portal11Data[currentLang11].kaia },
    { type: 'cris', name: 'ğŸƒ Cris', content: portal11Data[currentLang11].cris },
    { type: 'kael', name: 'ğŸ’¥ Kael', content: portal11Data[currentLang11].kael },
    { type: 'mira', name: 'ğŸŒ«ï¸ Mira', content: portal11Data[currentLang11].mira },
    { type: 'light', content: portal11Data[currentLang11].light },
    { type: 'question', content: portal11Data[currentLang11].question }
  ];

  for (let i = 0; i < messages.length; i++) {
    const messageCard = createMessageCard11(messages[i]);
    stream.appendChild(messageCard);
    stream.scrollTo({ top: stream.scrollHeight, behavior: 'smooth' });
    
    await typeText11(messageCard.querySelector('.message-text'), messages[i].content);
    await sleep11(1200);
  }
  
  // Show input area after all messages
  document.getElementById('inputArea11').style.display = 'block';
}

// Setup Enter key submission
function setupEnterKeySubmission11() {
  document.getElementById('userInput11').addEventListener('keydown', function(e) {
    if (e.key === 'Enter' && !e.shiftKey) {
      e.preventDefault();
      submitResponse(11);
    }
  });
}

// Display character responses after user input
async function displayCharacterResponses11(userInput) {
  const stream = document.getElementById('messageStream11');
  
  // Show user input first
  const userCard = createMessageCard11({
    type: 'user-input',
    content: `${portal11Data[currentLang11].user_input_prefix}\n"${userInput}"`
  });
  stream.appendChild(userCard);
  stream.scrollTo({ top: stream.scrollHeight, behavior: 'smooth' });
  await typeText11(userCard.querySelector('.message-text'), userCard.querySelector('.message-text').textContent);
  await sleep11(1500);
  
  // Character responses
  const responses = [
    { type: 'ely', name: 'ğŸ‘‘ Ely', content: `"${userInput}"... ${portal11Data[currentLang11].response_ely}` },
    { type: 'sora', name: 'ğŸ’§ Sora', content: `${portal11Data[currentLang11].response_sora}` },
    { type: 'noah', name: 'ğŸ§™â€â™‚ï¸ Noah', content: `"${userInput}" ${portal11Data[currentLang11].response_noah}` }
  ];

  for (let i = 0; i < responses.length; i++) {
    const responseCard = createMessageCard11(responses[i]);
    stream.appendChild(responseCard);
    stream.scrollTo({ top: stream.scrollHeight, behavior: 'smooth' });
    
    await typeText11(responseCard.querySelector('.message-text'), responses[i].content);
    await sleep11(1500);
  }
  
  // Show navigation buttons
  document.getElementById('nextPortalNav11').style.display = 'block';
}

function createMessageCard11(message) {
  const card = document.createElement('div');
  card.className = `message-card ${message.type}`;
  
  let cardHTML = '';
  if (message.name) {
    cardHTML += `<div class="character-name">${message.name}</div>`;
  }
  cardHTML += `<div class="message-text">${message.content || ''}</div>`;
  
  card.innerHTML = cardHTML;
  return card;
}

async function typeText11(element, text, speed = 80) {
  return new Promise((resolve) => {
    let i = 0;
    element.textContent = '';
    element.classList.add('typewriter');
    
    const timer = setInterval(() => {
      if (i < text.length) {
        element.textContent += text.charAt(i);
        i++;
      } else {
        clearInterval(timer);
        element.classList.remove('typewriter');
        resolve();
      }
    }, speed);
  });
}

function sleep11(ms) {
  return new Promise(resolve => setTimeout(resolve, ms));
}

function setupLanguageSwitching11() {
  document.querySelectorAll('.lang-btn').forEach(btn => {
    btn.addEventListener('click', () => {
      const newLang = btn.dataset.lang;
      if (portal11Data[newLang] && newLang !== currentLang11) {
        document.querySelectorAll('.lang-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        currentLang11 = newLang;
        document.getElementById('messageStream11').innerHTML = '';
        document.getElementById('inputArea11').style.display = 'none';
        document.getElementById('nextPortalNav11').style.display = 'none';
        displayInitialMessages11();
        updatePortalTexts11();
      }
    });
  });
}

function updatePortalTexts11() {
  // Update title and subtitle
  document.querySelector('[data-i18n="portal11.title"]').textContent = portal11Data[currentLang11].title;
  document.querySelector('[data-i18n="portal11.subtitle"]').textContent = portal11Data[currentLang11].subtitle;
  
  // Update slogan
  document.querySelector('[data-i18n="common.slogan"]').textContent = portal11Data[currentLang11].slogan;
  
  // Update placeholder and hint
  document.getElementById('userInput11').placeholder = portal11Data[currentLang11].input.placeholder;
  document.querySelector('[data-i18n="portal11.input.hint"]').textContent = portal11Data[currentLang11].input.hint;
  
  // Update submit button
  document.querySelector('[data-i18n="portal11.submit"]').textContent = portal11Data[currentLang11].submit;
  
  // Update navigation buttons
  const yesBtn = document.querySelector('[data-i18n="common.yes"]');
  const noBtn = document.querySelector('[data-i18n="common.no"]');
  if (yesBtn) yesBtn.textContent = portal11Data[currentLang11].yes;
  if (noBtn) noBtn.textContent = portal11Data[currentLang11].no;
  
  // Update back to main button
  document.querySelector('[data-i18n="common.back_to_main"]').textContent = 
    currentLang11 === 'kr' ? 'ğŸ  ë©”ì¸ í¬íƒˆë¡œ ëŒì•„ê°€ê¸°' :
    currentLang11 === 'en' ? 'ğŸ  Back to Main Portal' :
    currentLang11 === 'pt' ? 'ğŸ  Voltar ao Portal Principal' :
    'ğŸ  ë©”ì¸ í¬íƒˆë¡œ ëŒì•„ê°€ê¸°';
}

function submitResponse(portalNum) {
  if (portalNum !== 11) return;
  
  const input = document.getElementById(`userInput${portalNum}`);
  const response = input.value.trim();
  
  if (response) {
    userInputText11 = response;
    
    // Hide input area
    document.getElementById(`inputArea${portalNum}`).style.display = 'none';
    
    // Display character responses
    displayCharacterResponses11(response);
    
    // Clear input
    input.value = '';
  } else {
    // No alert, just focus on input
    input.focus();
    input.style.borderColor = '#f48fb1';
    setTimeout(() => {
      input.style.borderColor = 'rgba(255,255,255,0.3)';
    }, 2000);
  }
}

function stayInPortal() {
  document.getElementById('nextPortalNav11').style.display = 'none';
  document.getElementById('inputArea11').style.display = 'block';
  document.getElementById('userInput11').focus();
}

function goToNextPortal(nextNumber) {
  const nextUrl = `temarix_v1_${String(nextNumber).padStart(2, '0')}.html`;
  window.location.href = nextUrl;
}

// Initialize when DOM is loaded
document.addEventListener('DOMContentLoaded', () => {
  if (document.getElementById('portal-11')) {
    initPortal11();
  }
});
</script>
</body>
</html>