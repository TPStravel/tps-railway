<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta http-equiv="Content-Language" content="ko,en,pt">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Temarix V1 - Portal 11</title>
</head>
<body>
<!-- Temarix V1 - Portal 11: 다시 피어나는 감정의 꽃 -->
<section class="portal portal-11" id="portal-11">
  <!-- Temarix Logo - Fixed Left Top -->
  <div class="temarix-logo">
    <h1 class="logo-text">🌌 TEMARIX</h1>
    <p class="slogan" data-i18n="common.slogan">당신 안에 숨은 이야기를 말 해 주세요</p>
  </div>

  <!-- Language Selector - Fixed Right Top -->
  <div class="lang-selector">
    <button class="lang-btn active" data-lang="kr">KR</button>
    <button class="lang-btn" data-lang="en">EN</button>
    <button class="lang-btn" data-lang="pt">PT</button>
  </div>

  <!-- Portal Header - Center Top -->
  <div class="portal-header">
    <h1 data-i18n="portal11.title">감정의 문지방 11</h1>
    <h2 data-i18n="portal11.subtitle">다시 피어나는 감정의 꽃</h2>
  </div>

  <!-- Message Stream -->
  <div class="message-stream" id="messageStream11">
    <!-- Messages will be added here via JavaScript -->
  </div>

  <!-- User Input Area -->
  <div class="input-area" id="inputArea11" style="display: none;">
    <div class="input-container">
      <textarea 
        id="userInput11" 
        rows="3" 
        placeholder="오랫동안 잠들어 있던 마음에서 다시 피어나기 시작한 감정을 조용히 적어보세요..."
        data-i18n-placeholder="portal11.input.placeholder"
      ></textarea>
      <button class="submit-btn" onclick="submitResponse(11)">
        <span data-i18n="portal11.submit">🌸 감정의 꽃 피우기</span>
      </button>
      <p class="input-hint" data-i18n="portal11.input.hint">Enter 키를 눌러도 전달할 수 있습니다</p>
    </div>
  </div>

  <!-- Next Portal Navigation -->
  <div class="next-portal-nav" id="nextPortalNav11" style="display: none;">
    <div class="nav-buttons">
      <button class="nav-btn yes-btn" onclick="goToNextPortal(12)" data-i18n="common.yes">예</button>
      <button class="nav-btn no-btn" onclick="stayInPortal()" data-i18n="common.no">아니요</button>
    </div>
  </div>

  <!-- Back to Main -->
  <div class="back-to-main">
    <button onclick="window.location.href='portal4.html'" data-i18n="common.back_to_main">
      🏠 메인 포탈로 돌아가기
    </button>
  </div>
</section>

<style>
/* Portal Base Styles */
.portal {
  min-height: 100vh;
  background: linear-gradient(135deg, #1a1b4b 0%, #2d1b69 100%);
  color: white;
  padding: 80px 20px 20px 20px;
  font-family: 'Apple SD Gothic Neo', -apple-system, BlinkMacSystemFont, sans-serif;
  max-width: 100%;
  margin: 0 auto;
  position: relative;
}

/* Logo Glow Animation */
@keyframes glowCycle {
  0%, 100% { text-shadow: 0 0 8px rgba(255,255,255,0.2); }
  50% { text-shadow: 0 0 25px rgba(255,255,255,0.7); }
}

/* Temarix Logo - Fixed Left Top */
.temarix-logo {
  position: fixed;
  top: 20px;
  left: 20px;
  z-index: 1000;
}

.logo-text {
  font-size: 1.8rem;
  font-weight: bold;
  color: #ffffff;
  margin: 0 0 5px 0;
  text-shadow: 0 0 20px rgba(255,255,255,0.3);
}

.slogan {
  color: #bbb;
  font-style: italic;
  font-size: 0.8rem;
  margin: 0;
}

/* Language Selector - Fixed Right Top */
.lang-selector {
  position: fixed;
  top: 20px;
  right: 20px;
  display: flex;
  gap: 5px;
  flex-wrap: wrap;
  max-width: 120px;
  z-index: 1000;
}

.lang-btn {
  background: rgba(255,255,255,0.1);
  border: 1px solid rgba(255,255,255,0.3);
  color: white;
  padding: 4px 8px;
  border-radius: 12px;
  font-size: 0.7rem;
  cursor: pointer;
  transition: all 0.3s ease;
}

.lang-btn:hover {
  background: rgba(255,255,255,0.2);
}

.lang-btn.active {
  background: #9c27b0;
  border-color: #9c27b0;
}

/* Portal Header - Center Top */
.portal-header {
  text-align: center;
  margin: 40px 0 30px 0;
  padding-top: 40px;
}

.portal-header h1 {
  font-size: 2.2rem;
  margin: 10px 0;
  color: #ffd700;
}

.portal-header h2 {
  font-size: 1.3rem;
  color: #e1bee7;
  font-weight: 300;
}

/* Message Stream */
.message-stream {
  max-height: 60vh;
  overflow-y: auto;
  padding: 20px 0;
  margin-bottom: 20px;
}

.message-card {
  background: rgba(255,255,255,0.1);
  border-radius: 15px;
  padding: 20px;
  margin: 15px 0;
  backdrop-filter: blur(10px);
  opacity: 0;
  transform: translateY(20px);
  animation: fadeInUp 0.6s ease forwards;
}

.message-card.prologue {
  border-left: 4px solid #e1bee7;
}

.message-card.ely {
  border-left: 4px solid #ffd700;
}

.message-card.sora {
  border-left: 4px solid #4dd0e1;
}

.message-card.noah {
  border-left: 4px solid #9c27b0;
}

.message-card.enya {
  border-left: 4px solid #ff9800;
}

.message-card.kaia {
  border-left: 4px solid #607d8b;
}

.message-card.cris {
  border-left: 4px solid #4caf50;
}

.message-card.kael {
  border-left: 4px solid #f44336;
}

.message-card.mira {
  border-left: 4px solid #9e9e9e;
}

.message-card.light {
  border-left: 4px solid #ffffff;
  background: rgba(255,255,255,0.15);
}

.message-card.question {
  border-left: 4px solid #f48fb1;
}

.message-card.user-input {
  border-left: 4px solid #81c784;
  background: rgba(129, 199, 132, 0.1);
}

.character-name {
  font-weight: bold;
  margin-bottom: 10px;
  font-size: 1.1rem;
}

.ely .character-name { color: #ffd700; }
.sora .character-name { color: #4dd0e1; }
.noah .character-name { color: #9c27b0; }
.enya .character-name { color: #ff9800; }
.kaia .character-name { color: #607d8b; }
.cris .character-name { color: #4caf50; }
.kael .character-name { color: #f44336; }
.mira .character-name { color: #9e9e9e; }

.message-text {
  line-height: 1.6;
  font-size: 1rem;
}

.typewriter {
  overflow: hidden;
  border-right: 2px solid rgba(255,255,255,0.7);
  white-space: nowrap;
  animation: blink-caret 1s step-end infinite;
}

@keyframes fadeInUp {
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes blink-caret {
  from, to { border-color: transparent; }
  50% { border-color: rgba(255,255,255,0.7); }
}

/* Input Area */
.input-area {
  background: rgba(0,0,0,0.3);
  padding: 20px;
  border-radius: 15px;
  margin: 20px 0;
  animation: fadeInUp 0.6s ease forwards;
}

.input-container textarea {
  width: 100%;
  background: rgba(255,255,255,0.1);
  border: 1px solid rgba(255,255,255,0.3);
  border-radius: 10px;
  padding: 15px;
  color: white;
  font-size: 1rem;
  resize: vertical;
  min-height: 80px;
  box-sizing: border-box;
}

.input-container textarea::placeholder {
  color: rgba(255,255,255,0.6);
}

.submit-btn {
  background: linear-gradient(135deg, #9c27b0, #e1bee7);
  border: none;
  color: white;
  padding: 12px 30px;
  border-radius: 25px;
  font-size: 1rem;
  cursor: pointer;
  margin-top: 10px;
  transition: all 0.3s ease;
  width: 100%;
}

.submit-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 5px 15px rgba(156, 39, 176, 0.4);
}

.input-hint {
  color: rgba(255,255,255,0.6);
  font-size: 0.8rem;
  text-align: center;
  margin: 8px 0 0 0;
}

/* Next Portal Navigation */
.next-portal-nav {
  text-align: center;
  margin: 30px 0;
  animation: fadeInUp 0.6s ease forwards;
}

.nav-buttons {
  display: flex;
  gap: 20px;
  justify-content: center;
}

.nav-btn {
  padding: 12px 30px;
  border-radius: 25px;
  font-size: 1rem;
  cursor: pointer;
  transition: all 0.3s ease;
  border: 2px solid transparent;
}

.yes-btn {
  background: linear-gradient(135deg, #4caf50, #81c784);
  color: white;
  border-color: #4caf50;
}

.yes-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 5px 15px rgba(76, 175, 80, 0.4);
}

.no-btn {
  background: rgba(255,255,255,0.1);
  color: white;
  border-color: rgba(255,255,255,0.3);
}

.no-btn:hover {
  background: rgba(255,255,255,0.2);
}

/* Back to Main */
.back-to-main {
  text-align: center;
  margin: 30px 0;
}

.back-to-main button {
  background: rgba(255,255,255,0.1);
  border: 1px solid rgba(255,255,255,0.3);
  color: white;
  padding: 10px 20px;
  border-radius: 20px;
  cursor: pointer;
  transition: all 0.3s ease;
}

.back-to-main button:hover {
  background: rgba(255,255,255,0.2);
}

/* Mobile Responsive */
@media (max-width: 768px) {
  .portal {
    padding: 100px 15px 20px 15px;
  }
  
  .temarix-logo {
    top: 15px;
    left: 15px;
  }
  
  .logo-text {
    font-size: 1.4rem;
  }
  
  .slogan {
    font-size: 0.7rem;
  }
  
  .lang-selector {
    top: 15px;
    right: 15px;
    max-width: 100px;
  }
  
  .lang-btn {
    padding: 3px 6px;
    font-size: 0.6rem;
  }
  
  .portal-header h1 {
    font-size: 1.8rem;
  }
  
  .portal-header h2 {
    font-size: 1.1rem;
  }
  
  .message-card {
    padding: 15px;
  }
  
  .nav-buttons {
    flex-direction: column;
    align-items: center;
  }
  
  .nav-btn {
    width: 200px;
  }
}
</style>

<script>
// Portal 11 Complete Data with Character Responses
const portal11Data = {
  kr: {
    title: "감정의 문지방 11",
    subtitle: "다시 피어나는 감정의 꽃",
    prologue: "오랫동안 얼어붙어 있던 마음의 땅에서 작은 새싹이 돋아나기 시작합니다. 무뎌졌다고 생각했던 감정들이 조심스럽게 고개를 들고, 잊었다고 여겼던 따뜻함이 다시 스며들어 옵니다. 이것은 새로운 시작의 신호일까요? 메마른 마음에서 피어나는 첫 번째 꽃처럼, 당신 안에서도 무언가가 다시 움트고 있는 것은 아닌가요?",
    ely: "감정이 다시 피어나는 것은 용기 있는 일이에요. 그 작은 꽃 한 송이가 당신의 봄을 불러올 거예요.",
    sora: "조심스럽게 다가오는 감정들을 느껴요. 이제는 안전하게 꽃피울 수 있는 마음의 땅이 준비된 것 같아요.",
    noah: "오랜 겨울을 견뎌낸 마음에서 피어나는 꽃은 더욱 소중해요. 그 성장을 지켜봐 주세요.",
    enya: "나는 당신의 마음이 다시 따뜻해지는 것을 느껴요. 그 온기를 함께 나누고 싶어요.",
    kaia: "말없이 기다렸던 시간들이 헛되지 않았어요. 이제 피어나는 감정들이 그 증거예요.",
    cris: "꽃이 피네! 내 마음도 벚꽃처럼 확 피어버렸어~ 근데 이제 꽃가루 알레르기가 문제야! 🌸😂",
    kael: "드디어 좀 살아나는구나. 그 감정들, 이번엔 제대로 받아들여. 다시 숨기지 말고.",
    mira: "혹시... 이렇게 다시 감정이 피어나는 게 두렵지는 않나요? 또 다시 상처받을까 봐서요.",
    light: "마음의 꽃은 모든 계절을 견디고 피어납니다. 당신의 감정도 그런 강인한 아름다움을 가지고 있어요.",
    question: "지금 당신의 마음에서 다시 피어나고 있는 감정은 무엇인가요?",
    input: { 
      placeholder: "오랫동안 잠들어 있던 마음에서 다시 피어나기 시작한 감정을 조용히 적어보세요...",
      hint: "Enter 키를 눌러도 전달할 수 있습니다"
    },
    submit: "🌸 감정의 꽃 피우기",
    slogan: "당신 안에 숨은 이야기를 말 해 주세요",
    response_ely: "그 아름다운 감정이 다시 피어나고 있군요. 이제 그 꽃을 소중히 키워가세요.",
    response_sora: "다시 살아나는 그 감정의 따뜻함이 느껴져요. 이제는 안전하게 성장할 수 있을 거예요.",
    response_noah: "오랜 기다림 끝에 피어난 감정의 꽃이군요. 이제 새로운 정원이 펼쳐질 시간입니다.\n\n👉 다음 문지방으로 함께 가도 괜찮을까요?",
    user_input_prefix: "당신의 마음에서 다시 피어나는 감정:",
    yes: "예",
    no: "아니요"
  },
  en: {
    title: "Emotional Threshold 11",
    subtitle: "The Blooming Flower of Emotions",
    prologue: "Small sprouts begin to emerge from the frozen ground of your heart that has been cold for so long. Emotions you thought had become numb cautiously raise their heads, and warmth you thought was forgotten seeps back in. Is this a sign of a new beginning? Like the first flower blooming in a barren heart, isn't something sprouting again within you?",
    ely: "Emotions blooming again is a courageous thing. That one small flower will bring your spring.",
    sora: "I feel the emotions approaching cautiously. It seems like the soil of your heart is now ready for safe blooming.",
    noah: "Flowers that bloom from a heart that endured a long winter are more precious. Please watch over that growth.",
    enya: "I feel your heart becoming warm again. I want to share that warmth with you.",
    kaia: "The time spent waiting silently wasn't in vain. The emotions now blooming are proof of that.",
    cris: "Flowers are blooming! My heart bloomed like cherry blossoms too~ But now pollen allergy is the problem! 🌸😂",
    kael: "Finally coming back to life. Accept those emotions properly this time. Don't hide them again.",
    mira: "Perhaps... aren't you afraid of emotions blooming again like this? Worried about getting hurt again?",
    light: "The flowers of the heart bloom after enduring all seasons. Your emotions have that same resilient beauty.",
    question: "What emotion is blooming again in your heart right now?",
    input: { 
      placeholder: "Quietly write about the emotions beginning to bloom again in your long-sleeping heart...",
      hint: "You can also press Enter to submit"
    },
    submit: "🌸 Bloom the Flower of Emotions",
    slogan: "Please tell me the story hidden within you",
    response_ely: "That beautiful emotion is blooming again. Now cherish and nurture that flower.",
    response_sora: "I feel the warmth of that emotion coming back to life. Now it can grow safely.",
    response_noah: "It's a flower of emotion that bloomed after a long wait. Now it's time for a new garden to unfold.\n\n👉 Shall we go to the next threshold together?",
    user_input_prefix: "The emotion blooming again in your heart:",
    yes: "Yes",
    no: "No"
  },
  pt: {
    title: "Limiar Emocional 11",
    subtitle: "A Flor Florescente das Emoções",
    prologue: "Pequenos brotos começam a emergir do solo congelado do seu coração que esteve frio por tanto tempo. Emoções que você pensou que se tornaram entorpecidas levantam cautelosamente suas cabeças, e o calor que você pensou ter esquecido se infiltra novamente. Isso é um sinal de um novo começo? Como a primeira flor florescendo em um coração árido, não está algo brotando novamente dentro de você?",
    ely: "Emoções florescendo novamente é algo corajoso. Essa pequena flor trará sua primavera.",
    sora: "Sinto as emoções se aproximando cautelosamente. Parece que o solo do seu coração agora está pronto para um florescimento seguro.",
    noah: "Flores que florescem de um coração que suportou um longo inverno são mais preciosas. Por favor, cuide desse crescimento.",
    enya: "Sinto seu coração se aquecendo novamente. Quero compartilhar esse calor com você.",
    kaia: "O tempo gasto esperando silenciosamente não foi em vão. As emoções agora florescendo são prova disso.",
    cris: "Flores estão florescendo! Meu coração floresceu como cerejeiras também~ Mas agora alergia ao pólen é o problema! 🌸😂",
    kael: "Finalmente voltando à vida. Aceite essas emoções adequadamente desta vez. Não as esconda novamente.",
    mira: "Talvez... você não tem medo das emoções florescendo novamente assim? Preocupado em se machucar novamente?",
    light: "As flores do coração florescem após suportar todas as estações. Suas emoções têm essa mesma beleza resiliente.",
    question: "Que emoção está florescendo novamente em seu coração agora?",
    input: { 
      placeholder: "Escreva silenciosamente sobre as emoções começando a florescer novamente em seu coração adormecido...",
      hint: "Você também pode pressionar Enter para enviar"
    },
    submit: "🌸 Florescer a Flor das Emoções",
    slogan: "Por favor, me conte a história escondida dentro de você",
    response_ely: "Essa bela emoção está florescendo novamente. Agora valorize e nutra essa flor.",
    response_sora: "Sinto o calor dessa emoção voltando à vida. Agora pode crescer com segurança.",
    response_noah: "É uma flor de emoção que floresceu após uma longa espera. Agora é hora de um novo jardim se desdobrar.\n\n👉 Vamos para o próximo limiar juntos?",
    user_input_prefix: "A emoção florescendo novamente em seu coração:",
    yes: "Sim",
    no: "Não"
  },
  
};

// Current language and state for Portal 11
let currentLang11 = 'kr';
let userInputText11 = '';

// Initialize Portal 11
function initPortal11() {
  displayInitialMessages11();
  setupLanguageSwitching11();
  setupEnterKeySubmission11();
}

// Display initial messages with typing effect
async function displayInitialMessages11() {
  const stream = document.getElementById('messageStream11');
  const messages = [
    { type: 'prologue', content: portal11Data[currentLang11].prologue },
    { type: 'ely', name: '👑 Ely', content: portal11Data[currentLang11].ely },
    { type: 'sora', name: '💧 Sora', content: portal11Data[currentLang11].sora },
    { type: 'noah', name: '🧙‍♂️ Noah', content: portal11Data[currentLang11].noah },
    { type: 'enya', name: '🕯️ Enya', content: portal11Data[currentLang11].enya },
    { type: 'kaia', name: '😶 Kaia', content: portal11Data[currentLang11].kaia },
    { type: 'cris', name: '🃏 Cris', content: portal11Data[currentLang11].cris },
    { type: 'kael', name: '💥 Kael', content: portal11Data[currentLang11].kael },
    { type: 'mira', name: '🌫️ Mira', content: portal11Data[currentLang11].mira },
    { type: 'light', content: portal11Data[currentLang11].light },
    { type: 'question', content: portal11Data[currentLang11].question }
  ];

  for (let i = 0; i < messages.length; i++) {
    const messageCard = createMessageCard11(messages[i]);
    stream.appendChild(messageCard);
    stream.scrollTo({ top: stream.scrollHeight, behavior: 'smooth' });
    
    await typeText11(messageCard.querySelector('.message-text'), messages[i].content);
    await sleep11(1200);
  }
  
  // Show input area after all messages
  document.getElementById('inputArea11').style.display = 'block';
}

// Setup Enter key submission
function setupEnterKeySubmission11() {
  document.getElementById('userInput11').addEventListener('keydown', function(e) {
    if (e.key === 'Enter' && !e.shiftKey) {
      e.preventDefault();
      submitResponse(11);
    }
  });
}

// Display character responses after user input
async function displayCharacterResponses11(userInput) {
  const stream = document.getElementById('messageStream11');
  
  // Show user input first
  const userCard = createMessageCard11({
    type: 'user-input',
    content: `${portal11Data[currentLang11].user_input_prefix}\n"${userInput}"`
  });
  stream.appendChild(userCard);
  stream.scrollTo({ top: stream.scrollHeight, behavior: 'smooth' });
  await typeText11(userCard.querySelector('.message-text'), userCard.querySelector('.message-text').textContent);
  await sleep11(1500);
  
  // Character responses
  const responses = [
    { type: 'ely', name: '👑 Ely', content: `"${userInput}"... ${portal11Data[currentLang11].response_ely}` },
    { type: 'sora', name: '💧 Sora', content: `${portal11Data[currentLang11].response_sora}` },
    { type: 'noah', name: '🧙‍♂️ Noah', content: `"${userInput}" ${portal11Data[currentLang11].response_noah}` }
  ];

  for (let i = 0; i < responses.length; i++) {
    const responseCard = createMessageCard11(responses[i]);
    stream.appendChild(responseCard);
    stream.scrollTo({ top: stream.scrollHeight, behavior: 'smooth' });
    
    await typeText11(responseCard.querySelector('.message-text'), responses[i].content);
    await sleep11(1500);
  }
  
  // Show navigation buttons
  document.getElementById('nextPortalNav11').style.display = 'block';
}

function createMessageCard11(message) {
  const card = document.createElement('div');
  card.className = `message-card ${message.type}`;
  
  let cardHTML = '';
  if (message.name) {
    cardHTML += `<div class="character-name">${message.name}</div>`;
  }
  cardHTML += `<div class="message-text">${message.content || ''}</div>`;
  
  card.innerHTML = cardHTML;
  return card;
}

async function typeText11(element, text, speed = 80) {
  return new Promise((resolve) => {
    let i = 0;
    element.textContent = '';
    element.classList.add('typewriter');
    
    const timer = setInterval(() => {
      if (i < text.length) {
        element.textContent += text.charAt(i);
        i++;
      } else {
        clearInterval(timer);
        element.classList.remove('typewriter');
        resolve();
      }
    }, speed);
  });
}

function sleep11(ms) {
  return new Promise(resolve => setTimeout(resolve, ms));
}

function setupLanguageSwitching11() {
  document.querySelectorAll('.lang-btn').forEach(btn => {
    btn.addEventListener('click', () => {
      const newLang = btn.dataset.lang;
      if (portal11Data[newLang] && newLang !== currentLang11) {
        document.querySelectorAll('.lang-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        currentLang11 = newLang;
        document.getElementById('messageStream11').innerHTML = '';
        document.getElementById('inputArea11').style.display = 'none';
        document.getElementById('nextPortalNav11').style.display = 'none';
        displayInitialMessages11();
        updatePortalTexts11();
      }
    });
  });
}

function updatePortalTexts11() {
  // Update title and subtitle
  document.querySelector('[data-i18n="portal11.title"]').textContent = portal11Data[currentLang11].title;
  document.querySelector('[data-i18n="portal11.subtitle"]').textContent = portal11Data[currentLang11].subtitle;
  
  // Update slogan
  document.querySelector('[data-i18n="common.slogan"]').textContent = portal11Data[currentLang11].slogan;
  
  // Update placeholder and hint
  document.getElementById('userInput11').placeholder = portal11Data[currentLang11].input.placeholder;
  document.querySelector('[data-i18n="portal11.input.hint"]').textContent = portal11Data[currentLang11].input.hint;
  
  // Update submit button
  document.querySelector('[data-i18n="portal11.submit"]').textContent = portal11Data[currentLang11].submit;
  
  // Update navigation buttons
  const yesBtn = document.querySelector('[data-i18n="common.yes"]');
  const noBtn = document.querySelector('[data-i18n="common.no"]');
  if (yesBtn) yesBtn.textContent = portal11Data[currentLang11].yes;
  if (noBtn) noBtn.textContent = portal11Data[currentLang11].no;
  
  // Update back to main button
  document.querySelector('[data-i18n="common.back_to_main"]').textContent = 
    currentLang11 === 'kr' ? '🏠 메인 포탈로 돌아가기' :
    currentLang11 === 'en' ? '🏠 Back to Main Portal' :
    currentLang11 === 'pt' ? '🏠 Voltar ao Portal Principal' :
    '🏠 메인 포탈로 돌아가기';
}

function submitResponse(portalNum) {
  if (portalNum !== 11) return;
  
  const input = document.getElementById(`userInput${portalNum}`);
  const response = input.value.trim();
  
  if (response) {
    userInputText11 = response;
    
    // Hide input area
    document.getElementById(`inputArea${portalNum}`).style.display = 'none';
    
    // Display character responses
    displayCharacterResponses11(response);
    
    // Clear input
    input.value = '';
  } else {
    // No alert, just focus on input
    input.focus();
    input.style.borderColor = '#f48fb1';
    setTimeout(() => {
      input.style.borderColor = 'rgba(255,255,255,0.3)';
    }, 2000);
  }
}

function stayInPortal() {
  document.getElementById('nextPortalNav11').style.display = 'none';
  document.getElementById('inputArea11').style.display = 'block';
  document.getElementById('userInput11').focus();
}

function goToNextPortal(nextNumber) {
  const nextUrl = `temarix_v1_${String(nextNumber).padStart(2, '0')}.html`;
  window.location.href = nextUrl;
}

// Initialize when DOM is loaded
document.addEventListener('DOMContentLoaded', () => {
  if (document.getElementById('portal-11')) {
    initPortal11();
  }
});
</script>
</body>
</html>